<!DOCTYPE html>
<html>
<head>
    <title>Authentication page</title>
    <!-- Workaround to work in IE11 too -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" />
    <meta charset="utf-8" />
</head>

<body>
    <p id="p1"></p>
<script>

    function getParameterByName(name) {
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
        var results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    window.addEventListener('load', function() {
        var outcome = getParameterByName('outcome').toLowerCase() === 'true';
        var error = getParameterByName('error');
        var redirectTo = getParameterByName('redirectTo');

        // Redirect
        var i = redirectTo.indexOf('#');
        if (i < 0) {
            redirectTo += '#/';
            i = redirectTo.length - 1;
        }
        i = redirectTo.indexOf('?', i);
        if (i < 0) {
            redirectTo += '?'
        } else {
            redirectTo += '&';
        }

        redirectTo += 'outcome=' + outcome + '&error=' + encodeURIComponent(error);
        location = redirectTo;

        try {
            document.getElementById('p1').innerHTML = "This page should redirect automatically.";
        } catch (e) {
        }
    });

</script>
</body>
</html>
