function hex_md5(a){var b=core_md5(str2binl(a),a.length*chrsz);return binl2hex(b)}function b64_md5(a){return binl2b64(core_md5(str2binl(a),a.length*chrsz))}function str_md5(a){return binl2str(core_md5(str2binl(a),a.length*chrsz))}function hex_hmac_md5(a,b){return binl2hex(core_hmac_md5(a,b))}function b64_hmac_md5(a,b){return binl2b64(core_hmac_md5(a,b))}function str_hmac_md5(a,b){return binl2str(core_hmac_md5(a,b))}function md5_vm_test(){var a=hex_md5("abc");return"900150983cd24fb0d6963f7d28e17f72"==a}function core_md5(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=md5_ff(c,d,e,f,a[g+0],7,-680876936),f=md5_ff(f,c,d,e,a[g+1],12,-389564586),e=md5_ff(e,f,c,d,a[g+2],17,606105819),d=md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=md5_ff(c,d,e,f,a[g+4],7,-176418897),f=md5_ff(f,c,d,e,a[g+5],12,1200080426),e=md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=md5_ff(d,e,f,c,a[g+7],22,-45705983),c=md5_ff(c,d,e,f,a[g+8],7,1770035416),f=md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=md5_ff(e,f,c,d,a[g+10],17,-42063),d=md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=md5_ff(c,d,e,f,a[g+12],7,1804603682),f=md5_ff(f,c,d,e,a[g+13],12,-40341101),e=md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=md5_ff(d,e,f,c,a[g+15],22,1236535329),c=md5_gg(c,d,e,f,a[g+1],5,-165796510),f=md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=md5_gg(e,f,c,d,a[g+11],14,643717713),d=md5_gg(d,e,f,c,a[g+0],20,-373897302),c=md5_gg(c,d,e,f,a[g+5],5,-701558691),f=md5_gg(f,c,d,e,a[g+10],9,38016083),e=md5_gg(e,f,c,d,a[g+15],14,-660478335),d=md5_gg(d,e,f,c,a[g+4],20,-405537848),c=md5_gg(c,d,e,f,a[g+9],5,568446438),f=md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=md5_gg(e,f,c,d,a[g+3],14,-187363961),d=md5_gg(d,e,f,c,a[g+8],20,1163531501),c=md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=md5_gg(f,c,d,e,a[g+2],9,-51403784),e=md5_gg(e,f,c,d,a[g+7],14,1735328473),d=md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=md5_hh(c,d,e,f,a[g+5],4,-378558),f=md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=md5_hh(e,f,c,d,a[g+11],16,1839030562),d=md5_hh(d,e,f,c,a[g+14],23,-35309556),c=md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=md5_hh(f,c,d,e,a[g+4],11,1272893353),e=md5_hh(e,f,c,d,a[g+7],16,-155497632),d=md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=md5_hh(c,d,e,f,a[g+13],4,681279174),f=md5_hh(f,c,d,e,a[g+0],11,-358537222),e=md5_hh(e,f,c,d,a[g+3],16,-722521979),d=md5_hh(d,e,f,c,a[g+6],23,76029189),c=md5_hh(c,d,e,f,a[g+9],4,-640364487),f=md5_hh(f,c,d,e,a[g+12],11,-421815835),e=md5_hh(e,f,c,d,a[g+15],16,530742520),d=md5_hh(d,e,f,c,a[g+2],23,-995338651),c=md5_ii(c,d,e,f,a[g+0],6,-198630844),f=md5_ii(f,c,d,e,a[g+7],10,1126891415),e=md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=md5_ii(d,e,f,c,a[g+5],21,-57434055),c=md5_ii(c,d,e,f,a[g+12],6,1700485571),f=md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=md5_ii(e,f,c,d,a[g+10],15,-1051523),d=md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=md5_ii(c,d,e,f,a[g+8],6,1873313359),f=md5_ii(f,c,d,e,a[g+15],10,-30611744),e=md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=md5_ii(d,e,f,c,a[g+13],21,1309151649),c=md5_ii(c,d,e,f,a[g+4],6,-145523070),f=md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=md5_ii(e,f,c,d,a[g+2],15,718787259),d=md5_ii(d,e,f,c,a[g+9],21,-343485551),c=safe_add(c,h),d=safe_add(d,i),e=safe_add(e,j),f=safe_add(f,k)}return Array(c,d,e,f)}function md5_cmn(a,b,c,d,e,f){return safe_add(bit_rol(safe_add(safe_add(b,a),safe_add(d,f)),e),c)}function md5_ff(a,b,c,d,e,f,g){return md5_cmn(b&c|~b&d,a,b,e,f,g)}function md5_gg(a,b,c,d,e,f,g){return md5_cmn(b&d|c&~d,a,b,e,f,g)}function md5_hh(a,b,c,d,e,f,g){return md5_cmn(b^c^d,a,b,e,f,g)}function md5_ii(a,b,c,d,e,f,g){return md5_cmn(c^(b|~d),a,b,e,f,g)}function core_hmac_md5(a,b){var c=str2binl(a);c.length>16&&(c=core_md5(c,a.length*chrsz));for(var d=Array(16),e=Array(16),f=0;f<16;f+=1)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=core_md5(d.concat(str2binl(b)),512+b.length*chrsz);return core_md5(e.concat(g),640)}function safe_add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function bit_rol(a,b){return a<<b|a>>>32-b}function str2binl(a){for(var b=Array(),c=(1<<chrsz)-1,d=0;d<a.length*chrsz;d+=chrsz)b[d>>5]|=(a.charCodeAt(d/chrsz)&c)<<d%32;return b}function binl2str(a){for(var b="",c=(1<<chrsz)-1,d=0;d<32*a.length;d+=chrsz)b+=String.fromCharCode(a[d>>5]>>>d%32&c);return b}function binl2hex(a){for(var b=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d=1+d)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}function binl2b64(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="",d=0;d<4*a.length;d+=3)for(var e=(a[d>>2]>>8*(d%4)&255)<<16|(a[d+1>>2]>>8*((d+1)%4)&255)<<8|a[d+2>>2]>>8*((d+2)%4)&255,f=0;f<4;f+=1)c+=8*d+6*f>32*a.length?b64pad:b.charAt(e>>6*(3-f)&63);return c}var ionweb;!function(a){function b(a,b,d){function e(a){return a>="0"&&a<="9"}if("string"!=typeof a||"string"!=typeof b)return 0;for(var f=a.length,g=b.length,h=0,i=0;h<f&&i<g;){var j=a.charAt(h),k=b.charAt(i),l="",m="",n=e(j);do{if(l+=j,h++,h>=f)break;j=a.charAt(h)}while(e(j)===n);var o=e(k);do{if(m+=k,i++,i>=g)break;k=b.charAt(i)}while(e(k)===o);var p=0,q=!1;if(n&&o){var r=parseInt(l,10);if(q=!isNaN(r)){var s=parseInt(m,10);q=!isNaN(s),q&&(p=c.numberCompare(r,s))}}if(q||(p=c.asciiStringCompare(l,m,d)),0!=p)return p}return f-g}var c=function(){function c(){}return c.numberCompare=function(a,b){return a-b},c.numberCompareAbsolute=function(a,b){return Math.abs(a)-Math.abs(b)},c.asciiStringCompare=function(a,b,c){return"string"!=typeof a||"string"!=typeof b?0:c?a.localeCompare(b,[],{caseFirst:"upper"}):a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase())},c.naturalStringCompare=function(a,c,d){return b(a,c,d)},c.dateCompare=function(b,d,e){return b=b instanceof a.IsoTimeStamp?b.getNormalizeDate():new Date(b),d=d instanceof a.IsoTimeStamp?d.getNormalizeDate():new Date(d),e&&(b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),d=new Date(d.getFullYear(),d.getMonth(),d.getDate())),c.numberCompare(b.getTime(),d.getTime())},c.anyCompare=function(a,b){var d=function(a,b){return c.naturalStringCompare(a,b,!1)};return c.internalAnyCompare(a,b,d)},c.anyCompareAscii=function(a,b,d){var e=function(a,b){return c.asciiStringCompare(a,b,d)};return c.internalAnyCompare(a,b,e)},c.internalAnyCompare=function(b,d,e){return"undefined"==typeof b||null===b?"undefined"==typeof d||null===d?0:-1:"undefined"==typeof d||null===d?1:(b instanceof Date?b=b.getTime():b instanceof a.IsoTimeStamp&&(b=b.getNormalizeDate().getTime()),d instanceof Date?d=d.getTime():d instanceof a.IsoTimeStamp&&(d=d.getNormalizeDate().getTime()),"string"==typeof b&&"string"==typeof d?e(b,d):b&&"object"==typeof b&&b.compareTo?b.compareTo(d):d&&"object"==typeof d&&d.compareTo?-d.compareTo(b):c.numberCompare(b,d))},c}();a.ValueComparer=c}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.dateFormatParser=function(){var a=function(a,b,c,d){for(c=c||{},d=a.length;d--;c[a[d]]=b);return c},b=[1,33],c=[1,34],d=[1,35],e=[1,4],f=[1,5],g=[1,6],h=[1,7],i=[1,8],j=[1,9],k=[1,10],l=[1,11],m=[1,12],n=[1,13],o=[1,14],p=[1,15],q=[1,16],r=[1,17],s=[1,18],t=[1,19],u=[1,20],v=[1,21],w=[1,22],x=[1,23],y=[1,24],z=[1,25],A=[1,26],B=[1,27],C=[1,28],D=[1,29],E=[1,31],F=[1,32],G=[1,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],H={trace:function(){},yy:{},symbols_:{error:2,format_expression:3,"token-list":4,token:5,"moment-string":6,STRING:7,APOSTROPHE:8,QUOTE:9,DAY_NUMBER_SHORT:10,DAY_NUMBER_PADDED:11,DAY_NAME_SHORT:12,DAY_NAME_LONG:13,HOUR12:14,HOUR12_PADDED:15,HOUR24:16,HOUR24_PADDED:17,TENTHS:18,HUNDREDTHS:19,MILLIS:20,MINUTES:21,MINUTES_PADDED:22,MONTH:23,MONTH_PADDED:24,MONTH_NAME_SHORT:25,MONTH_NAME_LONG:26,SECONDS:27,SECONDS_PADDED:28,AMPM_SHORT:29,AMPM_LONG:30,YEAR2:31,YEAR4:32,TIMEZONE_OFFSET_SHORT:33,TIMEZONE_OFFSET_PADDED:34,TIMEZONE_OFFSET_FULL:35,WHITESPACE:36,"literal-list":37,$accept:0,$end:1},terminals_:{2:"error",7:"STRING",8:"APOSTROPHE",9:"QUOTE",10:"DAY_NUMBER_SHORT",11:"DAY_NUMBER_PADDED",12:"DAY_NAME_SHORT",13:"DAY_NAME_LONG",14:"HOUR12",15:"HOUR12_PADDED",16:"HOUR24",17:"HOUR24_PADDED",18:"TENTHS",19:"HUNDREDTHS",20:"MILLIS",21:"MINUTES",22:"MINUTES_PADDED",23:"MONTH",24:"MONTH_PADDED",25:"MONTH_NAME_SHORT",26:"MONTH_NAME_LONG",27:"SECONDS",28:"SECONDS_PADDED",29:"AMPM_SHORT",30:"AMPM_LONG",31:"YEAR2",32:"YEAR4",33:"TIMEZONE_OFFSET_SHORT",34:"TIMEZONE_OFFSET_PADDED",35:"TIMEZONE_OFFSET_FULL",36:"WHITESPACE",37:"literal-list"},productions_:[0,[3,1],[3,0],[4,2],[4,1],[6,1],[6,1],[6,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h];case 2:return"";case 3:this.$=f[h-1]+f[h];break;case 4:this.$=f[h];break;case 5:this.$="["+f[h].replace(/[\'\"]/g,"")+"]";break;case 6:this.$="[']";break;case 7:this.$='["]';break;case 8:this.$="D";break;case 9:this.$="DD";break;case 10:this.$="ddd";break;case 11:this.$="dddd";break;case 12:this.$="h";break;case 13:this.$="hh";break;case 14:this.$="H";break;case 15:this.$="HH";break;case 16:this.$="S";break;case 17:this.$="SS";break;case 18:this.$="SSS";break;case 19:this.$="m";break;case 20:this.$="mm";break;case 21:this.$="M";break;case 22:this.$="MM";break;case 23:this.$="MMM";break;case 24:this.$="MMMM";break;case 25:this.$="s";break;case 26:this.$="ss";break;case 27:case 28:this.$="A";break;case 29:this.$="YY";break;case 30:this.$="YYYY";break;case 31:case 32:this.$="ZZ";break;case 33:this.$="Z";break;case 36:this.$="["+this.$+"]"}},table:[{1:[2,2],3:1,4:2,5:3,6:30,7:b,8:c,9:d,10:e,11:f,12:g,13:h,14:i,15:j,16:k,17:l,18:m,19:n,20:o,21:p,22:q,23:r,24:s,25:t,26:u,27:v,28:w,29:x,30:y,31:z,32:A,33:B,34:C,35:D,36:E,37:F},{1:[3]},{1:[2,1],5:36,6:30,7:b,8:c,9:d,10:e,11:f,12:g,13:h,14:i,15:j,16:k,17:l,18:m,19:n,20:o,21:p,22:q,23:r,24:s,25:t,26:u,27:v,28:w,29:x,30:y,31:z,32:A,33:B,34:C,35:D,36:E,37:F},a(G,[2,4]),a(G,[2,8]),a(G,[2,9]),a(G,[2,10]),a(G,[2,11]),a(G,[2,12]),a(G,[2,13]),a(G,[2,14]),a(G,[2,15]),a(G,[2,16]),a(G,[2,17]),a(G,[2,18]),a(G,[2,19]),a(G,[2,20]),a(G,[2,21]),a(G,[2,22]),a(G,[2,23]),a(G,[2,24]),a(G,[2,25]),a(G,[2,26]),a(G,[2,27]),a(G,[2,28]),a(G,[2,29]),a(G,[2,30]),a(G,[2,31]),a(G,[2,32]),a(G,[2,33]),a(G,[2,34]),a(G,[2,35]),a(G,[2,36]),a(G,[2,5]),a(G,[2,6]),a(G,[2,7]),a(G,[2,3])],defaultActions:{},parseError:function(a,b){if(!b.recoverable)throw new Error(a);this.trace(a)},parse:function(a){function b(){var a;return a=o.lex()||m,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0,l=2,m=1,n=f.slice.call(arguments,1),o=Object.create(this.lexer),p={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(p.yy[q]=this.yy[q]);o.setInput(a,p.yy),p.yy.lexer=o,p.yy.parser=this,"undefined"==typeof o.yylloc&&(o.yylloc={});var r=o.yylloc;f.push(r);var s=o.options&&o.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var t,u,v,w,x,y,z,A,B,C={};;){if(v=d[d.length-1],this.defaultActions[v]?w=this.defaultActions[v]:(null!==t&&"undefined"!=typeof t||(t=b()),w=g[v]&&g[v][t]),"undefined"==typeof w||!w.length||!w[0]){var D="";B=[];for(y in g[v])this.terminals_[y]&&y>l&&B.push("'"+this.terminals_[y]+"'");D=o.showPosition?"Parse error on line "+(i+1)+":\n"+o.showPosition()+"\nExpecting "+B.join(", ")+", got '"+(this.terminals_[t]||t)+"'":"Parse error on line "+(i+1)+": Unexpected "+(t==m?"end of input":"'"+(this.terminals_[t]||t)+"'"),this.parseError(D,{text:o.match,token:this.terminals_[t]||t,line:o.yylineno,loc:r,expected:B})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+t);switch(w[0]){case 1:d.push(t),e.push(o.yytext),f.push(o.yylloc),d.push(w[1]),t=null,u?(t=u,u=null):(j=o.yyleng,h=o.yytext,i=o.yylineno,r=o.yylloc,k>0&&k--);break;case 2:if(z=this.productions_[w[1]][1],C.$=e[e.length-z],C._$={first_line:f[f.length-(z||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(z||1)].first_column,last_column:f[f.length-1].last_column},s&&(C._$.range=[f[f.length-(z||1)].range[0],f[f.length-1].range[1]]),x=this.performAction.apply(C,[h,j,i,p.yy,w[1],e,f].concat(n)),"undefined"!=typeof x)return x;z&&(d=d.slice(0,-1*z*2),e=e.slice(0,-1*z),f=f.slice(0,-1*z)),d.push(this.productions_[w[1]][0]),e.push(C.$),f.push(C._$),A=g[d[d.length-2]][d[d.length-1]],d.push(A);break;case 3:return!0}}}},I=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a,b){return this.yy=b||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),d=a[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var f in e)this[f]=e[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),f=0;f<e.length;f++)if(c=this._input.match(this.rules[e[f]]),c&&(!b||c[0].length>b[0].length)){if(b=c,d=f,this.options.backtrack_lexer){if(a=this.test_match(c,e[f]),a!==!1)return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?(a=this.test_match(b,e[d]),a!==!1&&a):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){var a=this.conditionStack.length-1;return a>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){return a=this.conditionStack.length-1-Math.abs(a||0),a>=0?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){switch(c){case 0:return 8;case 1:return 9;case 2:return 36;case 3:return 7;case 4:return 7;case 5:return 10;case 6:return 11;case 7:return 12;case 8:return 13;case 9:return 18;case 10:return 19;case 11:return 20;case 12:return 20;case 13:return 20;case 14:return 20;case 15:return 14;case 16:return 15;case 17:return 16;case 18:return 17;case 19:return 21;case 20:return 22;case 21:return 23;case 22:return 24;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return 29;case 28:return 30;case 29:return 31;case 30:return 31;case 31:return 32;case 32:return 32;case 33:return 32;case 34:return 33;case 35:return 34;case 36:return 35;case 37:return 7}},rules:[/^(?:\\['])/,/^(?:\\["])/,/^(?:\s+)/,/^(?:"[^"]*?")/,/^(?:'[^']*?')/,/^(?:d\b)/,/^(?:dd\b)/,/^(?:ddd\b)/,/^(?:dddd\b)/,/^(?:f\b)/,/^(?:ff\b)/,/^(?:fff\b)/,/^(?:ffff\b)/,/^(?:fffff\b)/,/^(?:ffffff\b)/,/^(?:h\b)/,/^(?:hh\b)/,/^(?:H\b)/,/^(?:HH\b)/,/^(?:m\b)/,/^(?:mm\b)/,/^(?:M\b)/,/^(?:MM\b)/,/^(?:MMM\b)/,/^(?:MMMM\b)/,/^(?:s\b)/,/^(?:ss\b)/,/^(?:t\b)/,/^(?:tt\b)/,/^(?:y\b)/,/^(?:yy\b)/,/^(?:yyy\b)/,/^(?:yyyy\b)/,/^(?:yyyyy\b)/,/^(?:z\b)/,/^(?:zz\b)/,/^(?:zzz\b)/,/^(?:\S+?)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],inclusive:!0}}};return a}();H.lexer=I;var J=function(){this.yy={}};return J.prototype=H,H.Parser=J,new J}()}(b=a.localization||(a.localization={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.PredefinedRangeSeparator="-";var c;!function(a){a[a.Predefined=0]="Predefined",a[a.Custom=1]="Custom"}(c=b.DateTimeFormatSelectionType||(b.DateTimeFormatSelectionType={}));var d=function(){function d(c){this._locale="en",this.translateCache={},this.preferenceChanged=new a.Event,this.logger=c.create("DateFormattingService"),b.dateFormatParser.yy.parseError=function(a){throw new Error("Invalid date format string: "+a)}}return d.prototype.init=function(){var b=this,c=function(a){b.moment=a,b.setLocale()};c("undefined"!=typeof window.moment?window.moment:a.syncRequire("moment"))},d.prototype.getLocale=function(){return this._locale},d.prototype.setLocale=function(a){this._locale=a||this._locale,this.moment.locale(this.getLocale()),this.moment.localeData().postformat=function(a){return a},this.updateFormatsInCache()},d.prototype.toLongDate=function(a){return this.moment(a).format(this.longDateFormat)},d.prototype.toShortDate=function(a){return this.moment(a).format(this.shortDateFormat)},d.prototype.toLongTime=function(a){return this.moment(a).format(this.longTimeFormat)},d.prototype.toShortTime=function(a){return this.moment(a).format(this.shortTimeFormat)},d.prototype.toCustom=function(a,b){var c=this.toMoment(b);return this.moment(a).format(c)},d.prototype.dateRangeSeparator=function(){return this.rangeSeparator},d.prototype.isNonStrictDateValid=function(a){return!a._pf.unusedInput.length},d.prototype.correctYear=function(a){var b=a.getFullYear();return b<1e3&&(b+=2e3),a.setFullYear(b),a},d.prototype.parseShortDate=function(a){var b=this.moment(a,this.shortDateFormat,!1);return b.isValid()&&this.isNonStrictDateValid(b)||(b=this.moment(a,this.knownFormats,!0)),b.isValid()&&this.isNonStrictDateValid(b)&&this.correctYear(b.toDate())||void 0},d.prototype.parseShortTime=function(a){var b=this.moment(a,this.shortTimeFormat,!1);return b.isValid()&&this.isNonStrictDateValid(b)||(b=this.moment(a,this.knownFormats,!0)),b.isValid()&&this.isNonStrictDateValid(b)&&this.correctYear(b.toDate())||void 0},d.prototype.parseLongDate=function(a){var b=this.moment(a,this.longDateFormat,!1);return b.isValid()&&this.isNonStrictDateValid(b)||(b=this.moment(a,this.knownFormats,!0)),b.isValid()&&this.isNonStrictDateValid(b)&&this.correctYear(b.toDate())||void 0},d.prototype.parseLongTime=function(a){var b=this.moment(a,this.longTimeFormat,!1);return b.isValid()&&this.isNonStrictDateValid(b)||(b=this.moment(a,this.knownFormats,!0)),b.isValid()&&this.isNonStrictDateValid(b)&&this.correctYear(b.toDate())||void 0},d.prototype.parseDate=function(a,b){var c;return b&&(c=this.moment(a,this.toMoment(b),!1),c.isValid()&&this.isNonStrictDateValid(c))?this.correctYear(c.toDate()):(c=this.moment(a,this.userProvidedFormats,!1),c.isValid()&&this.isNonStrictDateValid(c)||(c=this.moment(a,this.knownFormats,!0)),c.isValid()&&this.isNonStrictDateValid(c)&&this.correctYear(c.toDate())||void 0)},d.prototype.toStandardFormat=function(a){switch(a){case d.MomentLongDateFormat:return d.DateTimeLongDateFormat;case d.MomentShortDateFormat:return d.DateTimeShortDateFormat;case d.MomentShortTimeFormat:return d.DateTimeShortTimeFormat;case d.MomentLongTimeFormat:return d.DateTimeLongTimeFormat;default:return a}},d.prototype.toMoment=function(a){if(!a)return"";var c=this.translateCache[a];if(!c){switch(a){case d.DateTimeLongDateFormat:c=d.MomentLongDateFormat;break;case d.DateTimeShortDateFormat:c=d.MomentShortDateFormat;break;case d.DateTimeLongTimeFormat:c=d.MomentLongTimeFormat;break;case d.DateTimeShortTimeFormat:c=d.MomentShortTimeFormat;break;default:c=b.dateFormatParser.parse(a)}this.translateCache[a]=c}return c},d.prototype.updateFormatsInCache=function(){var a=this.fetchLongDateFormat(),b=this.fetchShortDateFormat(),c=this.fetchLongTimeFormat(),d=this.fetchShortTimeFormat();this.longDateFormat=this.toMoment(a.formatString),this.shortDateFormat=this.toMoment(b.formatString),this.longTimeFormat=this.toMoment(c.formatString),this.shortTimeFormat=this.toMoment(d.formatString),this.rangeSeparator=this.fetchRangeSeparator().separator,this.knownFormats=this.getParsingFormats(),this.userProvidedFormats=this.getNonStrictParsingFormats(),this.preferenceChanged.raise(this,void 0)},d.prototype.getParsingFormats=function(){for(var a=this,b=["d-MMM","d-M-yy","d-M-yyyy","d MMM","yyyy, d","yyyy, d MMM","d MMM yyyy","M/d/yyyy","d/M/yyyy","yyyy/M/d","yyyy-M-d"],c=["h:m","h:m tt","H:m"],e=b.concat(c).map(function(b){return a.toMoment(b)}),f=0,g=b.length;f<g;f++)for(var h=0,i=c.length;h<i;h++){var j=b[f],k=c[h];j!==d.MomentLongDateFormat&&j!==d.MomentShortDateFormat&&(j=this.toMoment(j)),k!==d.MomentLongTimeFormat&&k!==d.MomentShortTimeFormat&&(k=this.toMoment(k)),e.push(j+" "+k,k+" "+j)}return e},d.prototype.getNonStrictParsingFormats=function(){var a=this,b=[];b.push(this.fetchShortDateFormat().formatString),b.push(this.fetchLongDateFormat().formatString),b.push(this.fetchShortTimeFormat().formatString),b.push(this.fetchLongTimeFormat().formatString);for(var c=b.slice(2),e=b.map(function(b){return a.toMoment(b)}),f=0;f<b.length;f++)for(var g=0;g<c.length;g++){var h=b[f],i=c[g];h!==d.MomentLongDateFormat&&h!==d.MomentShortDateFormat&&(h=this.toMoment(h)),i!==d.MomentLongTimeFormat&&i!==d.MomentShortTimeFormat&&(i=this.toMoment(i)),e.push(h+" "+i,i+" "+h)}return e},d.prototype.fetchLongDateFormat=function(){return{formatType:c.Predefined,formatString:d.DateTimeLongDateFormat}},d.prototype.fetchShortDateFormat=function(){return{formatType:c.Predefined,formatString:d.DateTimeShortDateFormat}},d.prototype.fetchLongTimeFormat=function(){return{formatType:c.Predefined,formatString:d.DateTimeLongTimeFormat}},d.prototype.fetchShortTimeFormat=function(){return{formatType:c.Predefined,formatString:d.DateTimeShortTimeFormat}},d.prototype.fetchRangeSeparator=function(){return{separatorType:c.Predefined,separator:b.PredefinedRangeSeparator}},d.MomentLongDateFormat="LL",d.MomentShortDateFormat="L",d.MomentLongTimeFormat="LTS",d.MomentShortTimeFormat="LT",d.DateTimeLongDateFormat="D",d.DateTimeShortDateFormat="d",d.DateTimeLongTimeFormat="T",d.DateTimeShortTimeFormat="t",d}();b.DateFormattingServiceBase=d}(b=a.localization||(a.localization={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.dateStr=a,this.normalizedDate=new Date(a)}return a.prototype.getNormalizeDate=function(){return this.normalizedDate},a.prototype.getIsoString=function(){return this.dateStr},a.prototype.toString=function(){return this.dateStr},a}();a.IsoTimeStamp=b}(ionweb||(ionweb={}));var ionweb;!function(a){function b(a,b,c){var d,e=function(e){var f=this,g=arguments,h=function(){d=null,c||(a.apply(f,g),e&&"function"==typeof e&&e())},i=c&&!d;clearTimeout(d),d=setTimeout(h,b),i&&(a.apply(f,g),e&&e())};return e.clear=function(){d&&(clearTimeout(d),d=null)},e}a.debounce=b}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(){this.observers=[]}return a.prototype.add=function(a,b){var c=this;if(!a)throw new Error("Observer cannot be null");return this.observers.push({handler:a,$this:b}),function(){c.remove(a,b)}},a.prototype.remove=function(a,b){for(var c=0;c<this.observers.length;c++)this.observers[c].handler===a&&this.observers[c].$this===b&&(this.observers.splice(c,1),c--)},a.prototype.raise=function(a,b){if(this.observers.length>0){var c=b;"function"==typeof b&&(c=b()),this.observers.slice().forEach(function(b){b.$this?b.handler.call(b.$this,a,c):b.handler(a,c)})}},a.prototype.observersCount=function(){return this.observers.length},a}();a.Event=b}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.TAB=9]="TAB",a[a.ENTER=13]="ENTER",a[a.ESC=27]="ESC",a[a.SPACE=32]="SPACE",a[a.PAGE_UP=33]="PAGE_UP",a[a.PAGE_DOWN=34]="PAGE_DOWN",a[a.LEFT=37]="LEFT",a[a.UP=38]="UP",a[a.RIGHT=39]="RIGHT",a[a.DOWN=40]="DOWN"}(b=a.KeyCodes||(a.KeyCodes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){function b(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()%16|0;return("x"==a?b:3&b|8).toString(16)});return a}function c(a,b){return b.forEach(function(b){for(var c in b){var d=b[c];a[c]=d}}),a}function d(a,b){return b.forEach(function(b){for(var c in b){var e=b[c],f=a[c];"object"==typeof f?a[c]=d(f,[e]):null!==e&&"object"==typeof e?Array.isArray(e)?a[c]=e.slice():a[c]=d({},[e]):a[c]=e}}),a}function e(b,c){if(b===c)return!0;if(typeof b!=typeof c)return!1;if(null===b||"undefined"==typeof b)return c===b;if(null===c||"undefined"==typeof c)return!1;var d=Array.isArray(b);if(d!==Array.isArray(c))return!1;if(d)return s(b,c,function(a,b){return e(a,b)});if(b instanceof Date){var f=b,g=c,h=f.getTime(),i=g.getTime();return h===i}if(b instanceof a.IsoTimeStamp){var j=b,k=c;return j.getIsoString()===k.getIsoString()}if("object"==typeof b){for(var l=Object.getOwnPropertyNames(b).filter(function(a){return"undefined"!=typeof b[a]&&"function"!=typeof b[a]}),m=Object.getOwnPropertyNames(c).reduce(function(a,b){return"undefined"!=typeof c[b]&&"function"!=typeof c[b]&&(a[b]=!0),a},{}),n=0;n<l.length;n++){var o=l[n];if(!m[o])return!1;if(!e(b[o],c[o]))return!1;delete m[o]}return 0===Object.getOwnPropertyNames(m).length}return!1}function f(a){return null!=a&&"object"==typeof a}function g(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d)}function h(a,b){if(b){var c=j(a,b);return c>=0?a[c]:null}return a.length>0?a[0]:null}function i(a,b){if(b){var c=k(a,b);return c>=0?a[c]:null}return a.length>0?a[0]:null}function j(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c))return c;return-1}function k(a,b){for(var c=a.length-1;c>=0;c--)if(b(a[c]))return c;return-1}function l(a){var b={};return a.forEach(function(a){return b[a]=!0}),Object.getOwnPropertyNames(b)}function m(a,b){var c=[];return a.forEach(function(a){b(a).forEach(function(a){c.push(a)})}),c}function n(a,b){var c=j(a,b),d=a.slice();return c>=0&&d.splice(c,1),d}function o(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&(c.push(a[d]),a.splice(d,1),d--);return c}function p(a,b){return j(a,function(a){return!b(a)})<0}function q(a,b){return j(a,function(a){return b(a)})>=0}function r(a){return c({},[a])}function s(a,b,c){if(!a||!b||a.length!==b.length)return!1;c=c||function(a,b){return a===b};for(var d=0;d<a.length;d++)if(!c(a[d],b[d]))return!1;return!0}function t(a,b,c,d){a.splice.apply(a,[d,0].concat(a.splice(b,c)))}function u(a){var b=Object.getOwnPropertyNames(a);return b.map(function(b){return a[b]})}function v(a,b){var c=8,d=3,e=b>>d;if(e>=a.length)return!1;var f=b%c,g=1<<f;return 0!==(g&a.charCodeAt(e))}function w(a){return null==a||a.replace(/\s/g,"").length<1}function x(b,c){if(c.indexOf(b)>=0){var d=1,e=b;if(")"===e.substr(e.length-1)){var f=e.lastIndexOf("(");if(f>0&&f<e.length-2){var g=e.substring(f+1,e.length-1);isNaN(g)||g!=parseInt(g)||(d=parseInt(g),e=e.substring(0,f))}}e=e.trim();do b=a.stringFormat("${desiredName} (${proposedNumber})",{desiredName:e,proposedNumber:d}),d++;while(c.indexOf(b)>=0)}return b}function y(a,b){for(var c={},d=[],e=a.length,f=0,g=0;g<e;g++){var h=a[g],i=b?b(h):h;c[i]||(c[i]=!0,d[f++]=h)}return d}a.createNewGuid=b,a.extend=c,a.extendChildren=d,a.equals=e,a.isObject=f,a.forEach=g,a.firstOrDefault=h,a.lastOrDefault=i,a.indexOf=j,a.lastIndexOf=k,a.distinct=l,a.selectMany=m,a.removeFirst=n,a.spliceAll=o,a.all=p,a.any=q,a.clone=r,a.sequenceEquals=s,a.moveBlock=t,a.toArray=u,a.isBitSet=v,a.isNullOrWhiteSpace=w,a.getUniqueName=x,a.dedupe=y}(ionweb||(ionweb={}));var ionweb;!function(a){a.Version="1.1.8-p1d8-r15018",a.Copyright="© Copyright 2018, ION.",a.GitSha="50b0bb1ece4773cd76bcd2a243f03fa86727291f"}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Default=0]="Default",a[a.Up=1]="Up",a[a.Down=2]="Down"}(b=a.RoundingMode||(a.RoundingMode={}))}(ionweb||(ionweb={}));var ionweb;!function(a){function b(a,b){for(var c,d,e=/\$\{([\S\s]*?)\}/g,f=[],g=0;d=e.exec(a);)c=a.slice(g,d.index),f.push(JSON.stringify(c),"("+d[1]+")"),g=e.lastIndex;c=a.slice(g),f.push(JSON.stringify(c)),f=["with(this)return "+f.join("+")];var h;try{h=Function.apply(null,f).call(b,!1)}catch(a){throw new Error("Missing or mismatched parameters in template ( "+(a.message?a.message:a)+" )")}return h}a.stringFormat=b}(ionweb||(ionweb={}));var ionweb;!function(a){function b(a,b,c){b||(b=250);var d,e,f=function(){var f=c||this,g=+new Date;d&&g<d+b?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f)},b)):(d=g,a.apply(f))};return f.cancel=function(){e&&clearTimeout(e)},f}a.throttle=b}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.Valid=0]="Valid",a[a.Error=1]="Error",a[a.Warning=2]="Warning",a[a.Success=3]="Success",a[a.ServiceError=4]="ServiceError",a[a.Info=5]="Info"}(b=a.ValidationState||(a.ValidationState={}))}(b=a.validation||(a.validation={}))}(ionweb||(ionweb={}));var ionweb;!function(ionweb){function syncRequire(a){return syncReq(a)}function asyncRequire(a,b,c){return asyncReq(a,b,c)}function nodeJsExport(a){global1&&module1?module1.exports=a:define1&&define1.amd&&"dojotoolkit.org"!==define1.amd.vendor&&define1(function(){
return a})}var syncReq=eval("(typeof require !== 'undefined' && require) || (typeof window !== 'undefined' && window.require)"),asyncReq=eval("(typeof window !== 'undefined' && window.require)"),global1=eval("typeof global !== 'undefined' && global"),module1=eval("typeof module !== 'undefined' && module"),define1=eval("typeof define !== 'undefined' && define");ionweb.syncRequire=syncRequire,ionweb.asyncRequire=asyncRequire,ionweb.nodeJsExport=nodeJsExport,nodeJsExport(ionweb)}(ionweb||(ionweb={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ionweb;!function(a){a.Version="1.1.8-p1d8-r15018",a.Copyright="© Copyright 2018, ION.",a.GitSha="50b0bb1ece4773cd76bcd2a243f03fa86727291f"}(ionweb||(ionweb={}));var global1=eval("(typeof global !== 'undefined' && global) || (typeof window !== 'undefined' && window)");if(global1.Q||(global1.Q=ionweb.syncRequire("q")),"undefined"==typeof global1.document){var xmlDom=ionweb.syncRequire("xmldom");global1.XMLSerializer=xmlDom.XMLSerializer,global1.document={implementation:xmlDom.DOMImplementation.prototype},global1.window||(global1.window={}),global1.window.DOMParser=xmlDom.DOMParser}var ionweb;!function(a){a.SDK_MODULE_NAME="ion.web"}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.Err_Decimal_Thousand_Symbol_Same="Decimal and thousand separator can't be same",a.Err_Service_Not_Registered="Service not registered: ${name}",a.Err_Service_Already_Instantiated="Service already instantiated, not extendable: ${name}",a.Err_Unhandled_Exception_LineNumber="Unhandled Exception at ",a.Err_Notification_Unhandled_Exception="Unhandled Exception",a.Err_Components_Duplicate_ChildComponent_InComponent="Duplicate child component [ ${id} ] in component [ ${componentId} ]",a.Err_Components_CUnknown_Child_Component="Unknown child component [ ${id} ] in component [ ${childId} ]",a.Err_Logger_Unknown_Log_Level="Unknown log level",a.Enum_ServiceStatus_Error="Error",a.Enum_ServiceStatus_Connecting="Connecting",a.Enum_ServiceStatus_Connected="Connected",a.Enum_ServiceStatus_Disconnected="Disconnected",a.Err_Pack_ModuleNotFound="The library ${name} cannot be found.",a.Err_Pack_VersionNotValid="The required version ${reqVer} of the library ${name} is not compatible with the available version ${availVer}.",a.Exc_Db_Access="Exception accessing IndexedDb: ${exc}",a.Exc_Db_Timeout="IndexDB not responsive: ${reason}",a.Exc_Db_Blocked="IndexDB blocked: ${exc}",a.Exc_Db_Unsupported="Local indexedDb unsupported on this browser",a}();a.Strings=b}(b=a.core||(a.core={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Undef=-1]="Undef",a[a.Alpha=0]="Alpha",a[a.Beta=1]="Beta",a[a.Production=2]="Production",a[a.Patch=3]="Patch"}(b=a.ReleaseTypeEnum||(a.ReleaseTypeEnum={}));var c=function(){function a(a,b,c,d,e,f,g,h){this._majorNumber=a,this._middleNumber=b,this._minorNumber=c,this._releaseType=d,this._releaseNumber=e,this._buildNumber=f,this._snapshot=g,this._sha1=h}return a.prototype.getMajorNumber=function(){return this._majorNumber},a.prototype.getMinorNumber=function(){return this._minorNumber},a.prototype.getMiddleNumber=function(){return this._middleNumber},a.prototype.getReleaseType=function(){return this._releaseType},a.prototype.getReleaseStep=function(){return this._releaseNumber},a.prototype.getBuildNumber=function(){return this._buildNumber},a.prototype.isSnapshot=function(){return!!this._snapshot},a.prototype.revNumber=function(){return"number"==typeof this._snapshot&&this._snapshot},a.prototype.sha1=function(){return this._sha1},a.prototype.equals=function(a){return 0===this.compareTo(a)},a.prototype.compareTo=function(a){if(this._majorNumber>a._majorNumber)return 1;if(this._majorNumber<a._majorNumber)return-1;if(this._middleNumber>a._middleNumber)return 1;if(this._middleNumber<a._middleNumber)return-1;if(this._minorNumber>a._minorNumber)return 1;if(this._minorNumber<a._minorNumber)return-1;if(this._releaseType>a._releaseType)return 1;if(this._releaseType<a._releaseType)return-1;if(this._releaseType!==b.Production){if(this._releaseNumber>a._releaseNumber)return 1;if(this._releaseNumber<a._releaseNumber)return-1}return this._buildNumber>a._buildNumber?1:this._buildNumber<a._buildNumber?-1:this._snapshot&&!a._snapshot?-1:!this._snapshot&&a._snapshot?1:this._snapshot||a._snapshot?this._snapshot===!0&&a._snapshot===!0?0:this._snapshot===!0?-1:a._snapshot===!0?1:this._snapshot>a._snapshot?1:this._snapshot<a._snapshot?-1:this._sha1===a._sha1?0:1:0},a.prototype.lt=function(a){return this.compareTo(a)<0},a.prototype.lte=function(a){return this.compareTo(a)<=0},a.prototype.gt=function(a){return this.compareTo(a)>0},a.prototype.gte=function(a){return this.compareTo(a)>=0},a.prototype.toBaseString=function(){var a=""+this._majorNumber+this._middleNumber+this._minorNumber;switch(this._releaseType){case b.Alpha:a+="a"+this._releaseNumber;break;case b.Beta:a+="b"+this._releaseNumber;break;case b.Patch:a+="p"+this._releaseNumber}return a},a.prototype.toPublicIonString=function(a){var b=this.toBaseString();return this._buildNumber>0&&!a&&(b+=" (build "+this._buildNumber+")"),a||(this._snapshot===!0?b+=" SNAPSHOT":this._snapshot&&(b+=" rev."+this._snapshot),this._sha1&&(b+=" sha1:"+this._sha1)),b},a.prototype.toInternalIonString=function(){var a=this.toBaseString();return this._buildNumber>0&&(a+="d"+this._buildNumber),this._snapshot===!0?a+="-SNAPSHOT":this._snapshot&&(a+="-r"+this._snapshot),this._sha1&&(a+="-s:"+this._sha1),a},a.prototype.toJavaString=function(){var a=""+this._majorNumber+"."+this._middleNumber+"."+this._minorNumber;switch(this._releaseType){case b.Alpha:a+="a"+this._releaseNumber;break;case b.Beta:a+="b"+this._releaseNumber;break;case b.Patch:a+="p"+this._releaseNumber}return this._buildNumber>0&&(a+="d"+this._buildNumber),a},a.prototype.toString=function(){return this.toInternalIonString()},a.fromIonString=function(c){var d=/^(\d)(\d)(\d)(([abp])(\d+))?(d(\d+))?((-SNAPSHOT)|(-r[0-9]+))?(-s\:([a-fA-F0-9]+))?$/;if(!d.test(c))return null;var e,f=d.exec(c),g=+f[1],h=+f[2],i=+f[3],j=b.Production,k=0,l=0,m=!1;if(f[4]){switch(f[5]){case"a":j=b.Alpha;break;case"b":j=b.Beta;break;case"p":j=b.Patch}k=+f[6]}return f[7]&&(l=+f[8]),f[10]?m=!0:f[11]&&(m=parseInt(f[11].substr(2))),f[12]&&f[13]&&(e=f[13]),new a(g,h,i,j,k,l,m,e)},a.fromModuleVersion=function(c,d,e){var f=/^(\d)\.(\d)\.(\d)(-(([abp])(\d+))?(d(\d+))?)?((-SNAPSHOT)|(-r[0-9]+))?(-s\:([a-fA-F0-9]+))?$/;if(!f.test(c))return null;var g,h=f.exec(c),i=+h[1],j=+h[2],k=+h[3],l=b.Production,m=0,n=0,o=!1;if(h[5]){switch(h[6]){case"a":l=b.Alpha;break;case"b":l=b.Beta;break;case"p":l=b.Patch}m=+h[7]}return h[8]&&(n=+h[9]),h[11]?o=!0:h[12]&&(o=parseInt(h[12].substr(2))),h[14]?g=h[14]:d&&(e>=1&&(d=d.substr(0,e)),g=d),new a(i,j,k,l,m,n,o,g)},a}();a.IonVersion=c}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,b,c,d){d||"undefined"==typeof angular||angular.module(a,b);var e=l[a];e?e.updateDeps(b):(e=new j(a,b),l[a]=e),k.addDep(e),g("ionweb.languageService").addSdkStrings(c)}function d(){return Object.getOwnPropertyNames(l)}function e(a){return l[a]}function f(b,c){var d=e(b);d||(d=new j(b,c),l[b]=d);var f=function(a){return/ionweb[A-Z][a-z]+/.test(a)?"ionweb":a};return{service:function(a,c,e){d.addService(f(b),a,c,e)},removeService:function(a){return d.removeService(f(b),a)},readdService:function(a,c){c&&c.msc.readdService(f(b),a,c)},resetService:function(a){d.resetService(f(b),a)},getService:function(a){return d.getService(a)},name:b,displayName:a._sdkModuleProps.displayName,version:a._sdkModuleProps.version}}function g(a){return k.getService(a)}function h(a){return new j(a,[k.name])}var i=function(){function b(a){this.moduleName=a,this.services={}}return b.prototype.add=function(b,c,d){var e="string"==typeof b?this.moduleName+"."+b:b.fullName;if(this.services[e]&&this.services[e].instance)throw new Error(a.stringFormat(a.core.Strings.Err_Service_Already_Instantiated,{name:b}));return this.services[e]={name:e,deps:c,factory:d}},b.prototype.remove=function(a){var b="string"==typeof a?this.moduleName+"."+a:a.fullName;if(this.services[b])return delete this.services[b],b},b.prototype.readd=function(a,b){var c="string"==typeof a?this.moduleName+"."+a:a.fullName;return this.services[c]=b,c},b.prototype.reset=function(a){var b="string"==typeof a?this.moduleName+"."+a:a.fullName;if(this.services[b])return this.services[b].instance=null,b},b.prototype.contains=function(a){return!!this.services[a]},b}(),j=function(){function b(a,b){this.name=a,this.modules={},this.services={},this.addHandler=null,this.getHandler=null,this.updateDeps(b)}return b.prototype.updateDeps=function(a){function c(a){var c=l[a];return c||(c=new b(a,[]),l[a]=c),c}this.deps=a.map(function(a){return c(a)}),this.testCircular()},b.prototype.addDep=function(a){this.deps.indexOf(a)<0&&(this.deps.push(a),this.testCircular())},b.prototype.testCircular=function(){function a(d,e){if(c[d.name]){if(d===b)throw new Error("Circular module dependency between "+e+" and "+b.name)}else c[d.name]=!0,d.deps.forEach(function(b){a(b,d.name)}),c[d.name]=!1}var b=this,c={};a(this,this.name)},b.prototype.addService=function(a,b,c,d){var e=this.modules[a];e||(e=this.modules[a]=new i(a));var f=e.add(b,c,d);this.services[f.name]={def:f,collection:e};var g="string"==typeof b?a+"."+b:b.fullName;return this.addHandler&&this.addHandler(a,g,c,d),g},b.prototype.resetDepInstances=function(a){function b(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1}var c=this,d=[];return Object.getOwnPropertyNames(this.services).forEach(function(e){var f=c.services[e];f.def.instance&&b(f.def.deps,a)&&(f.def.instance=null,d.push(e))}),this.deps.forEach(function(b){d=d.concat(b.resetDepInstances(a))}),d},b.prototype.resetDeps=function(a){for(var b=[a];b.length>0;)b=this.resetDepInstances(b);this.deps.forEach(function(b){return b.resetDeps(a)})},b.prototype.removeService=function(a,b){var c,d=this.modules[a]&&this.modules[a].remove(b);return d?(c=this.services[d],delete this.services[d],c.msc=this,this.resetDeps(d)):this.deps.forEach(function(d){return c=d.removeService(a,b)||c}),c},b.prototype.readdService=function(a,b,c){var d=this.modules[a];d||(d=this.modules[a]=new i(a));var e=d.readd(b,c.def);this.services[e]=c,this.resetDeps(e)},b.prototype.resetService=function(a,b){var c=this.modules[a]&&this.modules[a].reset(b);c&&this.resetDeps(c),this.deps.forEach(function(c){return c.resetService(a,b)})},b.prototype.upgradeModule=function(a,b){var c=this;this.addHandler=a,this.getHandler=b,Object.getOwnPropertyNames(this.services).forEach(function(b){var d=c.services[b];a(d.collection.moduleName,b,d.def.deps,function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return d.def.instance||(c=d.def).factory.apply(c,a);var c})})},b.prototype.getService=function(b){var c=this.getHandler&&this.getHandler(b);if(c)return c;var d=this.findService(b);if(!d)throw new Error(a.stringFormat(a.core.Strings.Err_Service_Not_Registered,{name:b}));return d.instance||(d.instance=this.create(d)),d.instance},b.prototype.findService=function(a){var b=this.services[a];if(b)return b.def;for(var c=0;c<this.deps.length;c++){var d=this.deps[c].findService(a);if(d)return d}},b.prototype.create=function(a){var b,c=this;try{b=a.deps.map(function(a){return c.getService(a)})}catch(a){throw a}return a.factory.apply(null,b)},b}();b.ModuleServiceCollection=j;var k=new j("ionweb",[]),l={ionweb:k};b.registerCoreSubmodule=c,b.getCoreSubmodules=d,b.findModule=e,b.module=f,b.getService=g,b.createApplModule=h}(b=a.services||(a.services={}))}(ionweb||(ionweb={})),function(a){function b(b){return a.services.module(b,["ionweb"])}function c(b){return a.services.getService(b)}a.defaultSdkName="ION.WEB",a._sdkModuleProps={displayName:a.defaultSdkName,version:a.IonVersion.fromModuleVersion(a.Version,a.GitSha,7).toInternalIonString()},a.module=b,a.getService=c}(ionweb||(ionweb={}));var ionweb;!function(a){a.module("ionwebCore").service("location",[],function(){return{search:function(){var a={};if("undefined"!=typeof window&&window.location){var b=window.location.hash;if(b){"#"===b.charAt(0)&&(b=b.substr(1));var c=b.match(/.*\?(.*)/);c&&2===c.length&&c[1].split("&").forEach(function(b){var c=b.split("=");2===c.length&&(a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))})}}return a},absUrl:function(){return"undefined"!=typeof window?window.location.href:""}}})}(ionweb||(ionweb={}));var ionweb;!function(a){function b(b){return(a._location||"")+b}a.getResourcePath=b}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){return{shell:{appName:a.defaultSdkName,appVersion:a.GitSha?a.Version+"-s:"+a.GitSha.substr(0,7):a.Version,serverBase:a.contextPath||"/ionweb/"}}},d=function(){function b(b,d){this.loggerFactory=b,this.location=d,this.changed=new a.Event,this.loginConfiguration={},this.onConfigFetched=new a.Event,this.onConfigFetching=new a.Event,this._config=a.extend({},[c()]),this.logger=b.create("ConfService"),this.fixShell(),this.freeze(),this._arguments={},this.location&&(this._arguments=a.extend({},[this.location.search()]))}return b.prototype.fixShell=function(){var a=this._config.shell,b=this.arguments.serverBase;b&&(a.serverBase=b);var c=this.arguments.localModules;c&&(a.localModules=c.split(","))},b.prototype.editConfig=function(a){a(this._config),this.freeze(),this.raiseChanged()},b.prototype.fetchConfig=function(a,b){var c=this,d={config:Q.when(null)};this.onConfigFetching.raise(this,d),d.config.then(function(d){return d?c.completeFetchConfig(d,b):c._fetchConfig(a).then(function(a){return c.completeFetchConfig(a,b)})}).done()},b.prototype._fetchConfig=function(b){var c=this;return this.logger.low("HttpConfigFetch"),b.extget(a.getResourcePath("config.json"),{category:a.rest.SESSION_CATEGORY}).forceJson().send().then(function(a){return a.data},function(a){c.logger.low("HttpErrorUseDefaults",{err:a.message||a.toString()})})},b.prototype.completeFetchConfig=function(b,c){var d=this,e=a.extendChildren({},[this._config,b]),f={config:e};return this.onConfigFetched.raise(this,f),(f.async||Q.when(null)).catch(function(a){return d.logger.logExc(a,"fetchCustomization"),null}).then(function(b){b?d._config=a.extendChildren(b.replace?d._config:e,[b.config]):d._config=e,d.fixShell(),d.freeze(),d.originalConfig=d.getFrozenCopy(d._config),c&&c(),d.raiseChanged()})},b.prototype.freeze=function(){this.frozenConfig=this.getFrozenCopy(this._config)},b.prototype.raiseChanged=function(){this.changed.raise(this,null),this.loggerFactory.updateLevel(this.config.shell,this.logger),a._sdkModuleProps.displayName=this.appName,a._sdkModuleProps.version=this.getAppVersion(!1)},b.prototype.getFrozenCopy=function(a){var b=this;if(null==a||"object"!=typeof a)return a;var c;return c=Array.isArray(a)?[]:{},Object.keys(a).forEach(function(d){c[d]=b.getFrozenCopy(a[d])}),Object.freeze(c),c},Object.defineProperty(b.prototype,"config",{get:function(){return this.frozenConfig},enumerable:!0,configurable:!0}),b.prototype.getOriginalConfig=function(){return this.originalConfig},Object.defineProperty(b.prototype,"arguments",{get:function(){return a.extend({},[this._arguments])},enumerable:!0,configurable:!0}),b.prototype.getApplicationUrl=function(a){var b=this.location.absUrl().split("?")[0],c=!0;return a&&Object.keys(a).forEach(function(d){a.hasOwnProperty(d)&&(c?(b+="?",c=!1):b+="&",b+=d+"="+encodeURIComponent(a[d]))}),b},Object.defineProperty(b.prototype,"appName",{get:function(){return this.config.shell.appName},enumerable:!0,configurable:!0}),b.prototype.getAppVersion=function(b){var c=this.config.shell.appVersion,d=a.IonVersion.fromModuleVersion(c);return d&&d.toPublicIonString(b)||c},b}();b.ConfigurationService=d,a.module("ionwebCore").service("configurationService",["ionweb.loggerFactory","ionweb.location"],function(a,b){return new d(a,b)})}(b=a.config||(a.config={}))}(ionweb||(ionweb={}));var base64;!function(a){function b(a,b){var c=g.indexOf(a.charAt(b));if(c===-1)throw new Error("base64: char error");return c}function c(a){a=""+a;var c,d,e,g=a.length;if(0===g)return a;if(g%4!==0)throw new Error("base64: len error");c=0,a.charAt(g-1)===f&&(c=1,a.charAt(g-2)===f&&(c=2),g-=4);var h=[];for(d=0;d<g;d+=4)e=b(a,d)<<18|b(a,d+1)<<12|b(a,d+2)<<6|b(a,d+3),h.push(String.fromCharCode(e>>16,e>>8&255,255&e));switch(c){case 1:e=b(a,d)<<18|b(a,d+1)<<12|b(a,d+2)<<6,h.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=b(a,d)<<18|b(a,d+1)<<12,h.push(String.fromCharCode(e>>16))}return h.join("")}function d(a,b){var c=a.charCodeAt(b);if(c>255)throw new Error("base64: char error");return c}function e(a){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var b,c,e=f,h=g,i=[];a=""+a;var j=a.length-a.length%3;if(0===a.length)return a;for(b=0;b<j;b+=3)c=d(a,b)<<16|d(a,b+1)<<8|d(a,b+2),i.push(h.charAt(c>>18)),i.push(h.charAt(c>>12&63)),i.push(h.charAt(c>>6&63)),i.push(h.charAt(63&c));switch(a.length-j){case 1:c=d(a,b)<<16,i.push(h.charAt(c>>18)+h.charAt(c>>12&63)+e+e);break;case 2:c=d(a,b)<<16|d(a,b+1)<<8,i.push(h.charAt(c>>18)+h.charAt(c>>12&63)+h.charAt(c>>6&63)+e)}return i.join("")}var f="=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";a.decode=c,a.encode=e}(base64||(base64={}));var ionweb;!function(a){var b;!function(a){function b(b,c,d,g){if(isNaN(c)||isNaN(d)||isNaN(g)||c<0||d<0||g<0)throw new Error("Argument invalid");b=b||a.OTHER_CATEGORY;var h=f[b];h||(f[b]=h=new e),h.trackCall(c,d,g)}function c(){return f}function d(a){a.registerStatProvider({name:"traffic",getCounters:function(){return f}})}a.LOGGING_CATEGORY="LOGGING",a.DATA_CATEGORY="DATA",a.SESSION_CATEGORY="SESSION",a.OTHER_CATEGORY="OTHER",a.NO_CATEGORY="NONE";var e=function(){function a(){this.count=0,this.sent=0,this.received=0}return a.prototype.toJSON=function(){return{n:this.count,tx:Number((this.sent/1024).toFixed(2)),rx:Number((this.received/1024).toFixed(2))}},a.prototype.trackCall=function(a,b,c){this.count+=a,this.sent+=b,this.received+=c},a}(),f={};a.trackCall=b,a.getStats=c,a.start=d}(b=a.rest||(a.rest={}))}(ionweb||(ionweb={}));var ionweb;!function(a){a.module("ionwebCore").service("q",[],function(){return Q}),a.module("ionwebCore").service("interval",[],function(){var a=function(a,b){return setInterval(a,b)};return a.cancel=function(a){clearInterval(a)},a}),a.module("ionwebCore").service("timeout",[],function(){var a=function(a,b){return setTimeout(a,b)};return a.cancel=function(a){clearTimeout(a)},a})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Info=0]="Info",a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Warning=3]="Warning",a[a.Error=4]="Error"}(b=a.AnalyticsTraceLevel||(a.AnalyticsTraceLevel={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.None=0]="None",a[a.Low=1]="Low",a[a.Medium=2]="Medium",a[a.High=3]="High",a[a.NotInitialized=4]="NotInitialized"}(b=a.LogLevel||(a.LogLevel={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.getter=a}return a.unbox=function(b){if(b instanceof a){var c=b;return c.getter()}return b},a.jsonReplacer=function(b,c){var d=a.unbox(c);return null===d?void 0:d},a}();a.LazySerializable=b}(ionweb||(ionweb={}));var tracekit;!function(a){function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a){return"undefined"==typeof a}a.TraceKit={};var d="undefined"!=typeof window?window:{},e=[].slice,f="?",g=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;a.TraceKit.wrap=function(b){function c(){try{return b.apply(this,arguments)}catch(b){throw a.TraceKit.report(b),b}}return c},a.TraceKit.report=function(){function c(a){i(),n.push(a)}function e(a){for(var b=n.length-1;b>=0;--b)n[b]===a&&n.splice(b,1);0===n.length&&(d.onerror=l,m=!1)}function f(c,d,e){var f=null;if(!d||a.TraceKit.collectWindowErrors){for(var g in n)if(b(n,g))try{n[g](c,d,e)}catch(a){f=a}if(f)throw f}}function h(b,c,d,e,h){var i=null;if(p)a.TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(p,c,d,b),j();else if(h)i=a.TraceKit.computeStackTrace(h),f(i,!0,h);else{var k,m={url:c,line:d,column:e},n=b;if("[object String]"==={}.toString.call(b)){var o=b.match(g);o&&(k=o[1],n=o[2])}m.func=a.TraceKit.computeStackTrace.guessFunctionName(m.url,m.line),m.context=a.TraceKit.computeStackTrace.gatherContext(m.url,m.line),i={name:k,message:n,mode:"onerror",stack:[m]},f(i,!0,null)}return!!l&&l.apply(this,arguments)}function i(){m!==!0&&(l=d.onerror,d.onerror=h,m=!0)}function j(){var a=p,b=o;p=null,o=null,f(a,!1,b)}function k(b){if(p){if(o===b)return;j()}var c=a.TraceKit.computeStackTrace(b);throw p=c,o=b,setTimeout(function(){o===b&&j()},c.incomplete?2e3:0),b}var l,m,n=[],o=null,p=null;return k.subscribe=c,k.unsubscribe=e,k}(),a.TraceKit.computeStackTrace=function(){function e(b){if(!a.TraceKit.remoteFetching)return"";try{var c=function(){try{return new d.XMLHttpRequest}catch(a){return new d.ActiveXObject("Microsoft.XMLHTTP")}},e=c();return e.open("GET",b,!1),e.send(""),e.responseText}catch(a){return""}}function g(a){if("string"!=typeof a)return[];if(!b(w,a)){var c="",f="";try{f=d.document.domain}catch(a){}var g=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(a);g&&g[2]===f&&(c=e(a)),w[a]=c?c.split("\n"):[]}return w[a]}function h(a,b){var d,e=/function ([^(]*)\(([^)]*)\)/,h=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=10,k=g(a);if(!k.length)return f;for(var l=0;l<j;++l)if(i=k[b-l]+i,!c(i)){if(d=h.exec(i))return d[1];if(d=e.exec(i))return d[1]}return f}function i(b,d){var e=g(b);if(!e.length)return null;var f=[],h=Math.floor(a.TraceKit.linesOfContext/2),i=h+a.TraceKit.linesOfContext%2,j=Math.max(0,d-h-1),k=Math.min(e.length,d+i-1);d-=1;for(var l=j;l<k;++l)c(e[l])||f.push(e[l]);return f.length>0?f:null}function j(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function k(a){return j(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(a,b){for(var c,d,e=0,f=b.length;e<f;++e)if((c=g(b[e])).length&&(c=c.join("\n"),d=a.exec(c)))return{url:b[e],line:c.substring(0,d.index).split("\n").length,column:d.index-c.lastIndexOf("\n",d.index)-1};return null}function m(a,b,c){var d,e=g(b),f=new RegExp("\\b"+j(a)+"\\b");return c-=1,e&&e.length>c&&(d=f.exec(e[c]))?d.index:null}function n(a){if(!c(d&&d.document)){for(var b,e,f,g,h=[d.location.href],i=d.document.getElementsByTagName("script"),m=""+a,n=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<i.length;++p){var q=i[p];q.src&&h.push(q.src)}if(f=n.exec(m)){var r=f[1]?"\\s+"+f[1]:"",s=f[2].split(",").join("\\s*,\\s*");b=j(f[3]).replace(/;$/,";?"),e=new RegExp("function"+r+"\\s*\\(\\s*"+s+"\\s*\\)\\s*{\\s*"+b+"\\s*}")}else e=new RegExp(j(m).replace(/\s+/g,"\\s+"));if(g=l(e,h))return g;if(f=o.exec(m)){var t=f[1];if(b=k(f[2]),e=new RegExp("on"+t+"=[\\'\"]\\s*"+b+"\\s*[\\'\"]","i"),g=l(e,h[0]))return g;if(e=new RegExp(b),g=l(e,h))return g}return null}}function o(a){if(!a.stack)return null;for(var b,d,e,g,j=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,k=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,n=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,o=/\((\S*)(?::(\d+))(?::(\d+))\)/,p=a.stack.split("\n"),q=[],r=/^(.*) is undefined$/.exec(a.message),s=0,t=p.length;s<t;++s){if(e=j.exec(p[s])){var u=e[2]&&0===e[2].indexOf("native");b=e[2]&&0===e[2].indexOf("eval"),b&&(d=o.exec(e[2]))&&(e[2]=d[1],e[3]=d[2],e[4]=d[3]),g={url:u?null:e[2],func:e[1]||f,args:u?[e[2]]:[],line:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}else if(e=l.exec(p[s]))g={url:e[2],func:e[1]||f,args:[],line:+e[3],column:e[4]?+e[4]:null};else{if(!(e=k.exec(p[s])))continue;b=e[3]&&e[3].indexOf(" > eval")>-1,b&&(d=n.exec(e[3]))?(e[3]=d[1],e[4]=d[2],e[5]=null):0!==s||e[5]||c(a.columnNumber)||(q[0].column=a.columnNumber+1),g={url:e[3],func:e[1]||f,args:e[2]?e[2].split(","):[],line:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}!g.func&&g.line&&(g.func=h(g.url,g.line)),g.context=g.line?i(g.url,g.line):null,q.push(g)}return q.length?(q[0]&&q[0].line&&!q[0].column&&r&&(q[0].column=m(r[1],q[0].url,q[0].line)),{mode:"stack",name:a.name,message:a.message,stack:q}):null}function p(a){var b=a.stacktrace;if(b){for(var c,d=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,e=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,f=b.split("\n"),g=[],j=0;j<f.length;j+=2){var k=null;if((c=d.exec(f[j]))?k={url:c[2],line:+c[1],column:null,func:c[3],args:[]}:(c=e.exec(f[j]))&&(k={url:c[6],line:+c[1],column:+c[2],func:c[3]||c[4],args:c[5]?c[5].split(","):[]}),k){if(!k.func&&k.line&&(k.func=h(k.url,k.line)),k.line)try{k.context=i(k.url,k.line)}catch(a){}k.context||(k.context=[f[j+1]]),g.push(k)}}return g.length?{mode:"stacktrace",name:a.name,message:a.message,stack:g}:null}}function q(a){var c=a.message.split("\n");if(c.length<4)return null;var e,f=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,j=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,n=[],o=d&&d.document&&d.document.getElementsByTagName("script"),p=[];for(var q in o)b(o,q)&&!o[q].src&&p.push(o[q]);for(var r=2;r<c.length;r+=2){var s=null;if(e=f.exec(c[r]))s={url:e[2],func:e[3],args:[],line:+e[1],column:null};else if(e=j.exec(c[r])){s={url:e[3],func:e[4],args:[],line:+e[1],column:null};var t=+e[1],u=p[e[2]-1];if(u){var v=g(s.url);if(v){v=v.join("\n");var w=v.indexOf(u.innerText);w>=0&&(s.line=t+v.substring(0,w).split("\n").length)}}}else if(e=m.exec(c[r])){var x=d.location.href.replace(/#.*$/,""),y=new RegExp(k(c[r+1])),z=l(y,[x]);s={url:x,func:"",args:[],line:z?z.line:e[1],column:null}}if(s){s.func||(s.func=h(s.url,s.line));var A=i(s.url,s.line),B=A?A[Math.floor(A.length/2)]:null;A&&B.replace(/^\s*/,"")===c[r+1].replace(/^\s*/,"")?s.context=A:s.context=[c[r+1]],n.push(s)}}return n.length?{mode:"multiline",name:a.name,message:c[0],stack:n}:null}function r(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){a.incomplete=!1,e.func||(e.func=h(e.url,e.line)),e.context||(e.context=i(e.url,e.line));var f=/ '([^']+)' /.exec(d);if(f&&(e.column=m(f[1],e.url,e.line)),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,a.stack[0].context=e.context,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function s(b,c){for(var d,e,g,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,j=[],k={},l=!1,o=s.caller;o&&!l;o=o.caller)if(o!==t&&o!==a.TraceKit.report){if(e={url:null,func:f,args:[],line:null,column:null},o.name?e.func=o.name:(d=i.exec(o.toString()))&&(e.func=d[1]),"undefined"==typeof e.func)try{e.func=d.input.substring(0,d.input.indexOf("{"))}catch(a){}if(g=n(o)){e.url=g.url,e.line=g.line,e.func===f&&(e.func=h(e.url,e.line));var p=/ '([^']+)' /.exec(b.message||b.description);p&&(e.column=m(p[1],g.url,g.line))}k[""+o]?l=!0:k[""+o]=!0,j.push(e)}c&&j.splice(0,c);var q={mode:"callers",name:b.name,message:b.message,stack:j};return r(q,b.sourceURL||b.fileName,b.line||b.lineNumber,b.message||b.description),q}function t(a,b){var c=null;b=null==b?0:+b;try{if(c=p(a))return c}catch(a){if(v)throw a}try{if(c=o(a))return c}catch(a){if(v)throw a}try{if(c=q(a))return c}catch(a){if(v)throw a}try{if(c=s(a,b+1))return c}catch(a){if(v)throw a}return{name:a.name,message:a.message,mode:"failed"}}function u(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return t(b,a+1)}}var v=!1,w={};return t.augmentStackTraceWithInitialElement=r,t.computeStackTraceFromStackProp=o,t.guessFunctionName=h,t.gatherContext=i,t.ofCaller=u,t.getSource=g,t}(),a.TraceKit.extendToAsynchronousCallbacks=function(){var b=function(b){var c=d[b];d[b]=function(){var b=e.call(arguments),d=b[0];return"function"==typeof d&&(b[0]=a.TraceKit.wrap(d)),c.apply?c.apply(this,b):c(b[0],b[1])}};b("setTimeout"),b("setInterval")},a.TraceKit.remoteFetching||(a.TraceKit.remoteFetching=!0),a.TraceKit.collectWindowErrors||(a.TraceKit.collectWindowErrors=!0),(!a.TraceKit.linesOfContext||a.TraceKit.linesOfContext<1)&&(a.TraceKit.linesOfContext=11)}(tracekit||(tracekit={}));var ionweb;!function(a){var b=function(){function b(c){var d=this;this.onException=new a.Event,this.logger=c.create("ExceptionHelper"),c.excHelper=this,"undefined"!=typeof window&&(window.onerror=function(c,e,f,g,h){return h?d.report(h):b.reportUnhandledException&&d.report(new Error(a.core.Strings.Err_Unhandled_Exception_LineNumber+e+":"+f+": "+c)),!0}),Q.onerror=function(a){d.report(a)}}return b.prototype.log=function(a,b,c){var d;try{d=a&&a.message||JSON.stringify(a)}catch(a){d="<Error message unavailable>"}var e=a&&a.name||"<no name>",f=a&&a.stack||"<stack unavailable>";try{f=tracekit.TraceKit.computeStackTrace(a,20)}catch(a){}var g=[];f.stack&&f.stack.length&&(g=f.stack.map(function(a){return{fileName:a.url,functionName:a.func,lineNumber:a.line,columnNumber:a.column}}));var h=JSON.stringify(g,null,"\t"),i={timestamp:(new Date).toLocaleTimeString(),stack:h,message:d};(b||this.logger).low(c||"UnhandledException",{name:e,message:d,stack:h});try{console.log("Exception: "),console.log(a)}catch(a){}return i},b.prototype.report=function(a,b){var c=this.log(a);this.onException.raise(this,{message:b||c.message,stack:c.stack,timestamp:c.timestamp})},b.reportUnhandledException=!0,b}();a.ExceptionHelper=b,a.module("ionwebCore").service("excHelper",["ionweb.loggerFactory"],function(a){return new b(a)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,b,c,d){return a._dbErrType=b,c.logExc(a,d),a}function d(a,b,d,e){return c(new Error(a),b,d,e)}function e(b,d,e){var g=5e3,h=a.stringFormat(a.core.Strings.Exc_Db_Timeout,{reason:e});return b.timeout(g,h).catch(function(a){throw a.message===h&&c(a,f.Timeout,d,e),a})}var f;!function(a){a[a.Timeout=1]="Timeout",a[a.Blocked=2]="Blocked",a[a.Generic=3]="Generic",a[a.Unsupported=4]="Unsupported"}(f=b.ErrorType||(b.ErrorType={}));var g=function(){function a(a,b,c,d){this.db=a,this.key=b,this.isArray=c,this.logger=d.create("DbStore")}return a.prototype.close=function(){this.db.close()},a.prototype.openObjectStoreRO=function(){return this.db.transaction([this.key],"readonly").objectStore(this.key)},a.prototype.openObjectStoreRW=function(){var a=Q.defer(),b=this.db.transaction([this.key],"readwrite");return b.oncomplete=function(){a.resolve(null)},b.onerror=function(){a.reject(b.error)},b.onabort=function(){a.reject(b.error)},{store:b.objectStore(this.key),promise:a.promise}},a.prototype.toPromise=function(a,b){var c=Q.defer();return a.onsuccess=function(){var d=a.result;b&&(d=b(a.result)),c.resolve(d)},a.onerror=function(){c.reject(a.error)},c.promise},a.prototype.qtimeout=function(a,b){return e(a,this.logger,b)},a.prototype.getValue=function(a){var b=this.openObjectStoreRO().get(a),c=this.toPromise(b,function(a){return a&&a.value});return this.qtimeout(c,"getValue")},a.prototype.getAllValues=function(a){var b=this,c={},d=0,e=Q.defer(),f=this.openObjectStoreRO().openCursor();return f.onsuccess=function(){var g=f.result;g?(c[g.key]=b.isArray?g.value:g.value.value,d++,a&&d>=a?e.resolve(c):g.continue()):e.resolve(c)},f.onerror=function(){
e.reject(f.error)},this.qtimeout(e.promise,"getAllValues")},a.prototype.getHeadValue=function(){return this.getAllValues(1).then(function(a){var b=Object.getOwnPropertyNames(a);return 1===b.length?a[b[0]]:null})},a.prototype.setValue=function(a,b){var c=this.openObjectStoreRW(),d=this.toPromise(c.store.put({key:a,value:b}));return this.qtimeout(Q.all([c.promise,d]),"setValue")},a.prototype.addValue=function(a){var b=this.openObjectStoreRW(),c=this.toPromise(b.store.add(a));return this.qtimeout(Q.all([b.promise,c]),"addValue")},a.prototype.setAllValues=function(a){var b=this,c=this.openObjectStoreRW(),d=this.toPromise(c.store.clear(),function(){return Object.getOwnPropertyNames(a).map(function(d){var e=b.toPromise(c.store.put({key:d,value:a[d]}));return b.qtimeout(e,"setAllValues")})});return Q.all([c.promise,d]).then(function(a){return Q.all(a[1])}).then(function(){return null})},a.prototype.clear=function(){var a=this.openObjectStoreRW(),b=this.toPromise(a.store.clear());return this.qtimeout(Q.all([a.promise,b]),"clear")},a.prototype.shiftValue=function(){var a=this,b=this.openObjectStoreRW(),c=this.toPromise(b.store.openCursor(),function(c){return c?a.toPromise(b.store.delete(c.key)):null});return this.qtimeout(Q.all([b.promise,c]),"shiftValue")},a.prototype.count=function(){var a=this.openObjectStoreRO().count();return this.qtimeout(this.toPromise(a),"count")},a}(),h=function(){function b(a){this.loggerFactory=a,this.logger=a.create("IndexedDB");var b="undefined"!=typeof window?window:{};this.indexedDB=b.indexedDB||b.mozIndexedDB||b.webkitIndexedDB||b.msIndexedDB,this.logger.low("start",{isSupported:!!this.indexedDB})}return Object.defineProperty(b.prototype,"isAvailable",{get:function(){return!!this.indexedDB},enumerable:!0,configurable:!0}),b.prototype.openArray=function(a,b,c){return this._open(a,b,c,!0)},b.prototype.openMap=function(a,b,c){return this._open(a,b,c,!1)},b.prototype._open=function(b,c,h,i){var j=this;if(!this.isAvailable)return Q.reject(d(a.core.Strings.Exc_Db_Unsupported,f.Unsupported,this.logger,"open"));var k=Q.defer();try{var l=this.indexedDB.open(b,c);l.onsuccess=function(){j.logger.low("open_success",{name:b}),k.resolve(h.map(function(a){return new g(l.result,a,i,j.loggerFactory)}))},l.onerror=function(){j.logger.low("open_fail",{name:b}),k.reject(l.error)},l.onupgradeneeded=function(a){j.logger.low("open_upgrade",{name:b,version:a.oldVersion});for(var c=l.result,d=[],e=0;e<c.objectStoreNames.length;e++)d.push(c.objectStoreNames[e]);d.forEach(function(a){c.deleteObjectStore(a)}),h.forEach(function(a){var b=i?{autoIncrement:!0}:{keyPath:"key"};c.createObjectStore(a,b)})},l.onblocked=function(c){j.logger.low("open_blocked",{name:b}),k.reject(d(a.stringFormat(a.core.Strings.Exc_Db_Blocked,{exc:l.error}),f.Blocked,j.logger,"blocked"))}}catch(b){k.reject(d(a.stringFormat(a.core.Strings.Exc_Db_Access,{exc:b.message}),f.Generic,this.logger,"exc"))}return e(k.promise,this.logger,"open")},b}();b.IndexedDbService=h,a.module("ionwebCore").service("indexedDbService",["ionweb.loggerFactory"],function(a){return new h(a)})}(b=a.db||(a.db={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.subscribers=[]}return a.prototype.dispose=function(){this.subscribers=null},a.prototype.subscribe=function(a,b){var c=this,d={key:a,handler:b};return this.subscribers.push(d),function(){var a=c.subscribers.indexOf(d);a>=0&&c.subscribers.splice(a,1)}},a.prototype.raise=function(a,b,c){this.subscribers.forEach(function(d){var e;e="string"==typeof d.key?d.key===a:!d.key||0===d.key.length||d.key.indexOf(a)>=0,e&&d.handler(b,c)})},a}();b.KeySubscriptions=c;var d="globalEntries",e="userEntries",f=function(){function b(c,f,g,h){var i=this;this.excHelper=f,this.configService=g,this.indexedDbService=h,this.userPreferences={},this.globalPreferences={},this.globalStoreIsLoaded=!1,this.userStoreIsLoaded=!1,this.loggedIn=Q.defer(),this.onDirtyReset=new a.Event,this.logger=c.create("LocalStorage"),this.isAvailable?this.dbStores=h.openMap("ionPreferences",4,[d,e]).then(function(a){return{global:a[0],user:a[1]}},function(a){return{}}):this.dbStores=Q.when({}),this.globalStoreLoaded=this.loadGlobalStore(),this.userStoreLoaded=this.loadUserStore(),this.currentSave=Q.when(void 0),this.autosaveDeb=a.debounce(function(){i.saveNow().done(),i.resetDirty()},b.AUTOSAVE_DELAY,!1)}return b.prototype.autosave=function(){this.dirty=!0,this.autosaveDeb()},b.prototype.resetDirty=function(){this.dirty=!1,this.onDirtyReset.raise(this,null)},Object.defineProperty(b.prototype,"isAvailable",{get:function(){return this.indexedDbService.isAvailable},enumerable:!0,configurable:!0}),b.prototype.loadUserStore=function(){var a=this;return Q.all([this.loggedIn.promise,this.dbStores]).then(function(b){return a.username=b[0],b[1].user?b[1].user.getValue(a.username).catch(function(b){return a.logger.low("user:errGettingData",{err:b.message||b}),null}):(a.logger.low("user:missingUserDb"),null)}).then(function(b){b?(a.logger.low("user:loaded",{count:Object.getOwnPropertyNames(b).length}),a.userPreferences=b):(a.logger.low("user:useDefault"),a.userPreferences={})}).finally(function(){a.userStoreIsLoaded=!0})},b.prototype.loadGlobalStore=function(){var a=this;return this.dbStores.then(function(b){return b.global?b.global.getAllValues().catch(function(b){return a.logger.low("global:errGettingData",{err:b.message||b}),null}):(a.logger.low("global:missingGlobalDb"),null)}).then(function(b){b?(a.logger.low("global:loaded",{count:Object.getOwnPropertyNames(b).length}),a.globalPreferences=b):(a.logger.low("global:useDefault"),a.globalPreferences={})}).finally(function(){a.globalStoreIsLoaded=!0})},b.prototype.getUserValue=function(a,b){return this.userPreferences.hasOwnProperty(a)?this.userPreferences[a]:b},b.prototype.setUserValue=function(a,b){this.userPreferences[a]=b,this.autosave()},b.prototype.deleteUserKey=function(a){delete this.userPreferences[a],this.autosave()},b.prototype.getGlobalValue=function(a,b){return this.globalPreferences.hasOwnProperty(a)?this.globalPreferences[a]:b},b.prototype.setGlobalValue=function(a,b){this.globalPreferences[a]=b,this.autosave()},b.prototype.deleteGlobalKey=function(a){delete this.globalPreferences[a],this.autosave()},b.prototype.saveNow=function(){var a=this;return this.configService.config.shell.disableScenarioSave?Q.when(void 0):this.currentSave.then(function(){return a.currentSave=a.save()})},b.prototype.save=function(){var b=this,c={};Object.getOwnPropertyNames(this.globalPreferences).forEach(function(d){c[d]=a.LazySerializable.unbox(b.globalPreferences[d])});var d=JSON.stringify(c),e=d!==this.globalDataStr;this.globalDataStr=d;var f=!1,g={};if(this.userStoreIsLoaded){Object.getOwnPropertyNames(this.userPreferences).forEach(function(c){g[c]=a.LazySerializable.unbox(b.userPreferences[c])});var h=JSON.stringify(g);f=h!==this.userDataStr,this.userDataStr=h}return f||e?this.dbStores.then(function(a){var d=[];return e&&a.global&&d.push(a.global.setAllValues(c).catch(function(){})),f&&a.user&&b.username&&d.push(a.user.setValue(b.username,g).catch(function(){})),Q.all(d)}).then(function(){b.logger.medium("saved",{globalChanged:e,userChanged:f})},function(a){b.logger.logExc(a,"localStorage-save")}):Q.when(void 0)},b.prototype.clear=function(){var a=this;return this.currentSave.then(function(){return a.currentSave=Q.when(void 0),a.autosaveDeb.clear(),a.resetDirty(),a.dbStores}).then(function(b){a.logger.medium("clear");var c=Q.when(null);return b.global&&(c=c.then(function(){return b.global.clear().catch(function(){return null})})),b.user&&(c=c.then(function(){return b.user.clear().catch(function(){return null})})),c})},b.prototype.triggerLoggedIn=function(a){this.loggedIn.promise.isPending&&this.loggedIn.resolve(a)},b.prototype.waitUntilDirty=function(){if(!this.dirty)return Q.reject("Not dirty");var a=Q.defer(),b=this.onDirtyReset.add(function(){b(),a.resolve(void 0)});return a.promise},b.AUTOSAVE_DELAY=500,b}();b.LocalPreferenceStore=f;var g=function(){function b(b){var d=this;this.localStore=b,this.eventSubscribers=new c,this.loadedDeferred=Q.defer(),this.loaded=new a.Event,b.userStoreLoaded.then(function(){d.loaded.raise(d,void 0),d.loadedDeferred.resolve(void 0)})}return b.prototype.subscribeChanges=function(a,b){return this.eventSubscribers.subscribe(a,b)},b.prototype.getValue=function(a,b){return this.localStore.getUserValue(a,b)},b.prototype.setValue=function(a,b){this.localStore.setUserValue(a,b),this.eventSubscribers.raise(a,this,{key:a,value:b})},b.prototype.deleteKey=function(a){this.localStore.deleteUserKey(a),this.eventSubscribers.raise(a,this,{key:a,deleted:!0})},Object.defineProperty(b.prototype,"isLoaded",{get:function(){return this.localStore.userStoreIsLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"loadedPromise",{get:function(){return this.loadedDeferred.promise},enumerable:!0,configurable:!0}),b}(),h=function(){function b(b){var d=this;this.localStore=b,this.eventSubscribers=new c,this.loadedDeferred=Q.defer(),this.loaded=new a.Event,b.globalStoreLoaded.then(function(){d.loaded.raise(d,void 0),d.loadedDeferred.resolve(void 0)})}return b.prototype.subscribeChanges=function(a,b){return this.eventSubscribers.subscribe(a,b)},b.prototype.getValue=function(a,b){return this.localStore.getGlobalValue(a,b)},b.prototype.setValue=function(a,b){this.localStore.setGlobalValue(a,b),this.eventSubscribers.raise(a,this,{key:a,value:b})},b.prototype.deleteKey=function(a){this.localStore.deleteGlobalKey(a),this.eventSubscribers.raise(a,this,{key:a,deleted:!0})},Object.defineProperty(b.prototype,"isLoaded",{get:function(){return this.localStore.globalStoreIsLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"loadedPromise",{get:function(){return this.loadedDeferred.promise},enumerable:!0,configurable:!0}),b}();a.module("ionwebCore").service("localPreferenceStore",["ionweb.loggerFactory","ionweb.excHelper","ionweb.configurationService","ionweb.indexedDbService"],function(a,b,c,d){return new f(a,b,c,d)}),a.module("ionwebCore").service("localUserPreferenceService",["ionweb.localPreferenceStore"],function(a){return new g(a)}),a.module("ionwebCore").service("localPreferenceService",["ionweb.localPreferenceStore"],function(a,b){return new h(a)})}(b=a.preferences||(a.preferences={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,b,c){return Object.keys(b).forEach(function(d){var e=b[d];("string"==typeof e||e instanceof String)&&(c||a[d])&&(a[d]=e)}),a}function d(a){return Object.keys(a).forEach(function(b){var c=a[b];("string"==typeof c||c instanceof String)&&delete a[b]}),a}var e=function(){function a(a){this.current=a,this.original=Object.freeze(c({},a,!0))}return a.prototype.clearData=function(){this.current=d(this.current),this.current=c(this.current,this.original,!0)},a.prototype.loadData=function(a){this.current=d(this.current),this.current=c(this.current,this.original,!0),this.current=c(this.current,a,!1)},a.prototype.getAllOriginalValues=function(){var a=this.original||{},b=this.current||{},c=b&&Object.keys(b)||[],d={};return c.map(function(c){var e=b[c];("string"==typeof e||e instanceof String)&&(d[c]=a[c]||c)}),d},a.prototype.getModuleResource=function(a){var b;return this.current&&(b=this.current[a]),"undefined"==typeof b&&this.original&&(b=this.original[a]),b},a.prototype.mergeStrings=function(a,b){var c=this;Object.keys(a).forEach(function(d){"string"!=typeof a[d]||"string"!=typeof c.original[d]||!b&&c.current[d]||(c.current[d]=a[d])})},a}(),f=function(){function b(a,b){this.name=a,this.basePath=b,this.stringObjs=[]}return b.prototype.load=function(b,c,d,e){var f=this,g=this.basePath+"resources/"+c+"/resources.json";return d.low("Fetching resources",{language:b,module:this.name,resourcePath:g}),e.extget(g,{category:a.rest.SESSION_CATEGORY}).forceJson().send().then(function(a){return a.data},function(){return d.low("Fetching resources failed",{language:b,module:f.name,resourcePath:f.basePath,reason:"Resources not found"}),null})},b.prototype.loadData=function(a){this.stringObjs.forEach(function(b){a?b.loadData(a):b.clearData()}),a&&(this.cachedData=a)},b.prototype.getAllOriginalValues=function(){return a.extend({},this.stringObjs.map(function(a){return a.getAllOriginalValues()}))},b.prototype.getModuleResource=function(b,c){for(var d,e=0;e<this.stringObjs.length&&"undefined"==typeof d;e++)d=this.stringObjs[e].getModuleResource(b);return d&&c&&(d=a.stringFormat(d,c)),void 0===d&&(d=b),d},b.prototype.mergeStrings=function(a,b){this.stringObjs.forEach(function(c){a.forEach(function(a){c.mergeStrings(a,b)})})},b.prototype.registerStringObjs=function(a){var b=new e(a);this.stringObjs.push(b),this.cachedData&&b.loadData(this.cachedData)},b}();b.ModuleResource=f}(b=a.core||(a.core={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(c,d,e,f){var g=this;this.configurationService=c,this.preferenceService=d,this.localPreferenceStore=e,this.loggerFactory=f,this.moduleResourceMap={},this.LANGUAGE_PREFERENCE_KEY="ionweb.selectedLanguage",this.CODEBASE_DEFAULT_LANGUAGE_NAME="en-US",this.SYSTEM_DEFAULT_LANGUAGE_KEY="SYSTEMDEFAULTLANGUAGE",this.SYSTEM_DEFAULT_LANGUAGE_NAME="<System>",this.cultureLocale=new a.CultureLocale,this.logger=f.create("Language Service"),this.localizationEnabled=!1,this.moduleResourceMap[a.SDK_MODULE_NAME]=new b.ModuleResource(a.SDK_MODULE_NAME,a.getResourcePath("")),this.moduleResourceMap[a.SDK_MODULE_NAME].registerStringObjs(b.Strings),this.initDeferred=Q.defer(),this.preferenceService.loaded.add(function(){return g.preferenceLoaded()}),this.languageChanged=new a.Event,this.brandingStringsUpdated=new a.Event,this.currentSdkCulture=this.CODEBASE_DEFAULT_LANGUAGE_NAME}return Object.defineProperty(c.prototype,"cultureInfo",{get:function(){return this.cultureLocale.culutureInfo(this.language&&this._language.name||this.CODEBASE_DEFAULT_LANGUAGE_NAME)},enumerable:!0,configurable:!0}),c.prototype.currentLanguage=function(){return this.initDeferred.promise},c.prototype.availableLanguages=function(){return this.languages},c.prototype.setLanguage=function(a){a&&this.updateUserPreference(a.key)},Object.defineProperty(c.prototype,"language",{get:function(){return this._language},enumerable:!0,configurable:!0}),c.prototype.setDefaultResources=function(a,c,d){d=d||{};var e=new b.ModuleResource(a,c);return e.registerStringObjs(d),this.moduleResourceMap[a]=e,!this._language||this._language.name===this.CODEBASE_DEFAULT_LANGUAGE_NAME&&!this.languages[this._language.name]?Q.when(null):e.load(this._language.name,this.getResourceDirectoryName(this._language),this.logger,this.restService).then(function(a){e.loadData(a)})},c.prototype.preferenceLoaded=function(){var a=this,b=function(b){var c=a.preferenceService.getValue(a.LANGUAGE_PREFERENCE_KEY),d=a.languages[c],e=d&&d.key,f=a.localPreferenceLanguageName();!d||b&&b.key===e?!d&&f&&f!==a.SYSTEM_DEFAULT_LANGUAGE_KEY&&(a.updateLocalPreference(null),a.languageChanged.raise(a,null)):(a.updateLocalPreference(e),a.languageChanged.raise(a,null))};this.initDeferred.promise.isFulfilled()?b(this._language):this.initDeferred.promise.then(function(a){b(a)})},c.prototype.allLanguages=function(){var a=this,b=Object.getOwnPropertyNames(this.configurationService.config.shell.languages||{}),c={};return c[this.SYSTEM_DEFAULT_LANGUAGE_KEY]={name:this.getSystemLocale(),key:this.SYSTEM_DEFAULT_LANGUAGE_KEY,displayName:this.SYSTEM_DEFAULT_LANGUAGE_NAME},b.forEach(function(b){if("#"!==b.charAt(0)){var d=a.configurationService.config.shell.languages[b];c[b]={name:b,key:b,displayName:d.displayName||b}}}),c},c.prototype.getConfigLanguageCount=function(){var a=Object.getOwnPropertyNames(this.configurationService.config.shell.languages||{}).filter(function(a){return"#"!==a.charAt(0)});return a.length},c.prototype.getSystemLocale=function(){var a;return navigator.languages?a=navigator.languages[0]:navigator.language?a=navigator.language:navigator.userLanguage&&(a=navigator.userLanguage),a},c.prototype.getResourceDirectoryName=function(a){var b=a.name;if(!this.languages[a.name]&&1===a.name.split("-").length)for(var c=Object.keys(this.languages),d=0;d<c.length;d++){var e=this.languages[c[d]];if(e.key.split("-")[0]===a.name){b=a.key;break}}return b},c.prototype.init=function(a){var b=this;if(this.restService=a,this.initDeferred.promise.isFulfilled())return this.logger.low("Too many calls to init"),this.initDeferred.promise;this.logger.low("Initializing started"),this.languages=this.allLanguages();var c=Object.keys(this.languages),d=this.configurationService.config.shell.language,e=this.localPreferenceLanguageName(),f=this.languages[e];return this.localizationEnabled=c.length>0,f||(this.logger.low("Loading config language",{reason:"Preference language not supported",preferenceLanguage:e}),f=this.languages[d]),f&&f.key!==this.SYSTEM_DEFAULT_LANGUAGE_KEY||(this.logger.low("Loading system default language",{reason:"Config Language not supported",language:d}),f=this.languages[this.SYSTEM_DEFAULT_LANGUAGE_KEY]),f.name!==this.CODEBASE_DEFAULT_LANGUAGE_NAME||this.languages[f.name]?(this.logger.low("Loading language",{language:f.key}),this.loadLanguage(f).then(function(){b.logger.low("Initializing completed",{language:f.key}),b.initDeferred.resolve(b._language)},function(a){b.logger.low("Initializing failed, using default resources",{language:f.key}),b.initDeferred.resolve(b._language)}),this.initDeferred.promise):(this._language=f,this.updateLocalPreference(f.key),this.initDeferred.resolve(f),this.initDeferred.promise)},c.prototype.loadLanguage=function(a){var b=this;this._language=a;var c=Object.keys(this.moduleResourceMap).map(function(c){return b.moduleResourceMap[c].load(a.name,b.getResourceDirectoryName(a),b.logger,b.restService).then(function(d){b.moduleResourceMap[c].loadData(d),d&&(b.currentSdkCulture=a.name)})});return Q.all(c).then(function(){return null})},c.prototype.updateLocalPreference=function(a){this.localPreferenceStore.globalStoreIsLoaded&&(a?this.localPreferenceStore.setGlobalValue(this.LANGUAGE_PREFERENCE_KEY,a):this.localPreferenceStore.deleteGlobalKey(this.LANGUAGE_PREFERENCE_KEY))},c.prototype.updateUserPreference=function(a){this.preferenceService.isLoaded&&this.preferenceService.setValue(this.LANGUAGE_PREFERENCE_KEY,a)},c.prototype.userPreferenceLanguage=function(){var a=null;if(this.preferenceService.isLoaded){var b=this.preferenceService.getValue(this.LANGUAGE_PREFERENCE_KEY);a=this.languages[b]}return a},c.prototype.localPreferenceLanguageName=function(){var a=null;return this.localPreferenceStore.globalStoreIsLoaded&&(a=this.localPreferenceStore.getGlobalValue(this.LANGUAGE_PREFERENCE_KEY)),a},c.prototype.saveLocalPreferences=function(){if(this.preferenceService.isLoaded){var a=this.preferenceService.getValue(this.LANGUAGE_PREFERENCE_KEY),b=this.languages[a];b&&this.updateLocalPreference(b.key)}},c.prototype.updateBrandingStrings=function(b){var c=this.getConfigLanguageCount();this.moduleResourceMap[a.SDK_MODULE_NAME].mergeStrings([b],!this.localizationEnabled||0===c),this.brandingStringsUpdated.raise(this,null)},c.prototype.addSdkStrings=function(b){var c=this;(Array.isArray(b)?b:[b]).forEach(function(b){return c.moduleResourceMap[a.SDK_MODULE_NAME].registerStringObjs(b)}),this.brandingStringsUpdated.raise(this,null)},c.prototype.getResource=function(b,c,d){if(!b)return"";var e=null,f=null;"object"==typeof c&&null!==c||c instanceof Object?(f=c,e=d):"string"==typeof c||c instanceof String?e=c.toString():null!==c&&void 0!==c||(e=d),e=e||a.SDK_MODULE_NAME;var g=this.moduleResourceMap[e];return g?g.getModuleResource(b,f):b},c.prototype.getAllDefaultResources=function(){var a=this;return Object.keys(this.moduleResourceMap).reduce(function(b,c){return b[c]=a.moduleResourceMap[c].getAllOriginalValues(),b},{})},c}();a.module("ionwebCore").service("languageService",["ionweb.configurationService","ionweb.preferenceService","ionweb.localPreferenceStore","ionweb.loggerFactory"],function(a,b,d,e){return new c(a,b,d,e)})}(b=a.core||(a.core={}))}(ionweb||(ionweb={}));var big;!function(a){var b,c=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;!function(a){a[a.ROUND_DOWN=0]="ROUND_DOWN",a[a.ROUND_HALF_UP=1]="ROUND_HALF_UP",a[a.ROUND_HALF_EVEN=2]="ROUND_HALF_EVEN",a[a.ROUND_UP=3]="ROUND_UP"}(b=a.Round||(a.Round={}));var d;!function(a){a[a.Fixed=0]="Fixed",a[a.Exponential=1]="Exponential",a[a.Precision=2]="Precision"}(d||(d={}));var e=function(){function a(a){"number"==typeof a||"string"==typeof a?this.parse(a):(this.s=a.s,this.e=a.e,this.c=a.c.slice())}return a.prototype.format=function(b,c){var d=b-this.e,e=this.c;for(e.length>++b&&this.rnd(d,a.RM),e[0]?c?d=b:(e=this.c,d=this.e+d+1):++d;e.length<d;e.push(0));return d=this.e,1===c||c&&(b<=d||d<=a.E_NEG)?(this.s<0&&e[0]?"-":"")+(e.length>1?e[0]+"."+e.join("").slice(1):e[0])+(d<0?"e":"e+")+d:this.toString()},a.prototype.parse=function(b){var d,e,f,g=b;for(0===b&&1/b<0?g="-0":"number"==typeof b&&(g=b.toFixed(13)),c.test(b)||a.throwErr(NaN),this.s="-"===g.charAt(0)?(g=g.slice(1),-1):1,(d=g.indexOf("."))>-1&&(g=g.replace(".","")),(e=g.search(/e/i))>0?(d<0&&(d=e),d+=+g.slice(e+1),g=g.substring(0,e)):d<0&&(d=g.length),e=0;"0"===g.charAt(e);e++);if(e===(f=g.length))this.c=[this.e=0];else{for(;"0"===g.charAt(--f););for(this.e=d-e-1,this.c=[],d=0;e<=f;this.c[d++]=+g.charAt(e++));}},a.prototype.rnd=function(b,c,d){var e,f=this.c,g=this.e+b+1;if(1===c?d=f[g]>=5:2===c?d=f[g]>5||5===f[g]&&(d||g<0||f[g+1]!==e||0!==(1&f[g-1])):3===c?d=d||f[g]!==e||g<0:(d=!1,0!==c&&a.throwErr("!BigType.RM!")),g<1||!f[0])d?(this.e=-b,this.c=[1]):this.c=[this.e=0];else{if(f.length=g--,d)for(;++f[g]>9;)f[g]=0,g--||(++this.e,f.unshift(1));for(g=f.length;!f[--g];f.pop());}},a.throwErr=function(a){var b=new Error(a);throw b.name="BigError",b},a.prototype.abs=function(){var b=new a(this);return b.s=1,b},a.prototype.cmp=function(b){var c,d=this.c,e=new a(b),f=e.c,g=this.s,h=e.s,i=this.e,j=e.e;if(!d[0]||!f[0])return d[0]?g:f[0]?-h:0;if(g!==h)return g;if(c=g<0,i!==j)return(i>j?1:0)^c?1:-1;for(g=-1,h=(i=d.length)<(j=f.length)?i:j;++g<h;)if(d[g]!==f[g])return(d[g]>f[g]?1:0)^c?1:-1;return i===j?0:(i>j?1:0)^c?1:-1},a.prototype.div=function(b){var c=this.c,d=new a(b),e=d.c,f=this.s===d.s?1:-1,g=a.DP;if((g!==~~g||g<0||g>a.MAX_DP)&&a.throwErr("!BigType.DP!"),!c[0]||!e[0])return c[0]===e[0]&&a.throwErr(NaN),e[0]||a.throwErr(f/0),new a(0*f);var h,i,j,k,l,m,n=e.slice(),o=h=e.length,p=c.length,q=c.slice(0,h),r=q.length,s=d,t=s.c=[],u=0,v=g+(s.e=this.e-d.e)+1;for(s.s=f,f=v<0?0:v,n.unshift(0);r++<h;q.push(0));do{for(j=0;j<10;j++){if(h!==(r=q.length))k=h>r?1:-1;else for(l=-1,k=0;++l<h;)if(e[l]!==q[l]){k=e[l]>q[l]?1:-1;break}if(!(k<0))break;for(i=r===h?e:n;r;){if(q[--r]<i[r]){for(l=r;l&&!q[--l];q[l]=9);--q[l],q[r]+=10}q[r]-=i[r]}for(;!q[0];q.shift());}t[u++]=k?j:++j,q[0]&&k?q[r]=c[o]||0:q=[c[o]]}while((o++<p||q[0]!==m)&&f--);return t[0]||1===u||(t.shift(),s.e--),u>v&&s.rnd(g,a.RM,q[0]!==m),s},a.prototype.eq=function(a){return!this.cmp(a)},a.prototype.gt=function(a){return this.cmp(a)>0},a.prototype.gte=function(a){return this.cmp(a)>-1},a.prototype.lt=function(a){return this.cmp(a)<0},a.prototype.lte=function(a){return this.cmp(a)<1},a.prototype.minus=function(a){return this.sub(a)},a.prototype.sub=function(b){var c,d,e,f,g=this,h=this.s,i=new a(b),j=i.s;if(h!==j)return i.s=-j,this.plus(i);var k=this.c.slice(),l=this.e,m=i.c,n=i.e;if(!k[0]||!m[0])return m[0]?(i.s=-j,i):new a(k[0]?g:0);if(h=l-n){for((f=h<0)?(h=-h,e=k):(n=l,e=m),e.reverse(),j=h;j--;e.push(0));e.reverse()}else for(d=((f=k.length<m.length)?k:m).length,h=j=0;j<d;j++)if(k[j]!==m[j]){f=k[j]<m[j];break}if(f&&(e=k,k=m,m=e,i.s=-i.s),(j=(d=m.length)-(c=k.length))>0)for(;j--;k[c++]=0);for(j=c;d>h;){if(k[--d]<m[d]){for(c=d;c&&!k[--c];k[c]=9);--k[c],k[d]+=10}k[d]-=m[d]}for(;0===k[--j];k.pop());for(;0===k[0];)k.shift(),--n;return k[0]||(i.s=1,k=[n=0]),i.c=k,i.e=n,i},a.prototype.mod=function(b){var c=this.s,d=new a(b),e=new a(this),f=d.s;d.c[0]||a.throwErr(NaN),e.s=d.s=1;var g=1===d.cmp(e);return e.s=c,d.s=f,g?e:(c=a.DP,f=a.RM,a.DP=a.RM=0,e=e.div(d),a.DP=c,a.RM=f,this.minus(e.times(d)))},a.prototype.plus=function(a){return this.add(a)},a.prototype.add=function(b){var c,d=this.s,e=new a(b),f=e.s;if(d!==f)return e.s=-f,this.minus(e);var g=this.e,h=this.c,i=e.e,j=e.c;if(!h[0]||!j[0])return j[0]?e:new a(h[0]?this:0*d);if(h=h.slice(),d=g-i){for(d>0?(i=g,c=j):(d=-d,c=h),c.reverse();d--;c.push(0));c.reverse()}for(h.length-j.length<0&&(c=j,j=h,h=c),d=j.length,f=0;d;)f=(h[--d]=h[d]+j[d]+f)/10|0,h[d]%=10;for(f&&(h.unshift(f),++i),d=h.length;0===h[--d];h.pop());return e.c=h,e.e=i,e},a.prototype.pow=function(b){var c=new a(1),d=c,e=this,f=b<0;for((b!==~~b||b<-a.MAX_POWER||b>a.MAX_POWER)&&a.throwErr("!pow!"),b=f?-b:b;1&b&&(d=d.times(e)),b>>=1,b;)e=this.times(e);return f?c.div(d):d},a.prototype.round=function(b,c){null==b?b=0:(b!==~~b||b<0||b>a.MAX_DP)&&a.throwErr("!round!");var d=new a(this);return d.rnd(b,null==c?a.RM:c),d},a.prototype.sqrt=function(){var b,c,d,e=this,f=this.c,g=this.s,h=this.e,i=new a("0.5");if(!f[0])return new a(e);g<0&&a.throwErr(NaN),g=Math.sqrt(Number(this.toString())),0===g||g===1/0?(b=f.join(""),b.length+h&1||(b+="0"),c=new a(Math.sqrt(b).toString()),c.e=((h+1)/2|0)-(h<0?1:1&h)):c=new a(g.toString()),g=c.e+(a.DP+=4);do d=c,c=i.times(d.plus(this.div(d)));while(d.c.slice(0,g).join("")!==c.c.slice(0,g).join(""));return c.rnd(a.DP-=4,a.RM),c},a.prototype.times=function(a){return this.mul(a)},a.prototype.mul=function(b){var c,d=this.c,e=new a(b),f=e.c,g=d.length,h=f.length,i=this.e,j=e.e;if(e.s=this.s===e.s?1:-1,!d[0]||!f[0])return new a(0*e.s);for(e.e=i+j,g<h&&(c=d,d=f,f=c,j=g,g=h,h=j),c=new Array(j=g+h);j--;c[j]=0);for(i=h;i--;){for(h=0,j=g+i;j>i;)h=c[j]+f[i]*d[j-i-1]+h,c[j--]=h%10,h=h/10|0;c[j]=(c[j]+h)%10}for(h&&++e.e,c[0]||c.shift(),i=c.length;!c[--i];c.pop());return e.c=c,e},a.prototype.valueOf=function(){return this.toString()},a.prototype.toJSON=function(){return this.toString()},a.prototype.toString=function(){var b=this.e,c=this.c.join(""),d=c.length;if(b<=a.E_NEG||b>=a.E_POS)c=c.charAt(0)+(d>1?"."+c.slice(1):"")+(b<0?"e":"e+")+b;else if(b<0){for(;++b;c="0"+c);c="0."+c}else if(b>0)if(++b>d)for(b-=d;b--;c+="0");else b<d&&(c=c.slice(0,b)+"."+c.slice(b));else d>1&&(c=c.charAt(0)+"."+c.slice(1));return this.s<0&&this.c[0]?"-"+c:c},a.prototype.toExponential=function(b){return null==b?b=this.c.length-1:(b!==~~b||b<0||b>a.MAX_DP)&&a.throwErr("!toExp!"),this.format(b,d.Exponential)},a.prototype.toFixed=function(b){var c,d=a.E_NEG,e=a.E_POS;return a.E_NEG=-(a.E_POS=1/0),null==b?c=this.toString():b===~~b&&b>=0&&b<=a.MAX_DP&&(c=this.format(this.e+b),this.s<0&&this.c[0]&&c.indexOf("-")<0&&(c="-"+c)),a.E_NEG=d,a.E_POS=e,c||a.throwErr("!toFix!"),c},a.prototype.toPrecision=function(b){return null==b?this.toString():((b!==~~b||b<1||b>a.MAX_DP)&&a.throwErr("!toPre!"),this.format(b-1,d.Precision))},a.DP=20,a.RM=b.ROUND_HALF_UP,a.MAX_DP=1e6,a.MAX_POWER=1e6,a.E_NEG=-7,a.E_POS=21,a}();a.BigType=e}(big||(big={}));var ionweb;!function(a){a.Big=function(a){return new big.BigType(a)}}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function b(){}return b.applyRounding=function(c,d,e){switch(e){case a.RoundingMode.Up:var f=b.getDecimalPowerResult(d);c=Number(a.Big(Math.ceil(c*f)).div(a.Big(f)));break;case a.RoundingMode.Down:var f=b.getDecimalPowerResult(d);c=Number(a.Big(Math.floor(c*f)).div(a.Big(f)));break;case a.RoundingMode.Default:}return c},b.applyFractionalRounding=function(c,d,e){if(e===a.RoundingMode.Default)return c;var f=c,g=1/d,h=a.Big(g),i=a.Big(c),j=i.mod(h);if(j.gt(b.EPSILON_BIG)){var k;c>=0?(k=i.minus(j),e===a.RoundingMode.Up&&(k=k.plus(h))):(k=i.plus(j),e===a.RoundingMode.Down&&(k=k.minus(h))),f=Number(k)}return f},b.getDecimals=function(a){var c;for(a=Math.abs(a),a-=Math.floor(a),a*=b.TEN_POW_TEN,c=9;c>=0;--c){a/=10;var d=b.roundSafe(10*(a-Math.floor(a)));if(0!==d&&10!==d)break}return c+1},b.getDecimalPowerResult=function(a){var c;return c=a<b.DEFAULT_SIZE?b.decimalPowerToResultMap[a]:b.getDecimalPowerResultFromDictionary(a)},b.getDecimalPowerResultFromDictionary=function(a){var c=b.decimalPlacesPowerMap[a];return void 0!==c&&null!==c||(c=Math.pow(10,a),b.decimalPlacesPowerMap[c]),c},b.roundSafe=function(a){return parseInt(Math.floor(a+.5).toString())},b.DEFAULT_SIZE=16,b.decimalPowerToResultMap=new Array(b.DEFAULT_SIZE),b.decimalPlacesPowerMap=[],b.TEN_POW_TEN=1e10,b.EPSILON=1e-12,b.EPSILON_BIG=a.Big(b.EPSILON),b.initialize=function(){for(var a=0;a<b.DEFAULT_SIZE;a++)b.decimalPowerToResultMap[a]=Math.pow(10,a)}(),b}();a.MathUtils=b}(ionweb||(ionweb={}));var ionweb;!function(a){var b="NUMBERFORMATKEY",c=2,d=function(){function b(b,c){this.languageService=b,this._configService=a.module("ionwebCore").getService("ionweb.configurationService"),this.initDefaults(),c&&this.copyFormattingOptions(c)}return b.applyRounding=function(b,c,d){switch(d){case a.RoundingMode.Up:var e=a.MathUtils.getDecimalPowerResult(c);b=Number(a.Big(Math.ceil(b*e)).div(a.Big(e)));break;case a.RoundingMode.Down:var e=a.MathUtils.getDecimalPowerResult(c);b=Number(a.Big(Math.floor(b*e)).div(a.Big(e)));break;case a.RoundingMode.Default:}return b},Object.defineProperty(b.prototype,"decimalPlaces",{get:function(){return this._numberFmtOption.decimalPlaces},set:function(a){this._numberFmtOption.decimalPlaces=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scale",{get:function(){return this._numberFmtOption.scale},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"negativeBraces",{get:function(){return this._numberFmtOption.negativeBraces},set:function(a){this._numberFmtOption.negativeBraces=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"customCultureInfo",{get:function(){return this._customCultureInfo},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isSystemDecimalSeparator",{get:function(){return this._isSystemDecimalSeparator},set:function(a){this._isSystemDecimalSeparator=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isSystemThousandSeparator",{get:function(){return this._isSystemThousandSeparator},set:function(a){this._isSystemThousandSeparator=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"thousandSeparator",{get:function(){return this.isSystemThousandSeparator?this.languageService.cultureInfo.thousandSeparator:this._customCultureInfo.thousandSeparator},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"decimalSeparator",{get:function(){return this.isSystemDecimalSeparator?this.languageService.cultureInfo.decimalSeparator:this._customCultureInfo.decimalSeparator},enumerable:!0,configurable:!0}),b.prototype.initDefaults=function(){var b=this._configService.config.shell,d=!b.numberFormatting||!b.numberFormatting.defaultNegativeFormat||"SIGN"!==b.numberFormatting.defaultNegativeFormat.toUpperCase();this._numberFmtOption={decimalPlaces:c,negativeBraces:d,scale:1},this._customCultureInfo=a.extend({},[this.languageService.cultureInfo]),this.isSystemDecimalSeparator=!0,this.isSystemThousandSeparator=!0},b.prototype.copyFormattingOptions=function(b){var c=b;void 0!==c.decimalPlaces&&(this.decimalPlaces=c.decimalPlaces),void 0!=c.negativeBraces&&(this.negativeBraces=c.negativeBraces),void 0!==c.customCultureInfo&&(this._customCultureInfo=a.extend({},[c.customCultureInfo])),void 0!=c.scale&&(this._numberFmtOption.scale=c.scale),void 0!=c.isSystemDecimalSeparator&&(this.isSystemDecimalSeparator=c.isSystemDecimalSeparator),void 0!=c.isSystemThousandSeparator&&(this.isSystemThousandSeparator=c.isSystemThousandSeparator)},b.prototype.getState=function(){return{isSystemDecimalSeparator:this.isSystemDecimalSeparator,isSystemThousandSeparator:this.isSystemThousandSeparator,decimalPlaces:this.decimalPlaces,negativeBraces:this.negativeBraces,customCultureInfo:a.extend({},[this.customCultureInfo])}},b.prototype.setState=function(b){if(b){var c=b;this._numberFmtOption={
decimalPlaces:c.decimalPlaces,negativeBraces:c.negativeBraces,scale:1},this._isSystemDecimalSeparator=void 0===c.isSystemDecimalSeparator||c.isSystemDecimalSeparator,this._isSystemThousandSeparator=void 0===c.isSystemThousandSeparator||c.isSystemThousandSeparator,this._customCultureInfo=c.customCultureInfo||a.extend({},[this.languageService.cultureInfo])}},b}();a.NumberFormattingOptions=d;var e=function(){function c(c,e,f){var g=this;if(this.preferenceService=c,this.languageService=e,this.preferenceChanged=new a.Event,this.logger=f.create("NumberFormattingService"),this.preferenceData=new d(this.languageService),this.preferenceService.isLoaded){var h=this.preferenceService.getValue(b);this.preferenceData.setState(h),this.traceAnalytics()}else this.preferenceService.loaded.add(function(){var a=g.preferenceService.getValue(b);g.preferenceData.setState(a),g.traceAnalytics()})}return c.prototype.traceAnalytics=function(){this.logger.analytics("Settings","Preference","decimalPlaces:"+this.preferenceData.decimalPlaces),this.logger.analytics("Settings","Preference","negativeBraces:"+this.preferenceData.negativeBraces),this.logger.analytics("Settings","Preference","isSystemDecimalSeparator:"+this.preferenceData.isSystemDecimalSeparator),this.logger.analytics("Settings","Preference","isSystemThousandSeparator:"+this.preferenceData.isSystemThousandSeparator),this.logger.analytics("Settings","Preference","decimalSeparator:"+this.preferenceData.decimalSeparator),this.logger.analytics("Settings","Preference","thousandSeparator:"+this.preferenceData.thousandSeparator)},c.prototype.validateNumberStringDigitSeperator=function(a,b,c){var d=a.split(b);d.length>1},c.prototype.getFormattedNumber=function(b,c){if(c?(c.decimalPlaces=void 0!==c.decimalPlaces?c.decimalPlaces:this.preferenceData.decimalPlaces,c.negativeBraces=void 0!==c.negativeBraces?c.negativeBraces:this.preferenceData.negativeBraces,c.thousandSeparator=void 0!==c.thousandSeparator?c.thousandSeparator:this.preferenceData.thousandSeparator,c.decimalSeparator=void 0!==c.decimalSeparator?c.decimalSeparator:this.preferenceData.decimalSeparator,c.scale=void 0!==c.scale?c.scale:this.preferenceData.scale):c=this.preferenceData,c.removeTrailingZeros){var d=Math.abs(b),e=d-Math.floor(d);e<=a.MathUtils.EPSILON&&(c.decimalPlaces=0)}b=a.MathUtils.applyRounding(b,c.decimalPlaces,c.roundingMode),c.thousandSeparator===c.decimalSeparator&&(this.logger.low("NumberFormattingError",{err:a.core.Strings.Err_Decimal_Thousand_Symbol_Same,separator:c.thousandSeparator}),c.thousandSeparator=this.preferenceData.thousandSeparator,c.decimalSeparator=this.preferenceData.decimalSeparator);var f=Math.abs(b/c.scale).toFixed(c.decimalPlaces);if(f=f.replace(".",c.decimalSeparator),c.thousandSeparator)if(f.indexOf(c.decimalSeparator)>=0){var g="\\d(?=(\\d{3})+\\"+c.decimalSeparator+")";f=f.replace(new RegExp(g,"g"),"$&"+c.thousandSeparator)}else f=f.replace(/\d(?=(\d{3})+$)/g,"$&"+c.thousandSeparator);return b<0&&(f=c.negativeBraces?"("+f+")":"-"+f),f},c.prototype.parseNumber=function(b,c){function d(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}if(b){c?(c.negativeBraces=void 0!==c.negativeBraces?c.negativeBraces:this.preferenceData.negativeBraces,c.thousandSeparator=void 0!==c.thousandSeparator?c.thousandSeparator:this.preferenceData.thousandSeparator,c.decimalSeparator=void 0!==c.decimalSeparator?c.decimalSeparator:this.preferenceData.decimalSeparator,c.scale=void 0!==c.scale?c.scale:this.preferenceData.scale):c=this.preferenceData,c.thousandSeparator===c.decimalSeparator&&(this.logger.low("NumberParsingError",{err:a.core.Strings.Err_Decimal_Thousand_Symbol_Same,separator:c.thousandSeparator}),c.thousandSeparator=this.preferenceData.thousandSeparator,c.decimalSeparator=this.preferenceData.decimalSeparator),c.negativeBraces&&b.indexOf("(")!==-1&&(b="-"+b.replace(/[()]/g,""));var e=new RegExp("^([+-])?(([0-9]{1,3}("+d(c.thousandSeparator)+"[0-9]{3})*)|([0-9]+))?("+d(c.decimalSeparator)+"[0-9]+)?$"),f=e.test(b);if(!f)return NaN;b=b.replace(new RegExp(d(c.thousandSeparator),"g"),""),b=b.replace(c.decimalSeparator,".");var g=Number(b);return g*c.scale}},c.prototype.getNumericFormats=function(){return new d(this.languageService,this.preferenceData)},c.prototype.setNumericFormats=function(a){this.preferenceData=new d(this.languageService,a),this.traceAnalytics();var c=this.preferenceData.getState();this.preferenceService.setValue(b,c),this.preferenceChanged.raise(this,null)},c}();a.NumberFormattingService=e,a.module("ionwebCore").service("numberFormattingService",["ionweb.preferenceService","ionweb.languageService","ionweb.loggerFactory"],function(a,b,c){return new e(a,b,c)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.moment=a.syncRequire("moment");var c=function(c){function d(a,b){var e=c.call(this,b)||this;e.preferenceService=a,e.init(),e.updateFormatsInCache();var f=[d.SHORT_DATE_FORMAT_KEY,d.LONG_DATE_FORMAT_KEY,d.SHORT_TIME_FORMAT_KEY,d.LONG_TIME_FORMAT_KEY,d.RANGE_SEPARATOR_KEY];return a.subscribeChanges&&a.subscribeChanges(f,function(){e.updateFormatsInCache(),e.updateAnalytics()}),a.loaded.add(function(){e.updateFormatsInCache(),e.updateAnalytics()}),e}return __extends(d,c),d.prototype.fetchLongDateFormat=function(){var a=this.preferenceService.getValue(d.LONG_DATE_FORMAT_KEY);return{formatType:a&&a.formatType||b.DateTimeFormatSelectionType.Predefined,formatString:a&&this.toStandardFormat(a.formatString)||d.DateTimeLongDateFormat}},d.prototype.fetchShortDateFormat=function(){if(this._getShortDateFormatHandler)return this._getShortDateFormatHandler();var a=this.preferenceService.getValue(d.SHORT_DATE_FORMAT_KEY);return{formatType:a&&a.formatType||b.DateTimeFormatSelectionType.Predefined,formatString:a&&this.toStandardFormat(a.formatString)||d.DateTimeShortDateFormat}},d.prototype.fetchLongTimeFormat=function(){var a=this.preferenceService.getValue(d.LONG_TIME_FORMAT_KEY);return{formatType:a&&a.formatType||b.DateTimeFormatSelectionType.Predefined,formatString:a&&this.toStandardFormat(a.formatString)||d.DateTimeLongTimeFormat}},d.prototype.fetchShortTimeFormat=function(){var a=this.preferenceService.getValue(d.SHORT_TIME_FORMAT_KEY);return{formatType:a&&a.formatType||b.DateTimeFormatSelectionType.Predefined,formatString:a&&this.toStandardFormat(a.formatString)||d.DateTimeShortTimeFormat}},d.prototype.fetchRangeSeparator=function(){var a=this.preferenceService.getValue(d.RANGE_SEPARATOR_KEY);return{separatorType:a&&a.separatorType||b.DateTimeFormatSelectionType.Predefined,separator:a&&this.toStandardFormat(a.separator)||b.PredefinedRangeSeparator}},d.prototype.updateAnalytics=function(){var a=this.fetchLongDateFormat(),c=this.fetchShortDateFormat(),d=this.fetchLongTimeFormat(),e=this.fetchShortTimeFormat(),f=function(a){return a===b.DateTimeFormatSelectionType.Custom?"Custom":a===b.DateTimeFormatSelectionType.Predefined?"Predefined":"Undef"};this.logger.analytics("Settings","Preference","longDateFormatString:"+a.formatString),this.logger.analytics("Settings","Preference","longDateFormatType:"+f(a.formatType)),this.logger.analytics("Settings","Preference","shortDateFormatString:"+c.formatString),this.logger.analytics("Settings","Preference","shortDateFormatType:"+f(c.formatType)),this.logger.analytics("Settings","Preference","longTimeFormatString:"+d.formatString),this.logger.analytics("Settings","Preference","longTimeFormatType:"+f(d.formatType)),this.logger.analytics("Settings","Preference","shortTimeFormatString:"+e.formatString),this.logger.analytics("Settings","Preference","shortTimeFormatType:"+f(e.formatType))},d.prototype.setLongDateFormat=function(b){this.preferenceService.setValue(d.LONG_DATE_FORMAT_KEY,a.extend({},[b]))},d.prototype.setShortDateFormat=function(b){this.preferenceService.setValue(d.SHORT_DATE_FORMAT_KEY,a.extend({},[b]))},d.prototype.setLongTimeFormat=function(b){this.preferenceService.setValue(d.LONG_TIME_FORMAT_KEY,a.extend({},[b]))},d.prototype.setShortTimeFormat=function(b){this.preferenceService.setValue(d.SHORT_TIME_FORMAT_KEY,a.extend({},[b]))},d.prototype.setShortDateFormatHandler=function(a,b){this._getShortDateFormatHandler=a,b&&this.setLocale(b),this.updateFormatsInCache()},d.prototype.setRangeSeparator=function(b){this.preferenceService.setValue(d.RANGE_SEPARATOR_KEY,a.extend({},[b]))},d.LONG_DATE_FORMAT_KEY="LONGDATEFORMATKEY",d.SHORT_DATE_FORMAT_KEY="SHORTDATEFORMATKEY",d.LONG_TIME_FORMAT_KEY="LONGTIMEFORMATKEY",d.SHORT_TIME_FORMAT_KEY="SHORTTIMEFORMATKEY",d.RANGE_SEPARATOR_KEY="RANGESEPARATORKEY",d}(b.DateFormattingServiceBase);b.DateFormattingService=c,a.module("ionwebCore").service("dateFormattingService",["ionweb.configurationService","ionweb.preferenceService","ionweb.languageService","ionweb.loggerFactory"],function(a,b,d,e){var f=new c(b,e);return d.currentLanguage().isFulfilled()?d.language&&f.setLocale(d.language.name):d.currentLanguage().then(function(a){a&&f.setLocale(a.name)}),f})}(b=a.localization||(a.localization={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.EMBEDDING_GETCONFIG_MESSAGE="onGetConfig",a.EMBEDDING_RELOAD_MESSAGE="onReload",a.EMBEDDING_GETCREDENTIALS_MESSAGE="onLoginCredentials",a.EMBEDDING_LOGGEDIN_MESSAGE="onLoggedIn",a.CHANNEL_ACCEPT_ID="onAcceptChannel",a.CHANNEL_ACCEPT_RESPONSE="onAcceptChannelResponse",a.CHANNEL_OPEN_ID="onOpenChannel";var b=function(){function b(b,c){this.channelId=b,this.publishing=c,this.msgType=a.CHANNEL_ACCEPT_ID}return b}();a.ChannelAcceptIdMessage=b;var c=function(){function b(b,c){this.channelId=b,this.error=c,this.msgType=a.CHANNEL_ACCEPT_RESPONSE}return b}();a.ChannelAcceptIdResponse=c;var d=function(){function b(b){this.channelId=b,this.msgType=a.CHANNEL_OPEN_ID}return b}();a.ChannelOpenIdMessage=d}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={})),function(a){function b(){var b=a.module("ionwebCore").getService("ionweb.embeddingService");b&&b.isAvailable&&b.postMessage(a.interop.EMBEDDING_RELOAD_MESSAGE)}a.onReloading=b}(ionweb||(ionweb={})),function(a){var b;!function(b){var c=function(){function b(b,c){this.requestHandlers=[],this.handleMessage=new a.Event,this.logger=c.create("MessageChannel","embedding"),b&&this.init(b)}return b.prototype.init=function(a){var b=this;this.endPoint=a,this.endPoint&&this.endPoint.init(function(a){return b.parseIncomingMessage(a)})},b.prototype.parseIncomingMessage=function(a){this.logger.medium("receivingMessage",{message:a});var b;try{if(b=JSON.parse(a),!b)return!1}catch(a){return!1}if(b.request)return this.handleIncomingRequests(b);if("number"!=typeof b.reqId||!this.requestHandlers[b.reqId])return!1;var c=b,d=null;"undefined"!=typeof b.response&&(c=b.response),"undefined"!=typeof b.error&&(d=b.error);try{var e=this.requestHandlers[b.reqId];e(c,d)}finally{return delete this.requestHandlers[b.reqId],!0}},b.prototype.handleIncomingRequests=function(a){var b=this,c=null;"number"==typeof a.reqId&&(c=Q.defer(),c.promise.then(function(c){b.sendRawData({reqId:a.reqId,response:c})},function(c){var d=c&&c.message||c,e={message:d};b.sendRawData({reqId:a.reqId,response:null,error:e})}));var d={request:a.request,deferred:c,isHandled:!1};return this.handleMessage.raise(this,d),d.isHandled},b.prototype.sendRawData=function(a){if(this.endPoint){var b=JSON.stringify(a);this.logger.medium("sendingMessage",{message:b}),this.endPoint.sendMessage(b)}},b.prototype.postMessage=function(a){this.sendRawData({request:a})},b.prototype.sendMessage=function(a){var b=Q.defer();this.requestHandlers.push(function(a,c){c?b.reject(new Error(c.message||c)):b.resolve(a)});var c=this.requestHandlers.length-1;return this.sendRawData({reqId:c,request:a}),b.promise},Object.defineProperty(b.prototype,"isAvailable",{get:function(){return!!this.endPoint},enumerable:!0,configurable:!0}),b}();b.MessageProviderBase=c}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(){this.byIdSubs={}}return a.prototype.handleMsg=function(a,b){var c=this.byIdSubs[a.typeId];c&&c.forEach(function(c){return c(a,b)}),c=this.byIdSubs[""],c&&c.forEach(function(c){return c(a,b)})},a.prototype.dispose=function(){this.byIdSubs={}},a.prototype.subscribe=function(a,b){var c=this,d=function(a,b){var d=c.byIdSubs[a];d||(d=c.byIdSubs[a]=[]),d.push(b)},e=function(a,b){var d=c.byIdSubs[a];if(d){var e=d.indexOf(b);e>=0&&d.splice(e,1),0===d.length&&delete c.byIdSubs[a]}},f=(b&&"string"==typeof b?[b]:b)||[""];return f.forEach(function(b){return d(b,a)}),function(){return f.forEach(function(b){return e(b,a)})}},a}(),c=function(b){function c(a,c){var d=b.call(this)||this;return d.sinks=a,d.echo=c,d}return __extends(c,b),c.prototype.post=function(a){var b=this;this.sinks().forEach(function(c){(c!==b||b.echo)&&c.handleMsg(a)})},c.prototype.dispose=function(){var c=this;a.spliceAll(this.sinks(),function(a){return a===c}),b.prototype.dispose.call(this)},c}(b),d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.dispose=function(){this.endPoint=null,a.prototype.dispose.call(this)},b.prototype.post=function(a){this.endPoint.handleMsg(a)},b.prototype.send=function(a){var b=Q.defer();return this.endPoint.handleMsg(a,b),b.promise},b}(b),e=function(b){function c(a,c){var d=b.call(this)||this;return d.provider=a,d.sessionId=c,d.unsub=a.handleMessage.add(function(a,b){b.isHandled||b.request._sessionId!==c||"string"!=typeof b.request.typeId||(d.handleMsg(b.request,b.deferred),b.isHandled=!0)}),d}return __extends(c,b),c.prototype.dispose=function(){this.unsub(),b.prototype.dispose.call(this)},c.prototype.post=function(b){this.provider.postMessage(a.extend({_sessionId:this.sessionId},[b]))},c.prototype.send=function(b){return this.provider.sendMessage(a.extend({_sessionId:this.sessionId},[b]))},c}(b),f=function(){function b(b){this.excHelper=b,this.channelsListeners={},this.channelsListenersAdded=new a.Event,this.broadcastSinks=[],this.endPoints=[]}return b.prototype.linkRemote=function(b,c){var d=this,e={handleMsg:function(a){c.postMessage(a)}};this.broadcastSinks.push(e);var f={provider:c,name:b};return this.endPoints.push(f),c.handleMessage.add(function(b,f){if(!f.isHandled)if(f.request.typeId&&!f.request._sessionId)d.broadcastSinks.forEach(function(a){a!==e&&a.handleMsg(f.request)}),f.isHandled=!0;else if(f.request.msgType===a.interop.CHANNEL_ACCEPT_ID&&"string"==typeof f.request.channelId){var g=f.request;g.publishing?d.registerRemoteAccept(g.channelId,c):d.unregisterRemoteAccept(g.channelId),f.isHandled=!0}else if(f.request.msgType===a.interop.CHANNEL_ACCEPT_RESPONSE&&"string"==typeof f.request.channelId){var h=f.request,i=d.channelsListeners[h.channelId];i&&(i.remoteErrHandler&&h.error&&i.remoteErrHandler(new Error(h.error)),f.isHandled=!0)}else if(f.request.msgType===a.interop.CHANNEL_OPEN_ID&&"string"==typeof f.request.channelId){var g=f.request,j=d.channelsListeners[g.channelId];if(j){var k=a.createNewGuid();j.processRemoteChannel(c,k),f.deferred.resolve({sessionId:k}),f.isHandled=!0}}}),function(){a.spliceAll(d.broadcastSinks,function(a){return a===e}),a.spliceAll(d.endPoints,function(a){return a===f}),Object.getOwnPropertyNames(d.channelsListeners).forEach(function(a){d.channelsListeners[a].remoteProvider===c&&delete d.channelsListeners[a]})}},b.prototype.registerRemoteAccept=function(b,c){if(this.channelsListeners[b])c.postMessage(new a.interop.ChannelAcceptIdResponse(b,"Channel name already registered"));else{var d=this.channelsListeners[b]={chid:b,requestRemoteChannel:function(){return c.sendMessage(new a.interop.ChannelOpenIdMessage(b)).then(function(a){return new e(c,a.sessionId)})},remoteProvider:c};this.channelsListenersAdded.raise(this,d)}},b.prototype.unregisterRemoteAccept=function(a){this.channelsListeners[a]&&delete this.channelsListeners[a]},b.prototype.openBroadcast=function(a){var b=this,d=new c(function(){return b.broadcastSinks},a);return this.broadcastSinks.push(d),d},b.prototype.openLocalChannel=function(a){if(!a)throw new Error("Channel ID cannot be empty");var b=this.channelsListeners[a];return b&&b.openLocalChannel?b.openLocalChannel():null},b.prototype.openChannel=function(a){if(!a)throw new Error("Channel ID cannot be empty");var b=function(a){return a.openLocalChannel?Q.when(a.openLocalChannel()):a.requestRemoteChannel()},c=this.channelsListeners[a];if(c)return b(c);var d=Q.defer();this.channelsListenersAdded.add(function(c,e){e.chid===a&&d.resolve(b(e))});return d.promise},b.prototype._accept=function(b,c,f,g){var h=this;if(!b)throw new Error("Channel ID cannot be empty");if(this.channelsListeners[b]){var i=new Error("Channel ID already is listen mode");if(g)return g(i),function(){};throw i}var j={openLocalChannel:function(){var a=new d,b=new d;return a.endPoint=b,b.endPoint=a,f(a),b},chid:b,processRemoteChannel:function(a,b){f(new e(a,b))},remoteErrHandler:function(a){delete h.channelsListeners[b],g&&g(a)}};return this.channelsListeners[b]=j,this.channelsListenersAdded.raise(this,j),c&&this.endPoints.forEach(function(c){c.provider.postMessage(new a.interop.ChannelAcceptIdMessage(b,!0))}),function(){delete h.channelsListeners[b],c&&h.endPoints.forEach(function(c){c.provider.postMessage(new a.interop.ChannelAcceptIdMessage(b,!1))})}},b.prototype.acceptLocal=function(a,b){return this._accept(a,!1,b)},b.prototype.accept=function(a,b,c){var d=this;return c||(c=function(a){d.excHelper&&d.excHelper.report(a)}),this._accept(a,!0,b,c)},b}();a.MessageChannelService=f,a.module("ionwebCore").service("messageChannelService",["ionweb.excHelper"],function(a){return new f(a)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.info=0]="info",a[a.warning=1]="warning",a[a.danger=2]="danger"}(b=a.NotificationType||(a.NotificationType={}));var c;!function(a){a[a.Error=0]="Error",a[a.Connecting=1]="Connecting",a[a.Connected=2]="Connected",a[a.Disconnected=3]="Disconnected"}(c=a.ServiceStatus||(a.ServiceStatus={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.name=a,this.statusStr="",this.displayName=""}return a}();a.ConnectionService=b;var c=function(){function c(c,d){var e=this;this._isOffline=!1,this._isOfflineChanged=new a.Event,this._criticalServices={},this._logger=c.create("NotificationService"),this._connectionServices={services:{},serviceList:[],globalStatus:new b("")},d.onException.add(function(b,c){e.showError(a.core.Strings.Err_Notification_Unhandled_Exception,c.message,c.timestamp+": "+c.stack,!0)})}return c.prototype.currentFatalError=function(){return this._lastFatalError},c.prototype.showFatal=function(a,b){this._lastFatalError=a},c.prototype.status=function(c,d,e,f){var g=this._connectionServices.services[c];g||(g=new b(c),this._connectionServices.services[c]=g,this._connectionServices.serviceList.push(g)),g.status=d,g.statusClass="service-status-"+a.ServiceStatus[d].toLowerCase();var h=a.core.Strings["Enum_ServiceStatus_"+a.ServiceStatus[d]]||a.ServiceStatus[d];g.statusStr=h+(e?": "+e:""),g.displayName=f||"",this.updateGlobalStatus()},c.prototype.getStatus=function(a){var b=this._connectionServices.services[a];return b?{status:b.status,message:b.statusStr}:null},c.prototype.updateGlobalStatus=function(){var b=this,c=a.ServiceStatus.Disconnected,d=!1;this._connectionServices.serviceList.forEach(function(e){switch(e.status){case a.ServiceStatus.Error:c=a.ServiceStatus.Error;break;case a.ServiceStatus.Connecting:c!==a.ServiceStatus.Error&&(c=a.ServiceStatus.Connecting);break;case a.ServiceStatus.Connected:c!==a.ServiceStatus.Error&&c!==a.ServiceStatus.Connecting&&(c=a.ServiceStatus.Connected)}b._criticalServices[e.name]&&e.status!==a.ServiceStatus.Connected&&e.status!==a.ServiceStatus.Disconnected&&(d=!0)}),this._isOffline!==d&&this.updateOffline(d),this._connectionServices.globalStatus.status=c,this._connectionServices.globalStatus.statusClass="service-status-"+a.ServiceStatus[c].toLowerCase(),this._connectionServices.globalStatus.statusStr=a.core.Strings["Enum_ServiceStatus_"+a.ServiceStatus[c]]||a.ServiceStatus[c]},c.prototype.updateOffline=function(a){this._isOffline=a,this._logger.low("Offline",{newValue:a}),this._isOfflineChanged.raise(this,void 0)},Object.defineProperty(c.prototype,"isOffline",{get:function(){return this._isOffline},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isOfflineChanged",{get:function(){return this._isOfflineChanged},enumerable:!0,configurable:!0}),c.prototype.addServiceForOffline=function(a){this._criticalServices[a]=!0,this.updateGlobalStatus()},c.prototype.showError=function(a,b,c,d){},c.prototype.showWarning=function(a,b,c){},c.prototype.showInfo=function(a,b,c){},c.prototype.showSnackBar=function(a){},c.prototype.show=function(a,b){},c.prototype.errorMessages=function(){return""},c}();a.NotificationServiceBase=c,a.module("ionwebCore").service("notificationService",["ionweb.loggerFactory","ionweb.excHelper"],function(a,b){return new c(a,b)})}(ionweb||(ionweb={}));var ionweb;!function(a){function b(b){var c=Q.defer();return a.asyncRequire([b],function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise}function c(b){var c=Q.defer();return a.asyncRequire(b,function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];c.resolve(a.reduce(function(a,c,d){return a[b[d]]=c,a},{}))},function(a){c.reject(a)}),c.promise}a.qRequire=b,a.qRequires=c}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.ver=a;var b=a.indexOf("-");b>0&&(a=a.substr(0,b));var c=a.split(".");this.maj=c[0],this.min=c[1]||0,this.pat=c[2]||0}return a.prototype.lt=function(b){return"string"==typeof b&&(b=new a(b)),this.maj<b.maj||!(this.maj>b.maj)&&(this.min<b.min||!(this.min>b.min)&&this.pat<b.pat)},a.prototype.gte=function(a){return!this.lt(a)},a}();a.SemVer=b;var c=function(){function c(b,c){this.restService=b,this.loadedLibraries={},this.path="lib/ionweb-pack/",this.moduleLoaded=new a.Event,this.logger=c.create("PackManager")}return c.prototype.loadIndex=function(){var b=this;return this.indexPromise||(this.indexPromise=this.restService.extget(a.getResourcePath(this.path+"pack.json"),{category:a.rest.SESSION_CATEGORY}).forceJson().send().then(function(a){b.index=a.data},function(a){b.logger.low("HttpErr",{err:a.message||a.toString()}),b.index={}})),this.indexPromise},c.prototype.versionCheck=function(c,d){if(d&&new b(this.index[c].version).lt(d))throw new Error(a.stringFormat(a.core.Strings.Err_Pack_VersionNotValid,{name:c,reqVer:d,availVer:this.index[c].version}))},c.prototype.require=function(b,c){var d=this;return this.loadIndex().then(function(){if(!d.index[b])throw new Error(a.stringFormat(a.core.Strings.Err_Pack_ModuleNotFound,{name:b}));d.versionCheck(b,c);var e=d.index[b];return d.moduleLoaded.raise(d,{path:d.path+b+"/",modData:e}),a.qRequire(a.getResourcePath(d.path+b+"/"+e.main))})},c.prototype.load=function(a,b){return this.loadedLibraries[a]?this.versionCheck(a,b):this.loadedLibraries[a]=this.require(a,b),this.loadedLibraries[a]},c}();a.module("ionwebCore").service("packManager",["ionweb.restService","ionweb.loggerFactory"],function(a,b){return new c(a,b)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.provider=a}return a.prototype.getValue=function(a,b){return this.provider.getValue("$user."+a,b)},a.prototype.setValue=function(a,b){this.provider.setValue("$user."+a,b)},a.prototype.deleteKey=function(a){this.provider.deleteKey("$user."+a)},a}(),c=function(){function a(){}return a.version=1,a.lastVisitedPathKey="lastVisitedPath",a}();a.RootComponentState=c;var d=function(){function c(b,c,d){this._id=b,this._parent=c,this.childComponents={},this.properties={},this._dirty=!1,this.childIdToState={},this.childAddedEvent=new a.Event,this.childRemovedEvent=new a.Event,this.visible=!0,this.componentStyle={},this._dirtySet=new a.Event,this.editModeChanged=new a.Event,this.logger=d.create("component_"+this._id),this.logger.low("create"),c&&c.registerChild(b,this),this.canBeActive=!1,this.editMode=c&&c.editMode}return Object.defineProperty(c.prototype,"editMode",{get:function(){return this._editMode},set:function(a){this._editMode!=a&&(this._editMode=a,this.editModeChanged.raise(this,null))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canBeActive",{get:function(){return this._canBeActive},set:function(a){this._canBeActive=a},enumerable:!0,configurable:!0}),c.prototype.changeId=function(a,b){var c=this._id;if(c!==a){this._parent&&this._parent.unregisterChild(c),this._id=a,this._parent&&this._parent.registerChild(this._id,this);var d=this.findUserDataProvider();d&&d.changeId(this,c,b)}},c.prototype.registerChild=function(b,c){if(this.childComponents[b]){this.logger.low("registerChild",{id:b,error:"duplicate"});var d=a.stringFormat(a.core.Strings.Err_Components_Duplicate_ChildComponent_InComponent,{id:b,componentId:this.id});throw new Error(d)}this.childComponents[b]=c,this.logger.high("registerChild",{id:b});var e=this.getChildState(b);e&&this.childComponents[b].setState(e),this.childAddedEvent.raise(this,c)},c.prototype.unregisterChild=function(b){var c=this.childComponents[b];if(!c){this.logger.low("unregisterChild",{id:b,error:"unknown"});var d=a.stringFormat(a.core.Strings.Err_Components_CUnknown_Child_Component,{id:b,childId:this.id});throw new Error(d)}this.logger.high("unregisterChild",{id:b}),delete this.childComponents[b],this.shouldDeleteChildState(c)&&this.setChildState(b,null),this.childRemovedEvent.raise(this,b)},c.prototype.shouldDeleteChildState=function(a){return(!this.preserveChildState||!this.preserveChildState(a))&&(!(this.parent instanceof c)||this.parent.shouldDeleteChildState(a))},c.prototype.getState=function(a){var b=this;Object.keys(this.childComponents).forEach(function(a){b.setChildState(a,b.childComponents[a].getState())});var d;a&&Object.getOwnPropertyNames(a).length>0?d=a:this.childIdToState&&Object.getOwnPropertyNames(this.childIdToState).length>0&&(d=this.childIdToState);var e=this.properties,f=function(a){return"undefined"==typeof a||null===a};return e&&0!==Object.getOwnPropertyNames(e).map(function(a){return e[a]}).filter(function(a){return!f(a)}).length||(e=void 0),e||d?{properties:e,components:d,version:c.serializationVersion}:void 0},c.prototype.setState=function(a){var b=this;a||(a={version:c.serializationVersion}),c.serializationVersion===a.version&&(this.properties=a.properties||{},this.childIdToState=a.components||{}),Object.getOwnPropertyNames(this.childComponents).forEach(function(c){var d=a.components&&a.components[c];d&&b.childComponents[c].setState(d)})},c.prototype.getChildState=function(a){return this.childIdToState[a]},c.prototype.setChildState=function(a,b){b?this.childIdToState[a]=b:delete this.childIdToState[a]},c.prototype.setValue=function(a,b){this.properties[a]!==b&&(this.properties[a]=b,this.dirty=!0,this.subscriptions&&this.subscriptions.raise(a,this,{key:a,value:b}))},c.prototype.getValue=function(a,b){var c=this.properties[a];return"undefined"!=typeof c?c:b},c.prototype.deleteKey=function(a){delete this.properties[a],this.subscriptions&&this.subscriptions.raise(a,this,{key:a,deleted:!0})},Object.defineProperty(c.prototype,"subscribeChanges",{get:function(){var b=this;return this.subscriptions||(this.subscriptions=new a.preferences.KeySubscriptions),function(a,c){return b.subscriptions.subscribe(a,c)}},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.logger.low("dispose"),this._parent&&(this._parent.unregisterChild(this._id),this._parent=null),this.subscriptions&&this.subscriptions.dispose()},Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dirty",{get:function(){return this._dirty},set:function(a){var b=this;this._dirty=a,a&&this._parent?this._parent.dirty=!0:a||Object.keys(this.childComponents).forEach(function(a){b.childComponents[a].dirty=!1}),this.onDirtySet(a)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dirtySet",{get:function(){return this._dirtySet},enumerable:!0,configurable:!0}),c.prototype.onDirtySet=function(a){a&&this._dirtySet.raise(this,null)},c.prototype.getChildren=function(){var a=this;return Object.getOwnPropertyNames(this.childComponents).map(function(b){return a.childComponents[b]})},c.prototype.getChild=function(a){return this.childComponents[a]},Object.defineProperty(c.prototype,"childAdded",{get:function(){return this.childAddedEvent},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"childRemoved",{get:function(){return this.childRemovedEvent},enumerable:!0,configurable:!0}),c.prototype.findUserDataProvider=function(){for(var a=this._parent;a&&!a.userDataProvider;)a=a.parent;return a&&a.userDataProvider},Object.defineProperty(c.prototype,"userData",{get:function(){if(!this._userData){var a=this.findUserDataProvider();this._userData=a&&a.create(this),this._userData||(this._userData=new b(this))}return this._userData},enumerable:!0,configurable:!0}),c.serializationVersion=1,c}();a.Component=d}(ionweb||(ionweb={}));var ionweb;!function(ionweb){var XmlDom=function(){function a(a,b){this.ns=a,this.doc=ionweb.XmlDomFactory.DOMImplementation.createDocument(this.ns,b,null)}return a.prototype.attr=function(a,b){this.doc.documentElement.setAttribute(a,b)},a.prototype.append=function(a,b){return this.appendNS(this.ns,a,b)},a.prototype.appendNS=function(a,b,c){var d=this.doc.createElementNS(a,b);return(c||this.doc.documentElement).appendChild(d),d},a.prototype.toString=function(){return(new ionweb.XmlDomFactory.XMLSerializer).serializeToString(this.doc)},a}();ionweb.XmlDom=XmlDom;var isNode=eval("typeof global !== 'undefined' && global && !global.document"),XmlDomFactory=function(){function a(){}return Object.defineProperty(a,"xmlDom",{get:function(){return a._xmlDom||(a._xmlDom=ionweb.syncRequire("xmldom")),a._xmlDom},enumerable:!0,configurable:!0}),a.XMLSerializer=isNode?a.xmlDom.XMLSerializer:XMLSerializer,a.DOMImplementation=isNode?a.xmlDom.DOMImplementation.prototype:document.implementation,a.DOMParser=isNode?a.xmlDom.DOMParser:window.DOMParser,a}();ionweb.XmlDomFactory=XmlDomFactory}(ionweb||(ionweb={})),function(a){var b;!function(b){function c(b){d||(d=a.getService("ionweb.environmentService"));var c=d.has("ie")||d.has("trident");if(c)for(;b.childNodes.length;)b.removeChild(b.firstChild);else b.innerHTML=""}var d;b.clearNode=c}(b=a.dom||(a.dom={}))}(ionweb||(ionweb={}));var ionweb;!function(a){a.module("ionwebCore").service("stopWatchService",[],function(){function a(){return Date.now()}return{start:function(b){var c=a();return{stop:function(){var d={entries:[{label:b,elapsed:a()-c}]};return d.entries.forEach(function(a){}),d}}}}})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(c,d,e){var f=this;this.configService=d,this.localPreferenceStore=e,this._onDirty=new a.Event,this.customPreferences={},this.componentState={},this._dirty=!1,this.serializationVersion=1,this.loaded=new a.Event,this.loadedDeferred=Q.defer(),this.isLoaded=!1,this._clean=new a.Event,this.eventSubscribers=new b.KeySubscriptions,this.logger=c.create("ScenarioService"),this.currentSave=Q.when(void 0),this.importRedirections(),this.configService.changed.add(function(){return f.importRedirections()})}return c.prototype.importRedirections=function(){var a=this;this.redirectToLocalStore={},Array.isArray(this.configService.config.shell.localPrefKeys)?this.configService.config.shell.localPrefKeys.forEach(function(b){return a.redirectToLocalStore[b]=!0}):this.configService.config.shell.localPrefKeys===!0&&(this.redirectToLocalStore=!0)},c.prototype.overwritePreferenceProvider=function(a){if(this.preferenceProvider)throw new Error("Cannot overwrite preference provider");this.preferenceProviderOverridden=!0,this.preferenceProvider=a},c.prototype.getRootComponent=function(){return a.getService("ionweb.rootComponentService").getRootComponent();
},c.prototype.subscribeChanges=function(a,b){return this.eventSubscribers.subscribe(a,b)},c.prototype.deleteKey=function(a){this.redirectToLocalStore===!0||this.redirectToLocalStore[a]?this.localPreferenceStore.deleteUserKey(c.REDIRECT_PREFIX+a):(delete this.customPreferences[a],this.dirty=!0),this.eventSubscribers.raise(a,this,{key:a,deleted:!0})},c.prototype.clear=function(){this.customPreferences={}},c.prototype.getValue=function(a,b){if(this.redirectToLocalStore===!0||this.redirectToLocalStore[a])return this.localPreferenceStore.getUserValue(c.REDIRECT_PREFIX+a,b);var d=this.customPreferences[a];return"undefined"!=typeof d?d:b},c.prototype.setValue=function(a,b){this.redirectToLocalStore===!0||this.redirectToLocalStore[a]?this.localPreferenceStore.setUserValue(c.REDIRECT_PREFIX+a,b):(this.customPreferences[a]=b,this.dirty=!0),this.eventSubscribers.raise(a,this,{key:a,value:b})},Object.defineProperty(c.prototype,"onDirty",{get:function(){return this._onDirty},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dirty",{get:function(){return this._dirty},set:function(a){this._dirty!==a&&(this._dirty=a,this._onDirty.raise(this,this._dirty))},enumerable:!0,configurable:!0}),c.prototype.getState=function(){return{version:this.serializationVersion,componentState:this.getRootComponent().getState(),preferences:this.getPreferenceState()}},c.prototype.getPreferenceState=function(){var a=this,b={};return Object.keys(this.customPreferences).forEach(function(c){b[c]=a.customPreferences[c]}),b},c.prototype.save=function(a){var b=this;return this.configService.config.shell.disableScenarioSave||this.shutdown?Q.when(void 0):(this.shutdown=a,this.currentSave.then(function(){return b.currentSave=b._save()}))},c.prototype.enableAutosave=function(){var b=this;this.autosave||(this.autosave=a.debounce(function(){b.save().done()},c.AUTOSAVE_DELAY,!1),this.onDirty.add(function(a,c){c&&b.autosave()}))},Object.defineProperty(c.prototype,"isAutosave",{get:function(){return!!this.autosave},enumerable:!0,configurable:!0}),c.prototype._save=function(){var a=this;return this.logger.medium("saving"),this.dirty=!1,this.preferenceProvider.save(this.getState()).then(function(){a.logger.medium("saved"),a.dirty||a._clean.raise(a,void 0)},function(b){throw a.logger.medium("error saving preferences:",{error:b}),b})},c.prototype.load=function(a,b){var c=this;if(this.isLoaded)throw new Error("Multiple load");return this.preferenceProviderOverridden||(this.preferenceProvider=a),this.logger.low("load"),this.preferenceProvider.load().then(function(a){a?a.version&&a.version!==c.serializationVersion?c.logger.low("loadDiscard",{version:a.version}):(c.logger.low("loadSuccess"),c.mergeCustomPreferences(a.preferences),c.getRootComponent().setState(a.componentState)):(c.customPreferences={},c.getRootComponent().setState(null))}).finally(function(){c.dirty=!1,c.isLoaded=!0,c.logger.low("ScenarioLoaded"),c.loaded.raise(c,void 0),c.loadedDeferred.resolve(void 0),c.preferenceProvider.extChanged&&b&&(c.logger.low("subExtChanges"),c.preferenceProvider.extChanged.add(function(){c.preferenceProvider.load().then(function(a){a&&a.version&&a.version===c.serializationVersion&&(c.logger.low("reloadSuccess"),c.updateCustomPreferences(a.preferences))}).catch(function(a){return null}).done()}))})},c.prototype.mergeCustomPreferences=function(a){var b=this;a&&Object.keys(a).forEach(function(c){b.customPreferences[c]=a[c]})},c.prototype.updateCustomPreferences=function(a){var b=this;Object.keys(this.customPreferences).forEach(function(c){a.hasOwnProperty(c)||(delete b.customPreferences[c],b.eventSubscribers.raise(c,b,{key:c,deleted:!0}))}),Object.keys(a).forEach(function(c){b.customPreferences[c]=a[c],b.eventSubscribers.raise(c,b,{key:c,value:a[c]})})},c.prototype.waitUntilDirty=function(){if(!this.dirty)return Q.reject("Not dirty");var a=Q.defer(),b=this._clean.add(function(){b(),a.resolve(void 0)});return a.promise},Object.defineProperty(c.prototype,"loadedPromise",{get:function(){return this.loadedDeferred.promise},enumerable:!0,configurable:!0}),c.AUTOSAVE_DELAY=1e3,c.REDIRECT_PREFIX="$rmt_",c}();b.PreferenceService=c,a.module("ionwebCore").service("preferenceService",["ionweb.loggerFactory","ionweb.configurationService","ionweb.localPreferenceStore"],function(a,b,d){return new c(a,b,d)})}(b=a.preferences||(a.preferences={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.startupConfigDeferred=Q.defer(),this.logger=a.create("AppStatusSvc")}return a.prototype.startupConfigurationReady=function(){this.logger.low("startupConfigurationReady"),this.startupConfigDeferred.resolve(null)},Object.defineProperty(a.prototype,"waitForStartupConfiguration",{get:function(){return this.startupConfigDeferred.promise},enumerable:!0,configurable:!0}),a}();a.module("ionwebCore").service("applicationStatusService",["ionweb.loggerFactory"],function(a){return new b(a)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function b(b){this.interval=b,this.onTrigger=new a.Event}return b.prototype.start=function(){var a=this;this.timerId=setTimeout(function(){a.onTrigger.raise(a,Q.defer())},this.interval)},b.prototype.cancel=function(){clearTimeout(this.timerId)},b.prototype.forceTrigger=function(){var a=this;this.cancel();var b=Q.defer();return this.timerId=setTimeout(function(){a.onTrigger.raise(a,b)},0),b.promise},b}();a.TimerFlushTrigger=b}(ionweb||(ionweb={})),function(a){var b;!function(b){b.PRE_SIZE=16,b.POST_SIZE=8;var c=function(){function a(){this.memStore=[]}return a.prototype.getContent=function(){return Q.when(this.memStore)},a.prototype.appendContent=function(a){return this.memStore=this.memStore.concat(a),Q.when(this.memStore.length)},a.prototype.head=function(){return Q.when(this.memStore[0])},a.prototype.pop=function(){return this.memStore.shift(),Q.when(null)},a.prototype.count=function(){return Q.when(this.memStore.length)},a}(),d=function(){function a(a){this.indexedDbService=a,this.currentStore=a.openArray("ionLog",1,["logs"]).then(function(a){return a[0]},function(){return null})}return a.prototype.toArray=function(a){var b=Object.getOwnPropertyNames(a).sort();return b.map(function(b){return a[b]})},Object.defineProperty(a.prototype,"avail",{get:function(){return this.currentStore.then(function(a){return!!a})},enumerable:!0,configurable:!0}),a.prototype.getContent=function(){var a=this;return this.currentStore.then(function(a){return a.getAllValues()}).then(function(b){return a.toArray(b)},function(){return[]})},a.prototype.appendContent=function(a){return this.currentStore.then(function(b){var c=Q.when(null);return a.forEach(function(a){c=c.then(function(){return b.addValue(a).catch(function(a){console.log("Error storing logs",a)})})}),c.then(function(){return b.count().catch(function(){return 0})})})},a.prototype.head=function(){return this.currentStore.then(function(a){return a.getHeadValue()}).catch(function(){return null})},a.prototype.pop=function(){return this.currentStore.then(function(a){return a.shiftValue()}).catch(function(){return null})},a.prototype.count=function(){return this.currentStore.then(function(a){return a.count()}).catch(function(){return 0})},a}(),e=function(){function c(a,b,c,d,e){var f=this;this.store=a,this.owner=b,this.trigger=c,this.entryBatchLimit=d,this.instanceId=e,this.pendingEntries=[],this.pushInProgress=Q.when(null),this.trigger.onTrigger.add(function(a,b){return b.resolve(f.sendPendingEntries())}),this.trigger.start()}return c.prototype.append=function(a){this.pendingEntries.push(a),this.pendingEntries.length>=this.entryBatchLimit&&this.sendPendingEntries().done()},c.prototype.setStore=function(a){var b=this,c=this.store;return this.store=null,this.storeChanging=(this.storeChanging||Q.when(null)).then(function(){return c.getContent()}).then(function(b){return a.appendContent(b)}).then(function(){if(b.store=a,b.remoteSink)return b.pushToRemote()},function(a){throw b.store=c,a}).finally(function(){b.storeChanging=null}),this.storeChanging},c.prototype.connectRemote=function(a){var b=this;if(this.remoteSink)throw new Error("Already connected");return(this.storeChanging||Q.when(null)).then(function(){return b.store.count()}).then(function(c){return b.remoteSink=a,b.pushToRemote({count:c,current:0})})},c.prototype.sendChunk=function(a){var b=this;return a.entries&&(a.entries=a.entries.filter(function(a){return"undefined"==typeof a.level||b.owner.maximumLevel(a.groupId)>=a.level})),a.entries&&a.entries.length>0?this.remoteSink.send(a).then(function(){return!0},function(){return!1}):Q.when(!0)},c.prototype.shouldSend=function(a){return!a.count||a.count<=0||(a.current<b.PRE_SIZE||a.current>=a.count-b.POST_SIZE)},c.prototype.createEllipsis=function(b){return{tag:"<skipped "+b+" blocks>",level:a.LogLevel.Low,timestamp:new Date,body:""}},c.prototype.pushToRemote=function(a){var c=this,d=!1;return this.pushInProgress=this.pushInProgress.then(function(){if(c.store)return c.store.head().then(function(d){if(d)return!a||c.shouldSend(a)?c.sendChunk(d):!!a.ellipsisSent||(a.ellipsisSent=!0,c.sendChunk({entries:[c.createEllipsis(a.count-b.POST_SIZE-b.PRE_SIZE)],instanceId:d.instanceId}))}).then(function(a){if(a)return d=!0,c.store.pop()})}).finally(function(){d&&(a&&a.current++,c.pushToRemote(a))}),this.pushInProgress},c.prototype.sendPendingEntries=function(){var a=this;if(this.trigger.cancel(),this.store&&this.pendingEntries.length>0){var b=this.pendingEntries.splice(0,this.entryBatchLimit),c={entries:b,instanceId:this.instanceId};return this.store.appendContent([c]).then(function(b){if(a.pendingEntries.length>=a.entryBatchLimit?a.trigger.forceTrigger().done():a.trigger.start(),a.remoteSink)return a.pushToRemote({count:b,current:0})})}return this.trigger.start(),Q.when(null)},c}(),f=function(){function b(b,d,f){this.overrides={},this.maxLevel=a.LogLevel.NotInitialized,this.storeMgr=new e(new c,this,b,d,f)}return b.prototype.append=function(a){this.storeMgr.append(a)},b.prototype.connectDb=function(a){var b=this,c=new d(a);return c.avail.then(function(a){if(a)return b.storeMgr.setStore(c)})},b.prototype.connectRemote=function(a){return this.storeMgr.connectRemote(a)},b.prototype.maximumLevel=function(b){if(this.maxLevel===a.LogLevel.NotInitialized)return a.LogLevel.NotInitialized;if(b){var c=this.overrides[b];return"undefined"!=typeof c?c:this.maxLevel}return this.maxLevel},b.prototype.updateLevel=function(b,c){function d(b){switch(b){case"med":return a.LogLevel.Medium;case"high":return a.LogLevel.High;case"none":return a.LogLevel.None;default:return a.LogLevel.Low}}var e=d(b.logLevel||"low"),f=b.logLevels&&Object.getOwnPropertyNames(b.logLevels).reduce(function(a,c){return a[c]=d(b.logLevels[c]),a},{});this.maxLevel!==e&&(this.maxLevel=e,c&&c.low("update",{logLevel:a.LogLevel[this.maxLevel]})),f&&Object.getOwnPropertyNames(f).length>0&&(this.overrides=f,c&&c.low("update",{overrides:f}))},b}();b.LogSink=f}(b=a.logging||(a.logging={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d){this.tag=a,this.groupId=b,this.owner=c,this.jsonReplacer=d}return b.prototype.formatArgsLine=function(a,b){function c(a){var b=8192;return a&&a.substr(0,b)}var d=this,e=a;return b&&Object.keys(b).forEach(function(a){var c=b[a];if(d.jsonReplacer&&(c=d.jsonReplacer(a,c)),"undefined"!=typeof c){if("object"==typeof c)try{c=JSON.stringify(c)}catch(a){c="EXC: "+a}e+=" "+a+" {"+c+"}"}}),c(e)},b.prototype.log=function(b,c){var d=this.owner.maximumLevel(this.groupId);if(d>=b){var e=c();if(!e.key||"string"!=typeof e.key)throw new Error("Invalid value for key, expected non-empty string");var f={tag:this.tag,body:this.formatArgsLine(e.key,e.params),timestamp:new Date};d===a.LogLevel.NotInitialized&&(f.level=b,f.groupId=this.groupId),this.owner.append(f)}},b.prototype.high=function(b,c){this.log(a.LogLevel.High,function(){return{key:b,params:c}})},b.prototype.medium=function(b,c){this.log(a.LogLevel.Medium,function(){return{key:b,params:c}})},b.prototype.low=function(b,c){this.log(a.LogLevel.Low,function(){return{key:b,params:c}})},b.prototype.ifHigh=function(b){this.log(a.LogLevel.High,b)},b.prototype.ifMedium=function(b){this.log(a.LogLevel.Medium,b)},b.prototype.ifLow=function(b){this.log(a.LogLevel.Low,b)},b.prototype.logExc=function(a,b){this.owner.excHelper.log(a,this,b)},b.prototype.analytics=function(a,b,c,d,e){this.owner.analytics(this,a,b,c,d,e)},b}();b.BasicLogger=c;var d=function(){function d(c,d){this.trigger=c,this.clientInstanceId=a.createNewGuid(),this.sink=new b.LogSink(c,d,this.clientInstanceId)}return d.prototype.flush=function(){return this.trigger.forceTrigger()},d.prototype.create=function(a,b,d){var e,f;return"function"==typeof b?f=b:"string"==typeof b&&(e=b,"function"==typeof d&&(f=d)),new c(a,e,this,f)},d.prototype.analytics=function(a,b,c,d,e,f){if(!this.analyticsService)throw new Error("analyticsService is not attached yet");this.analyticsService.traceAnalytics(a,b,c,d,e,f)},d.prototype.updateLevel=function(a,b){this.sink.updateLevel(a,b)},d.prototype.attachRemoteLogger=function(a){return this.sink.connectRemote(a)},d.prototype.attachAnalyticsService=function(a){this.analyticsService=a},d.prototype.attachIndexedDbService=function(a){return this.sink.connectDb(a)},d.prototype.maximumLevel=function(a){return this.sink.maximumLevel(a)},d.prototype.append=function(a){this.sink.append(a)},d}();b.LoggerFactory=d,a.module("ionwebCore").service("loggerFactory",[],function(){return new d(new a.TimerFlushTrigger(5e3),500)})}(b=a.logging||(a.logging={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(){}return a.prototype.culutureInfo=function(a){switch(a){case"bg":case"de-AT":case"en-ZA":case"es-CR":case"et-EE":case"fi-FI":case"fr-CA":case"fr-FR":case"hu-HU":case"lv-LV":case"nb-NO":case"nb":case"nl-BE":case"nn":case"pl-PL":case"pt-PT":case"ru-RU":case"ru-UA":case"sv-SE":case"uk-UA":return this.buildCultureInfo(","," ");case"cs-CZ":case"sk-SK":return this.buildCultureInfo(","," ");case"da-DK":case"de-DE":case"el":case"es-AR":case"es-CL":case"es-CO":case"es-ES":case"it-IT":case"nl-NL":case"pt-BR":case"ro-RO":case"ro":case"sl":case"sr-Cyrl-RS":case"tr-TR":return this.buildCultureInfo(",",".");case"de-CH":case"de-LI":case"it-CH":return this.buildCultureInfo(".","'");case"fa-IR":return this.buildCultureInfo(".","،");case"fr-CH":return this.buildCultureInfo("."," ");case"en-AU":case"en-GB":case"en-IE":case"en-NZ":case"es-NI":case"es-PE":case"es-PR":case"es-SV":case"fil-PH":case"he-IL":case"id":case"ja-JP":case"ko-KR":case"th-TH":case"zh-CN":case"zh-MO":case"zh-SG":case"zh-TW":return this.buildCultureInfo(".",",");default:return this.buildCultureInfo(".",",")}},a.prototype.buildCultureInfo=function(a,b){return{decimalSeparator:a,thousandSeparator:b}},a}();a.CultureLocale=b}(ionweb||(ionweb={})),ionweb.services.registerCoreSubmodule("ionwebCore",[],ionweb.core.Strings);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aesjs;!function(a){var b=function(){function a(){}return a.create=function(a){if("number"==typeof a){for(var b=[],c=0;c<a;c++)b.push(0);return b}for(var c=0;c<a.length;c++)if(a[c]<0||a[c]>=256||"number"!=typeof a[c])throw new Error("invalid byte at index "+c+"("+a[c]+")");return a.slice(0)},a.copy=function(a,b){for(var c=0;c<a.length;c++)b[c]=a[c]},a}(),c=function(){function a(){}return a.convertStringToBytes=function(a){var b=[],c=0;for(a=encodeURI(a);c<a.length;){var d=a.charCodeAt(c++);37===d?(b.push(parseInt(a.substr(c,2),16)),c+=2):b.push(d)}return b},a.convertBytesToString=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];d<128?(b.push(String.fromCharCode(d)),c++):d>191&&d<224?(b.push(String.fromCharCode((31&d)<<6|63&a[c+1])),c+=2):(b.push(String.fromCharCode((15&d)<<12|(63&a[c+1])<<6|63&a[c+2])),c+=3)}return b.join("")},a}();a.util=c;var d={16:10,24:12,32:14},e=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],g=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],i=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],j=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],k=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],l=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],m=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],n=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],o=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],p=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],q=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],r=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],s=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],t=function(){
function a(a){this.key=b.create(a),this._prepare()}return a.convertToInt32=function(a){for(var b=[],c=0;c<a.length;c+=4)b.push(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]);return b},a.prototype._prepare=function(){var b=d[this.key.length];if(null==b)throw new Error("invalid key size (must be length 16, 24 or 32)");this._Ke=[],this._Kd=[];for(var c=0;c<=b;c++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var g,h=4*(b+1),i=this.key.length/4,j=a.convertToInt32(this.key),c=0;c<i;c++)g=c>>2,this._Ke[g][c%4]=j[c],this._Kd[b-g][c%4]=j[c];for(var k,l=0,m=i;m<h;){if(k=j[i-1],j[0]^=f[k>>16&255]<<24^f[k>>8&255]<<16^f[255&k]<<8^f[k>>24&255]^e[l]<<24,l+=1,8!=i)for(var c=1;c<i;c++)j[c]^=j[c-1];else{for(var c=1;c<i/2;c++)j[c]^=j[c-1];k=j[i/2-1],j[i/2]^=f[255&k]^f[k>>8&255]<<8^f[k>>16&255]<<16^f[k>>24&255]<<24;for(var c=i/2+1;c<i;c++)j[c]^=j[c-1]}for(var n,o,c=0;c<i&&m<h;)n=m>>2,o=m%4,this._Ke[n][o]=j[c],this._Kd[b-n][o]=j[c++],m++}for(var t=1;t<b;t++)for(var u=0;u<4;u++)k=this._Kd[t][u],this._Kd[t][u]=p[k>>24&255]^q[k>>16&255]^r[k>>8&255]^s[255&k]},a.prototype.encrypt=function(c){if(16!=c.length)throw new Error("plaintext must be a block of size 16");for(var d=this._Ke.length-1,e=[0,0,0,0],g=a.convertToInt32(c),l=0;l<4;l++)g[l]^=this._Ke[0][l];for(var m=1;m<d;m++){for(var l=0;l<4;l++)e[l]=h[g[l]>>24&255]^i[g[(l+1)%4]>>16&255]^j[g[(l+2)%4]>>8&255]^k[255&g[(l+3)%4]]^this._Ke[m][l];g=e.slice(0)}for(var n,o=b.create(16),l=0;l<4;l++)n=this._Ke[d][l],o[4*l]=255&(f[g[l]>>24&255]^n>>24),o[4*l+1]=255&(f[g[(l+1)%4]>>16&255]^n>>16),o[4*l+2]=255&(f[g[(l+2)%4]>>8&255]^n>>8),o[4*l+3]=255&(f[255&g[(l+3)%4]]^n);return o},a.prototype.decrypt=function(c){if(16!=c.length)throw new Error("ciphertext must be a block of size 16");for(var d=this._Kd.length-1,e=[0,0,0,0],f=a.convertToInt32(c),h=0;h<4;h++)f[h]^=this._Kd[0][h];for(var i=1;i<d;i++){for(var h=0;h<4;h++)e[h]=l[f[h]>>24&255]^m[f[(h+3)%4]>>16&255]^n[f[(h+2)%4]>>8&255]^o[255&f[(h+1)%4]]^this._Kd[i][h];f=e.slice(0)}for(var j,k=b.create(16),h=0;h<4;h++)j=this._Kd[d][h],k[4*h]=255&(g[f[h]>>24&255]^j>>24),k[4*h+1]=255&(g[f[(h+3)%4]>>16&255]^j>>16),k[4*h+2]=255&(g[f[(h+2)%4]>>8&255]^j>>8),k[4*h+3]=255&(g[255&f[(h+1)%4]]^j);return k},a}(),u=function(){function a(a,c){if(c){if(16!=c.length)throw new Error("initialation vector iv must be of length 16")}else c=b.create([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);this._lastCipherblock=b.create(c),this._aes=new t(a)}return a.prototype.encrypt=function(a){if(16!=a.length)throw new Error("plaintext must be a block of size 16");for(var c=b.create(a),d=0;d<16;d++)c[d]^=this._lastCipherblock[d];return this._lastCipherblock=this._aes.encrypt(c),this._lastCipherblock},a.prototype.decrypt=function(a){if(16!=a.length)throw new Error("ciphertext must be a block of size 16");for(var c=this._aes.decrypt(a),d=0;d<16;d++)c[d]^=this._lastCipherblock[d];return b.copy(a,this._lastCipherblock),c},a}();a.ModeOfOperationCBC=u}(aesjs||(aesjs={}));var hexcase=0,b64pad="=",chrsz=8,ionweb;!function(a){var b;!function(a){var b=function(){function b(){}return b.arrayBufferToBase64=function(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;e<d;e++)b+=String.fromCharCode(c[e]);return base64.encode(b)},b.encryptByes=function(a,b){for(var c=[],d=0;d<a.length;){var e=Math.min(a.length-d,16),f=a.slice(d,d+e),g=b.encrypt(f);c=c.concat(g),d+=e}return c},b.encrypt=function(a){for(var c=aesjs.util.convertStringToBytes(a),d=16-c.length%16,e=0;e<d;e++)c.push(d);var f=new aesjs.ModeOfOperationCBC(b.pwdKey,b.pwdKey);return b.encryptByes(c,f)},b.removePadding=function(b){if(!b)throw new Error(a.Strings.Err_EncryptHelper_InputText_IsNull);if(0===b.length)throw new Error(a.Strings.Err_EncryptHelper_InputText_IsEmpty);var c=b.charCodeAt(b.length-1);if(c<1||c>16)throw new Error(a.Strings.Err_EncryptHelper_Invalid_Padding);if(b.length<=c)throw new Error(a.Strings.Err_EncryptHelper_Invalid_Padding);for(var d=0;d<c;d++){var e=b.length-1-d,f=b.charCodeAt(e);if(f!==c)throw new Error(a.Strings.Err_EncryptHelper_Inconsistent_Padding)}return b.substr(0,b.length-c)},b.decryptBytes=function(a,c){for(var d="",e=0;e<a.length;e+=16){var f=a.slice(e,e+16),g=c.decrypt(f),h=aesjs.util.convertBytesToString(g);d+=h}var i=b.removePadding(d);return i},b.decrypt=function(a){var c=new aesjs.ModeOfOperationCBC(b.pwdKey,b.pwdKey),d=b.decryptBytes(a,c);return d},b.encryptPassword=function(a){var c=b.encrypt(a);return b.arrayBufferToBase64(c)},b.decryptPassword=function(a){for(var c=base64.decode(a),d=[],e=0;e<c.length;e++)d.push(c.charCodeAt(e));return b.decrypt(d)},b.pwdKey=[25,100,45,85,89,1,35,78,9,43,2,125,15,47,13,11],b}();a.EncryptionHelper=b}(b=a.server||(a.server={}))}(ionweb||(ionweb={}));var jsuri;!function(a){function b(a){return a&&(a=a.toString().replace(e.pluses,"%20"),a=decodeURIComponent(a)),a}function c(a){var b=e.uri_parser,c=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],d=b.exec(a||""),f={};return c.forEach(function(a,b){f[a]=d[b]||""}),f}function d(a){var c,d,f,g,h,i,j,k=[];if("undefined"==typeof a||null===a||""===a)return k;for(0===a.indexOf("?")&&(a=a.substring(1)),d=a.toString().split(e.query_separator),c=0,j=d.length;c<j;c++)f=d[c],g=f.indexOf("="),0!==g&&(h=b(f.substring(0,g)),i=b(f.substring(g+1)),k.push(g===-1?[f,null]:[h,i]));return k}var e={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},f=function(){function a(a){this.uriParts=c(a),this.queryPairs=d(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}return a.prototype.accessValue=function(a,b){return"undefined"!=typeof b&&(this.uriParts[a]=b),this.uriParts[a]},a.prototype.protocol=function(a){return this.accessValue("protocol",a)},a.prototype.userInfo=function(a){return this.accessValue("userInfo",a)},a.prototype.host=function(a){return this.accessValue("host",a)},a.prototype.port=function(a){return this.accessValue("port",a)},a.prototype.path=function(a){return this.accessValue("path",a)},a.prototype.anchor=function(a){return this.accessValue("anchor",a)},a.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref},a.prototype.isColonUri=function(a){return"undefined"==typeof a?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!a)},a.prototype.query=function(a){var b,c,e,f="";for("undefined"!=typeof a&&(this.queryPairs=d(a)),b=0,e=this.queryPairs.length;b<e;b++)c=this.queryPairs[b],f.length>0&&(f+="&"),null===c[1]?f+=c[0]:(f+=c[0],f+="=","undefined"!=typeof c[1]&&(f+=encodeURIComponent(c[1])));return f.length>0?"?"+f:f},a.prototype.scheme=function(){var a="";return this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//"),a},a.prototype.origin=function(){var a=this.scheme();return this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@")),this.host()&&(a+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(a+=":"+this.port())),a},a.prototype.toString=function(){var a,b=this.origin();return this.isColonUri()?this.path()&&(b+=":"+this.path()):this.path()?(a=this.path(),e.ends_with_slashes.test(b)||e.starts_with_slashes.test(a)?(b&&b.replace(e.ends_with_slashes,"/"),a=a.replace(e.starts_with_slashes,"/")):b+="/",b+=a):this.host()&&(this.query().toString()||this.anchor())&&(b+="/"),this.query().toString()&&(b+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(b+="#"),b+=this.anchor()),b},a.prototype.clone=function(){return new a(this.toString())},a.prototype.setProtocol=function(a){return this.protocol(a),this},a.prototype.setHasAuthorityPrefix=function(a){return this.hasAuthorityPrefix(a),this},a.prototype.setIsColonUri=function(a){return this.isColonUri(a),this},a.prototype.setUserInfo=function(a){return this.userInfo(a),this},a.prototype.setHost=function(a){return this.host(a),this},a.prototype.setPort=function(a){return this.port(a),this},a.prototype.setPath=function(a){return this.path(a),this},a.prototype.setQuery=function(a){return this.query(a),this},a.prototype.setAnchor=function(a){return this.anchor(a),this},a}();a.Uri=f}(jsuri||(jsuri={}));var ionweb;!function(a){function b(a){var b=new jsuri.Uri(window.location);return b.setAnchor(""),b.setPath(a),b.toString()}function c(b){return a.clientRoot+b}function d(a){function b(a){return a?Array.isArray(a)?a:[a]:[]}return a.library&&(a.library.dependency&&a.library.dependency.dependentLibrary&&(a.library.dependency.dependentLibrary=b(a.library.dependency.dependentLibrary)),a.library.themeAdditions&&a.library.themeAdditions.themeAddition&&(a.library.themeAdditions.themeAddition=b(a.library.themeAdditions.themeAddition))),a}a.clientRoot=a.clientRoot||"/client/html5/",a.buildClientUri=b,a.buildRelativeClientUri=c,a.fixInfoDeserialization=d}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.IonDaemonPasswordChangeRequired=0]="IonDaemonPasswordChangeRequired",a[a.IonDaemonExpiredPasswordChangeRequired=1]="IonDaemonExpiredPasswordChangeRequired",a[a.IonDaemonExpiredAccount=2]="IonDaemonExpiredAccount",a[a.IonDaemonNewPasswordRejected=3]="IonDaemonNewPasswordRejected",a[a.IonDaemonDeniedRegistration=4]="IonDaemonDeniedRegistration",a[a.IonDaemonAlreadyLogged=5]="IonDaemonAlreadyLogged",a[a.ConcurrentLogin=6]="ConcurrentLogin",a[a.AlreadyLoggedIn=7]="AlreadyLoggedIn",a[a.IonDaemonDuplicatedUser=8]="IonDaemonDuplicatedUser",a[a.IonDaemonBadCredentials=9]="IonDaemonBadCredentials",a[a.UsernameNotFound=10]="UsernameNotFound",a[a.IonDaemonUnauthorizedUser=11]="IonDaemonUnauthorizedUser",a[a.IonDaemonAuthenticationMethodNotSupported=12]="IonDaemonAuthenticationMethodNotSupported",a[a.IonDaemonOtpRequired=13]="IonDaemonOtpRequired",a[a.IonDaemonWrongOtp=14]="IonDaemonWrongOtp",a[a.IonDaemonProtocolError=15]="IonDaemonProtocolError",a[a.IonDaemonLicenseUnavailable=16]="IonDaemonLicenseUnavailable",a[a.AccountExpired=17]="AccountExpired",a[a.CredentialsExpired=18]="CredentialsExpired",a[a.Disabled=19]="Disabled",a[a.IonDaemonDisabledUser=20]="IonDaemonDisabledUser",a[a.Locked=21]="Locked",a[a.SessionAlreadyAuthenticated=22]="SessionAlreadyAuthenticated",a[a.NotReady=23]="NotReady",a[a.AbsoluteTimeout=24]="AbsoluteTimeout",a[a.ExternalLogoutFunctionCall=25]="ExternalLogoutFunctionCall",a[a.InactivityTimeout=26]="InactivityTimeout",a[a.PlatformComponentDown=27]="PlatformComponentDown",a[a.UserRemoved=28]="UserRemoved",a[a.MinimumRequiredClientVersion=29]="MinimumRequiredClientVersion",a[a.UsernameTooLong=30]="UsernameTooLong",a[a.PasswordTooLong=31]="PasswordTooLong",a[a.NewPasswordTooLong=32]="NewPasswordTooLong",a[a.IonDaemonDisconnected=33]="IonDaemonDisconnected",a[a.IonDaemonPasswordPolicyAlreadyInHistory=34]="IonDaemonPasswordPolicyAlreadyInHistory",a[a.IonDaemonPasswordPolicyBadDiffUser=35]="IonDaemonPasswordPolicyBadDiffUser",a[a.IonDaemonPasswordPolicyBadMinAscii=36]="IonDaemonPasswordPolicyBadMinAscii",a[a.IonDaemonPasswordPolicyBadMinLength=37]="IonDaemonPasswordPolicyBadMinLength",a[a.IonDaemonPasswordPolicyBadMinLower=38]="IonDaemonPasswordPolicyBadMinLower",a[a.IonDaemonPasswordPolicyBadMinNumeric=39]="IonDaemonPasswordPolicyBadMinNumeric",a[a.IonDaemonPasswordPolicyBadMinSpecial=40]="IonDaemonPasswordPolicyBadMinSpecial",a[a.IonDaemonPasswordPolicyBadMinUpper=41]="IonDaemonPasswordPolicyBadMinUpper",a[a.IonDaemonPasswordPolicyBadSpecialOrDigit=42]="IonDaemonPasswordPolicyBadSpecialOrDigit",a[a.IonDaemonPasswordProtocolError=43]="IonDaemonPasswordProtocolError",a[a.IonDaemonPasswordPolicyInvalidChar=44]="IonDaemonPasswordPolicyInvalidChar",a[a.IonDaemonPasswordPolicyCustomError=45]="IonDaemonPasswordPolicyCustomError",a[a.ComponentNameTooLong=46]="ComponentNameTooLong",a[a.AuthenticationServiceError=47]="AuthenticationServiceError"}(b=a.PlatformError||(a.PlatformError={}));var c;!function(a){a[a.None=0]="None",a[a.Symmetric=1]="Symmetric"}(c=a.PasswordEncryptionMode||(a.PasswordEncryptionMode={}));var d=function(){function b(a,b,c,d,e){this.username=a,this.password=b,this.encryptionMode=c,this.otp=d,this.newPassword=e}return b.prototype.getLoginPars=function(b){var c=this.encryptionMode?this.password:a.server.EncryptionHelper.encryptPassword(this.password);b.username=this.username,b.password=c,b.encryptionmode="1",this.otp&&(b.otp=this.otp),this.newPassword&&(b.newpassword=a.server.EncryptionHelper.encryptPassword(this.newPassword))},b.prototype.verifyPassword=function(b){var c=this.encryptionMode?a.server.EncryptionHelper.encryptPassword(b):b;return this.password==c},b.prototype.canRetry=function(){return!!this.password},b}();a.LocalCredentials=d;var e=function(){function a(a,b){this.provider=a,this.username=b}return a.prototype.getLoginPars=function(a){},a.prototype.canRetry=function(){return!0},a}();a.KerberosCredentials=e;var f=function(){function a(a,b){this.username=a,this.idpName=b}return a.prototype.getLoginPars=function(a){},a.prototype.canRetry=function(){return!1},a}();a.IdpCredentials=f}(ionweb||(ionweb={})),function(a){var b;!function(a){a.IDP_FILTER_PREF_KEY="idp.filter",a.CLIENT_ID_PREF_KEY="auth.clientId",a.USERNAME_PREF_KEY="sdk.username"}(b=a.server||(a.server={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a,b,c,d){var e=this;this._duration=a,this._tickCallback=b,this._timeElapsedCallback=c,this._intervalService=d,this._timer=null;var f=function(){e._duration-=1e3,e._duration<=0?e.forceSessionElapsed():e._tickCallback()};this._timer=d(f,1e3)}return a.prototype.stop=function(){null!==this._timer&&(this._intervalService.cancel(this._timer),this._timer=null)},a.prototype.forceSessionElapsed=function(){this.stop(),this._timeElapsedCallback()},a.prototype.getRemainingTime=function(){return this._duration},a}(),c=function(){function a(a){this._intervalService=a,this._predefinedIntervals=[5e3,5e3,5e3,5e3,5e3,1e4,1e4,1e4,1e4,1e4,3e4],this._currentStage=0,this._serverRetryTime=null,this._currentSession=null}return a.prototype.jumpToNextInterval=function(){var a;return 0===this._currentStage&&this._serverRetryTime?(a=this._serverRetryTime,this._serverRetryTime=null):this._currentStage<this._predefinedIntervals.length?(a=this._predefinedIntervals[this._currentStage],this._currentStage++):a=this._predefinedIntervals[this._predefinedIntervals.length-1],a},a.prototype.startNextSession=function(a,c){var d=this,e=this.jumpToNextInterval(),f=function(){d.prepareNextSession(a,c),c()};return this._currentSession=new b(e,a,f,this._intervalService),e},a.prototype.stopSession=function(){this._currentSession.stop(),this._currentSession=null},a.prototype.isStarted=function(){return null!==this._currentSession},a.prototype.prepareNextSession=function(a,b){this._currentSession&&(this.stopSession(),this.startNextSession(a,b))},a.prototype.resetRetryTime=function(a){this._currentStage=0,this._serverRetryTime=a},a.prototype.tryNow=function(){this._currentSession&&(this.resetRetryTime(),this._currentSession.forceSessionElapsed())},a.prototype.getRemainingTime=function(){return this._currentSession?this._currentSession.getRemainingTime():0},a.prototype.start=function(a,b){this.stop();var c=this.startNextSession(a,b);return c},a.prototype.stop=function(){this._currentSession&&(this.stopSession(),this._currentStage=0)},a}();a.RetryService=c,a.module("ionwebServer").service("retryService",["ionweb.interval"],function(a){return new c(a)})}(ionweb||(ionweb={}));var xml2json;!function(a){var b;!function(a){a[a.ELEMENT_NODE=1]="ELEMENT_NODE",a[a.TEXT_NODE=3]="TEXT_NODE",a[a.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",a[a.COMMENT_NODE=8]="COMMENT_NODE",a[a.DOCUMENT_NODE=9]="DOCUMENT_NODE"}(b||(b={}));var c=function(){function a(a){this.config=a,this.ieparserErrorNsTested=!1,this.config=this.config||{},this.initConfigDefaults()}return a.prototype.initConfigDefaults=function(){void 0===this.config.escapeMode&&(this.config.escapeMode=!0),void 0===this.config.attributePrefix&&(this.config.attributePrefix="_"),this.config.arrayAccessForm=this.config.arrayAccessForm||"none",this.config.emptyNodeForm=this.config.emptyNodeForm||"text",void 0===this.config.enableToStringFunc&&(this.config.enableToStringFunc=!0),this.config.arrayAccessFormPaths=this.config.arrayAccessFormPaths||[],void 0===this.config.skipEmptyTextNodesForObj&&(this.config.skipEmptyTextNodesForObj=!0),void 0===this.config.stripWhitespaces&&(this.config.stripWhitespaces=!0),this.config.datetimeAccessFormPaths=this.config.datetimeAccessFormPaths||[],void 0===this.config.useDoubleQuotes&&(this.config.useDoubleQuotes=!1),this.config.xmlElementsFilter=this.config.xmlElementsFilter||[],this.config.jsonPropertiesFilter=this.config.jsonPropertiesFilter||[],void 0===this.config.keepCData&&(this.config.keepCData=!1)},a.prototype.getNodeLocalName=function(a){var b=a.localName;return null==b&&(b=a.baseName),null!=b&&""!=b||(b=a.nodeName),b},a.prototype.getNodePrefix=function(a){return a.prefix},a.prototype.checkInStdFiltersArrayForm=function(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(b,c,d))break}return e!=a.length},a.prototype.toArrayAccessForm=function(a,b,c){switch(this.config.arrayAccessForm){case"property":a[b]instanceof Array?a[b+"_asArray"]=a[b]:a[b+"_asArray"]=[a[b]]}!(a[b]instanceof Array)&&this.config.arrayAccessFormPaths.length>0&&this.checkInStdFiltersArrayForm(this.config.arrayAccessFormPaths,a,b,c)&&(a[b]=[a[b]])},a.prototype.fromXmlDateTime=function(a){var b=a.split(/[-T:+Z]/g),c=new Date(b[0],b[1]-1,b[2]),d=b[5].split(".");if(c.setHours(b[3],b[4],d[0]),d.length>1&&c.setMilliseconds(d[1]),b[6]&&b[7]){var e=60*b[6]+Number(b[7]),f=/\d\d-\d\d:\d\d$/.test(a)?"-":"+";e=0+("-"==f?-1*e:e),c.setMinutes(c.getMinutes()-e-c.getTimezoneOffset())}else a.indexOf("Z",a.length-1)!==-1&&(c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())));return c},a.prototype.checkFromXmlDateTimePaths=function(a,b,c){if(this.config.datetimeAccessFormPaths.length>0){var d=c.split(".#")[0];return this.checkInStdFiltersArrayForm(this.config.datetimeAccessFormPaths,a,b,d)?this.fromXmlDateTime(a):a}return a},a.prototype.checkXmlElementsFilter=function(a,c,d,e){return!(c==b.ELEMENT_NODE&&this.config.xmlElementsFilter.length>0)||this.checkInStdFiltersArrayForm(this.config.xmlElementsFilter,a,d,e)},a.prototype.parseDOMChildren=function(a,c){var d={};if(a.nodeType==b.DOCUMENT_NODE){for(var e=a.childNodes,f=0;f<e.length;f++){var g=e.item(f);if(g.nodeType==b.ELEMENT_NODE){var h=this.getNodeLocalName(g);d[h]=this.parseDOMChildren(g,h)}}return d}if(a.nodeType==b.ELEMENT_NODE){d.__cnt=0;for(var e=a.childNodes,f=0;f<e.length;f++){var g=e.item(f),h=this.getNodeLocalName(g);if(g.nodeType!=b.COMMENT_NODE){var i=c+"."+h;this.checkXmlElementsFilter(d,g.nodeType,h,i)&&(d.__cnt++,null==d[h]?(d[h]=this.parseDOMChildren(g,i),this.toArrayAccessForm(d,h,i)):(null!=d[h]&&(d[h]instanceof Array||(d[h]=[d[h]],this.toArrayAccessForm(d,h,i))),d[h][d[h].length]=this.parseDOMChildren(g,i)))}}for(var j=0;j<a.attributes.length;j++){var k=a.attributes.item(j);d.__cnt++,d[this.config.attributePrefix+k.name]=k.value}if(!this.config.ignorePrefix){var l=this.getNodePrefix(a);null!=l&&""!=l&&(d.__cnt++,d.__prefix=l)}return null!=d["#text"]&&(d.__text=d["#text"],d.__text instanceof Array&&(d.__text=d.__text.join("")),this.config.stripWhitespaces&&(d.__text=d.__text.trim()),delete d["#text"],"property"==this.config.arrayAccessForm&&delete d["#text_asArray"],d.__text=this.checkFromXmlDateTimePaths(d.__text,h,c+"."+h)),null!=d["#cdata-section"]&&(d.__cdata=d["#cdata-section"],delete d["#cdata-section"],"property"==this.config.arrayAccessForm&&delete d["#cdata-section_asArray"]),0==d.__cnt&&"text"==this.config.emptyNodeForm?d="":1==d.__cnt&&null!=d.__text?d=d.__text:1!=d.__cnt||null==d.__cdata||this.config.keepCData?d.__cnt>1&&null!=d.__text&&this.config.skipEmptyTextNodesForObj&&(this.config.stripWhitespaces&&""==d.__text||""==d.__text.trim())&&delete d.__text:d=d.__cdata,delete d.__cnt,!this.config.enableToStringFunc||null==d.__text&&null==d.__cdata||(d.toString=function(){return(null!=d.__text?d.__text:"")+(null!=d.__cdata?d.__cdata:"")}),d}if(a.nodeType==b.TEXT_NODE||a.nodeType==b.CDATA_SECTION_NODE)return a.nodeValue},a.prototype.getIeParserErrorNs=function(){if(!this.ieparserErrorNsTested){var a=new ionweb.XmlDomFactory.DOMParser;try{this.ieparsererrorNS=a.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(a){this.ieparsererrorNS=null}this.ieparserErrorNsTested=!0}return this.ieparsererrorNS},a.prototype.parseXmlString=function(a){var b=null;if(void 0===a)return b;if(ionweb.XmlDomFactory.DOMParser){var c=new ionweb.XmlDomFactory.DOMParser;try{b=c.parseFromString(a,"text/xml");var d=this.getIeParserErrorNs();null!=d&&b.getElementsByTagNameNS(d,"parsererror").length>0&&(b=null)}catch(a){b=null}}return b},a.prototype.xml2json=function(a){return this.parseDOMChildren(a)},a.prototype.xml_str2json=function(a){var b=this.parseXmlString(a);return null!=b?this.xml2json(b):null},a}();a.X2JS=c}(xml2json||(xml2json={}));var ionweb;!function(a){var b;!function(b){function c(a){return d.xml_str2json(a)}var d=new xml2json.X2JS({attributePrefix:"",escapeMode:!1,ignorePrefix:!0});b._xmlToJson=c;var e;!function(a){a[a.Core=0]="Core",a[a.Direct=1]="Direct",a[a.External=2]="External"}(e=b.WebRequestType||(b.WebRequestType={}));var f=function(){function a(a,b,c){this.logger=a,this.opts=b,this.headers={},this.defer=Q.defer(),this.reqBodySize=0,a.medium("WebReqOut",{url:b.url,details:c})}return a.prototype.onClone=function(){return new a(this.logger,this.opts)},a.prototype.clone=function(){var a=this.onClone();return a.headers=this.headers,a._data=this._data,a.defer=this.defer,a._forceXml=this._forceXml,a._forceJson=this._forceJson,a._forceRaw=this._forceRaw,a},a.prototype.data=function(a,b){return this.headers["Content-Type"]=b+"; charset=UTF-8",this._data=a,"string"==typeof a?this.reqBodySize=a.length:a instanceof File&&(this.reqBodySize=a.size),this},a.prototype.onSending=function(a){return{}},a.prototype.send=function(){var a=this.onSending(this);return a.skip||this.doRequest(a.query),this.defer.promise},a.prototype.forceJson=function(){return this._forceJson=!0,this.headers.Accept="application/json",this},a.prototype.forceXml=function(){return this._forceXml=!0,this.headers.Accept="application/xml",this},a.prototype.forceRaw=function(){return this._forceRaw=!0,this},a.prototype.rejectFromMsg=function(a,b){this.defer.reject({message:a,details:b})},a.prototype.rejectFromResponse=function(a){this.defer.reject({message:(a.status?a.status+": ":"")+(a.error||a.statusText),status:a.status,origResp:a})},a.prototype.addQueryParms=function(a,b){var c;return b&&(c=Object.getOwnPropertyNames(b).map(function(a){return a+"="+encodeURIComponent(b[a])}).join("&")),c&&(a+=a.indexOf("?")>=0?"&":"?",a+=c),a},a.prototype.directSend=function(a){this.doRequest(a)},a.prototype.buildResp=function(a,d){var e=null,f=null;d=d||200!==a.status;try{var g=a.getResponseHeader("Content-Type"),h=a.getResponseHeader("Content-Length"),i=a.responseText,j=h&&Number(h)||i&&i.length||0,k=(b.trackCall(this.opts.category,1,this.reqBodySize,j),!1);if(!this._forceRaw||d)if(g&&0===g.search(/application\/json/)||this._forceJson&&!d&&!this.acceptBothJsonXml)this.logger.medium("WebReqIn",{url:this.opts.url,type:"json"}),e=JSON.parse(i);else if(g&&0===g.search(/application\/xml/)||this._forceXml&&!d&&!this.acceptBothJsonXml){this.logger.medium("WebReqIn",{url:this.opts.url,type:"xml"});var l=c(i);if(!l)throw new Error("XML parse error");e=l}else k=!0;else k=!0;k&&(this.logger.medium("WebReqIn",{url:this.opts.url,type:"raw"}),e=i)}catch(a){f=a&&a.message||JSON.stringify(a)}return{data:e,error:f,status:a.status,statusText:a.statusText,headers:function(b){return a.getResponseHeader(b)},config:this}},a.prototype.doRequest=function(a){var c=this,d=this.addQueryParms(this.opts.url,a),e=new XMLHttpRequest;e.open(this.opts.method,d,!0),Object.keys(this.headers).forEach(function(a){return e.setRequestHeader(a,c.headers[a])});var f=Q.defer();e.onload=function(){try{var a=c.buildResp(e,!1);a.error?f.reject(a):f.resolve(a)}catch(a){f.reject(a)}},e.onerror=function(){try{f.reject(c.buildResp(e,!0))}catch(a){f.reject(a)}},e.ontimeout=function(){try{f.reject(c.buildResp(e,!0))}catch(a){f.reject(a)}},e.withCredentials=!0,e.send(this._data),f.promise.then(function(a){c.opts.type!==b.WebRequestType.External&&a.data.RequestError||200!==a.status?c.processRequestError(a):c.defer.resolve(a)},function(a){c.processRequestError(a)})},a.prototype.processRequestError=function(a){this.logger.low("ServerCallFail",{url:this.opts.url,status:a.status,statusText:a.statusText}),this.rejectFromResponse(a)},a}();b.WebRequest=f;var g=function(){function a(a){this.ionLogger=a.create("RestSvc")}return a.prototype.extget=function(a,b){return new f(this.ionLogger,{url:a,method:"GET",type:e.External,category:b&&b.category})},a}();b.RestService=g,a.module("ionwebServer").service("restService",["ionweb.loggerFactory"],function(a){return new g(a)})}(b=a.rest||(a.rest={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a){return a&&a.type.toLowerCase()===b.IDP_TYPE_KERBEROS}function d(b){var d={idpConfig:{allowClassicLogin:!0,providers:[]}};if(b){d.currentIdpName=b.AuthenticationStatus.chosenIdpUniqueName;var e=b.AuthenticationStatus.userName&&b.AuthenticationStatus.userName.__text||b.AuthenticationStatus.userName;if(d.currentIdpName)d.credentials=new a.IdpCredentials(e,d.currentIdpName);else{d.isLocal=!0;var g=b.AuthenticationStatus.encryptionMode;"string"==typeof g&&(g=Number(g),isNaN(g)&&(g=1)),d.credentials=new a.LocalCredentials(e,b.AuthenticationStatus.pwd,g,b.otp)}if(d.heartbeat=b.HeartBeatConfiguration.heartbeatIntervalMs,d.isAuthenticated="AUTHENTICATED"===b.AuthenticationStatus.status,d.isKilled="SESSION_KILLED"===b.AuthenticationStatus.status,d.redirectTo=b.AuthenticationStatus.redirectUrl,d.sid=b.SessionInformation.id,d.source=b.SessionInformation.serverSource,d.getSessionInfoMetadata=function(a){return b.SessionInformation[a]},b.StreamingConfiguration){var i,j=b.StreamingConfiguration.Hosts,k=Array.isArray(j.Host)?j.Host[0]:j.Host;i=k.serverUrl?k.serverUrl:k.protocol+"://"+k.hostname+":"+k.port+k.path,d.streamingData={url:i,component:b.AuthenticationStatus.ionBusComponentName,token:b.AuthenticationStatus.ionBusToken}}d.isKilled&&(d.error=b.AuthenticationStatus.killedReason),b.SessionInformation.sessionSeqNum&&(d.sessionSeqNum=Number(b.SessionInformation.sessionSeqNum)),d.statime=0,b.SessionInformation.statime&&(d.statime=Number(b.SessionInformation.statime)),(!d.statime||d.statime<0)&&(d.statime=h),d.idpConfig.allowClassicLogin=!b.hasOwnProperty("AuthenticationMethods"),b.AuthenticationMethods&&Object.keys(b.AuthenticationMethods).forEach(function(a){switch(a){case"UserPasswordAuthentication":d.idpConfig.allowClassicLogin=!0;break;case"IdpAuthentication":var e=f(b.AuthenticationMethods.IdpAuthentication);d.idpConfig.providers=e.map(function(a){var b=a.IdpConfiguration;return delete a.IdpConfiguration,a.metadata=JSON.parse(b.__text),a.canAutologin=c(a),a}),d.idpConfig.providers=e}})}return d}function e(){return{message:b.Strings.Msg_Cannot_Connect_To_IONWEBServer}}function f(a){return a?Array.isArray(a)?a:[a]:[]}function g(a,b){for(var c=f(a),d=c.length,e=0;e<d;e++)if(!b(c[e]))return}var h=60;b.IDP_TYPE_KERBEROS="kerberos",b.IDP_TYPE_SAML2="saml2",b.IDP_TYPE_WSFED="ws-fed",b.isKerberos=c;var i;!function(a){a[a.KILLED_BY_ADMIN=0]="KILLED_BY_ADMIN",a[a.EXT_LOGOUT_FC=1]="EXT_LOGOUT_FC",a[a.INACTIVITY_TIMEOUT=2]="INACTIVITY_TIMEOUT",a[a.APPLICATION_TIMEOUT=3]="APPLICATION_TIMEOUT",a[a.PLATFORM_COMPONENT_DOWN=4]="PLATFORM_COMPONENT_DOWN",a[a.PLATFORM_USER_REMOVED=5]="PLATFORM_USER_REMOVED",a[a.LOGOUT=6]="LOGOUT",a[a.EXPIRATION_DATE=7]="EXPIRATION_DATE"}(i||(i={}));var j=function(a){function b(b,c,d,e){var f=a.call(this,c,d,e)||this;return f.owner=b,f.details=e,f}return __extends(b,a),b.prototype.onClone=function(){var a=new b(this.owner,this.logger,this.opts,this.details);return a.inRetry=this.inRetry,a.skipInRetry=this.skipInRetry,a},b.prototype.skipInRetry=function(){return this.skipRetry=!0,this},b.prototype.onSending=function(a){return this.owner.onSend(a)},b.prototype.processRequestError=function(b){this.owner.processRequestError(this,b)&&a.prototype.processRequestError.call(this,b)},b.prototype.forceJson=function(){return a.prototype.forceJson.call(this),this.headers.Accept="application/json,application/xml;q=0.4",this.acceptBothJsonXml=!0,this},b}(a.rest.WebRequest);b.ServerWebRequest=j;var k=function(){function c(b,c,d,e,f,g,h,i,j,k){var l=this;this.configurationService=b,this.ionLoggerFactory=d,this._notification=e,this._idpService=f,this.retryService=g,this.environmentService=h,this.restService=i,this.localPreferenceService=j,this.multitenancyService=k,this.supportedUserActionChanged=new a.Event,this.statusChanged=new a.Event,this.serverModuleInfoChanged=new a.Event,this._serverVersion=null,this._serverPlatformId=null,this.connectionRetryInProgress=new a.Event,this.loggingOut=new a.Event,this.loggedOut=!1,this.logger=d.create("ServerService");var m=b.config.shell;this._rootContext=m.serverBase.trim(),this._ionExcHelper=c,this.resetState(),this.setUserActive(),this.raiseServerModuleInfoChanged(),this._idpService.newSessionStatusNeeded&&this._idpService.newSessionStatusNeeded.add(function(){l.getStatus().then(function(a){})}),this._idpService.getLoginPars&&this._idpService.getLoginPars.add(function(a,b){l.getLoginPars(b)}),b.changed.add(function(){var a=b.config.shell;l._rootContext=a.serverBase.trim()}),"/"!==this._rootContext.charAt(this._rootContext.length-1)&&(this._rootContext=this._rootContext+"/"),this.setConnectionStatus(a.ServiceStatus.Disconnected);var n=this.statusChanged.add(function(b,c){c&&c.isAuthenticated&&(d.attachRemoteLogger(new a.logging.RemoteLogSink(l,l.getInstanceId())).done(),n())});this._notification.addServiceForOffline(this.serviceStatusName)}return c.prototype.resetState=function(){this.isFaultedErr=null,this._isInErrorRetry=!1,this.stopReconnectionTimer(),this.statime=h,this.sessionSeqNum=0,this.credentials=null,this.heartbeatPeriod=0,null!==this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null),this.enqueuedCalls=[],this.sid=null},c.prototype.getLocalCredentials=function(){return this.credentials instanceof a.LocalCredentials?this.credentials:null},c.prototype.setLocalCredentials=function(a){this.credentials=a},c.prototype.installReconnectTimer=function(a,b){var c=this;a=a||this.credentials,this.canAutoretry=a&&a.canRetry()&&(!this._idpService.currentIdp||this._idpService.currentIdp.canAutologin);var d=function(){c.getStatus().then(function(b){b.isAuthenticated?c.enterNormal(b):c.canAutoretry?c.sendLogin(a,!1).then(function(a){c.enterNormal(a)},function(a){c.raiseStatusChanged(a.loginStatus)}):c.raiseStatusChanged(b)},function(){c.raiseStatusChanged(null)})},e=function(){c.connectionRetryInProgress.raise(c,{remMs:0}),d()};if(!this.retryService.isStarted()){var f=this.retryService.start(function(){var a=c.retryService.getRemainingTime();c.connectionRetryInProgress.raise(c,{remMs:a,tryNow:function(){c.logger.high("ReconnectTimer",{action:"tryNow"}),c.retryService.tryNow()}})},function(){e()});this.logger.high("ReconnectTimer",{action:"start",period:f.toString()}),b&&d()}},c.prototype.stopReconnectionTimer=function(){
this.retryService.isStarted()&&(this.logger.high("ReconnectTimer",{action:"stop"}),this.retryService.stop())},c.prototype.startHbTimer=function(a,b){a!=this.heartbeatPeriod&&null!=this.heartbeatTimer&&(this.logger.high("HbTimer",{action:"stop"}),clearInterval(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatPeriod=a,null==this.heartbeatTimer&&(this.logger.high("HbTimer",{action:"start",period:this.heartbeatPeriod.toString()}),this.heartbeatTimer=setInterval(b,this.heartbeatPeriod))},c.prototype.setUserActive=function(){this._userActive=!0},Object.defineProperty(c.prototype,"rootContext",{get:function(){return this._rootContext},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"serviceModuleName",{get:function(){return c.Server_Module_Component_Name},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"serviceModuleDisplayName",{get:function(){return b.Strings.Component_DisplayName_Server},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"serviceStatusName",{get:function(){return c.Server_Status_Component_Name},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ionBusComponentName",{get:function(){return this._ionBusComponentName},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"serverComponentName",{get:function(){return this._serverComponentName},enumerable:!0,configurable:!0}),c.prototype.getServerSessionID=function(){return this.sid},Object.defineProperty(c.prototype,"userActionSupported",{get:function(){return this._supportedUserActions},enumerable:!0,configurable:!0}),c.prototype.xmlToJson=function(b){return a.rest._xmlToJson(b)},c.prototype.onSend=function(c){if(this.isInFaultedState()){var d=new Error(b.Strings.Err_ServerConnection_FaultedState_PleaseRefresh);return this._ionExcHelper.log(d),c.rejectFromMsg(d.message),{skip:!0}}return this._isInErrorRetry&&c.opts.type===a.rest.WebRequestType.Core?(this.enqueueCall(c)||c.rejectFromMsg(b.Strings.Msg_Cannot_Connect_To_IONWEBServer,b.Strings.Err_Details_InErrorRerty),{skip:!0}):{query:c.opts.type!==a.rest.WebRequestType.External&&{instanceid:this.ionLoggerFactory.clientInstanceId}}},c.isAbsoluteUrl=function(a){var b=new RegExp("^(?:[a-z]+:)?//","i");return b.test(a)||/^\//.test(a)},c.prototype.processRequestError=function(c,d){if(c.opts.type!==a.rest.WebRequestType.Core)return!0;if(c.inRetry)return this.logger.low("SecondChanceReq",{url:c.opts.url}),this.enterFaultState(b.Strings.Err_FaultState_SecondChance_error,b.Strings.Err_FaultState_SecondChance_details),c.rejectFromMsg(this.isFaultedErr+"\n"+this.isFaultedDetails),!1;var e=void 0;return this.isLoggedIn()&&!this.isError4XX(d.status)?(this.enterErrorRetry(c.opts.url),this.installReconnectTimer(null,!0),e=this.enqueueCall(c)):e=!1,!e},c.prototype.isError4XX=function(a){return a>=400&&a<500},c.prototype.createBuilder=function(b,d,e){var f=c.isAbsoluteUrl(b);f||(b=this._rootContext+b);var g=f?a.rest.WebRequestType.External:e&&e.direct?a.rest.WebRequestType.Direct:a.rest.WebRequestType.Core;return new j(this,this.logger,{url:b,method:d,type:g,category:e&&e.category},e&&e.details)},c.prototype.get=function(a,b){return this.createBuilder(a,"GET",b)},c.prototype.post=function(a,b){return this.createBuilder(a,"POST",b)},c.prototype.put=function(a,b){return this.createBuilder(a,"PUT",b)},c.prototype.extget=function(a,b){return this.restService.extget(a,b)},c.prototype.isLoggedIn=function(){return!!this.credentials},c.prototype.getLastLoginStatus=function(){return this._lastLoginStatus},c.prototype.isNotAutoRecoverable=function(a){return"IonDaemonBadCredentials"===a||"IonDaemonDisabledUser"===a||"IonDaemonExpiredAccount"===a||"IonDaemonExpiredPasswordChangeRequired"===a||"IonDaemonPasswordChangeRequired"===a||"IonDaemonNewPasswordRejected"===a||"UsernameTooLong"===a||"PasswordTooLong"===a||"NewPasswordTooLong"===a||"ComponentNameTooLong"===a||"MinimumRequiredClientVersion"===a||"IonDaemonLicenseUnavailable"===a||"SessionAlreadyAuthenticated"===a},c.prototype.enterFaultState=function(c,d,e){this.logger.low("FaultState",{err:c,details:d}),this.isFaultedErr=c,this.isFaultedDetails=d,this.enqueuedCalls.forEach(function(a){a.rejectFromMsg(c,d)}),this.enqueuedCalls=[],this._notification.currentFatalError()||e||this._notification.showFatal(a.stringFormat(b.Strings.Err_FaultState_Msg,{err:c,details:d}),b.Strings.Err_FaultState_Title)},Object.defineProperty(c.prototype,"notificationStatus",{get:function(){return this._notificationStatus},enumerable:!0,configurable:!0}),c.prototype.setConnectionStatus=function(a){this._notificationStatus=a,this._notification.status(this.serviceStatusName,a,null,this.serviceModuleDisplayName)},c.prototype.tryRetrievePlatformId=function(){var b=this;this._serverPlatformId||this.get(c.PLATFORM_DETAILS_GET_ENDPOINT,{direct:!0,category:a.rest.SESSION_CATEGORY}).forceJson().send().then(function(a){var c=a.data;b._serverPlatformId=c,b.logger.low("Retrieved Platform Details from server",{response:c})},function(a){b._serverPlatformId={},b.logger.low("Server does not support platform details retrieval")})},Object.defineProperty(c.prototype,"serverPlatformId",{get:function(){return this._serverPlatformId},enumerable:!0,configurable:!0}),c.prototype.raiseStatusChanged=function(b,c){var d,e=this;this._isDisconneted?(d=a.ServiceStatus.Disconnected,this._serverVersion=null):this._isInErrorRetry||b&&!b.isAuthenticated?(d=a.ServiceStatus.Connecting,this._serverVersion=null):(d=a.ServiceStatus.Connected,this.tryRetrievePlatformId()),b&&b.error===a.PlatformError[a.PlatformError.IonDaemonWrongOtp]&&(this.logger.low("OTPRequired",{reason:b}),this.stopReconnectionTimer()),this.setConnectionStatus(d);try{this.statusChanged.raise(this,b)}catch(a){this._ionExcHelper.report(a)}return this._lastLoginStatus=b,(b&&b.delayReload||Q.when(null)).then(function(){c&&b&&e.processRedirect(b)})},c.prototype.raiseServerModuleInfoChanged=function(){var a={name:this.serviceModuleName,displayName:this.serviceModuleDisplayName,version:this._serverVersion?this._serverVersion.toInternalIonString():"Unknown",serverComponentName:this._serverComponentName};this.serverModuleInfoChanged.raise(this,a)},c.parseServerExc=function(a){function b(a){return a.element.map(function(a){return(a.declaringClass||"<noclass>")+"."+(a.methodName||"")+": "+(a.lineNumber||-1)})}var c,d=a.RequestError&&a.RequestError.Exception;c=d?{errorType:a.RequestError.errorType,class:d.exceptionClass,message:d.message,stackTrace:b(d.StackTrace)}:{message:a.RequestError&&a.RequestError.message||a,errorType:a.RequestError&&a.RequestError.errorType};var e="["+c.errorType+"]: "+c.message;return c.class&&(e+=": "+c.class),c.stackTrace&&(e+="\nStack:\n"+c.stackTrace.join("\n")),e},c.prototype.enterErrorRetry=function(a){this._isInErrorRetry||(this.logger.low("EnterErrorRetry",{url:a}),this._isInErrorRetry=!0,this.raiseStatusChanged(null))},c.prototype.enqueueCall=function(a){if(a.skipRetry)return!1;var b=a.clone();return b.inRetry=!0,this.enqueuedCalls.push(b),!0},c.prototype.enterNormal=function(b){var c=this;this.logger.low("NormalState"),this.stopReconnectionTimer(),this._isInErrorRetry=!1,this.enqueuedCalls.forEach(function(b){b.directSend(b.opts.type!==a.rest.WebRequestType.External&&{instanceid:c.ionLoggerFactory.clientInstanceId})}),this.enqueuedCalls=[],this.raiseStatusChanged(b)},c.prototype.getUserName=function(){return this.credentials&&this.credentials.username},c.prototype.getBareUserName=function(){return this.multitenancyService.fromBusUsername(this.getUserName()).user},c.prototype.getClientId=function(){return this.multitenancyService.fromBusUsername(this.getUserName()).clientId},c.prototype.parseStatus=function(c,e){var f=this,g=d(c),h=function(){c.LoginRequestOutcome&&(g.error=c.LoginRequestOutcome.loginOutcome,g.customErrMsg=c.LoginRequestOutcome.customErrMsg,"IonDaemonPasswordChangeRequired"!==g.error&&"IonDaemonExpiredPasswordChangeRequired"!==g.error||(g.changePassword=!0),c.LoginRequestOutcome.RetryIn&&f.retryService.resetRetryTime(c.LoginRequestOutcome.RetryIn))};this._idpService.update(g);var j=!1;if(g.isAuthenticated){var k=this.credentials;if(k&&k.username!==g.credentials.username)return g.error=b.Strings.Err_Server_DifferentUser,g.isAuthenticated=!1,this.enterFaultState(g.error,a.stringFormat(b.Strings.Err_Server_DifferentUser_Details,{user:g.credentials.username})),g;this.credentials=g.credentials,this.sid=g.sid,this.statime=g.statime,this.sessionSeqNum=g.sessionSeqNum,this._ionBusComponentName=c.AuthenticationStatus&&c.AuthenticationStatus.ionBusComponentName,this._source=g.source;this._serverComponentName;this._serverComponentName=c.SessionInformation&&c.SessionInformation.serverComponentName;var l=g.heartbeat;(!l||l<1e3)&&(l=1e3),this.startHbTimer(l,function(){if(!f._isInErrorRetry){var b=f.sessionSeqNum;f.post("r/session/heartbeat?userActivity="+f._userActive.toString()+"&sessionSeqNum="+b,{category:a.rest.SESSION_CATEGORY}).data("sessionid="+f.sid,"application/x-www-form-urlencoded").skipInRetry().send(),f._userActive=!1}}),this._getServerVersion(!0).then(function(){return null},function(){return null}).then(function(){f.raiseServerModuleInfoChanged(),e&&f.raiseStatusChanged(g)});var m={changePassword:!1};if(c.SupportedUserAuthenticationActions){var n=[],o=c.SupportedUserAuthenticationActions;o instanceof Array?n=o:n.push(o),m={changePassword:!1};for(var p=0;p<n.length;p++){var q=n[0];"ChangePassword"==q.SupportedUserAuthenticationAction.action&&(m.changePassword=!0)}}this._supportedUserActions=m,this.supportedUserActionChanged.raise(this,m)}else if(g.isKilled){var r=i[g.error];r!==i.EXPIRATION_DATE?(this.enterFaultState(this.getFatalErrorMessage(r)||g.error,b.Strings.Err_Server_Details_Kill),j=!1):j=!0}else j=!0;return!g.redirectTo&&j&&h(),g},c.prototype.processRedirect=function(a){a.redirectTo?this.environmentService.reload(a.redirectTo):a.isLogout&&this.environmentService.reload()},c.prototype.getFatalErrorMessage=function(a){switch(a){case i.KILLED_BY_ADMIN:return b.Strings.Err_Kill_KILLED_BY_ADMIN;case i.EXT_LOGOUT_FC:return b.Strings.Err_Kill_EXT_LOGOUT_FC;case i.INACTIVITY_TIMEOUT:return b.Strings.Err_Kill_INACTIVITY_TIMEOUT;case i.APPLICATION_TIMEOUT:return b.Strings.Err_Kill_APPLICATION_TIMEOUT;case i.PLATFORM_COMPONENT_DOWN:return b.Strings.Err_Kill_PLATFORM_COMPONENT_DOWN;case i.PLATFORM_USER_REMOVED:return b.Strings.Err_Kill_PLATFORM_USER_REMOVED;case i.LOGOUT:return b.Strings.Err_Kill_LOGOUT;case i.EXPIRATION_DATE:return b.Strings.Err_Kill_EXPIRATION_DATE}return null},c.prototype.mapError=function(c,d){switch(c){case a.PlatformError[a.PlatformError.IonDaemonPasswordChangeRequired]:return b.Strings.Err_Password_MustBe_Changed;case a.PlatformError[a.PlatformError.IonDaemonExpiredPasswordChangeRequired]:return b.Strings.Err_Expired_Password_MustBe_Changed;case a.PlatformError[a.PlatformError.IonDaemonExpiredAccount]:return b.Strings.Err_Expired_Account;case a.PlatformError[a.PlatformError.IonDaemonNewPasswordRejected]:return b.Strings.Err_New_Password_NotValid;case a.PlatformError[a.PlatformError.IonDaemonDeniedRegistration]:return b.Strings.Err_Registration_Denied;case a.PlatformError[a.PlatformError.IonDaemonAlreadyLogged]:return b.Strings.Err_ComponentName_Is_Already_InUse;case a.PlatformError[a.PlatformError.ConcurrentLogin]:case a.PlatformError[a.PlatformError.AlreadyLoggedIn]:case a.PlatformError[a.PlatformError.IonDaemonDuplicatedUser]:return b.Strings.Err_User_Is_AlreadyLogged;case a.PlatformError[a.PlatformError.IonDaemonBadCredentials]:return d?b.Strings.Err_IncorrectOldPassword:b.Strings.Err_Bad_UserOrPassword;case a.PlatformError[a.PlatformError.IonDaemonUnauthorizedUser]:return b.Strings.Err_IonDaemonUnauthorizedUser;case a.PlatformError[a.PlatformError.IonDaemonAuthenticationMethodNotSupported]:return b.Strings.Err_IonDaemonAuthenticationMethodNotSupported;case a.PlatformError[a.PlatformError.IonDaemonOtpRequired]:return b.Strings.Err_IonDaemonOtpRequired;case a.PlatformError[a.PlatformError.IonDaemonWrongOtp]:return b.Strings.Err_IonDaemonWrongOtp;case a.PlatformError[a.PlatformError.IonDaemonProtocolError]:return b.Strings.Err_IonDaemonProtocolError;case a.PlatformError[a.PlatformError.UsernameNotFound]:return b.Strings.Err_Bad_UserOrPassword;case a.PlatformError[a.PlatformError.IonDaemonLicenseUnavailable]:return b.Strings.Err_MissingLicense;case a.PlatformError[a.PlatformError.AccountExpired]:return b.Strings.Err_AccountExpired;case a.PlatformError[a.PlatformError.CredentialsExpired]:return b.Strings.Err_PasswordExpired;case a.PlatformError[a.PlatformError.Disabled]:return b.Strings.Err_AccountDisabled;case a.PlatformError[a.PlatformError.IonDaemonDisabledUser]:return b.Strings.Err_User_AccountDisabled;case a.PlatformError[a.PlatformError.Locked]:return b.Strings.Err_AccountLocked;case a.PlatformError[a.PlatformError.SessionAlreadyAuthenticated]:return b.Strings.Err_SessionAlready_Authenticated_Please_LogOut;case a.PlatformError[a.PlatformError.NotReady]:return b.Strings.Err_Server_IsNot_Ready;case a.PlatformError[a.PlatformError.AbsoluteTimeout]:return b.Strings.Err_Session_Expired;case a.PlatformError[a.PlatformError.ExternalLogoutFunctionCall]:return b.Strings.Err_SessionKilled_ByThe_Server;case a.PlatformError[a.PlatformError.InactivityTimeout]:return b.Strings.Err_SessionExpired_DueTo_Inactivity;case a.PlatformError[a.PlatformError.PlatformComponentDown]:return b.Strings.Err_SessionKilled_ByThe_Platform;case a.PlatformError[a.PlatformError.UserRemoved]:return b.Strings.Err_User_HasBeen_Removed_FromServer;case a.PlatformError[a.PlatformError.MinimumRequiredClientVersion]:return b.Strings.Err_ClientVersion_DoesNot_MeetRequirement;case a.PlatformError[a.PlatformError.UsernameTooLong]:return b.Strings.Err_Username_Is_Too_Long;case a.PlatformError[a.PlatformError.PasswordTooLong]:return b.Strings.Err_Password_Is_Too_Long;case a.PlatformError[a.PlatformError.NewPasswordTooLong]:return b.Strings.Err_New_Password_Is_Too_Long;case a.PlatformError[a.PlatformError.IonDaemonDisconnected]:return b.Strings.Err_DaemonDisconnected;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyAlreadyInHistory]:return b.Strings.Err_PasswordAlreadyInHistory;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadDiffUser]:return b.Strings.Err_PasswordSameAsUser;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinAscii]:return b.Strings.Err_PasswordFewASCIIChars;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinLength]:return b.Strings.Err_PasswordTooShort;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinLower]:return b.Strings.Err_PasswordFewLowerLetters;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinNumeric]:return b.Strings.Err_PasswordFewDigits;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinSpecial]:return b.Strings.Err_PasswordFewSpecialChars;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadMinUpper]:return b.Strings.Err_PasswordFewUpperLetters;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyBadSpecialOrDigit]:return b.Strings.Err_PasswordFewDigitsSpecialChars;case a.PlatformError[a.PlatformError.IonDaemonPasswordProtocolError]:return b.Strings.Err_PasswordProtocolError;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyInvalidChar]:return b.Strings.Err_PasswordInvalidChars;case a.PlatformError[a.PlatformError.IonDaemonPasswordPolicyCustomError]:return b.Strings.Err_PasswordCustomPolicyError;case a.PlatformError[a.PlatformError.ComponentNameTooLong]:return b.Strings.Err_ComponentNameTooLong;case a.PlatformError[a.PlatformError.AuthenticationServiceError]:return b.Strings.Err_AuthenticationServiceError;default:return c}},c.prototype.getLoginPars=function(b){b.clientKey="html5",this.configurationService.loginConfiguration.isHybrid&&(b.hybrid="true"),this.configurationService.loginConfiguration.deviceType&&(b.deviceType=this.configurationService.loginConfiguration.deviceType),this.configurationService.loginConfiguration.deviceSpecs&&(b.deviceSpecs=JSON.stringify(this.configurationService.loginConfiguration.deviceSpecs));var c=function(b){var c=b&&a.IonVersion.fromModuleVersion(b);return c&&c.toJavaString()||""};if(b.clientAPIVersion=c(a.Version),b.clientAppVersion=c(this.configurationService.config.shell.appVersion),this.addLoginParm){var d=this.addLoginParm();d&&d.key&&d.value&&(b[d.key]=d.value)}},c.prototype.createLoginError=function(a){return{message:a.customErrMsg||a.error,changePassword:a.changePassword,loginStatus:a}},c.prototype.loginWithOTP=function(a){var b=this;this.logger.low("AuthenticatingOTP",{action:"loginWithOTP"});var c=this.credentials;return c.otp=a,this.sendLogin(c,!1).then(function(a){return b.enterNormal(a),a},function(a){return b.raiseStatusChanged(a.loginStatus),a.loginStatus})},c.prototype.sendLogin=function(b,c,d){var f=this;this._isDisconneted=!1,this.setConnectionStatus(a.ServiceStatus.Connecting);var g={};this.getLoginPars(g),b.getLoginPars(g);var h=Object.getOwnPropertyNames(g).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(g[a])}),i=b instanceof a.KerberosCredentials?b.provider.replyUrl:"loginservice";return this.post(i,{direct:!0,category:a.rest.SESSION_CATEGORY}).data(h.join("&"),"application/x-www-form-urlencoded").send().then(function(a){if(!a||!a.data||!a.data.LoginStatus)throw e();var g=f.parseStatus(a.data.LoginStatus,!0);if(!g.isAuthenticated)throw c?"MinimumRequiredClientVersion"===g.error&&f.enterFaultState(f.mapError(g.error),"",d):(f.stopReconnectionTimer(),f.isNotAutoRecoverable(g.error)?f.enterFaultState(f.mapError(g.error),"",d):f.installReconnectTimer(b,!1)),f.createLoginError(g);return f.raiseStatusChanged(g),g})},c.prototype.verifyLoggedIn=function(){var c=this;return this._isDisconneted=!1,this.setConnectionStatus(a.ServiceStatus.Connecting),this.getStatus().then(function(a){if(!a.isAuthenticated)throw new Error(b.Strings.Err_Cannot_Authenticate);c.enterNormal(a)})},c.prototype.getStatus=function(c){var d=this;"undefined"==typeof c&&(c=!0);var f="r/session/status",g=[];this.sid&&g.push("sessionid="+this.sid);var h=this.localPreferenceService.getValue(b.IDP_FILTER_PREF_KEY);return h&&(f+="?idp="+h),this.post(f,{direct:!0,category:a.rest.SESSION_CATEGORY}).data(g.join("&"),"application/x-www-form-urlencoded").send().then(function(a){if(null!=a&&a.data&&a.data.LoginStatus){var b=d.parseStatus(a.data.LoginStatus,c);return c&&d.raiseStatusChanged(b,c),b}throw e()})},c.prototype.isInErrorRetry=function(){return this._isInErrorRetry},c.prototype.isInFaultedState=function(){return null!==this.isFaultedErr},c.prototype.logout=function(b){var c=this;this.logger.low("Logout",{reason:b});var d=this.isLoggedIn();return d?(this.loggedOut=!0,this.loggingOut.raise(this,null),this.resetState(),this._isDisconneted=!0,this.post("logout",{direct:!0,category:a.rest.SESSION_CATEGORY}).send().then(function(a){if(a.data&&a.data.LoginStatus){var b=c.parseStatus(a.data.LoginStatus,!0);return b.isLogout=!0,c.raiseStatusChanged(b,!0)}throw{error:a,changePassword:!1}},function(){return null}),void 0):Q.when()},c.prototype.getInstanceId=function(){return this.ionLoggerFactory.clientInstanceId},c.prototype.fetchModuleList=function(){var c=this,d="r/modules/list?moduleType=html5";return this.post(d,{category:a.rest.SESSION_CATEGORY}).send().then(function(d){if(!d||!d.data||!d.data.ClientModulesResponse||"SUCCESS"!==d.data.ClientModulesResponse.Outcome)throw new Error(b.Strings.Err_Failed_FetchModuleList);var e=[];return g(d.data.ClientModulesResponse.ClientModulesList,function(b){return g(b.Module,function(b){return b.Info&&b.Info.info?(e.push({info:a.fixInfoDeserialization(b.Info.info),rootModule:"true"===b.rootModule,url:b.url,overriddenParameters:f(b.OverriddenParameters.Parameter),isRemote:!0}),!0):(c.logger.low("SkipMod",{name:b.name,reason:"no info"}),!0)}),!0}),e})},c.prototype.getServerSource=function(){return this._source},c.prototype._getServerVersion=function(c){var d=this,e="r/server/version";return this.post(e,{direct:c,category:a.rest.SESSION_CATEGORY}).send().then(function(c){if(!c||!c.data)throw new Error(b.Strings.Err_Failed_FetchServer_Info);return d._serverVersion=a.IonVersion.fromIonString(c.data),d._serverVersion},function(){return d._serverVersion=null})},c.prototype.getServerVersion=function(){return this._serverVersion?Q.when(this._serverVersion):this._getServerVersion(!1)},c.prototype.verifyPassword=function(a){var b=this.getLocalCredentials();return b&&b.verifyPassword(a)},c.prototype.isLocalAuthenticationMode=function(){return!!this.getLocalCredentials()},c.prototype.getUserInfo=function(){var b=this;return this.get(c.USER_INFO_GET_ENDPOINT,{direct:!0,category:a.rest.SESSION_CATEGORY}).forceJson().send().then(function(a){return a.data.UserInfo},function(a){return b.logger.low("tryRetrieveUserInfoErr",{err:a.message}),null})},c.Server_Module_Component_Name="ionweb.server",c.Server_Status_Component_Name="Server",c.PLATFORM_DETAILS_GET_ENDPOINT="r/server/platformid",c.USER_INFO_GET_ENDPOINT="r/userinfo/get",c}();b.ServerService=k,a.module("ionwebServer").service("serverService",["ionweb.configurationService","ionweb.excHelper","ionweb.loggerFactory","ionweb.notificationService","ionweb.idpService","ionweb.retryService","ionweb.environmentService","ionweb.restService","ionweb.localPreferenceService","ionweb.multitenancyService"],function(a,b,c,d,e,f,g,h,i,j){return new k(a,b,c,d,e,f,g,h,i,j)})}(b=a.server||(a.server={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=3e4,d=1e3,e=function(){function e(b,d,f){var g=this;this.configurationService=b,this.preferenceService=d,this.loggerFactory=f,this.isReady=!1,this.initialLogDumpDone=!1,this.requestUnderway=!1,this.pendingEntries=[],this.waitingForPlatformEntries=[],this.trigger=new a.TimerFlushTrigger(c),this.trigger.onTrigger.add(this.handleTriggerTick,this),this.logger=f.create("AnalyticsService"),this.originFamily=a.defaultSdkName;var h=a.IonVersion.fromModuleVersion(a.Version);this.originFamilyVersion=h.toPublicIonString(!0);var i=function(){g.appName=b.appName,g.appVersion=b.getAppVersion(!0),g._disabled=b.config.shell.disableAnalytics,g.baseUrl=b.config.shell.analyticsUrl||e.DEFAULT_ANALYTICS_ENDPOINT,g.logger.low("analytics",{action:"readConfig",disabled:g._disabled,baseUrl:g.baseUrl,appVersion:g.appVersion,appName:g.appName})};i(),b.changed.add(i),this._enablePreferenceAnalyticsStatistics=this.preferenceService.getValue(e.ENABLE_PREF_KEY,!0),this.logger.low("analytics",{action:"enablePreferenceInitialValue",value:this._enablePreferenceAnalyticsStatistics}),this.preferenceService.subscribeChanges&&this.preferenceService.subscribeChanges(e.ENABLE_PREF_KEY,function(a,b){g._enablePreferenceAnalyticsStatistics=b.value,g.logger.low("analytics",{action:"enablePreferenceChanged",value:g._enablePreferenceAnalyticsStatistics})}),this.preferenceService.loaded.add(function(a,b){g._enablePreferenceAnalyticsStatistics=g.preferenceService.getValue(e.ENABLE_PREF_KEY,!0),g.logger.low("analytics",{action:"enablePreferenceLoaded",value:g._enablePreferenceAnalyticsStatistics})})}return Object.defineProperty(e.prototype,"enablePreferenceAnalyticsStatistics",{get:function(){return this._enablePreferenceAnalyticsStatistics},set:function(a){a!==this.enablePreferenceAnalyticsStatistics&&this.preferenceService.setValue(e.ENABLE_PREF_KEY,a)},enumerable:!0,configurable:!0}),e.prototype.attachServerService=function(a){var b=this;this.serverService=a;var c=function(a,d){d&&d.isAuthenticated&&(b.serverService.statusChanged.remove(c),b.trigger.start(),b.isReady=!0)};this.serverService.statusChanged.add(c)},e.convertLevelToString=function(b){var c=null;switch(b){case a.AnalyticsTraceLevel.Trace:c="TRACE";break;case a.AnalyticsTraceLevel.Debug:c="DEBUG";break;case a.AnalyticsTraceLevel.Info:c="INFO";break;case a.AnalyticsTraceLevel.Warning:c="WARN";break;case a.AnalyticsTraceLevel.Error:c="ERROR"}return c},e.convertParamsToString=function(a){return a?"string"==typeof a?a:JSON.stringify(a):null},e.prototype.dumpPlatformId=function(){var a=null;return this.serverService.serverPlatformId.PlatformId?a=this.serverService.serverPlatformId.PlatformId:this.serverService.serverPlatformId.Host&&(a=this.serverService.serverPlatformId.Host,this.serverService.serverPlatformId.Port&&(a+=":"+this.serverService.serverPlatformId.Port)),a},e.getZoneOffset=function(a){var b=a.getTimezoneOffset();return e.convertTimezoneOffsetToString(b)},e.convertTimezoneOffsetToString=function(a){var b=-a,c=Math.floor(Math.abs(b)/60),d=Math.abs(b)%60,e=d>0?":30":":00",f=b>0?"+":"-",g=c<10?"0":"",h=0===b?"+00:00":f+g+c+e;return h},e.prototype.trace=function(a,b,c,d){var f=new Date,g=e.getZoneOffset(f),h=e.convertLevelToString(d),i=e.convertParamsToString(b),j=e.convertParamsToString(c),k=null,l=!0;this.serverService&&this.serverService.serverPlatformId&&(l=!1,k=this.dumpPlatformId());var m={origin:this.appName,version:this.appVersion,originFamily:this.originFamily,originFamilyVersion:this.originFamilyVersion,actorId:this.serverService?this.serverService.getUserName():null,client:null,platform:k,localTimestamp:f.toISOString(),utcOffset:g,action:i,target:j,level:h,category:a};this.addEntry(m,l)},e.prototype.addEntry=function(a,b){this.pendingEntries.length+1===d&&this.logger.low("analytics",{action:"limitReached"}),this.pendingEntries.length===d&&this.pendingEntries.splice(0,1),this.pendingEntries.push(a),b&&this.waitingForPlatformEntries.push(a)},e.prototype.reinsert=function(a){var b=d-this.pendingEntries.length;if(a.length<=b)this.pendingEntries.unshift.apply(this,a);else{var c=a.length-b,e=a.slice(c);this.pendingEntries.unshift.apply(this,e)}},Object.defineProperty(e.prototype,"isSwitchedOn",{get:function(){return this.enablePreferenceAnalyticsStatistics&&!this._disabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},enumerable:!0,configurable:!0}),e.prototype.handleTriggerTick=function(){var b=this;if(this.requestUnderway)return void this.logger.low("analytics",{action:"discardTick",reason:"requestUnderway"});if(!this.serverService.serverPlatformId)return void this.logger.low("analytics",{action:"discardTick",reason:"noServerPlatformId",count:this.waitingForPlatformEntries.length});if(!this.initialLogDumpDone){this.initialLogDumpDone=!0;var c=new Date;this.logger.low("analytics",{action:"dump",origin:this.appName,version:this.appVersion,originFamily:this.originFamily,originFamilyVersion:this.originFamilyVersion,actorId:this.serverService?this.serverService.getUserName():null,platform:this.dumpPlatformId(),localTimestamp:c.toISOString(),utcOffset:e.getZoneOffset(c),baseUrl:this.baseUrl,enablePreferenceAnalyticsStatistics:this.enablePreferenceAnalyticsStatistics,disabled:this._disabled})}if(this.waitingForPlatformEntries.length>0){this.logger.low("analytics",{action:"fillPlatformId",count:this.waitingForPlatformEntries.length});var d=this.dumpPlatformId();this.waitingForPlatformEntries.forEach(function(a){a.platform=d,a.actorId=b.serverService.getUserName()}),this.waitingForPlatformEntries=[]}if(this.trigger.cancel(),!this.serverService.isInFaultedState())if(this.pendingEntries.length>0&&this.isSwitchedOn){this.logger.low("analytics",{action:"bulkPrepare",count:this.pendingEntries.length});var f=this.pendingEntries.splice(0),g=JSON.stringify(f),h=e.calculateSecurityToken(),i=this.baseUrl+"?securityToken="+encodeURIComponent(h);this.requestUnderway=!0,this.serverService.post(i,{category:a.rest.LOGGING_CATEGORY}).data(g,"application/json").send().then(function(a){var c=null;a&&a.data&&a.data&&(c=a.data.outcome),"SUCCESS"!==c?(b.logger.low("analytics",{action:"bulkFailed"}),b.reinsert(f)):b.logger.low("analytics",{action:"bulkSucceeded"})},function(a){b.logger.low("analytics",{action:"bulkFailed",reason:a.message}),b.reinsert(f)}).finally(function(){b.serverService.isInFaultedState()||(b.requestUnderway=!1,b.trigger.start())})}else this.trigger.start()},e.prototype.traceAnalytics=function(a,b,c,d,f,g){var h={};g&&Object.keys(g).forEach(function(a){h[a]=g[a]}),c&&(h.__analytics_action=c),d&&(h.__analytics_target=d);var i=e.convertLevelToString(f);i&&(h.__analytics_level=i),a.low(b,h),this.isSwitchedOn&&this.trace(b,c,d,f)},e.calculateSecurityToken=function(){var a=e.generateDateToken(),c=b64_md5(a),d=e.getBuffer(),f=e.getBuffer(),g=d+";"+c+";"+f;return b.EncryptionHelper.encryptPassword(g)},e.generateDateToken=function(){var b=new Date,c=b.getMinutes(),d=c-c%5;return a.localization.moment(new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),d,0,0)).utc().format("YYYYMMDD_HHmm")},e.getBuffer=function(){var a=e.generateRandomBytes(32),b=e.arrayBufferToBase64(a);return b},e.arrayBufferToBase64=function(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;e<d;e++)b+=String.fromCharCode(c[e]);return base64.encode(b)},e.generateRandomBytes=function(a){for(var b=[],c=0;c<a;c++)b[c]=Math.round(255*Math.random());return b},e.DEFAULT_ANALYTICS_ENDPOINT="https://analytics-upl.iongroup.com/iod/audit/log/tkn/bulk",e.ENABLE_PREF_KEY="Analytics_enableAnalyticsStatistics",e}();b.AnalyticsService=e,a.module("ionwebServer").service("analyticsService",["ionweb.configurationService","ionweb.preferenceService","ionweb.loggerFactory"],function(a,b,c){return new e(a,b,c)})}(b=a.server||(a.server={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(b,c){var d=this;this.serverService=b,this.instanceId=c,this.moment=a.syncRequire("moment"),this.seqNum=0,this.parseError=function(a){return function(b){if(0!==b.origResp.data.indexOf("javax.xml.bind.UnmarshalException"))throw b;var c=a.entries[0].timestamp,e=a.entries[a.entries.length-1].timestamp;d.serverService.logger.low("LoggerError",{error:"javax.xml.bind.UnmarshalException",skippedEntries:a.entries.length,firsEntryTime:c,lastEntryTime:e})}}}return Object.defineProperty(b.prototype,"isStopped",{get:function(){return this.serverService.isInFaultedState()},enumerable:!0,configurable:!0}),b.prototype.send=function(b){var c=this;return this.isStopped?Q.reject("Faulted state"):this.serverService.post("r/logservice/extended",{category:a.rest.LOGGING_CATEGORY}).data(this.serializeEntries(b),"application/xml").send().then(function(a){if(!(a&&a.data&&a.data.LogResponseElement&&"SUCCESS"===a.data.LogResponseElement.ExecutionOutcome))throw new Error("Unexpected response");c.seqNum++}).catch(this.parseError(b))},b.prototype.serializeEntries=function(b){var c=this,d=new a.XmlDom("http://www.iontrading.com/ionweb/services/logging","LogRequestElement");d.attr("ClientId","HTML5.client"),d.attr("ClientInstanceId",this.instanceId),d.attr("SeqNum",this.seqNum.toString());var e=b.entries[0].timestamp,f="YYYY-MM-DDTHH:mm:ss.SSSZ",g=this.moment(e).format(f);d.attr("TimeStamp",g);var h=d.append("LogLines");return b.entries.forEach(function(a){var f=d.append("LogLine",h);f.setAttribute("Level","INFO"),f.setAttribute("Logger",a.tag);var g=a.timestamp.getTime()-e.getTime();f.setAttribute("TSSpan",g.toString());var i=d.append("Message",f);i.textContent=b.instanceId!==c.instanceId?a.body+" <"+b.instanceId:a.body}),d.toString()},b}();b.RemoteLogSink=c}(b=a.logging||(a.logging={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(a){this.confService=a,this.DEFAULT_FORMAT_RULE="${user}@${client}",this.DEFAULT_PARSE_RULE={regex:"^([^@]*)@([^@]*)$",matchesNames:["user","client"]}}return Object.defineProperty(b.prototype,"config",{get:function(){var a=this.confService.config.shell&&this.confService.config.shell.multitenancy;return a?(a===!0&&(a={}),a):null},enumerable:!0,configurable:!0}),b.prototype.toBusUsername=function(b,c){var d=this.config;return d?a.stringFormat(d.usernameFormatRule||this.DEFAULT_FORMAT_RULE,{user:b,client:c}):b},b.prototype.fromBusUsername=function(a){var b=this.config;if(b&&a){var c=b.usernameParseRule||this.DEFAULT_PARSE_RULE,d=new RegExp(c.regex).exec(a);
if(d&&3===d.length){var e=c.matchesNames.reduce(function(a,b,c){return a[b]=d[c+1],a},{});return{user:e.user,clientId:e.client}}}return{user:a}},b}();b.MultitenancyService=c,a.module("ionwebServer").service("multitenancyService",["ionweb.configurationService"],function(a){return new c(a)})}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.Msg_Cannot_Connect_To_IONWEBServer="Cannot connect to the ION.WEB Server",a.Err_Details_InErrorRerty="Temporary disconnected",a.Component_DisplayName_Server="Server",a.Err_Kill_KILLED_BY_ADMIN="The application has been stopped by the system administrator",a.Err_Kill_EXT_LOGOUT_FC="Session killed by the server",a.Err_Kill_PLATFORM_COMPONENT_DOWN="Session killed by the platform",a.Err_Kill_INACTIVITY_TIMEOUT="Your session expired due to inactivity",a.Err_Kill_APPLICATION_TIMEOUT="Your session expired",a.Err_Kill_EXPIRATION_DATE="Your session expired",a.Err_Kill_PLATFORM_USER_REMOVED="The user has been removed from the server",a.Err_Kill_LOGOUT="The application was logged out by another window",a.Err_Server_Details_Kill="Please sign in again",a.Err_Server_DifferentUser="Session authenticated from a different page or with different credentials",a.Err_Server_DifferentUser_Details="Externally logged in user: ${user}",a.Err_FaultState_Msg="${err}. ${details}.",a.Err_FaultState_Title="Signed out",a.Err_FaultState_SecondChance_error="The server encountered an error",a.Err_FaultState_SecondChance_details="Please sign in again",a.Err_EncryptHelper_InputText_IsNull="Input text is null",a.Err_EncryptHelper_InputText_IsEmpty="Input text is empty",a.Err_EncryptHelper_Invalid_Padding="Invalid padding",a.Err_EncryptHelper_Inconsistent_Padding="Inconsistent padding",a.Err_Password_MustBe_Changed="Password must be changed",a.Err_Expired_Password_MustBe_Changed="Expired password must be changed",a.Err_Expired_Account="Expired account",a.Err_New_Password_NotValid="The new password is not valid",a.Err_Registration_Denied="Registration denied",a.Err_ComponentName_Is_Already_InUse="The component name is already in use",a.Err_User_Is_AlreadyLogged="The user is already logged",a.Err_Bad_UserOrPassword="Bad user or password",a.Err_MissingLicense="Missing license",a.Err_AccountExpired="Account expired",a.Err_PasswordExpired="Password expired",a.Err_AccountDisabled="Account disabled",a.Err_User_AccountDisabled="User account disabled",a.Err_AccountLocked="Account locked",a.Err_SessionAlready_Authenticated_Please_LogOut="Session already authenticated, please log out other sessions",a.Err_Server_IsNot_Ready="The server is not ready",a.Err_Session_Expired="Session expired",a.Err_SessionKilled_ByThe_Server="Session killed by the server",a.Err_SessionExpired_DueTo_Inactivity="Session expired due to inactivity",a.Err_SessionKilled_ByThe_Platform="Session killed by the platform",a.Err_User_HasBeen_Removed_FromServer="The user has been removed from the server",a.Err_ClientVersion_DoesNot_MeetRequirement="Client version does not meet the requirement",a.Err_Username_Is_Too_Long="The username is too long",a.Err_Password_Is_Too_Long="The password is too long",a.Err_New_Password_Is_Too_Long="The new password is too long",a.Err_Failed_FetchModuleList="Failed to fetch module list",a.Err_Failed_FetchServer_Info="Failed to fetch server info",a.Err_Cannot_Authenticate="Cannot authenticate",a.Err_ServerConnection_FaultedState_PleaseRefresh="Server connection in faulted state. Please refresh the page.",a.Err_DaemonDisconnected="The daemon is not able to login the client.",a.Err_PasswordAlreadyInHistory="Password already used in the past.",a.Err_PasswordSameAsUser="Password must be different from username.",a.Err_PasswordFewASCIIChars="Password contains too few ASCII digits.",a.Err_PasswordTooShort="Password is too short.",a.Err_PasswordFewLowerLetters="Password contains too few lower case letters.",a.Err_PasswordFewDigits="Password contains too few digits.",a.Err_PasswordFewSpecialChars="Password contains too few special characters.",a.Err_PasswordFewUpperLetters="Password contains too few upper case letters.",a.Err_PasswordFewDigitsSpecialChars="Password contains too few digits or special characters.",a.Err_PasswordProtocolError="An error has occurred invoking the daemon.",a.Err_PasswordCustomPolicyError="Custom password policy error",a.Err_PasswordInvalidChars="Password contains invalid characters.",a.Err_ComponentNameTooLong="The resulting component name is too long (greater than 64 characters).",a.Err_AuthenticationServiceError="Unexpected error.",a.Err_IncorrectOldPassword="Incorrect old password",a.Err_IonDaemonUnauthorizedUser="The user is not authorized to login",a.Err_IonDaemonAuthenticationMethodNotSupported="The daemon is not able to perform the operation (e.g. login with OTP for internal users).",a.Err_IonDaemonOtpRequired="One time password code is required",a.Err_IonDaemonProtocolError="Internal protocol error on the daemon during the login.",a.Err_IonDaemonWrongOtp="OTP is not valid",a}();a.Strings=b}(b=a.server||(a.server={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c="r/statistics/upload",d="http://www.iontrading.com/ionweb/services/perfstat",e=function(){function b(b,c,d){this.server=b,this.interval=c,this.serializer=new a.XmlDomFactory.XMLSerializer,this.started=!1,this.timer=null,this.providers=[],this.logger=d.create("StatisticsService")}return Object.defineProperty(b.prototype,"statPeriod",{get:function(){return this.statime},enumerable:!0,configurable:!0}),b.prototype.startConnectionStatistics=function(){this.started||(this.statime=this.server.statime,this.logger.low("StaTimer",{statimeS:this.statime}),this.timer=this.interval(this.sendStatReport.bind(this),1e3*this.statime),this.started=!0)},b.prototype.stopConnectionStatistics=function(){this.started&&(this.interval.cancel(this.timer),this.started=!1)},Object.defineProperty(b.prototype,"busCompName",{get:function(){return this.server.ionBusComponentName},enumerable:!0,configurable:!0}),b.prototype.sendStatReport=function(){var b=this;this.server.statime!==this.statime&&(this.stopConnectionStatistics(),this.startConnectionStatistics());var e=a.XmlDomFactory.DOMImplementation.createDocument("","",null),f=e.createElementNS(d,"Statistics");return this.providers.forEach(function(a){var c=a.getCounters(b);b.logger.low(a.name,c),a.sendToServer&&(Array.isArray(c)||(c=[c]),c.forEach(function(b){var c=e.createElementNS(d,a.name);Object.getOwnPropertyNames(b).forEach(function(a){c.setAttribute(a,b[a])}),f.appendChild(c)}))}),this.server.post(c,{category:a.rest.LOGGING_CATEGORY}).data(this.serializer.serializeToString(f),"application/xml").send().then(function(a){b.logger.high("Stat report sent")},function(a){b.logger.high("Error sending stat report",{error:a})})},b.prototype.registerStatProvider=function(a){var b=this;return this.providers.indexOf(a)<0&&this.providers.push(a),function(){var c=b.providers.indexOf(a);c>=0&&b.providers.splice(c,1)}},b}();a.module("ionwebServer").service("statService",["ionweb.serverService","ionweb.interval","ionweb.loggerFactory"],function(a,b,c){return new e(a,b,c)})}(b=a.stats||(a.stats={}))}(ionweb||(ionweb={})),ionweb.services.registerCoreSubmodule("ionwebServer",["ionwebCore"],ionweb.server.Strings);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ionweb;!function(a){a.Version="1.1.8-p1d8-r15018",a.Copyright="© Copyright 2018, ION.",a.GitSha="50b0bb1ece4773cd76bcd2a243f03fa86727291f"}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a){a.decorator("ionwebDatepickerDirective",["$delegate",this.datepickerDecorator.bind(this)])}return a.prototype.datepickerDecorator=function(a){var b=a[0],c=b.link;return b.compile=function(){return function(a,b,d,e){c(a,b,d,e);var f=e[0].activeDate;Object.defineProperty(e[0],"activeDate",{get:function(){return f},set:function(b){f=b,a.activeDate=b},enumerable:!0,configurable:!0}),e[0].activeDate=f,a.$watch("activeDate",function(b,c){if(b&&a.datepickerOptions.onNavigate){var d=new Date(b.getTime());d.setHours(0,0,0),a.datepickerOptions.onNavigate(d)}},!0),a.navigate=function(a){if(a){var b=new Date(e[0].activeDate.getFullYear(),e[0].activeDate.getMonth()),c=new Date(a.getFullYear(),a.getMonth()),d=b.getTime()-c.getTime()!==0;if(d){var f=new Date(a.getTime());f.setHours(0,0,0),e[0].activeDate=f}}},a.refresh=function(){a.$evalAsync(function(){e[0].refreshView()})}}},a},a}();a.DateTimepickerDecorator=b}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={})),angular.module("ionwebTk",["ui.bootstrap"]).config(["$provide","$compileProvider",function(a,b){new ionweb.toolkit.DateTimepickerDecorator(a),b.preAssignBindingsEnabled(!0)}]);var ionweb;!function(a){var b=function(){function a(a,b){this.window=a,this.notificationService=b}return a.prototype.supportGetClipboardContent=function(){return this.window.clipboardData},a.prototype.createTextArea=function(){var a=this.window.document.createElement("textarea");return a.style.position="fixed",a.style.top="-9999px",a.style.left="-9999px",a.style.width="100px",a.style.height="100px",a.style.padding="0",a.style.border="none",a.style.outline="none",a.style.boxShadow="none",a.style.background="transparent",a},a.prototype.copyToClipboard=function(a){var b=null;try{b=this.window.clipboardData&&this.window.clipboardData.setData}catch(a){b=null}if(b)try{b("Text",a)}catch(b){this.copyUsingDOM(a)}else this.copyUsingDOM(a)},a.prototype.copyUsingDOM=function(a){var b=document.activeElement,c=this.createTextArea();c.value=a,this.window.document.body.appendChild(c),c.select();try{this.window.document.execCommand("copy")}catch(a){this.notificationService.showError("Copy to clipboard failed")}finally{this.window.document.body.removeChild(c)}b.focus&&b.focus()},a.prototype.getClipboardContent=function(){var a=null,b=null;try{b=this.window.clipboardData&&this.window.clipboardData.setData}catch(a){b=null}if(b)try{a=b("Text")}catch(b){a=this.getClipboardContentUsingDOM()}else a=this.getClipboardContentUsingDOM();return a},a.prototype.getClipboardContentUsingDOM=function(){var a=null,b=this.createTextArea();this.window.document.body.appendChild(b),b.focus();try{this.window.document.execCommand("paste"),a=b.value}catch(a){this.notificationService.showError("Get clipboard data failed")}finally{this.window.document.body.removeChild(b)}return a},a}();a.ClipboardService=b,angular.module("ionwebTk").service("ionweb.clipboardService",["$window","ionwebTk.notificationService",function(a,c){return new b(a,c)}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").filter("resource",["$injector",function(b){if(b.has("ionweb.languageService")){var c=b.get("ionweb.languageService");return function(a,b,d){return c.getResource(a,b,d)}}return function(b){return a.Strings[b]}}]),angular.module("ionwebTk").filter("ionDateFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){switch(c){case"long":return a.toLongDate(b);case"short":return a.toShortDate(b)}}}]),angular.module("ionwebTk").filter("ionTimeFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){switch(c){case"long":return a.toLongTime(b);case"short":return a.toShortTime(b)}}}]),angular.module("ionwebTk").filter("ionCustomDateTimeFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){return a.toCustom(b,c)}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.restrict="E",this.scope={caption:"@",inline:"=?",inlineWidth:"=?",validationState:"=?",validationIcon:"=?"},this.transclude=!0,this.templateUrl="toolkit/contentBlock/contentBlock.tpl.html",this.controller=d,this.controllerAs="ctrl",this.bindToController=!0}return a}(),d=function(){function b(b,c){var d=this;this.validationStates=a.validation.ValidationState,b.$watch("ctrl.inline",function(){d.inline?c.addClass("inline"):c.removeClass("inline")})}return b.$inject=["$scope","$element"],b}();angular.module("ionwebTk").directive("ionContentBlock",function(){return new c})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.BottomLeft=0]="BottomLeft",a[a.BottomRight=1]="BottomRight",a[a.TopLeft=2]="TopLeft",a[a.TopRight=3]="TopRight",a[a.LeftBottom=4]="LeftBottom",a[a.LeftTop=5]="LeftTop",a[a.RightBottom=6]="RightBottom",a[a.RightTop=7]="RightTop",a[a.PositionProvided=8]="PositionProvided",a[a.TopRightInwards=9]="TopRightInwards"}(b=a.PopupAnchorPoint||(a.PopupAnchorPoint={}));var c;!function(a){a[a.Top=0]="Top",a[a.Right=1]="Right",a[a.Bottom=2]="Bottom",a[a.Left=3]="Left"}(c=a.PopupDirection||(a.PopupDirection={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function b(){this.POPUP_CLASS_DROPDOWN_ARROW_UP="dropdown-arrow-up",this.POPUP_CLASS_DROPDOWN_ARROW_DOWN="dropdown-arrow-down",this.POPUP_CLASS_DROPDOWN_ARROW_LEFT="dropdown-arrow-left",this.POPUP_CLASS_DROPDOWN_ARROW_RIGHT="dropdown-arrow-right"}return b.prototype.evaluateOffset=function(b,c,d,e,f){var g,h=e;switch(e){case a.PopupAnchorPoint.LeftBottom:g=a.PopupAnchorPoint.RightBottom;break;case a.PopupAnchorPoint.LeftTop:g=a.PopupAnchorPoint.RightTop;break;case a.PopupAnchorPoint.RightBottom:g=a.PopupAnchorPoint.LeftBottom;break;case a.PopupAnchorPoint.RightTop:g=a.PopupAnchorPoint.LeftTop;break;case a.PopupAnchorPoint.TopLeft:g=a.PopupAnchorPoint.BottomLeft;break;case a.PopupAnchorPoint.TopRight:g=a.PopupAnchorPoint.BottomRight;break;case a.PopupAnchorPoint.TopRightInwards:g=a.PopupAnchorPoint.TopRight;break;case a.PopupAnchorPoint.PositionProvided:h=a.PopupAnchorPoint.BottomLeft,g=a.PopupAnchorPoint.TopLeft;break;case a.PopupAnchorPoint.BottomLeft:g=a.PopupAnchorPoint.TopLeft;break;case a.PopupAnchorPoint.BottomRight:default:h=a.PopupAnchorPoint.BottomRight,g=a.PopupAnchorPoint.TopRight}return this.evaluateBestOffset(h,g,b,c,d,f)},b.prototype.fullScreenOffset=function(b,c){var d={left:0,top:0};return{anchorPoint:a.PopupAnchorPoint.LeftTop,popupOffset:d,arrowOffset:null,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_RIGHT,maxHeight:c.height,maxWidth:c.width,overflowTop:this.overflowTop(d,b,c),overflowBottom:this.overflowBottom(d,b,c),overflowLeft:this.overflowLeft(d,b,c),overflowRight:this.overflowRight(d,b,c),validDirections:[a.PopupDirection.Left,a.PopupDirection.Top,a.PopupDirection.Bottom,a.PopupDirection.Right]}},b.prototype.evaluateLeftBottomOffset=function(b,c,d,e,f){var g=0,h=0,i=0;e&&(g=e.width/2,h=f&&e.height/2||0,i=f&&e.height/2||e.height);var j={left:c.left-b.width-g,top:c.bottom-b.height+h},k={left:c.left,top:c.bottom-i},l=k.left-g-d.left;return{anchorPoint:a.PopupAnchorPoint.LeftBottom,popupOffset:j,arrowOffset:k,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_RIGHT,maxHeight:d.height,maxWidth:l,overflowTop:this.overflowTop(j,b,d),overflowBottom:this.overflowBottom(j,b,d),overflowLeft:this.overflowLeft(j,b,d),overflowRight:this.overflowRight(j,b,d),validDirections:[a.PopupDirection.Left,a.PopupDirection.Top,a.PopupDirection.Bottom]}},b.prototype.evaluateLeftTopOffset=function(b,c,d,e,f){var g=0,h=0;e&&(g=e.width/2,h=f&&e.height/2||0);var i={left:c.left-b.width-g,top:c.top-h},j={left:c.left,top:c.top-h},k=j.left-g-d.left;return{anchorPoint:a.PopupAnchorPoint.LeftTop,popupOffset:i,arrowOffset:j,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_RIGHT,maxHeight:d.height,maxWidth:k,overflowTop:this.overflowTop(i,b,d),overflowBottom:this.overflowBottom(i,b,d),overflowLeft:this.overflowLeft(i,b,d),overflowRight:this.overflowRight(i,b,d),validDirections:[a.PopupDirection.Left,a.PopupDirection.Bottom,a.PopupDirection.Top]}},b.prototype.evaluateRightBottomOffset=function(b,c,d,e,f){var g=0,h=0,i=0;e&&(g=e.width/2,h=f&&e.height/2||0,i=f&&e.height/2||e.height);var j={left:c.right+g,top:c.bottom-b.height-h},k={left:c.right,top:c.bottom-i},l=d.right-j.left;return{anchorPoint:a.PopupAnchorPoint.RightBottom,popupOffset:j,arrowOffset:k,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_LEFT,maxHeight:d.height,maxWidth:l,overflowTop:this.overflowTop(j,b,d),overflowBottom:this.overflowBottom(j,b,d),overflowLeft:this.overflowLeft(j,b,d),overflowRight:this.overflowRight(j,b,d),validDirections:[a.PopupDirection.Right,a.PopupDirection.Top,a.PopupDirection.Bottom]}},b.prototype.evaluateRightTopOffset=function(b,c,d,e,f){var g=0,h=0;e&&(g=e.width/2,h=f&&e.height/2||0);var i={left:c.right+g,top:c.top-h},j={left:c.right,top:c.top-h},k=d.right-i.left;return{anchorPoint:a.PopupAnchorPoint.RightTop,popupOffset:i,arrowOffset:j,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_LEFT,maxHeight:d.height,maxWidth:k,overflowTop:this.overflowTop(i,b,d),overflowBottom:this.overflowBottom(i,b,d),overflowLeft:this.overflowLeft(i,b,d),overflowRight:this.overflowRight(i,b,d),validDirections:[a.PopupDirection.Right,a.PopupDirection.Bottom,a.PopupDirection.Top]}},b.prototype.evaluateTopLeftOffset=function(b,c,d,e,f){var g=0,h=0;e&&(h=f&&e.width/2||0,g=e.height/2);var i={left:c.left-h,top:c.top-b.height-g},j={left:c.left-h,top:c.top},k=j.top-g-d.top;return{anchorPoint:a.PopupAnchorPoint.TopLeft,popupOffset:i,arrowOffset:j,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_DOWN,maxHeight:k,maxWidth:d.width,overflowTop:this.overflowTop(i,b,d),overflowBottom:this.overflowBottom(i,b,d),overflowLeft:this.overflowLeft(i,b,d),overflowRight:this.overflowRight(i,b,d),validDirections:[a.PopupDirection.Top,a.PopupDirection.Right,a.PopupDirection.Left]}},b.prototype.evaluateTopRightOffset=function(b,c,d,e,f){var g=0,h=0,i=0;e&&(g=e.height/2,h=f&&e.width/2||0,i=f&&e.width/2||e.width);var j={left:c.right-b.width+h,top:c.top-b.height-g},k={left:c.right-i,top:c.top},l=k.top-g-d.top;return{anchorPoint:a.PopupAnchorPoint.TopRight,popupOffset:j,arrowOffset:k,arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_DOWN,maxHeight:l,maxWidth:d.width,overflowTop:this.overflowTop(j,b,d),overflowBottom:this.overflowBottom(j,b,d),overflowLeft:this.overflowLeft(j,b,d),overflowRight:this.overflowRight(j,b,d),validDirections:[a.PopupDirection.Top,a.PopupDirection.Left,a.PopupDirection.Right]}},b.prototype.evaluateTopRightInwardsOffset=function(b,c,d,e,f){var g=0,h=0,i=0;e&&(g=f&&e.width/2||0,h=f&&e.width/2||e.width,i=e.height/2);var j={left:c.right-b.width+g,top:c.top+i},k=d.bottom-j.top;return{anchorPoint:a.PopupAnchorPoint.TopRightInwards,popupOffset:j,arrowOffset:{left:c.right-h,top:c.top},arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_UP,maxHeight:k,maxWidth:d.width,overflowTop:this.overflowTop(j,b,d),overflowBottom:this.overflowBottom(j,b,d),overflowLeft:this.overflowLeft(j,b,d),overflowRight:this.overflowRight(j,b,d),validDirections:[a.PopupDirection.Bottom,a.PopupDirection.Left,a.PopupDirection.Right]}},b.prototype.evaluateBottomLeftOffset=function(b,c,d,e,f){var g=0,h=0;e&&(g=f&&e.width/2||0,h=e.height/2);var i={left:c.left-g,top:c.bottom+h},j=d.bottom-i.top;return{anchorPoint:a.PopupAnchorPoint.BottomLeft,popupOffset:i,arrowOffset:{left:c.left-g,top:c.bottom},arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_UP,maxHeight:j,maxWidth:d.width,overflowTop:this.overflowTop(i,b,d),overflowBottom:this.overflowBottom(i,b,d),overflowLeft:this.overflowLeft(i,b,d),overflowRight:this.overflowRight(i,b,d),validDirections:[a.PopupDirection.Bottom,a.PopupDirection.Left,a.PopupDirection.Right]}},b.prototype.evaluateBottomRightOffset=function(b,c,d,e,f){var g=0,h=0,i=0;e&&(g=f&&e.width/2||0,h=f&&e.width/2||e.width,i=e.height/2);var j={left:c.right-b.width+g,top:c.bottom+i},k=d.bottom-j.top;return{anchorPoint:a.PopupAnchorPoint.BottomRight,popupOffset:j,arrowOffset:{left:c.right-h,top:c.bottom},arrowClass:this.POPUP_CLASS_DROPDOWN_ARROW_UP,maxHeight:k,maxWidth:d.width,overflowTop:this.overflowTop(j,b,d),overflowBottom:this.overflowBottom(j,b,d),overflowLeft:this.overflowLeft(j,b,d),overflowRight:this.overflowRight(j,b,d),validDirections:[a.PopupDirection.Bottom,a.PopupDirection.Right,a.PopupDirection.Left]}},b.prototype.overflowTop=function(a,b,c){var d=0;return a.top<c.top&&(d=c.top-a.top),d},b.prototype.overflowBottom=function(a,b,c){var d=0;return a.top+b.height>c.bottom&&(d=a.top+b.height-c.bottom),d},b.prototype.overflowLeft=function(a,b,c){var d=0;return a.left<c.left&&(d=c.left-a.left),d},b.prototype.overflowRight=function(a,b,c){var d=0;return a.left+b.width>c.right&&(d=a.left+b.width-c.right),d},b.prototype.evaluateBestOffset=function(b,c,d,e,f,g,h){var i={};i[a.PopupAnchorPoint.BottomLeft]=this.evaluateBottomLeftOffset(d,e,f,g,h),i[a.PopupAnchorPoint.BottomRight]=this.evaluateBottomRightOffset(d,e,f,g,h),i[a.PopupAnchorPoint.TopLeft]=this.evaluateTopLeftOffset(d,e,f,g,h),i[a.PopupAnchorPoint.TopRight]=this.evaluateTopRightOffset(d,e,f,g,h),i[a.PopupAnchorPoint.TopRightInwards]=this.evaluateTopRightInwardsOffset(d,e,f,g,h),i[a.PopupAnchorPoint.LeftBottom]=this.evaluateLeftBottomOffset(d,e,f,g,h),i[a.PopupAnchorPoint.LeftTop]=this.evaluateLeftTopOffset(d,e,f,g,h),i[a.PopupAnchorPoint.RightBottom]=this.evaluateRightBottomOffset(d,e,f,g,h),i[a.PopupAnchorPoint.RightTop]=this.evaluateRightTopOffset(d,e,f,g,h);var j=i[b],k=this.canFit(j,j.validDirections);if(k||(j=i[c],k=this.canFit(j,j.validDirections)),!k){var l=[i[a.PopupAnchorPoint.TopLeft],i[a.PopupAnchorPoint.TopRight]],m=[i[a.PopupAnchorPoint.BottomLeft],i[a.PopupAnchorPoint.BottomRight]],n=[i[a.PopupAnchorPoint.LeftTop],i[a.PopupAnchorPoint.LeftBottom]],o=[i[a.PopupAnchorPoint.RightTop],i[a.PopupAnchorPoint.RightBottom]],p=this.primaryDirection(b),q=this.maxVerticalSpace(l,m,b),r=this.maxHorizontalSpace(n,o,b),s=this.offsetForDirections(i,q,r),t=this.offsetForDirections(i,r,q),u=0,v=0;switch(q=this.primaryDirection(s.anchorPoint),r=this.primaryDirection(t.anchorPoint),q){case a.PopupDirection.Top:u=s.overflowTop;break;case a.PopupDirection.Bottom:u=s.overflowBottom}switch(r){case a.PopupDirection.Left:v=t.overflowLeft;break;case a.PopupDirection.Right:v=t.overflowRight}switch(p){case a.PopupDirection.Top:case a.PopupDirection.Bottom:j=0===u||s.maxHeight>=t.maxWidth?s:t;break;case a.PopupDirection.Left:case a.PopupDirection.Right:j=0===v||t.maxWidth>=s.maxHeight?t:s}}var w=this.primaryDirection(j.anchorPoint);return j.overflowBottom>0&&w!==a.PopupDirection.Bottom&&(j.popupOffset.top-=j.overflowBottom),j.overflowRight>0&&w!==a.PopupDirection.Right&&(j.popupOffset.left-=j.overflowRight),j.popupOffset.top<f.top&&(j.popupOffset.top=f.top),j.popupOffset.left<f.left&&(j.popupOffset.left=f.left),j},b.prototype.canFit=function(b,c){return!c.some(function(c){switch(c){case a.PopupDirection.Left:return b.overflowLeft>0;case a.PopupDirection.Right:return b.overflowRight>0;case a.PopupDirection.Top:return b.overflowTop>0;case a.PopupDirection.Bottom:return b.overflowBottom>0}return!1})},b.prototype.offsetForDirections=function(b,c,d){var e;switch(c){case a.PopupDirection.Top:switch(d){case a.PopupDirection.Left:e=b[a.PopupAnchorPoint.TopRight];break;case a.PopupDirection.Right:e=b[a.PopupAnchorPoint.TopLeft]}break;case a.PopupDirection.Bottom:switch(d){case a.PopupDirection.Left:e=b[a.PopupAnchorPoint.BottomRight];break;case a.PopupDirection.Right:e=b[a.PopupAnchorPoint.BottomLeft]}break;case a.PopupDirection.Left:switch(d){case a.PopupDirection.Top:e=b[a.PopupAnchorPoint.LeftBottom];break;case a.PopupDirection.Bottom:e=b[a.PopupAnchorPoint.LeftTop]}break;case a.PopupDirection.Right:switch(d){case a.PopupDirection.Top:e=b[a.PopupAnchorPoint.RightBottom];break;case a.PopupDirection.Bottom:e=b[a.PopupAnchorPoint.RightTop]}}return e},b.prototype.primaryDirection=function(b){var c;switch(b){case a.PopupAnchorPoint.BottomLeft:case a.PopupAnchorPoint.BottomRight:case a.PopupAnchorPoint.TopRightInwards:c=a.PopupDirection.Bottom;break;case a.PopupAnchorPoint.LeftTop:case a.PopupAnchorPoint.LeftBottom:c=a.PopupDirection.Left;break;case a.PopupAnchorPoint.TopLeft:case a.PopupAnchorPoint.TopRight:c=a.PopupDirection.Top;break;case a.PopupAnchorPoint.RightBottom:case a.PopupAnchorPoint.RightTop:c=a.PopupDirection.Right}return c},b.prototype.verticalDirection=function(b){var c;switch(b){case a.PopupAnchorPoint.BottomLeft:case a.PopupAnchorPoint.BottomRight:case a.PopupAnchorPoint.TopRightInwards:case a.PopupAnchorPoint.LeftTop:case a.PopupAnchorPoint.RightBottom:c=a.PopupDirection.Bottom;break;case a.PopupAnchorPoint.TopLeft:case a.PopupAnchorPoint.TopRight:case a.PopupAnchorPoint.LeftBottom:case a.PopupAnchorPoint.RightTop:c=a.PopupDirection.Top}return c},b.prototype.horizontalDirection=function(b){var c;switch(b){case a.PopupAnchorPoint.BottomLeft:case a.PopupAnchorPoint.TopLeft:case a.PopupAnchorPoint.RightBottom:case a.PopupAnchorPoint.RightTop:c=a.PopupDirection.Right;break;case a.PopupAnchorPoint.BottomRight:case a.PopupAnchorPoint.TopRight:case a.PopupAnchorPoint.TopRightInwards:case a.PopupAnchorPoint.LeftBottom:case a.PopupAnchorPoint.LeftTop:c=a.PopupDirection.Left}return c},b.prototype.maxVerticalSpace=function(b,c,d){var e=a.PopupDirection.Bottom,f=this.verticalDirection(d),g=b.reduce(function(a,b){return b.overflowTop<a.overflowTop?b:a},b[0]),h=c.reduce(function(a,b){return b.overflowBottom<a.overflowBottom?b:a},c[0]);return(f===a.PopupDirection.Top&&g.overflowTop===h.overflowBottom||g.overflowTop<h.overflowBottom)&&(e=a.PopupDirection.Top),e},b.prototype.maxHorizontalSpace=function(b,c,d){var e=a.PopupDirection.Left,f=this.horizontalDirection(d),g=b.reduce(function(a,b){return b.overflowLeft<a.overflowLeft?b:a},b[0]),h=c.reduce(function(a,b){return b.overflowRight<a.overflowRight?b:a},c[0]);return(f===a.PopupDirection.Right&&h.overflowRight===g.overflowLeft||h.overflowRight<g.overflowLeft)&&(e=a.PopupDirection.Right),e},b}();a.PopupPositionManager=b}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this._left=a,this._top=b,this._width=c,this._height=d,this._right=this._left+this._width,this._bottom=this._top+this._height}return Object.defineProperty(a.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this._bottom},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(a,"empty",{get:function(){return a._empty},enumerable:!0,configurable:!0}),a.fromElem=function(b,c){var d=c?c:$,e=d(b),f=e.offset()||{left:0,top:0},g=b.getBoundingClientRect();return new a(f.left,f.top,g.width||0,g.height||0)},a._empty=new a(0,0,0,0),a}();a.Rectangle=b}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.POPUP_CLASS_CONTAINER="ionweb-popup-container";var c;!function(a){a[a.TimerAnchorFollower=1]="TimerAnchorFollower",a[a.MutationAttributeState=2]="MutationAttributeState",a[a.WindowResize=3]="WindowResize"}(c=b.UpdatePositionReason||(b.UpdatePositionReason={}));var d=function(){function d(d,e){var f=this;this._updatePositionHandlerId=null,this._lastValidSize=null,this._isShown=!0,this._automaticallyUpdatePosition=!0,this._automaticallyClose=!0,this._automaticallyCloseOnAnchorBoundsChange=!1,this._matchAnchorWidth=!1,this._anchorPoint=b.PopupAnchorPoint.BottomRight,this._showAnchorPointArrow=!1,this._arrowClass="",this._arrowSize={width:12,height:12},this._baseZIndex=b.ZINDEX_POPUP_BASE,this._isShownChanged=new a.Event,this._isShown=!1,this._popupElement=d,this._arrowElement=$("<div></div>").get(0),this._jq=e?e:$,this._popupPosition={left:0,top:0},this._arrowSize={width:12,height:12},this._arrowClass="";var g=this._jq(this._popupElement),h=this._jq(this._arrowElement);this._baseZIndex=parseInt(d.style.zIndex,10)||parseInt(g.css("z-index"),10)||b.ZINDEX_POPUP_BASE,g.css({position:"fixed",display:"none"}),h.css({position:"fixed",display:"none"});var i;"undefined"!=typeof MutationObserver&&(this._observer=new MutationObserver(function(a,b){if(!f.suspendAutoposition){var e=!a.filter(function(a){return"style"!==a.attributeName}).length;(!e||e&&"none"!==d.style.display&&i!==d.style.cssText)&&(i=d.style.cssText,f.updatePopupPosition(c.MutationAttributeState),b.takeRecords())}})),this._debounceUpdatePosition=a.debounce(function(){f.updatePopupPosition()},500,!1),this._onWindowResize=function(){f.updatePopupPosition(c.WindowResize)}.bind(this)}return d.prototype.zIndex=function(a){for(var c,d=this._jq(a),e=Math.max(this._baseZIndex,b.ZINDEX_POPUP_BASE);d.length&&d[0]!==document;){if(c=d.css("position"),"absolute"===c||"relative"===c||"fixed"===c){var f=parseInt(d.css("zIndex"),10);isNaN(f)||(e=Math.max(e,f))}d=d.parent()}return e},d.prototype.areRectsEquals=function(a,b){return Math.abs(a.bottom-b.bottom)<1&&Math.abs(a.height-b.height)<1&&Math.abs(a.left-b.left)<1&&Math.abs(a.right-b.right)<1&&Math.abs(a.top-b.top)<1&&Math.abs(a.width-b.width)<1},d.prototype.isSizeSame=function(a,b){return a.width===b.width&&a.height===b.height},d.prototype.updatePopupPosition=function(a){if(this._popupElement&&this.isShown&&this._anchorElement){if((!this.skipAnchorVisibilityCheck||!this.skipAnchorVisibilityCheck())&&this.isShown&&null==this._anchorElement.offsetParent)return void(this.isShown=!1);var e=this._jq(this._popupElement),f=this._jq(this._arrowElement),g=b.Rectangle.fromElem(this._anchorElement,this._jq);if(this._anchorPoint===b.PopupAnchorPoint.PositionProvided){if(!this._popupPosition)throw Error(b.Strings.Err_PopUp_Bad_PopupPosition_ForAnchorPointPositionProvided);var h=d.translatePopupPositionToAnchorBox(g,this._popupPosition,this._arrowSize);g=new b.Rectangle(h.left,h.top,0,0)}if(this._lastAnchorBox){var i=this.areRectsEquals(this._lastAnchorBox,g);if(a===c.TimerAnchorFollower&&i)return;if(!i&&this._automaticallyCloseOnAnchorBoundsChange&&this._automaticallyClose)return void(this.isShown=!1)}if(this._lastAnchorBox=g,a===c.TimerAnchorFollower&&(f.hide(),e.hide()),a===c.WindowResize&&(e.css("visibility","hidden"),f.css("visibility","hidden")),a&&(a===c.TimerAnchorFollower||a===c.WindowResize))return void this._debounceUpdatePosition();e.css({display:"",visibility:""}),this._showAnchorPointArrow&&f.css({display:"",visibility:""});var j=parseInt(e.css("min-width"),10);this._matchAnchorWidth&&j!==g.width?e.css("min-width",g.width):this._matchAnchorWidth||0===j||e.css("min-width","");var k=this.getPopupSize(this._popupElement);if(k){if(a===c.TimerAnchorFollower&&this._lastPopupSize&&this.isSizeSame(this._lastPopupSize,k))return;this._lastPopupSize=k;var l=b.Rectangle.fromElem(window.document.body,this._jq),m=void 0;m=this.showFullScreen?d.popupPositionManager.fullScreenOffset(k,l):d.popupPositionManager.evaluateOffset(k,g,l,this._anchorPoint,this._showAnchorPointArrow&&this._arrowSize),this._showAnchorPointArrow&&(f.offset(m.arrowOffset),m.arrowClass!==this._arrowClass&&(f.removeClass(this._arrowClass).addClass(m.arrowClass),this._arrowClass=m.arrowClass)),e.offset(m.popupOffset),e.offset(m.popupOffset);var n=e.css(["max-width","max-height"]),o=parseInt(n["max-width"],10),p=parseInt(n["max-height"],10);m.maxWidth>0&&o!==m.maxWidth&&(n["max-width"]=m.maxWidth),m.maxHeight>0&&p!==m.maxHeight&&(n["max-height"]=m.maxHeight),e.css(n)}}},Object.defineProperty(d.prototype,"anchorPoint",{get:function(){return this._anchorPoint},set:function(a){this._anchorPoint!==a&&(this._anchorPoint=a,this.updatePopupPosition())},enumerable:!0,configurable:!0
}),Object.defineProperty(d.prototype,"position",{get:function(){return this._popupPosition},set:function(a){this._popupPosition!==a&&(this._popupPosition=a,this.updatePopupPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"showAnchorPointArrow",{get:function(){return this._showAnchorPointArrow},set:function(a){if(this._showAnchorPointArrow!==a){this._showAnchorPointArrow=a;var b=this._jq(this._arrowElement);this._showAnchorPointArrow&&this._isShown?b.insertBefore(this._jq(this._popupElement)):b.remove(),this.updatePopupPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"anchor",{get:function(){return this._anchorElement},set:function(a){if(this._anchorElement!==a){if(this._anchorElement=a,this._anchorElement){var b=this._jq(this._popupElement),c=this._jq(this._arrowElement),d=this.zIndex(this._anchorElement)+1;b.css("zIndex",d),c.css("zIndex",d),this.updatePopupPosition()}this.syncHandlers()}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"automaticallyClose",{get:function(){return this._automaticallyClose},set:function(a){this._automaticallyClose!==a&&(this._automaticallyClose=a,this.syncHandlers())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"matchAnchorWidth",{get:function(){return this._matchAnchorWidth},set:function(a){this._matchAnchorWidth=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"automaticallyUpdatePosition",{get:function(){return this._automaticallyUpdatePosition},set:function(a){this._automaticallyUpdatePosition!==a&&(this._automaticallyUpdatePosition=a,this.syncHandlers())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"automaticallyCloseOnAnchorBoundsChange",{get:function(){return this._automaticallyCloseOnAnchorBoundsChange},set:function(a){this._automaticallyCloseOnAnchorBoundsChange=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isShown",{get:function(){return this._isShown},set:function(a){if(a=a||!1,this._isShown!==a){this._isShown=a;var b=this._jq(this._popupElement),c=this._jq(this._arrowElement);if(this._isShown)this._showAnchorPointArrow&&c.insertBefore(b),this.updatePopupPosition(),d.openPopups.push(this);else{b.hide(),this._showAnchorPointArrow&&c.remove();var e=d.openPopups.indexOf(this);e>=0&&d.openPopups.splice(e,1)}this.syncHandlers(),this._isShownChanged.raise(this,null)}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isShownChanged",{get:function(){return this._isShownChanged},enumerable:!0,configurable:!0}),d.translatePopupPositionToAnchorBox=function(a,b,c){var d={top:b.top+a.top,left:b.left+a.left};return b.left<0&&(d.left=a.left),b.top<0&&(d.top=a.top),d.left>a.right&&(d.left=a.right),d.top>a.bottom&&(d.top=a.bottom),d},d.prototype.attachObservers=function(){this._observer&&this._popupElement&&this._anchorElement&&(this._observer.observe(this._popupElement,{subtree:!0,attributes:!0,characterData:!0,childList:!0}),this._observer.observe(this._anchorElement,{attributes:!0,characterData:!0,childList:!0}))},d.prototype.detachObservers=function(){this._observer&&this._observer.disconnect()},d.prototype.detachUpdatePositionHandler=function(){null!=this._updatePositionHandlerId&&(window.clearInterval(this._updatePositionHandlerId),this._updatePositionHandlerId=null),window.removeEventListener("resize",this._onWindowResize)},d.prototype.attachUpdatePositionHandler=function(){var a=this;this._updatePositionHandlerId=window.setInterval(function(){return a.updatePopupPosition(c.TimerAnchorFollower)},150),window.addEventListener("resize",this._onWindowResize)},d.prototype.syncHandlers=function(){this.detachUpdatePositionHandler(),this.detachObservers(),this._isShown&&(this._automaticallyUpdatePosition&&this.attachUpdatePositionHandler(),this.automaticallyClose&&this.attachAutoCloseHandler(),this.attachObservers())},d.prototype.attachAutoCloseHandler=function(){var a=this;b.popupClickHandler||(b.popupClickHandler=function(c,e){var f=d.openPopups.filter(function(a){return a.automaticallyClose}),g=!e&&a._jq(c.target).parents("."+b.POPUP_CLASS_CONTAINER).length>0,h=!1;if(f.length&&(!g||e)){var i=!0;f.forEach(function(d){var f=e||d.anchorPoint===b.PopupAnchorPoint.PositionProvided||!d.anchor||0===a._jq(c.target).closest(d.anchor).length;f&&d.isShown&&(d.isShown=!1,h=!0),i=i&&!d.isShown}),i&&(b.popupClickHandler=null)}return h})},d.prototype.getPopupSize=function(a){var b=window.getComputedStyle(a),c={maxWidth:b.maxWidth,maxHeight:b.maxHeight};a.style.maxWidth="",a.style.maxHeight="";var d=a.getBoundingClientRect(),e={width:d.width||0,height:d.height||0};return a.style.maxWidth=c.maxWidth,a.style.maxHeight=c.maxHeight,e.width>0&&e.height>0?this._lastValidSize=e:e=this._lastValidSize,e},d.openPopups=[],d.popupPositionManager=new b.PopupPositionManager,d}();b.Popup=d}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.setAnchor=function(a){this.anchor=a,this.tryInitPopup()},a.prototype.setPopup=function(a){this.popup=a,this.tryInitPopup()},a.prototype.tryInitPopup=function(){this.anchor&&this.popup&&(this.popup.anchor=this.anchor,this.showWhenAnchorCreated&&!this.popup.isShown&&(this.popup.isShown=this.showWhenAnchorCreated,this.showWhenAnchorCreated=!1))},a}();angular.module("ionwebTk").directive("ionwebPopupContainer",[function(){return{restrict:"AE",scope:!1,controller:b}}]);var c=function(){function b(a,b,c,d,e,f){this.scope=a,this.elem=b,this.attrs=c,this.ctrl=d,this.transcludeFn=e,this.$compile=f,this.unSubcribers=[],void 0===a.destroyOnHide&&(a.destroyOnHide=!0),void 0===a.automaticallyUpdatePosition&&(a.automaticallyUpdatePosition=!0),void 0===a.automaticallyClose&&(a.automaticallyClose=!0),a.isAlive=!a.destroyOnHide||a.visible}return b.prototype.registerWatch=function(){var a=this;this.unSubcribers.push(this.scope.$watch("visible",function(b){a.scope.isAlive=!a.scope.destroyOnHide||b,a.popup.isShown=b})),this.unSubcribers.push(this.scope.$watch("automaticallyUpdatePosition",function(b){a.popup.automaticallyUpdatePosition=b})),this.unSubcribers.push(this.scope.$watch("suspendAutoposition",function(b){a.popup.suspendAutoposition=b})),this.unSubcribers.push(this.scope.$watch("automaticallyClose",function(b){a.popup.automaticallyClose=b})),this.unSubcribers.push(this.scope.$watch("anchorPoint",function(b){a.popup.anchorPoint=a.convertPopupAnchorPoint(b)})),this.unSubcribers.push(this.scope.$watch("showAnchorPointArrow",function(b){a.popup.showAnchorPointArrow=b}))},b.prototype.unregisterWatches=function(){this.unSubcribers.forEach(function(a){return a()}),this.unSubcribers=[]},b.prototype.convertPopupAnchorPoint=function(b){var c=a.PopupAnchorPoint[b];return"undefined"!=typeof c&&null!==c||(c=a.PopupAnchorPoint.BottomRight),c},b.prototype.configurePopup=function(){var a=this;this.popup.skipAnchorVisibilityCheck=function(){return a.scope.skipAnchorVisibilityCheck},this.ctrl.setPopup(this.popup),this.popup.anchor?this.popup.isShown=this.scope.visible:this.ctrl.showWhenAnchorCreated=this.scope.visible,this.unSubcribers.push(this.popup.isShownChanged.add(function(){a.scope.$evalAsync(function(){a.scope.visible=a.popup.isShown})})),this.popup.automaticallyClose=this.scope.automaticallyClose,this.popup.matchAnchorWidth=this.scope.matchAnchorWidth,this.popup.suspendAutoposition=this.scope.suspendAutoposition},b}(),d=function(b){function c(a,c,d,e,f,g){var h=b.call(this,a,c,d,e,f,g)||this;return h.scope.$watch("visible",function(a){a?h.popup?h.popup.isShown=!0:h.popup=h.showPopup():h.hidePopup()}),h}return __extends(c,b),c.prototype.appendAllAttribute=function(b){for(var c=this.elem.get(0),d=c.attributes,e=b.get(0),f=0;f<d.length;f++){var g=d[f],h=g.name.replace(/-[a-z]/g,function(a,b,c,d){return a.charAt(1).toUpperCase()});this.scope.hasOwnProperty(h)||"ngIf"===h||e.attributes.setNamedItem(g.cloneNode())}e.classList.remove("ng-scope"),e.classList.remove("ng-isolate-scope"),e.classList.add("ionweb-popup-root"),e.classList.add(a.POPUP_CLASS_CONTAINER)},c.prototype.showPopup=function(){var b=this,c="<div></div>";this.containerElement=angular.element(c),this.appendAllAttribute(this.containerElement),this.containerScope=this.scope.$parent.$new(),this.containerElement=this.$compile(this.containerElement)(this.containerScope);var d=this.transcludeFn(this.containerScope,function(a,b){});this.containerElement.append(d);var e=new a.Popup(this.containerElement.get(0),angular.element);document.body.appendChild(this.containerElement.get(0)),this.ctrl.setPopup(e),e.anchor?e.isShown=this.scope.visible:this.ctrl.showWhenAnchorCreated=this.scope.visible;e.isShownChanged.add(function(){b.scope.$evalAsync(function(){b.scope.visible=e.isShown})});return e.automaticallyClose=this.scope.automaticallyClose,e.matchAnchorWidth=this.scope.matchAnchorWidth,e.automaticallyUpdatePosition=this.scope.automaticallyUpdatePosition,e.anchorPoint=this.convertPopupAnchorPoint(this.scope.anchorPoint),e.showAnchorPointArrow=this.scope.showAnchorPointArrow,e.skipAnchorVisibilityCheck=function(){return b.scope.skipAnchorVisibilityCheck},this.containerScope.$on("$destroy",function(){b.containerElement.remove(),b.popup.isShown=!1,b.popup=null}),this.containerScope.$on("hide",function(){b.hidePopup(!0)}),this.registerWatch(),e},c.prototype.hidePopup=function(a){var b=this;this.scope.destroyOnHide&&this.popup?(this.unregisterWatches(),this.scope.visible=!1,setTimeout(function(){b.containerScope&&b.containerScope.$destroy()})):(this.popup&&(this.popup.isShown=!1),a||this.containerScope&&this.containerScope.$broadcast("hide"))},c}(c),e=function(b){function c(c,d,e,f,g,h){var i=b.call(this,c,d,e,f,g,h)||this;i.elem.addClass("ionweb-popup-root");var j=angular.element("<div class='"+a.POPUP_CLASS_CONTAINER+"' ng-if='isAlive'></div>");return i.elem.append(j),j.append(g(c.$parent.$new(),function(){})),i.popup=new a.Popup(d.get(0),angular.element),i.configurePopup(),i.registerWatch(),c.$on("$destroy",function(){i.unregisterWatches(),i.popup.isShown=!1}),i}return __extends(c,b),c}(c);angular.module("ionwebTk").directive("ionwebPopup",["ionweb.popupService","$compile",function(a,b){var c=function(a,c,f,g,h){a.appendToBody===!1?new e(a,c,f,g,h,b):(c.addClass("append-to-body"),new d(a,c,f,g,h,b))};return{scope:{visible:"=?",automaticallyUpdatePosition:"=?",suspendAutoposition:"=?",automaticallyClose:"=?",anchorPoint:"=?",matchAnchorWidth:"=?",destroyOnHide:"=?",showAnchorPointArrow:"=?",appendToBody:"<?",skipAnchorVisibilityCheck:"=?"},require:"^ionwebPopupContainer",restrict:"EA",link:c,transclude:"true"}}]),angular.module("ionwebTk").directive("ionwebPopupAnchor",[function(){var a=function(a,b,c,d){d.setAnchor(b.get(0))};return{require:"^ionwebPopupContainer",restrict:"EA",link:a}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(a,b,c,d,e,f,g){this.compile=a,this.rootScope=b,this.document=c,this.templateRequest=d,this.templateCache=e,this.q=f,this.$q=g}return c.prototype.create=function(a,b,c,d){var e=this,f=this.templateCache.get(a);return f?this.q.when(this.createWithTemplate(f,b,c,d)):this.q.when(this.templateRequest(a).then(function(a){return e.createWithTemplate(a,b,c,d)}))},c.prototype.createPopup=function(a,b,c,d){var e=this,f=this.templateCache.get(a);return f?this.$q.when(this.createWithTemplate(f,b,c,d)):this.templateRequest(a).then(function(a){return e.createWithTemplate(a,b,c,d)})},c.prototype.createWithTemplate=function(c,d,e,f){function g(a){j.isVisible=a,n.isShown=a}var h=this,i="<div class='ionweb-popup-root "+b.POPUP_CLASS_CONTAINER+"' ng-show='isVisible'></div>",j=this.rootScope.$new(!0);f=f||{},void 0===f.automaticallyUpdatePosition&&(f.automaticallyUpdatePosition=!0),void 0===f.automaticallyClose&&(f.automaticallyClose=!0),j.isVisible=!1;var k=this.compile(i)(j),l=e?this.compile(c)(e):angular.element(c);k.append(l),document.body.appendChild(k.get(0));var m=parseInt(l.get(0).style.zIndex,10)||parseInt(l.css("z-index"),10);isNaN(m)||0===m||(k.get(0).style.zIndex=String(m));var n=new b.Popup(k.get(0),angular.element);n.automaticallyClose=f.automaticallyClose,n.automaticallyUpdatePosition=f.automaticallyUpdatePosition,n.matchAnchorWidth=f.matchAnchorWidth,n.automaticallyCloseOnAnchorBoundsChange=f.automaticallyCloseOnAnchorBoundsChange,n.showFullScreen=f.showFullScreen,f.showFullScreen&&(n.automaticallyUpdatePosition=!1,n.automaticallyCloseOnAnchorBoundsChange=!1),n.anchor=d.get(0),f.hasOwnProperty("anchorPoint")&&(n.anchorPoint=f.anchorPoint),f.hasOwnProperty("position")&&(n.position=f.position),f.hasOwnProperty("showAnchorPointArrow")&&(n.showAnchorPointArrow=f.showAnchorPointArrow);var o=function(a,b){a.$evalAsync(b)},p=n.isShownChanged.add(function(){n.isShown||o(h.rootScope,function(){q.onClose.raise(q,null)})}),q={element:k,show:function(){o(j,function(){g(!0)})},hide:function(){o(j,function(){g(!1)})},destroy:function(){o(j,function(){g(!1),p(),$(l).remove(),$(k).remove(),j.$destroy()})},onClose:new a.Event};return q},c}();angular.module("ionwebTk").service("ionweb.popupService",["$compile","$rootScope","$document","$templateRequest","$templateCache","ionwebTk.q","$q",c])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Ok=0]="Ok",a[a.Cancel=1]="Cancel"}(b=a.DialogResult||(a.DialogResult={}));var c;!function(a){a[a.Small=0]="Small",a[a.Large=1]="Large",a[a.Auto=2]="Auto",a[a.Fixed=3]="Fixed"}(c=a.DialogSize||(a.DialogSize={}));var d;!function(a){a[a.MediumSmall=100]="MediumSmall",a[a.MediumLarge=101]="MediumLarge"}(d=a.DialogSizeInternal||(a.DialogSizeInternal={}));var e;!function(a){a[a.Info=0]="Info",a[a.Warning=1]="Warning",a[a.Danger=2]="Danger",a[a.Success=3]="Success"}(e=a.DialogSeverity||(a.DialogSeverity={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=10,d=30,e=function(){function e(a,c,d,e,f,g,h,i,j){this.modalService=a,this.rootScope=c,this.$q=d,this.q=e,this.injector=f,this.windowService=g,this.environmentService=h,this.responsivenessService=i,this.toolkitConfigService=j,this.enableAnimations=!0,this.severityClasses=["info","warning","danger","success"],this.topLevelManager=new b.TopLevelWindowMananger(c,d)}return e.prototype.suspendRouteLock=function(){this.routeLockSuspended=!0},e.prototype.resumeRouteLock=function(){this.routeLockSuspended=!1},Object.defineProperty(e.prototype,"dialogClassManager",{get:function(){return this.topLevelManager.dialogClassManager},enumerable:!0,configurable:!0}),e.prototype._show=function(c,d,f){var g=this;if(this.suspended)return{dismiss:function(){},result:this.q.defer().promise,closed:this.$q.defer().promise,buttonClick:new a.Event};var h=function(a){if(m.xsScreenSize)return e.XS_SCREEN_MARGIN;switch(a.designSize.name){case"xs":case"s":case"m":return e.SMALL_MARGIN;default:return e.NORMAL_MARGIN}},i=function(){var b=g.toolkitConfigService.getFontSize(),c=g.windowService.innerWidth,d=g.windowService.innerHeight,e=a.ResizeObserverService.convertHtmlSizeToSizeInfo(c,d,b);m.maxDialogHeight=d,m.dialogTopBottomMargin=h(e),m.dialogTopBottomMargin.top>0&&!f&&(m.maxDialogHeight-=m.dialogTopBottomMargin.top),m.dialogTopBottomMargin.bottom>0&&!f&&(m.maxDialogHeight-=m.dialogTopBottomMargin.bottom)},j=a.throttle(function(){m.$evalAsync(function(){i()})},50),k=function(a){j()};this.windowService.addEventListener("resize",k);var l=this.createModalSettings(c,d),m=this.rootScope.$new();m.xsScreenSize=this.environmentService.isSmallScreen(),m.useCrossButtonOnSmallScreen=this.toolkitConfigService.dialog.useCrossButtonOnSmallScreen,m.isTouchDevice=this.environmentService.isTouchDevice(),m.contentScope=c.scope||this.rootScope.$new(!0),m.contentScopeCreated=!c.scope,m.contentTemplate=c.template,m.contentTemplateUrl=c.templateUrl,m.dialogText=c.textContent,m.draggableDialogOptions=c.draggableDialogOptions||{},m.size=null===c.size||void 0===c.size?a.DialogSize.Large:c.size,m.fixedSizeDialogOptions=c.fixedSizeDialogOptions||{},m.disableFullScreenMode=c.disableFullScreenMode||!1,m.enableFlexLayout=c.enableFlexLayout||!1,m.isFullscreen=m.xsScreenSize&&!m.disableFullScreenMode,m.modeless=f,m.enableCustomSpacing=c.enableCustomSpacing;var n=!m.isFullscreen&&!f&&m.draggableDialogOptions.draggable;l.size=this.dialogSizeToClass(m.size,n),i(),f&&!m.isFullscreen&&(m.draggableDialogOptions.draggable=!0,m.resizable=c.resizable),m.severity=this.severityClasses[c.severity||0],m.title=c.title,c.checkboxText&&(m.checkboxState={text:c.checkboxText,value:!1}),m.showCloseButton=c.canClose,m.buttons=c.buttons&&c.buttons.map(function(a){return"string"==typeof a?{title:a}:a}),m.captionButtons=c.captionButtons,l.scope=m;var o;f?o=this.topLevelManager.open(l,m.draggableDialogOptions.headerClass,c.dialogClassID):(l.windowTemplateUrl="toolkit/dialogs/dialogWindow.tpl.html",o=this.modalService.open(l));var p=this.createDialog(o,m,c);return m.handleButtonClick=function(a){var b=m.contentScope.$broadcast("buttonClick",a);b.defaultPrevented||o.close(a),p.buttonClick.raise(p,a)},m.checkboxState&&m.$watch("checkboxState.value",function(a){return p.checkboxState=a}),m.opts=c,f&&(m.$watch("opts.title",function(a){return m.title=a}),o instanceof b.ModelessInstance&&(p.bringToFront=function(){g.topLevelManager.bringToFront(o)})),m.$on("$destroy",function(){j&&(j.cancel(),j=null),g.windowService.removeEventListener("resize",k)}),p},e.prototype.show=function(a){return this._show(a,"toolkit/dialogs/dialogFrame.tpl.html")},e.prototype.showCustom=function(a){return this._show(a,"toolkit/dialogs/customDialogFrame.tpl.html")},e.prototype.showTopLevelWindow=function(a){return this._show(a,"toolkit/dialogs/customDialogFrame.tpl.html",!0)},e.prototype.showTopLevelDialog=function(a){return this._show(a,"toolkit/dialogs/dialogFrame.tpl.html",!0)},e.prototype.createDialog=function(b,c,d){var e=this,f={dismiss:b.dismiss.bind(b),result:this.q.when(b.result),closed:b.result.then(function(a){return{value:a,cancel:!1}},function(a){return{cancel:!0}}),buttonClick:new a.Event},g=this.rootScope.$on("$routeChangeStart",function(a,b,c){!e.routeLockSuspended&&c&&b.templateUrl!==c.templateUrl&&(d.canClose?f.dismiss():a.preventDefault())});return f.closed.finally(function(){c.$destroy(),g()}),f},e.prototype.dialogSizeToClass=function(b,c){var d="";switch(b){case a.DialogSize.Small:d="sm";break;case a.DialogSize.Auto:d=c?"auto-draggable":"auto";break;case a.DialogSize.Fixed:d=c?"fixed-draggable":"fixed";break;case a.DialogSizeInternal.MediumSmall:d="m-sm";break;case a.DialogSizeInternal.MediumLarge:d="m-lg";break;default:d="lg"}return d},e.prototype.createModalSettings=function(a,b){var c={};return c.templateUrl=b,c.keyboard=a.canClose,c.backdrop=!!a.canClose||"static",c},e.prototype.showStandardDialog=function(a,b,c,d,e){var f;if("string"==typeof a){var g=this.rootScope.$new();g.dialogText=a,f={canClose:!1,templateUrl:"toolkit/dialogs/standardDialog.tpl.html",scope:g}}else f=a;return f.buttons=c.map(function(a,b){return{title:a,role:b===d||d===-1?"primary":"secondary"}}),f.title=b,f.checkboxText=e,this.show(f)},e.prototype.showConfirmationDialog=function(b,c,d){return this.showStandardDialog(b,c,[d||a.toolkit.Strings.Btn_Ok],0)},e.prototype.showQuestionDialog=function(b,c,d,e){return this.showStandardDialog(b,c,[d||a.toolkit.Strings.Btn_Ok,e||a.toolkit.Strings.Btn_Cancel],0)},e.prototype.showOptionDialog=function(a,b,c){return this.showStandardDialog(a,c,b,-1)},e.prototype.resetPreferenceQuestionState=function(a){this.getPreferenceService().deleteKey(e.PREF_PREFIX+a)},e.prototype.getPreferenceService=function(){return this.injector.get("ionweb.preferenceService")},e.prototype.showPreferenceQuestionDialog=function(b,c,d){var f=this;if(this.getPreferenceService().getValue(e.PREF_PREFIX+c))return{dismiss:function(){},result:this.q.when(!0),closed:this.$q.when({value:!0,cancel:!1}),buttonClick:new a.Event};var g=this.showStandardDialog(b,d,[a.toolkit.Strings.Btn_Ok,a.toolkit.Strings.Btn_Cancel],0,a.toolkit.Strings.Msg_DoNot_AskAgain),h=function(a){return 0===a&&g.checkboxState&&f.getPreferenceService().setValue(e.PREF_PREFIX+c,!0),0===a},i={dismiss:g.dismiss,result:g.result.then(function(a){return h(a)},function(){return!1}),closed:g.closed.then(function(a){return{value:!a.cancel&&h(a.value),cancel:a.cancel}}),buttonClick:new a.Event};return g.buttonClick.add(function(a,b){i.buttonClick.raise(i,b)}),i},e.prototype.setPreferenceValue=function(a,b){this.getPreferenceService().setValue(e.PREF_PREFIX+a,b)},e.prototype.getPreferenceValue=function(a){return this.getPreferenceService().getValue(e.PREF_PREFIX+a)},e.prototype.suspend=function(){this.suspended=!0},e.PREF_PREFIX="dialogClasses.",e.XS_SCREEN_MARGIN={top:0,bottom:0},e.SMALL_MARGIN={top:c,bottom:c},e.NORMAL_MARGIN={top:d,bottom:d},e.ContentReadyEventName="content-ready",e.ContentLoadFailedEventName="content-load-failed",e}();b.DialogService=e,angular.module("ionwebTk").service("ionweb.dialogService",["$uibModal","$rootScope","$q","ionwebTk.q","$injector","$window","ionwebTk.environmentService","ionweb.responsivenessService","ionwebTk.toolkitConfigService",function(a,b,c,d,f,g,h,i,j){return new e(a,b,c,d,f,g,h,i,j)}]),angular.module("ionwebTk").controller("ionweb.dialogFrameController",["$scope",function(a){a.buttons&&(a.buttonStates=a.buttons.map(function(a){return{enabled:!0}}))}]),angular.module("ionwebTk").directive("ionwebDialogContent",["$templateCache","$templateRequest","$compile","ionwebTk.q",function(b,c,d,f){var g=null,h=function(h,i){var j=f.defer();if(h.contentTemplate)j.resolve(h.contentTemplate);else if(h.contentTemplateUrl){var k=b.get(h.contentTemplateUrl);k?j.resolve(k):c(h.contentTemplateUrl).then(function(a){return j.resolve(a)},function(a){return j.reject(a)})}else{if(!h.dialogText)throw j.reject(a.toolkit.Strings.Err_DefineTemplate_Or_TemplateUrl_CreateDialog),new Error(a.toolkit.Strings.Err_DefineTemplate_Or_TemplateUrl_CreateDialog);h.contentScope=h,j.resolve(b.get("toolkit/dialogs/standardDialog.tpl.html"))}j.promise.then(function(a){h.$evalAsync(function(){g=h.contentScope,g.cancel=h.$dismiss,g.complete=h.$close,g.buttonStates=h.buttonStates,i.append(d(a)(g)),h.$emit(e.ContentReadyEventName)})}).catch(function(){h.$emit(e.ContentLoadFailedEventName)}),h.$on("$destroy",function(){h.contentScopeCreated&&h!==g&&g.$destroy()})};return{link:h,scope:!0}}]),angular.module("ionwebTk").directive("draggableDialog",[function(){var b=function(b,c){var d=$(c).find(".modal-dialog");b.draggableDialogOptions=b.$parent.draggableDialogOptions,b.dialogSize=b.$parent.size,b.fixedSizeDialogOptions=b.$parent.fixedSizeDialogOptions,b.isFullscreen=b.$parent.isFullscreen;var f=function(a,c,d,e,f){if(b.isFullscreen)return{left:0,top:0};var g={left:a.left,top:a.top},h=g.left+c-e;return h>0&&(g.left=g.left-h),h=g.top+d-f,h>0&&(g.top=g.top-h),g.left<0&&(g.left=0),g.top<0&&(g.top=0),g},g=function(a,b){var c=a.clone();c.css({top:0,left:0,visibility:"hidden"}),b.append(c);var d=c.get(0),e=getComputedStyle(d,null),f=parseFloat(e.getPropertyValue("width")),g=parseFloat(e.getPropertyValue("height"));return isNaN(f)&&(f=d.getBoundingClientRect().width),isNaN(g)&&(g=d.getBoundingClientRect().height),c.remove(),{width:f,height:g}},h=function(a,b){a.css({width:b.width+"px",height:b.height+"px"})},i=function(c){b.dialogSize===a.DialogSize.Fixed&&b.fixedSizeDialogOptions?c.css({width:b.fixedSizeDialogOptions.width||"",height:b.fixedSizeDialogOptions.height||""}):c.css({width:"",height:""})},j=function(a){a&&a.disconnect()},k=function(a,b,c){var d=null;return"undefined"!=typeof MutationObserver&&(d=new MutationObserver(c),d.observe(a,b)),d},l=function(a){b.draggableDialogOptions.onDialogPositionChanged&&b.draggableDialogOptions.onDialogPositionChanged(a)},m=function(m){var n=null,o=$("body"),p=$(window),q=b.draggableDialogOptions.position,r=null,s=!1,t=!1,u=!1,v={top:0,left:0},w=0,x=null,y={subtree:!0,attributes:!0,characterData:!0,childList:!0},z=-1,A=-1,B=function(){u=!0,n=$(c).find("."+(m||"modal-header")),n&&(n.on("mousedown",M),n.on("mouseup",K),n.on("mouseleave",L)),I(),F()},C=b.$parent.$on(e.ContentReadyEventName,B),D=b.$parent.$on(e.ContentLoadFailedEventName,B),E=function(a,c,e){if(a&&!b.isFullscreen){var g=d.offset(),h=f(a,c.width,c.height,e.width,e.height);h.left===g.left&&h.top===g.top||d.offset(h)}},F=function(){var a=g(d,o),b=o.get(0).getBoundingClientRect();if(z!==a.width||A!==a.height){z=a.width,A=a.height;var c=q||{top:d.offset().top,left:(b.width-a.width)/2};h(d,a),E(c,a,b),i(d)}},G=a.throttle(function(){!s&&u&&F()},500),H=function(a){var b=g(d,o);h(d,b),0!==w&&(clearTimeout(w),w=0),w=setTimeout(function(a){var b=o.get(0).getBoundingClientRect(),c=q||{top:d.offset().top,left:(b.width-a.width)/2};E(c,a,b),i(d)},100,b)},I=function(){d.css("transform","none"),p.on("resize",H),x=k(d.get(0),y,function(a,b){G(),b.takeRecords()})},J=function(a){s&&(d.offset({top:a.clientY-v.top,left:a.clientX-v.left}),t=!0)},K=function(a){if(s)if(o.off("mousemove",J),s=!1,t){var b=o.get(0).getBoundingClientRect();t=!1,q=d.offset(),E(q,r,b),i(d),l(q)}else i(d)},L=function(a){var b=o.get(0).getBoundingClientRect(),c=a.pageX<=0||a.pageX>=b.width||a.pageY<=0||a.pageY>=b.height;s&&c&&(o.off("mousemove",J),s=!1,t?(t=!1,q=d.offset(),E(q,r,b),i(d),l(q)):i(d))},M=function(a){o.on("mousemove",J),s=!0;var b=d.offset();v={top:a.clientY-b.top,left:a.clientX-b.left},r=g(d,o),h(d,r)},N=function(a){x&&(j(x),x=null),G&&(G.cancel(),G=null),0!==w&&(clearTimeout(w),w=0),o.off("mousemove",J),p.off("resize",H),n&&(n.off("mousedown",M),n.off("mouseup",K),n.off("mouseleave",L)),C&&(C(),C=null),D&&(D(),D=null)};$(c).on("$destroy",N),b.$parent.$on("$destroy",function(){C&&(C(),C=null),D&&(D(),D=null)})};b.draggableDialogOptions.draggable&&!b.isFullscreen&&(d.addClass("modal-draggable"),m(b.draggableDialogOptions.headerClass))};return{restrict:"A",link:b,scope:!1}}])}(b=a.dialogs||(a.dialogs={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a){this.options=a,this.init()}return a.prototype.init=function(){this.options.rootElement.resizable({autoHide:!this.options.isTouchDevice&&this.options.autoHideResizeHandles!==!1,containment:this.options.containment||angular.element(document.body),handles:"e, w, s, se, sw",minHeight:50,minWidth:100,start:this.onResizeStart.bind(this)})},a.prototype.dispose=function(){this.options.rootElement.resizable("destroy")},a.prototype.onResizeStart=function(){this.options.dialogElement.hasClass("resizable-dialog-child")||this.options.dialogElement.addClass("resizable-dialog-child")},a}();a.ResizableDialogManager=b}(b=a.dialogs||(a.dialogs={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=35,d=35,e=function(){function a(a,b){if(!a)throw Error("Please provide a valid key");this._key=a,b&&this.initDialogDefaults(b),this._openDialogs=[]}return a.prototype.initDialogDefaults=function(a){this._stepX=a.stepX,this._stepY=a.stepY},a.prototype.addModalLessDialog=function(a){this._openDialogs.push(a)},a.prototype.removeModalLessDialog=function(a){this._openDialogs.splice(this._openDialogs.indexOf(a))},Object.defineProperty(a.prototype,"openDialogs",{get:function(){return this._openDialogs.slice()},enumerable:!0,configurable:!0}),a.prototype.getNextOpeningPosition=function(a){var b=this.getRelativeDialog(a);if(b){var c=angular.extend({},b.position);return c.left+=this.stepX,c.top+=this.stepY,c}},Object.defineProperty(a.prototype,"stepX",{get:function(){return this._stepX||c},set:function(a){this._stepX=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stepY",{get:function(){return this._stepY||d},set:function(a){this._stepY=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),a}();b.DialogClass=e;var f=function(){function a(){this._dialogClassMap={}}return a.prototype.defineClass=function(a,b){var c=this._dialogClassMap[a];if(c)throw Error("Dialog class already defined");this._dialogClassMap[a]=new e(a,b)},a.prototype.getClass=function(a){return this._dialogClassMap[a]},a.prototype.closeAllDialogs=function(a){var b=this._dialogClassMap[a];b.openDialogs.forEach(function(a){a.dismiss()})},a}(),g=function(){function a(a,b){this.closeHander=b,this.deferred=a.defer(),this.opened=a.when(null)}return a.prototype._close=function(){this.isOpen=!1},a.prototype.closeAnimationEnded=function(){this.closeHander()},a.prototype.onDialogPositionChanged=function(a){var b=this._scope.draggableDialogOptions;this._position.left=a.left,this._position.top=a.top,b.onDialogPositionChanged&&b.onDialogPositionChanged(a)},a.prototype.close=function(a){this._close(),this.deferred.resolve(a)},a.prototype.dismiss=function(a){this._close(),this.deferred.reject(a)},Object.defineProperty(a.prototype,"result",{get:function(){return this.deferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scope",{get:function(){return this._scope},set:function(a){this._scope=a,this._position=angular.extend({},a.draggableDialogOptions.position)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this._position},set:function(a){this._position=a},enumerable:!0,configurable:!0}),a}();b.ModelessInstance=g;var h=function(){function b(a,b){this.$rootScope=a,this.$q=b,this.topLevels=[],this.zIndexStack=[],this._dialogClassManager=new f}return Object.defineProperty(b.prototype,"dialogClassManager",{get:function(){return this._dialogClassManager},enumerable:!0,configurable:!0}),b.prototype.updateZIndexes=function(){this.zIndexStack.forEach(function(a,b){a.zIndex=b+1})},b.prototype.onClosed=function(b){b.isOpen=!1,a.spliceAll(this.topLevels,function(a){return a===b}),a.spliceAll(this.zIndexStack,function(a){return a===b}),b.dialogClass&&b.dialogClass.removeModalLessDialog(b),this.updateZIndexes()},b.prototype.open=function(a,b,c){var d=this,e=new g(this.$q,function(){return d.onClosed(e)});if(c){var f=this._dialogClassManager.getClass(c);if(!f)throw"Provided dialog class not defined";f.getRelativeDialog=function(a){var b=d.zIndexStack.filter(function(a){return a.dialogClass===f});return b[b.indexOf(a)-1]},e.dialogClass=f,f.addModalLessDialog(e)}return this.zIndexStack.push(e),this.$rootScope.$evalAsync(function(){d.topLevels.push(e),d.updateZIndexes()}),e.templateUrl=a.templateUrl,e.scope=a.scope,e.headerClass=b,"string"==typeof a.size&&(e.class="modal-"+a.size),e.scope.$dismiss=function(a){e.dismiss(a)},e.scope.$close=function(a){e.close(a)},e},b.prototype.onSelected=function(a){this.bringToFront(a)},b.prototype.bringToFront=function(b){this.zIndexStack[this.zIndexStack.length-1]!==b&&(a.spliceAll(this.zIndexStack,function(a){return a===b}),this.zIndexStack.push(b),this.updateZIndexes())},b}();b.TopLevelWindowMananger=h,angular.module("ionwebTk").controller("ionweb.topLevelController",["$scope","ionweb.dialogService",function(a,b){a.topLevels=b.topLevelManager.topLevels,a.onMouseDown=function(a){b.topLevelManager.onSelected(a)}}]),angular.module("ionwebTk").directive("ionwebTopLevel",["$compile","$templateCache","$timeout","ionweb.dialogService",function(a,c,d,e){var f=40,g=function(d,g){var h,i,j=d.ionwebTopLevel,k=j.scope.xsScreenSize,l=j.scope.maxDialogHeight,m=j.scope.draggableDialogOptions,n=j.dialogClass,o=function(){if(k)g.css({top:0,left:0,"max-height":l});else{if(a=m.position,!a&&n)var a=n.getNextOpeningPosition(j);var b,c;if(a){b=a.top,c=a.left;var d={width:$(window).width(),height:$(window).height()};if(n&&(b+Math.ceil(g.outerHeight())>d.height||c+Math.ceil(g.outerWidth())>d.width)){var e=Math.ceil(g.outerWidth()),h=n.getRelativeDialog(j);c=h.position.left,h.position.top===f&&(c=0),b=f}}else{b=f;var i=$("body").width(),e=Math.ceil(g.outerWidth());c=(i-e)/2}j.position={top:b,left:c},g.css({top:b,left:c,"max-height":l-f})}},p=function(){k||(g.draggable({handle:"."+(j.headerClass||"modal-header"),
scroll:!0,scrollAxis:"y"}),g.on("dragstop",function(a,b){d.$evalAsync(function(){var a={};a.left=b.position.left>0&&b.position.left||0,a.top=b.position.top>0&&b.position.top||0;var c=g.outerWidth();a.left+c>window.innerWidth&&(a.left=window.innerWidth-c);var d=g.outerHeight();a.top+d>window.innerHeight&&(a.top=window.innerHeight-d),g.css("top",a.top).css("left",a.left),j.onDialogPositionChanged({left:a.left,top:a.top})})}))};g.addClass(j.class);var q=function(){return!k&&e.enableAnimations!==!1},r=j.scope.$on(b.DialogService.ContentReadyEventName,function(){h&&(g.css("visibility","hidden"),g.append(h),p(),o(),q()&&g.addClass("dialog-sandra-animation-open"),g.css("visibility",""))}),s=j.scope.$on(b.DialogService.ContentLoadFailedEventName,function(){h&&(g.css("visibility","hidden"),g.append(h),o(),g.css("visibility",""))});o();var t=c.get(j.templateUrl);h=a(t)(j.scope),j.scope.resizable&&!k&&(i=new b.ResizableDialogManager({rootElement:g,dialogElement:h,isTouchDevice:j.scope.isTouchDevice})),d.$watch("ionwebTopLevel.zIndex",function(){g.css("z-index",j.zIndex)}),q()&&g.get(0).addEventListener("animationend",function(a){"anim-open"===a.animationName?g.removeClass("dialog-sandra-animation-open"):(g.css("visibility","hidden"),d.$evalAsync(function(){return j.closeAnimationEnded()}))}),d.$watch("ionwebTopLevel.isOpen",function(a){a===!1&&q()?g.addClass("dialog-sandra-animation-close"):0!=a||q()||d.$evalAsync(function(){return j.closeAnimationEnded()})}),d.$watch("ionwebTopLevel.scope.maxDialogHeight",function(a,b){a!==b&&(l=a,o())}),j.scope.$on("$destroy",function(){r(),s(),i&&i.dispose()})};return{link:g,scope:{ionwebTopLevel:"="}}}])}(b=a.dialogs||(a.dialogs={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c;angular.module("ionwebTk").directive("ionTooltip",["$compile","$templateCache","ionweb.popupService","$q",function(d,e,f,g){function h(b){switch(b){case a.DialogSeverity.Danger:return"tip-error";case a.DialogSeverity.Warning:return"tip-warning";default:return"tip-info"}}return{restrict:"A",scope:{options:"=ionTooltip"},link:function(a,d){a.$watch("options",function(){if(c&&c.destroy(),a.options){var e,i={automaticallyUpdatePosition:!0,automaticallyClose:a.options.autoClose!==!1,showAnchorPointArrow:!0,anchorPoint:b.PopupAnchorPoint.BottomLeft};if(a.options.contentTemplateUrl)e=f.createPopup(a.options.contentTemplateUrl,d,a.options.scope,i);else if(a.options.contentTemplate){var j=a.options.contentTemplate;j&&"<"!==j.charAt(0)&&(j="<div>"+j+"</div>"),e=g.when(f.createWithTemplate(j,d,a.options.scope,i))}e&&e.then(function(b){if(c&&c.destroy(),c=b,b){d.off("hover"),a.options.showImmediately?b.show():d.hover(function(){b.show()},function(){b.hide()});var e=b.element;e.addClass("tooltip-popup"),e.children()&&$(e.children()[0]).addClass("tooltip-popup-content"),e.addClass(h(a.options.severity))}})}}),a.$on("$destroy",function(){d&&d.off("hover"),c&&c.destroy()})}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.General=0]="General",a[a.Divider=1]="Divider",a[a.Custom=2]="Custom",a[a.Submenu=3]="Submenu",a[a.Checkbox=4]="Checkbox"}(b=a.MenuItemType||(a.MenuItemType={}));var c;!function(a){a[a.BottomLeft=0]="BottomLeft",a[a.BottomRight=1]="BottomRight",a[a.TopLeft=2]="TopLeft",a[a.TopRight=3]="TopRight",a[a.LeftBottom=4]="LeftBottom",a[a.LeftTop=5]="LeftTop",a[a.RightBottom=6]="RightBottom",a[a.RightTop=7]="RightTop"}(c=a.ContextMenuAnchorPoint||(a.ContextMenuAnchorPoint={}))}(ionweb||(ionweb={}));var ionweb;!function(a){a.LONG_TOUCH_DELAY=750,a.DOUBLE_TOUCH_DELAY=300;var b=300,c=function(){function c(a,b,c,d,e,f,g,h,i){this.$window=a,this.$rootScope=b,this.longTouchService=c,this.popupService=d,this.$compile=e,this.$templateCache=f,this.$q=g,this.$timeout=h,this.environment=i,this.submenuTimeout=0,this.registered=[],this.openSubMenus=[],this.scopesToDestroy=[],this.openSubMenus=[],this.initBrowserContextMenu(!1),this.isTouchAvailable=i.isTouchDevice(),$(document).on("contextmenu",".dropdown-context",function(a){a.preventDefault()})}return c.prototype.closeAll=function(b){if(this.clearSubmenuTimeout(),b){var c=b.closest("."+a.toolkit.POPUP_CLASS_CONTAINER);if(c.length&&(c.get(0)===b.get(0)||$.contains(c.get(0),b.get(0))))return}for(var d=this.openSubMenus.length;--d>-1;){var e=this.openSubMenus[d];e&&e.menuType===a.MenuItemType.Submenu&&(e.isOpen=!1)}this.openSubMenus.splice(0),this.closeRootMenu()},c.prototype.closeRootMenu=function(){this.rootMenu&&(this.rootMenu.destroy(),this.rootMenu=null)},c.prototype.closeContextMenu=function(a){this.clearSubmenuTimeout(),a&&(a===this.rootMenu?this.closeRootMenu():a.destroy())},c.prototype.initBrowserContextMenu=function(a){var b=$(document.body),c=function(){return[]};a?this.detachElement(b):this.attachElement(b,c)},c.prototype.setGroupItems=function(a,b){a.forEach(function(a){a.groupId===b.groupId&&(a.checked=a===b)})},c.prototype.init=function(b,c){for(var d=this,e=!1,f=0;f<b.length;f++){var g=b[f];(g.icon&&0!==g.icon.length||g.menuType===a.MenuItemType.Checkbox)&&(e=!0)}var h=!1;return b.forEach(function(f,g,i){if(f.fileChooser){var j=d.$rootScope.$new();j.importFileContent="",j.text=f.text,j.tooltip=f.tooltip,j.$watch("importFileContent",function(a){a&&(f.fileChooser(a),d.closeContextMenu(d.popup))}),f.scope=j,f.template='<ion-file-chooser text="text" tooltip="tooltip" text-content="importFileContent"></ion-file-chooser>',d.scopesToDestroy.push(j)}if(f.menuType=d.resolveMenuItemType(f),f._leaveIconSpace=e,f.menuLevel=c,f.isOpen=!1,f.menuType!==a.MenuItemType.Divider||h)if(h){if(f.menuType===a.MenuItemType.Divider){var k=i[g+1];k?f.isVisible=k&&d.resolveMenuItemType(k)!==a.MenuItemType.Divider:f.isVisible=!1}}else h=f.menuType!==a.MenuItemType.Divider;else f.isVisible=!1;void 0!==f.autoClose&&null!==f.autoClose||(f.autoClose=!0),f.itemClicked=function(c){f.needDirectEvent||(f.menuType!==a.MenuItemType.Custom&&(c.preventDefault(),c.stopPropagation()),f.disabled||!f.action&&f.menuType!==a.MenuItemType.General&&f.menuType!==a.MenuItemType.Checkbox||(f.menuType===a.MenuItemType.Checkbox&&(f.groupId?d.setGroupItems(b,f):f.checked=!f.checked),d.$timeout(function(){f.action&&f.action(),f.autoClose&&d.closeAll()})))},f.directItemClicked=function(a){a.preventDefault(),a.stopPropagation(),f.disabled||(f.action&&f.action(),d.$timeout(function(){f.autoClose&&d.closeAll()}))},f.menuType===a.MenuItemType.Submenu&&f.subMenu&&(f.subMenu=d.init(f.subMenu,f.menuLevel+1))}),b},c.prototype.resolveMenuItemType=function(b){return a.MenuItemType[b.menuType]?b.menuType:b.template||b.templateUrl?a.MenuItemType.Custom:b.subMenu?a.MenuItemType.Submenu:b.isDivider?a.MenuItemType.Divider:a.MenuItemType.General},c.prototype.attachElement=function(b,c,d,e){var f=this,g=function(g){g.preventDefault(),g.stopPropagation();var h=e&&a.extend({},[e])||{position:{left:g.pageX,top:g.pageY}};h.position||a.ContextMenuAnchorPoint[h.anchorPoint]||(h.position={left:g.pageX,top:g.pageY}),d?d(g.target,h):f._openContextMenu(c(g.target),b.get(0),h,g.target)};this.isTouchAvailable?this.longTouchService.registerHandler(b,function(g,h,i){var j=e&&a.extend({},[e])||{position:{left:h,top:i}};j.position||a.ContextMenuAnchorPoint[j.anchorPoint]||(j.position={left:h,top:i}),d?d(g,j):f._openContextMenu(c(g),b.get(0),j,g)}):($(b).on("contextmenu",g),this.registered.push({element:b,handler:g}))},c.prototype.detachElement=function(a){if(this.isTouchAvailable)this.longTouchService.unregisterHandler(a);else for(var b=this.registered.length-1;b>=0;b--)this.registered[b].element[0]===a[0]&&($(a).off("contextmenu",this.registered[b].handler),this.registered.splice(b,1))},c.prototype.closeSubmenus=function(a){for(var b=this.openSubMenus.length;--b>=a.menuLevel;){var c=this.openSubMenus[b];c&&(c.isOpen=!1)}this.openSubMenus.splice(a.menuLevel)},c.prototype.openSubmenu=function(b){b.menuType!==a.MenuItemType.Submenu||b.disabled||(this.openSubMenus.indexOf(b)===-1&&this.openSubMenus.push(b),b.isOpen=!0)},c.prototype.clearSubmenuTimeout=function(){0!==this.submenuTimeout&&(clearTimeout(this.submenuTimeout),this.submenuTimeout=0)},c.prototype.openContextMenu=function(a,b,c){this._openContextMenu(a,b,c)},c.prototype._openContextMenu=function(c,d,e,f){var g=this;if(this.closeAll($(f||d)),c&&c.length){var h=this.$rootScope.$new();h.items=this.init(c,0),h.showSubmenu=function(a,c){g.clearSubmenuTimeout(),g.submenuTimeout=setTimeout(function(){h.$evalAsync(function(){g.closeSubmenus(c),g.openSubmenu(c)})},b)},h.closeSubmenu=function(a,c){g.clearSubmenuTimeout(),g.submenuTimeout=setTimeout(function(){h.$evalAsync(function(){g.closeSubmenus(c)})},b)},h.clearSubmenuTimeout=function(a){g.clearSubmenuTimeout()};var i={showAnchorPointArrow:!0,automaticallyCloseOnAnchorBoundsChange:!0};if(e&&e.disableAutoPosition&&(i.automaticallyUpdatePosition=!1),e&&e.position){var j=$(d).offset();i.position={left:e.position.left-j.left,top:e.position.top-j.top},i.anchorPoint=a.toolkit.PopupAnchorPoint.PositionProvided}else e&&a.ContextMenuAnchorPoint[e.anchorPoint]?i.anchorPoint=a.toolkit.PopupAnchorPoint[a.toolkit.PopupAnchorPoint[e.anchorPoint]]:i.anchorPoint=a.toolkit.PopupAnchorPoint.BottomLeft;this.popupService.create("toolkit/contextmenu/contextMenu.tpl.html",$(d),h,i).then(function(a){if(g.popup=a,a.onClose.add(function(){g.rootMenu===a?g.closeAll():g.closeSubmenus(a),h.$destroy(),g.scopesToDestroy.forEach(function(a){return a.$destroy()}),g.scopesToDestroy=[],e&&e.onDestroy&&setTimeout(function(){e.onDestroy()},0)}),a.show(),e&&e.onCreate){var b={close:function(){g.closeContextMenu(a)}};e.onCreate(b)}g.rootMenu=a})}},c}();angular.module("ionwebTk").service("ionweb.contextMenuService",["$window","$rootScope","ionweb.longTouchHandlerService","ionweb.popupService","$compile","$templateCache","$q","$timeout","ionwebTk.environmentService",function(a,b,d,e,f,g,h,i,j){return new c(a,b,d,e,f,g,h,i,j)}]),angular.module("ionwebTk").service("ionweb.longTouchHandlerService",[function(){function b(b){var d=b.originalEvent;g=d.changedTouches,d.touches.length>1&&f?c():f=setTimeout(function(){if(f){f=null;var a=b.originalEvent.target;h.forEach(function(b){if(a===b.element[0]||$.contains(b.element[0],a)){var c=d.touches[0];b.handler(a,c.pageX,c.pageY)}})}},a.LONG_TOUCH_DELAY)}function c(){f&&(clearTimeout(f),f=null)}function d(a,d){h.push({element:a,handler:d}),$(a).on("touchstart",b),$(a).on("touchend touchcancel",c)}function e(a){h=h.filter(function(b){return b.element!==a}),$(a).off("touchstart",b),$(a).off("touchend touchcancel",c)}var f,g,h=[];return{registerHandler:d,unregisterHandler:e}}]),angular.module("ionwebTk").directive("ionwebContextMenuHandler",["ionweb.contextMenuService",function(a){var b=function(b,c){var d=!!b.customHandler&&function(a,c){b.customHandler(a,c)};a.attachElement(c,function(a){var c=[];return b.$apply(function(){var d=b.$eval(b.ionwebContextMenuHandler);"function"==typeof d?c=d(a):"object"==typeof d&&Array.isArray(d)&&(c=d)}),c},d,b.options),b.$on("$destroy",function(){a.detachElement(c)})};return{link:b,restrict:"A",scope:{ionwebContextMenuHandler:"&",customHandler:"=?",options:"=?"}}}]),angular.module("ionwebTk").directive("contextMenuCustomItem",["$templateCache","$compile",function(a,b){return{link:function(c,d){var e=c.templateScope;e||(e=c.$new(),c.$on("$destroy",function(){e.$destroy()}));var f=c.templateUrl&&a.get(c.templateUrl)||c.template;if(f){var g=b(f)(e);d.append(g)}},restrict:"EA",replace:!0,scope:{templateUrl:"@",template:"@",templateScope:"=?"}}}]),angular.module("ionwebTk").directive("contextMenuSubmenuItem",["ionweb.contextMenuService","ionweb.popupService","$q","$timeout",function(c,d,e,f){var g=function(e,f){function g(){0!==k&&(clearTimeout(k),k=0)}var h=null,i=e.item.scope||e.$new(),j=!!e.item.scope,k=0,l=null,m=!1;e.item.subMenu?e.items=e.item.subMenu:e.item.asyncSubMenus&&(m=!0,e.item.asyncSubMenus().then(function(a){e.items=a}).catch(function(a){e.items=[e.fallbackMenu]}).finally(function(){e.items&&c.init(e.items,e.item.menuLevel+1),m=!1,l&&l()})),i.leaveIconSpace=e.leaveIconSpace,e.showSubmenu=function(a,d){c.clearSubmenuTimeout(),g(),k=setTimeout(function(){e.$evalAsync(function(){c.closeSubmenus(d),c.openSubmenu(d)})},b)},e.closeSubmenu=function(a,d){c.clearSubmenuTimeout(),g(),k=setTimeout(function(){e.$evalAsync(function(){c.closeSubmenus(d)})},b)},e.clearSubmenuTimeout=function(a){g()};var n=function(b,c){if(b!==c&&e.items&&e.items.length){if(h)return void h.show();var i={anchorPoint:a.toolkit.PopupAnchorPoint.RightTop};d.create("toolkit/contextmenu/contextMenu.tpl.html",f.parent(),e,i).then(function(a){h=a,e.item.isOpen&&h.show(),h.onClose.add(function(){g(),h&&(h.destroy(),h=null)})})}};e.$watch("item.isOpen",function(a,b){a?(l=function(){m?e.isLoading=!0:(n(a,b),l=null,e.isLoading=!1)})():(n(a,b),l=null,e.isLoading=!1,h&&h.hide())}),f.on("$destroy",function(){g(),h&&(h.destroy(),h=null),j||i.$destroy()}),e.$on("$destroy",function(){g(),h&&(h.destroy(),h=null),j||i.$destroy()})};return{restrict:"EA",link:g,scope:{item:"=?",leaveIconSpace:"=?"},templateUrl:"toolkit/contextmenu/contextMenuSubmenuItem.tpl.html"}}]),angular.module("ionwebTk").directive("directClickDir",[function(){return{restrict:"A",scope:!1,link:function(a,b,c){var d=c.directClickDir;d&&a.$watch(d,function(a){a&&b.on("click",function(b){return a(b)})})}}}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(a,b,c,d){this.element=a,this.scope=b,this.$compile=c,this.$templateCache=d,this.customTemplateScopes=[]}return c.prototype.getValidationEntry=function(a){var b=this.scope.entries.map(function(a){return a.key}).indexOf(a);return this.scope.entries[b]},c.prototype.refreshSummary=function(){this.removeExistingDOMNodes();var a=[];this.scope.hasServiceError=!1;for(var c=0;c<this.scope.entries.length;c++){var d=this.scope.entries[c];d.validationState===b.ValidationState.ServiceError&&(this.scope.hasServiceError=!0,a.push(d))}if(this.scope.hasServiceError?this.scope.filteredEntries=a:this.scope.filteredEntries=this.scope.entries.slice(),this.scope.filteredEntries=this.scope.filteredEntries.reverse(),this.scope.disableGroupingOnErrorWarning||this.scope.hasServiceError)this.appendEntriesToDOM(this.scope.filteredEntries);else{var e=[],f=[];this.scope.filteredEntries.map(function(a){a.validationState===b.ValidationState.Error?e.push(a):f.push(a)}),this.appendEntriesToDOM(e),this.appendEntriesToDOM(f)}},c.prototype.appendEntriesToDOM=function(c){var d=this;c.forEach(function(c){var e="",f="",g="";c.validationState==b.ValidationState.Error?(e="validation-summary-error-entry",f=a.toolkit.Strings.Title_Error,g="error"):c.validationState==b.ValidationState.Warning?(e="validation-summary-warning-entry",f=a.toolkit.Strings.Title_Warning,g="warning"):c.validationState==b.ValidationState.ServiceError&&(e="validation-summary-service-error-entry",f="",g="error");var h='<ionweb-icon class="ion-toolbar-button-margin validation-summary-icon"  icon="'+g+'"></ionweb-icon>',i='<label class="validation-summary-label">'+(f?f+": ":"")+(c.field?c.field+": ":"")+(c.message?c.message:"")+"</label>",j=h+i,k=document.createElement("div");$(k).addClass(e+" validation-summary-entry"),$(k).append(d.$compile(j)(d.scope)),d.appendCustomTemplate(c,k);var l=$(d.element).find(".validation-summary-messages");l.append(k)})},c.prototype.removeExistingDOMNodes=function(){var a=$(this.element).find(".validation-summary-messages"),b=a.find(".validation-summary-entry");this.customTemplateScopes.forEach(function(a){a.$destroy()}),this.customTemplateScopes=[],b.remove()},c.prototype.appendCustomTemplate=function(a,b){var c;if(a.template){var d=this.$templateCache.get(a.template)||a.template,e=a.templateScope;e||(e=this.scope.$new(!0),this.customTemplateScopes.push(e)),c=this.$compile(d)(e),c&&c.length&&b.appendChild(c[0])}},c.prototype.destroy=function(){this.removeExistingDOMNodes()},c}();angular.module("ionwebTk").directive("ionwebValidationSummary",["$compile","$templateCache",function(a,b){function d(d,e,f){var g=new c(e,d,a,b);e.addClass("validation-summary"),d.$watchGroup(["entries.length","disableGroupingOnErrorWarning"],function(){g.refreshSummary()}),d.onValidationSummaryLoad&&d.onValidationSummaryLoad(g),e.on("$destroy",function(){g.destroy()})}return{restrict:"E",scope:{entries:"=ngModel",onValidationSummaryLoad:"=?",disableGroupingOnErrorWarning:"=?",panelTitle:"@",hideTitle:"=?"},link:d,templateUrl:"toolkit/validationtooltip/validationSummary.tpl.html"}}])}(b=a.validation||(a.validation={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f){void 0===d&&(d=a.ValidationState.Valid);var g=this;this._element=b,this.errorAnimation=e,this.showOnError=f,this.mouseHoverHandler=this.onMouseHoverEventHandler.bind(this),this.mouseLeaveHandler=this.onMouseLeaveEventHandler.bind(this),this.setState(d),this.message=c,this._element.on("$destroy",function(){g.removeTooltip()})}return Object.defineProperty(b.prototype,"useInnerBorder",{set:function(a){this._useInnerBorder=a,this.updateTooltip()},enumerable:!0,configurable:!0}),b.prototype.setState=function(b){"string"==typeof b?this.state=a.ValidationState[b]:this.state=b},Object.defineProperty(b.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a,this.updateTooltip()},enumerable:!0,configurable:!0}),b.prototype.updateValidationClass=function(a,c){var d=b.allClasses.filter(function(b){return b!==a}).join(" ");this._element.removeClass(d),a&&this._element.addClass(a),c&&this._element.addClass(b.ErrorShakeAnimationClassName)},b.prototype.updateTooltip=function(){switch(!this.showOnError||this.state!==a.ValidationState.Error&&this.state!==a.ValidationState.Warning||(this.addShowTooltip(),this._element.unbind("blur",this.mouseLeaveHandler),this._element.bind("blur",this.mouseLeaveHandler)),this.state){case a.ValidationState.Error:this.updateValidationClass(this._useInnerBorder?b.ErrorInnerBorderClassName:b.ErrorOuterBorderClassName,this.errorAnimation),this.registerMouseHoverHandlers();break;case a.ValidationState.Warning:this.updateValidationClass(this._useInnerBorder?b.WarningInnerBorderClassName:b.WarningOuterBorderClassName),this.registerMouseHoverHandlers();break;case a.ValidationState.Success:this.updateValidationClass(this._useInnerBorder?b.SuccessInnerBorderClassName:b.SuccessOuterBorderClassName),this.registerMouseHoverHandlers();break;case a.ValidationState.Info:this.updateValidationClass(this._useInnerBorder?b.InfoInnerBorderClassName:b.InfoOuterBorderClassName),this.registerMouseHoverHandlers();break;default:this.unregisterMouseHoverHandlers(),this.removeTooltip(),this.updateValidationClass(null)}},b.prototype.addShowTooltip=function(){this.addTooltip(),this.getTooltip()&&angular.element(this._element).tooltip("show")},b.prototype.onMouseHoverEventHandler=function(a){this.addShowTooltip()},b.prototype.onMouseLeaveEventHandler=function(a){this.getTooltip()&&this.removeTooltip()},b.prototype.getTooltip=function(){return angular.element(this._element).data("bs.tooltip")},b.prototype.addTooltip=function(){angular.element(this._element).tooltip({title:this._message,html:!0,container:"body",trigger:"manual",placement:"auto bottom"}),this.removeExistingClassesOnStateChange(),void 0!=this.getTooltip()&&(this.getTooltip().options.title=this._message,this.addNewClassesOnStateChange())},b.prototype.removeTooltip=function(){this.getTooltip()&&angular.element(this._element).tooltip("destroy")},b.prototype.registerMouseHoverHandlers=function(){this.unregisterMouseHoverHandlers(),this._element.bind("mouseover",this.mouseHoverHandler),this._element.bind("mouseleave",this.mouseLeaveHandler)},b.prototype.unregisterMouseHoverHandlers=function(){this._element.unbind("mouseover",this.mouseHoverHandler),this._element.unbind("mouseleave",this.mouseLeaveHandler)},b.prototype.removeExistingClassesOnStateChange=function(){var a=this.getTooltip(),b=a&&a.tip(0);b&&(b.removeClass("tip-success"),b.removeClass("tip-warning"),b.removeClass("tip-error"),b.removeClass("tip-info"))},b.prototype.addNewClassesOnStateChange=function(){var b=this._state,c=this.getTooltip(),d=c&&c.tip(0);if(d)switch(b){case a.ValidationState.Success:d.addClass("tip-success");break;case a.ValidationState.Error:d.addClass("tip-error");break;case a.ValidationState.Warning:d.addClass("tip-warning");break;case a.ValidationState.Info:d.addClass("tip-info")}},Object.defineProperty(b.prototype,"message",{get:function(){return this._message},set:function(a){this._message=a;var b=this.getTooltip();b&&(b.options.title=a)},enumerable:!0,configurable:!0}),b.ErrorInnerBorderClassName="validation-error-inner-border",b.WarningInnerBorderClassName="validation-warning-inner-border",b.SuccessInnerBorderClassName="validation-success-inner-border",b.InfoInnerBorderClassName="validation-info-inner-border",b.ErrorOuterBorderClassName="validation-error",b.WarningOuterBorderClassName="validation-warning",b.SuccessOuterBorderClassName="validation-success",b.InfoOuterBorderClassName="validation-info",b.ErrorShakeAnimationClassName="error-shake",b.allClasses=[b.ErrorInnerBorderClassName,b.WarningInnerBorderClassName,b.SuccessInnerBorderClassName,b.InfoInnerBorderClassName,b.ErrorOuterBorderClassName,b.WarningOuterBorderClassName,b.SuccessOuterBorderClassName,b.InfoOuterBorderClassName,b.ErrorShakeAnimationClassName],b}();a.ValidationController=b,angular.module("ionwebTk").directive("ionwebValidation",["$compile","$templateCache",function(a,c){function d(a,c,d){var e=new b(c,a.$eval(d.validationMessage),a.$eval(d.validationState));a.$watch(function(){return a.$eval(d.validationState)},function(a){return e.setState(a)}),a.$watch(function(){return a.$eval(d.validationMessage)},function(a){return e.message=a}),a.$watch(function(){return a.$eval(d.errorAnimation)},function(a){return e.errorAnimation=a}),a.$watch(function(){return a.$eval(d.showOnError)},function(a){return e.showOnError=a})}return{restrict:"A",link:d,scope:!1}}])}(b=a.validation||(a.validation={}))}(ionweb||(ionweb={}));var cssElementQueries;!function(a){var b=function(){function a(b,c){function d(){this.q=[],this.add=function(a){this.q.push(a)};var a,b;this.call=function(){for(a=0,b=this.q.length;a<b;a++)this.q[a].call()}}function e(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b]}function f(a,b){if(a[g.markerNameInstance]){if(a[g.markerNameInstance])return void a[g.markerNameInstance].add(b)}else a[g.markerNameInstance]=new d,a[g.markerNameInstance].add(b);a[g.resizeNameInstance]=document.createElement("div"),a[g.resizeNameInstance].className="resize-sensor";var c="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",f="position: absolute; left: 0; top: 0;";a[g.resizeNameInstance].style.cssText=c,a[g.resizeNameInstance].innerHTML='<div class="resize-sensor-expand" style="'+c+'"><div style="'+f+'"></div></div><div class="resize-sensor-shrink" style="'+c+'"><div style="'+f+' width: 200%; height: 200%"></div></div>',a.appendChild(a[g.resizeNameInstance]),{fixed:1,absolute:1}[e(a,"position")]||(a.style.position="relative");var h,i,j=a[g.resizeNameInstance].childNodes[0],k=j.childNodes[0],l=a[g.resizeNameInstance].childNodes[1],m=(l.childNodes[0],function(){var b=j.offsetWidth+10+"px";k.style.width!==b&&(k.style.width=b);var c=j.offsetHeight+10+"px";k.style.height!==c&&(k.style.height=c),j.scrollLeft!==j.scrollWidth&&(j.scrollLeft=j.scrollWidth),j.scrollTop!==j.scrollHeight&&(j.scrollTop=j.scrollHeight),l.scrollLeft!==l.scrollWidth&&(l.scrollLeft=l.scrollWidth),l.scrollTop!==l.scrollHeight&&(l.scrollTop=l.scrollHeight),h=a.offsetWidth,i=a.offsetHeight});m();var n=function(){a[g.markerNameInstance]&&a[g.markerNameInstance].call()},o=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)};o(j,"scroll",function(){(a.offsetWidth>h||a.offsetHeight>i)&&n(),m()}),o(l,"scroll",function(){(a.offsetWidth<h||a.offsetHeight<i)&&n(),m()})}this.element=b,this.instance=a.instanceCount++;var g=this;if("[object Array]"===Object.prototype.toString.call(b)||"undefined"!=typeof jQuery&&b instanceof jQuery)for(var h=0,i=b.length;h<i;h++)f(b[h],c);else f(b,c)}return Object.defineProperty(a.prototype,"markerNameInstance",{get:function(){return"resizedAttached_"+this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"resizeNameInstance",{get:function(){return"resizeSensor_"+this.instance},enumerable:!0,configurable:!0}),a.prototype.detach=function(){if(this.element[this.resizeNameInstance]){var a=this.element[this.resizeNameInstance];a&&a.parentElement&&this.element.removeChild(a),delete this.element[this.resizeNameInstance],delete this.element[this.markerNameInstance]}},a.instanceCount=0,a}();a.ResizeSensor=b}(cssElementQueries||(cssElementQueries={}));var ionweb;!function(a){var b=function(){function b(a,b){this.windowService=a,this.cfgService=b}return b.prototype.computeSizeInfo=function(a){var c=a.width(),d=a.height(),e=this.cfgService.getFontSize();return b.convertHtmlSizeToSizeInfo(c,d,e)},b.convertHtmlSizeToSizeInfo=function(a,c,d){a<0&&(a=0),c<0&&(c=0);var e=a+2*d,f=c+2*d,g=Math.floor(e/d),h=Math.floor(f/d),i=null;b.designSizes.some(function(a){return g>=a.bound&&(i=a,!0)});var j={name:i.name,bound:i.bound},k={width:a,height:c,emWidth:g,emHeight:h,designSize:j};return k},b.prototype.register=function(b,c){var d,e=this,f=this.computeSizeInfo(b),g=function(){d&&(f=e.computeSizeInfo(b),c&&c(f))},h=a.throttle(g,50),i=b[0],j=function(){h()};d=new cssElementQueries.ResizeSensor(i,j),this.windowService.addEventListener("resize",j);var k=function(){d&&(d.detach(),d=null),e.windowService.removeEventListener("resize",j)};return k.info=f,k},b.designSizes=[{name:"xl",bound:100},{name:"l",bound:72},{name:"m",bound:56},{name:"s",bound:36},{name:"xs",bound:0}],b}();a.ResizeObserverService=b;var c=function(){function b(a,b){this.resizeObserverService=b,this.windowService=a}return b.prototype.register=function(b,c,d){var e=this,f=null,g=[],h=null,i=null,j=!1,k=!1,l=function(a){c&&c(a)},m=function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c].htmlElement!==b[c].htmlElement)return!1;return!0},n=function(a,b){var c=a.parent(),d=c&&c.length&&c[0];if(d&&d!==document.body){var e={htmlElement:d,jqueryElement:c,mutationObserver:null};b.push(e),n(c,b)}},o=function(a){var b=[];return n(a,b),b},p=null,q=function(){k||(k=!0,setTimeout(function(){p(),k=!1},500))},r=function(){return f!==b.offsetParent},s=function(){i&&(i(),i=null),g.forEach(function(a){a.mutationObserver.disconnect()}),g=[],h&&(clearInterval(h),h=null)},t=function(c){g=c;var j=d?g[0].jqueryElement:v;i=e.resizeObserverService.register(j,l),f=b.offsetParent,g.forEach(function(a){a.mutationObserver=new MutationObserver(q),a.mutationObserver.observe(a.htmlElement,{attributes:!0,childList:!0,characterData:!0})}),a.enableTimerToVerifyOffsetParentOnResponsivenessService&&(h=setInterval(function(){var a=r();a&&q()},500))},u=function(a){s(),t(a),c&&c(i.info)};p=function(){if(!j){var a=o(v),b=m(g,a);if(b){var c=r();if(!c)return}u(a)}};var v=$(b),w=o(v);t(w);var x=function(){s(),j=!0};return x.initialSize=i.info,x.computeCurrentSize=function(){return g.length>0&&e.resizeObserverService.computeSizeInfo(g[0].jqueryElement)},x},b}();a.ResponsivenessService=c;var d=function(a,c,d){if(!a)throw new Error("windowService must be defined");if(!c)throw new Error("templateCache must be defined");return{restrict:"E",template:"<div ng-include='responsivenessTemplate'></div>",transclude:!0,scope:!1,link:function(a,e,f){var g=null,h=function(d){a.$evalAsync(function(){var e=null,h=g;g=d.designSize.name;var i=f.responsiveTemplateResolver,j=f.responsiveTemplateResolverDesignSizeDriven;if(j=j&&a.$eval(j),!i||h===g&&j||(e=a.$eval(i,{responsivenessEmWidth:d.emWidth,responsivenessEmHeight:d.emHeight,responsivenessWidth:d.width,responsivenessHeight:d.height,responsivenessDesignSize:d.designSize.name}))){if(!e){if(h===g)return;b.designSizes.some(function(a){var b=f.responsiveTemplatePrefix+"."+a.name+".tpl.html";return!!(d.emWidth>=a.bound&&c.get(b))&&(e=b,!0)})}if(!e)throw new Error("no XS template defined");a.responsivenessTemplate=e}})};setTimeout(function(){var b=d.register(e[0],h,!0);h(b.initialSize),a.$on("$destroy",function(){b&&(b(),b=null)})},0)}}};angular.module("ionwebTk").service("ionweb.resizeObserverService",["$window","ionwebTk.toolkitConfigService",function(a,c){return new b(a,c)}]).service("ionweb.responsivenessService",["$window","ionweb.resizeObserverService",function(a,b){return new c(a,b)}]).directive("responsiveContent",["$window","$templateCache","ionweb.responsivenessService",function(a,b,c){return d(a,b,c)}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.None=0]="None",a[a.Potrait=1]="Potrait",a[a.Landscape=2]="Landscape"}(b=a.Orientation||(a.Orientation={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,b,c){return a.has(b)?a.get(b):c()}var d=function(a){function b(b){var c=a.call(this,b)||this;return c.init(),c}return __extends(b,a),b}(a.localization.DateFormattingServiceBase);angular.module("ionwebTk").service("ionwebTk.dateFormattingService",["$injector","ionwebTk.loggerFactory",function(a,b){return c(a,"ionweb.dateFormattingService",function(){return new d(b)})}]);var e=function(){function a(){}return a.prototype.ifHigh=function(a){},a.prototype.ifMedium=function(a){},a.prototype.ifLow=function(a){},a.prototype.high=function(a,b){},a.prototype.medium=function(a,b){},a.prototype.low=function(a,b){},a}(),f=function(){function a(){}return a.prototype.create=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return new e},a}();angular.module("ionwebTk").service("ionwebTk.loggerFactory",["$injector",function(a){return c(a,"ionweb.loggerFactory",function(){return new f})}]);var g=function(){function a(){}return a.prototype.showError=function(a){alert("Error: "+a)},a}();angular.module("ionwebTk").service("ionwebTk.notificationService",["$injector",function(a){return c(a,"ionweb.notificationService",function(){return new g})}]);var h=function(){function b(){this.orientationChanged=new a.Event}return b.prototype.isTouchDevice=function(){return!1},b.prototype.isSmallScreen=function(){return!1},b.prototype.isMobileDevice=function(){return!1},Object.defineProperty(b.prototype,"orientation",{get:function(){return a.Orientation.None},enumerable:!0,configurable:!0}),b}();angular.module("ionwebTk").service("ionwebTk.environmentService",["$injector",function(a){return c(a,"ionweb.environmentService",function(){return new h})}]),angular.module("ionwebTk").service("ionwebTk.q",["$q",function(a){return"undefined"!=typeof Q?Q:a}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){function b(a){return a&&"@"===a.charAt(0)}function c(c,d){return b(c)?a.THEME_CLASS_PREFIX+"-"+c.substr(1)+"-"+d:null}function d(b,c){var d={styleObj:{},classStr:""};if(null!=b&&(d.classStr=a.getThemeClass(b,c),!d.classStr)){var e=a.THEME_CLASS_POSTFIX_TO_PROPERTY[c];e&&(d.styleObj[e]=b)}return d}a.THEME_PREFIX="ion-theme",a.DensityServiceDefaultFontSize=12,a.DensityServicePixelToRemFactor=1/a.DensityServiceDefaultFontSize,a.THEME_CLASS_PREFIX=a.THEME_PREFIX,a.THEME_CLASS_POSTFIX_TO_PROPERTY={bg:"background-color",fg:"color",brd:"border-color",fill:"fill",stroke:"stroke"},a.isThemeVariable=b,a.getThemeClass=c,a.getThemeClassOrStyle=d}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(){this.tile={rounding:1},this.dialog={useCrossButtonOnSmallScreen:!1},this.autoComplete={showIconOnHover:!1},this.datePicker={showIconOnHover:!1,enableMobileLayoutOnDesktop:!1,disableMobileLayout:!1},this.currentThemeChanged=new a.Event}return c.prototype.getIconVisibilityType=function(a,c){
var d;return a===!0?d=c?b.VisibilityType.OnHover:b.VisibilityType.Always:a===!1?d=b.VisibilityType.Never:void 0!==a&&(d=a),d},c.prototype.getThemeVariables=function(){return this.getThemeVariablesHandler?this.getThemeVariablesHandler():[]},c.prototype.getFontSize=function(){return this.getFontSizeHandler?this.getFontSizeHandler():b.DensityServiceDefaultFontSize},c}();b.ToolkitConfigService=c,angular.module("ionwebTk").service("ionwebTk.toolkitConfigService",c)}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var iosDragDrop;!function(a){function b(a){}function c(a){return function(b){var c=b.target;do if(c.draggable===!0){var d=function(){g.off(),h.off(),j.off(),i(b)},e=function(){g.off(),h.off(),j.off(),clearTimeout(f)},f=setTimeout(d,a),g=k(c,"touchend",e,this),h=k(c,"touchcancel",e,this),j=k(c,"touchmove",e,this);k(window,"touchmove",e,this),k(window,"silenttouchmove",e,this);break}while((c=c.parentNode)&&c!==n.body)}}function d(){o=navigator.userAgent.match(/OS [1-4](?:_\d+)+ like Mac/)?"page":"client";var d=/iPad|iPhone|iPod|Android/.test(navigator.userAgent);if(b((d?"":"not ")+"patching html5 drag drop"),d?a.EVENT_PREFIX="shim-":a.EVENT_PREFIX="",d){var e={holdToDrag:ionweb.LONG_TOUCH_DELAY};e.holdToDrag?n.addEventListener("touchstart",c(e.holdToDrag),{passive:!1}):n.addEventListener("touchstart",i,{passive:!1})}}function e(a){var b=[],c=[];return[].forEach.call(a.changedTouches,function(a){b.push(a.pageX),c.push(a.pageY)}),{x:m(b),y:m(c)}}function f(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function g(a){return(a.changedTouches[0].radiusX+a.changedTouches[0].radiusY)/2||0}function h(a,c){this.dragData={},this.dragDataTypes=[],this.dataTransfer={types:this.dragDataTypes,setData:function(a,b){return this.dragData[a]=b,this.dragDataTypes.indexOf(a)==-1&&(this.dragDataTypes[this.dragDataTypes.length]=a),b}.bind(this),getData:function(a){return this.dragData[a]}.bind(this),dropEffect:"all"},this.dragElement=null,this.dragElementTransform=null,this.dragElementWebKitTransform=null,this.el=c||a.target,this.initPos=null,b("dragstart"),this.dispatchDragStart()&&(this.createDragElement(),this.initPos=e(a)),this.listen()}function i(a){var b;setTimeout(function(){if(b){b.cloned=a.target,b.clone=b.cloned.cloneNode(!0);var c=b.cloned.parentNode,d=Array.prototype.indexOf.call(c.children,b.cloned);document.body.append(b.cloned);var e=function(a,b,c){c||(c=0),c>=a.children.length?a.appendChild(b):a.insertBefore(b,a.children[c])};e(c,b.clone,d)}},0);var c=a.target,d=c;do{if(d.tagName&&"ionweb-grid"===d.tagName.toLowerCase())return;if(d.className&&("string"==typeof d.className&&d.className.toLowerCase().indexOf("gridxrowheaderrow")>-1||d.className&&d.className.baseVal&&d.className.baseVal.toLowerCase().indexOf("gridxrowheaderrow")>-1))break}while((d=d.parentNode)&&d!==n.body);do if(c.draggable===!0){if(!c.hasAttribute("draggable")&&"a"==c.tagName.toLowerCase()){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});c.dispatchEvent(e)}return a.preventDefault(),void(b=new h(a,c))}while((c=c.parentNode)&&c!==n.body)}function j(a,b){var c=b.changedTouches[0],d=n.elementFromPoint(c[o+"X"],c[o+"Y"]);return d}function k(a,b,c,d){return d&&(c=c.bind(d)),a.addEventListener(b,c,{passive:!1}),{off:function(){return a.removeEventListener(b,c,{passive:!1})}}}function l(a,b,c,d){function e(d){return c(d),a.removeEventListener(b,e)}return d&&(c=c.bind(d)),a.addEventListener(b,e)}function m(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}var n=document;a.EVENT_PREFIX="";var o;a.MOVE_THRESHOLD_RADIUSES=2,a.toPoint=e,a.dist=f,a.toRadius=g;var p=!1;h.prototype={listen:function(){function a(a){if(this.dragend(a,a.target),0==p){var b=a.target,d=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});b.dispatchEvent(d)}p=!1,c.call(this)}function c(){return b("cleanup"),this.clone&&this.cloned&&this.clone.parentElement&&this.clone.parentElement.replaceChild(this.cloned,this.clone),this.dragDataTypes=[],null!==this.dragElement&&(this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null,this.dragElementTransform=null,this.dragElementWebKitTransform=null),this.el=this.dragData=null,[d,e,f].forEach(function(a){return a.off()})}var d=k(n,"touchmove",this.move,this),e=k(n,"touchend",a,this),f=k(n,"touchcancel",c,this)},move:function(b){if(b.preventDefault(),this.initPos&&b.changedTouches.length>=1){var c=e(b),d=g(b);(p||f(c,this.initPos)>d*a.MOVE_THRESHOLD_RADIUSES)&&(c.x-=parseInt(this.dragElement.offsetWidth,10)/2,c.y-=parseInt(this.dragElement.offsetHeight,10)/2,this.translateDragElement(c.x,c.y),this.synthesizeEnterLeave(b),p=!0)}},translateDragElement:function(a,b){var c="translate("+a+"px,"+b+"px) ";null!==this.dragElementWebKitTransform&&(this.dragElement.style["-webkit-transform"]=c+this.dragElementWebKitTransform),null!==this.dragElementTransform&&(this.dragElement.style.transform=c+this.dragElementTransform)},synthesizeEnterLeave:function(a){var b=j(this.el,a);b!=this.lastEnter&&(this.lastEnter&&this.dispatchLeave(a),this.lastEnter=b,this.lastEnter&&this.dispatchEnter(a)),this.lastEnter&&this.dispatchOver(a)},dragend:function(c){b("dragend");var d=!1;this.lastEnter&&(d=this.lastEnterIsDroppable,this.dispatchLeave(c));var e=j(this.el,c);e&&d?(b("found drop target "+e.tagName),this.dispatchDrop(e,c)):b("no drop target");var f=n.createEvent("Event");f.dataTransfer=this.dataTransfer,f.initEvent(a.EVENT_PREFIX+"dragend",!0,!0),this.el.dispatchEvent(f)},dispatchDrop:function(c,d){var e=n.createEvent("Event");e.initEvent(a.EVENT_PREFIX+"drop",!0,!0);var f=d.changedTouches[0],g=f[o+"X"],h=f[o+"Y"],i=this.getOffset(c);e.pageX=f.pageX,e.pageY=f.pageY,e.clientX=f.clientX,e.clientY=f.clientY,e.offsetX=g-i.x,e.offsetY=h-i.y,e.dataTransfer=this.dataTransfer,e.preventDefault=function(){}.bind(this),l(n,"drop",function(){b("drop event not canceled")},this),c.dispatchEvent(e)},getOffset:function(a){var b=a.getBoundingClientRect();return{x:b.left,y:b.top}},dispatchEnter:function(b){var c=n.createEvent("Event");c.initEvent(a.EVENT_PREFIX+"dragenter",!0,!0),c.dataTransfer=this.dataTransfer;var d=b.changedTouches[0];c.pageX=d.pageX,c.pageY=d.pageY,c.clientX=d.clientX,c.clientY=d.clientY,this.lastEnter.dispatchEvent(c)},dispatchOver:function(b){var c=n.createEvent("Event");c.initEvent(a.EVENT_PREFIX+"dragover",!0,!0),c.dataTransfer=this.dataTransfer;var d=b.changedTouches[0];c.pageX=d.pageX,c.pageY=d.pageY,c.clientX=d.clientX,c.clientY=d.clientY,this.lastEnterIsDroppable=!this.lastEnter.dispatchEvent(c)},dispatchLeave:function(b){var c=n.createEvent("Event");c.initEvent(a.EVENT_PREFIX+"dragleave",!0,!0),c.dataTransfer=this.dataTransfer;var d=b.changedTouches[0];c.pageX=d.pageX,c.pageY=d.pageY,c.pageY=d.pageY,c.clientX=d.clientX,c.clientY=d.clientY,this.lastEnter.dispatchEvent(c),this.lastEnter=null},dispatchDragStart:function(){var b=n.createEvent("Event");return b.initEvent(a.EVENT_PREFIX+"dragstart",!0,!0),b.dataTransfer=this.dataTransfer,this.el.dispatchEvent(b)},createDragElement:function(){ionweb.toolkit.dndCustomDragPlaceholder?this.dragElement=ionweb.toolkit.dndCustomDragPlaceholder:(this.dragElement=document.createElement("div"),this.dragElement.setAttribute("style","border-style:dotted; border-radius: 1em; width: 40px; height: 40px; background-color:white;")),this.dragElement.style.pointerEvents="none",this.dragElement.style.opacity="0.5",this.dragElement.style.position="absolute",this.dragElement.style.left="0px",this.dragElement.style.top="0px",this.dragElement.style.zIndex="999999";var a=this.dragElement.style.transform;"undefined"!=typeof a&&(this.dragElementTransform="","none"!=a&&(this.dragElementTransform=a.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"")));var b=this.dragElement.style["-webkit-transform"];"undefined"!=typeof b&&(this.dragElementWebKitTransform="","none"!=b&&(this.dragElementWebKitTransform=b.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""))),this.translateDragElement(-9999,-9999),n.body.appendChild(this.dragElement)}},d()}(iosDragDrop||(iosDragDrop={}));var ionweb;!function(a){var b;!function(a){a[a.None=0]="None",a[a.Copy=1]="Copy",a[a.Move=2]="Move",a[a.Link=3]="Link"}(b=a.DnDDropEffect||(a.DnDDropEffect={}));var c;!function(a){a[a.None=0]="None",a[a.Copy=1]="Copy",a[a.Move=2]="Move",a[a.Link=4]="Link",a[a.CopyLink=5]="CopyLink",a[a.CopyMove=3]="CopyMove",a[a.LinkMove=6]="LinkMove",a[a.All=7]="All"}(c=a.DnDEffectAllowed||(a.DnDEffectAllowed={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.dndData={},b.cleanDnDCache=function(){b.dndDropEffect=a.DnDDropEffect.None,b.dndData={},b.dndCustomDragPlaceholder&&(b.dndCustomDragPlaceholderDetachable&&(b.dndCustomDragPlaceholder.parentElement===document.body?document.body.removeChild(b.dndCustomDragPlaceholder):console.warn("cleanDNDCache: tried to remove an already detached placeholder")),b.dndCustomDragPlaceholder=null,b.dndCustomDragPlaceholderDetachable=!1)};var c,d,e,f,g="Text",h=function(){function h(c,d){this.standardDataTransfer=c,h.isInitialized||(b.dndDropEffect=a.DnDDropEffect.None,h.isInitialized=!0),this.isWritable=!!d,this.initSupportArray()}return h.prototype.initSupportArray=function(){if(!c){var b=function(a){return a.charAt(0).toLowerCase()+a.slice(1)};c=[],d={},e=[],f={};for(var g in a.DnDDropEffect)if("number"==typeof a.DnDDropEffect[g]){var h=b(g);d[h]=a.DnDDropEffect[g],c[a.DnDDropEffect[g]]=h}for(var g in a.DnDEffectAllowed)if("number"==typeof a.DnDEffectAllowed[g]){var h=b(g);f[h]=a.DnDEffectAllowed[g],e[a.DnDEffectAllowed[g]]=h}}},h.prototype.getDropEffect=function(){return b.dndDropEffect},h.prototype.setDropEffect=function(a){b.dndDropEffect=a,this.standardDataTransfer.dropEffect=c[b.dndDropEffect]},h.prototype.getEffectAllowed=function(){var b;try{b=f[this.standardDataTransfer.effectAllowed]}catch(c){b=a.DnDEffectAllowed.All}return b},h.prototype.setEffectAllowed=function(a){this.standardDataTransfer.effectAllowed=e[a]},h.prototype.setData=function(a,c){if(!this.isWritable)throw new Error(b.Strings.Err_DragAndDrop_DataTransfer_Writable_Denied);if(b.dndData[a]=c,a==g||!this.standardDataTransfer.types||!this.standardDataTransfer.types.length){var d;d="object"==typeof c?JSON.stringify(c):c,this.standardDataTransfer.setData(g,d)}},h.prototype.getData=function(a){var c;if(a==g&&(c=this.standardDataTransfer.getData(a)),c)try{c=JSON.parse(c)}catch(a){}return void 0!==c&&null!==c||(c=b.dndData[a]),c},h.prototype.availableFormats=function(){var a=[];return Object.keys(b.dndData).forEach(function(c){b.dndData.hasOwnProperty(c)&&a.push(c)}),0==a.length&&this.standardDataTransfer.getData(g)&&a.push(g),a},h.prototype.isAttachedOnBody=function(a){return!!a&&(a==document.body||this.isAttachedOnBody(a.parentElement))},h.prototype.setDragPlaceholder=function(a,c,d){if(a){if(this.isAttachedOnBody(a))b.dndCustomDragPlaceholder=a,b.dndCustomDragPlaceholderDetachable=!1;else{b.dndCustomDragPlaceholder=a;var e=window.getComputedStyle(b.dndCustomDragPlaceholder).height;b.dndCustomDragPlaceholder.style.top="-"+e+"px",b.dndCustomDragPlaceholder.style.position="absolute",b.dndCustomDragPlaceholder.style.zIndex="-1",document.body.appendChild(a),b.dndCustomDragPlaceholderDetachable=!0}this.standardDataTransfer&&this.standardDataTransfer.setDragImage&&this.standardDataTransfer.setDragImage(b.dndCustomDragPlaceholder,c||0,d||0)}},h.prototype.toString=function(){var a=this,b=[];return this.availableFormats().forEach(function(c){var d;try{d=JSON.stringify(a.getData(c))}catch(a){}"string"==typeof d&&(d=d.substr(0,500)),b.push("format: "+c+", value: "+d)}),b.join(" - ")},h.isInitialized=!1,h}();b.DnDDataTransfer=h}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("ionwebDraggable",["ionwebTk.loggerFactory",function(b){return{restrict:"A",scope:!1,link:function(c,d,e){var f,g=!1,h=function(){var a={};return e.dragStart&&(a.dragStart=function(a,b,d){c.$event=d,c.$dataTransfer=b,c.$apply(function(){c.$eval(e.dragStart)}),g=!0}),e.dragEnd&&(a.dragEnd=function(a,b,d){try{c.$event=d,c.$dataTransfer=b,c.$apply(function(){c.$eval(e.dragEnd)})}finally{g=!1}}),a},i=function(){f||(f=new a.DnDDragWrapper(d,h,b))},j=function(){g&&c.$eval(e.dragEnd),f&&(f.dispose(),f=null)},k=e.ionwebDraggable;k?c.$watch(k,function(a){a?i():j()}):i(),c.$on("$destroy",function(){j()})}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionwebDroppable",["ionwebTk.loggerFactory",function(c){return{restrict:"A",scope:!1,link:function(d,e,f){var g,h,i,j=0,k=function(c){var d=Object.keys(a.DnDDropEffect).filter(function(b){var d=parseInt(b,10)>=0;if(d){var e=a.DnDDropEffect[b];return e.toLowerCase()===c.toLowerCase()}});if(d.length)return parseInt(d[0],10);throw c+b.Strings.Err_dropDirective_IsNot_Valid_DropEffect},l=a.throttle(function(){d.$event=i,d.$dataTransfer=g;var a;d.$apply(function(){a=d.$eval(f.dragOver)}),"string"!=typeof a||parseInt(a,10)>=0||(a=k(a)),h=a}),m=function(){var a={};return(f.dragEnter||f.dragLeave)&&(a.dragEnter=function(a,b,c){if(j++,1==j&&f.dragEnter){d.$event=c,d.$dataTransfer=b;var e;return d.$apply(function(){e=d.$eval(f.dragEnter)}),e}}),f.dragOver&&(a.dragOver=function(a,b,c){return g=b,i=c,l(),h}),(f.dragLeave||f.dragEnter)&&(a.dragLeave=function(a,b){j--,0==j&&f.dragLeave&&(l.cancel(),d.$event=b,d.$apply(function(){d.$eval(f.dragLeave)}))}),f.drop&&(a.drop=function(a,b,c){j=0,l.cancel(),d.$event=c,d.$dataTransfer=b,d.$apply(function(){d.$eval(f.drop)})}),a},n=new b.DnDDropWrapper(e,m,c);d.$on("$destroy",function(){n.dispose()})}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(d,e,f){var g=this;this.element=d,f&&(this._logger=f.create("DnDDragWrapper")),this.disableDraggingOnImages(d[0]),this.onDragStart=function(c){g.betweenStartAndEnd=!0;var d=e();b.cleanDnDCache();var f=d.dragStart,h=new b.DnDDataTransfer(c.dataTransfer,!0),i=!1;f&&(f(c.target,h,c),h.availableFormats().length&&(i=!0,h.getEffectAllowed()||h.setEffectAllowed(a.DnDEffectAllowed.All),h.dropToDelete?g.addTrashElement(h.dropToDelete):h.dropToCustomAction&&g.addTrashElement(h.dropToCustomAction.action,h.dropToCustomAction.customIcon))),g._logger&&g._logger.ifLow(function(){return{key:"onDragStart",params:{allowDrag:i,dataTransfer:h.toString()}}}),i||c.preventDefault()},this.onDragEnd=function(a){if(g.betweenStartAndEnd){g._logger&&g._logger.ifLow(function(){return{key:"onDragEnd"}}),g.betweenStartAndEnd=!1;var d=e().dragEnd;d&&(a.preventDefault(),d(a.target,new b.DnDDataTransfer(a.dataTransfer),a)),b.cleanDnDCache(),c.removeTrashTarget(),g.disposeAfterEnd&&g.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragend",g.onDragEnd)}},d.attr("draggable","true"),d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"dragstart",this.onDragStart),d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"dragend",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("mouseup",this.onDragEnd)}return c.prototype.disableDraggingOnImages=function(a,b){!b||"img"!=a.tagName.toLowerCase()||a.getAttribute("ionweb-draggable")||a.getAttribute("draggable")||a.setAttribute("draggable","false");for(var c=0;c<a.children.length;c++)this.disableDraggingOnImages(a.children[c],!0)},c.prototype.addTrashElement=function(b,d){var e=function(){return{dragEnter:function(b,c){return c.setEffectAllowed(a.DnDEffectAllowed.Move),!0},dragLeave:function(a){},dragOver:function(b,c,d){return a.DnDDropEffect.Move},drop:function(a,c,d){b(c)}}},f=50,g=c.createTrashTarget(e,f,d),h=d?parseInt(window.getComputedStyle(d).width):f;g.style.zIndex="9999",g.style.left=document.body.clientWidth/2-h/2+"px",g.style.top="4px"},c.prototype.dispose=function(){this.element.removeAttr("draggable"),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("mouseup",this.onDragEnd),this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragstart",this.onDragStart),this.betweenStartAndEnd?this.disposeAfterEnd=!0:this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragend",this.onDragEnd)},c.removeTrashTarget=function(){c._dndTrashElement&&(c._dndTrashElement.parentElement.removeChild(c._dndTrashElement),c._dndTrashElement=null)},c.createTrashTarget=function(b,e,f,g){c.removeTrashTarget();var h;if(f)h=f;else{var i=e||50,j=$.parseHTML('<span class="dnd-trash-icon glyphicon glyphicon-trash" aria-hidden="true"></span>')[0];h=document.createElement("div"),h.appendChild(j),h.className="dnd-trash",h.style.width=i+"px",h.style.height=i+"px",h.style.borderRadius=i/2+"px"}document.body.appendChild(h);var k=function(){var c=b(),d=a.DnDDropEffect.Move,e="dnd-highlight";return{dragEnter:function(a,b){var e=!0;return c.dragEnter&&(e=c.dragEnter(a,b)),e&&b.setDropEffect(d),e},dragLeave:function(a){h.classList.remove(e),c.dragLeave&&c.dragLeave(a)},dragOver:function(a,b,f){return h.classList.add(e),c.dragOver&&c.dragOver(a,b,f)||d},drop:c.drop}};return new d($(h),k,g),c._dndTrashElement=h,c._dndTrashElement},c}();b.DnDDragWrapper=c;var d=function(){function d(d,e,f){var g=this;this.element=d,f&&(this._logger=f.create("DnDDropWrapper"));var h;this.onDragEnter=function(a){var c=new b.DnDDataTransfer(a.dataTransfer),d=e().dragEnter;d&&d(a.target,c,a)&&a.preventDefault()},this.onDragOver=function(c){var d=e().dragOver;if(d){var f=new b.DnDDataTransfer(c.dataTransfer),g=d(c.target,f,c);0==(g&f.getEffectAllowed())&&(g=a.DnDDropEffect.None),h=g,f.setDropEffect(g),g!=a.DnDDropEffect.None&&c.preventDefault()}},this.onDragLeave=function(c){var d=e().dragLeave;d&&d(c.target,c)&&c.preventDefault(),b.dndDropEffect=a.DnDDropEffect.None},this.onDrop=function(a){var d=e().drop,f=new b.DnDDataTransfer(a.dataTransfer);g._logger&&g._logger.ifLow(function(){return{key:"onDrop",params:{dropProvided:!!d,dataTransfer:f.toString()}}}),b.dndDropEffect=h,d&&(d(a.target,f,a),a.preventDefault()),c.removeTrashTarget()},d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"dragenter",this.onDragEnter),d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"dragleave",this.onDragLeave),d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"dragover",this.onDragOver),d[0].addEventListener(iosDragDrop.EVENT_PREFIX+"drop",this.onDrop)}return d.prototype.dispose=function(){this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragenter",this.onDragEnter),this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragleave",this.onDragLeave),this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"dragover",this.onDragOver),this.element[0].removeEventListener(iosDragDrop.EVENT_PREFIX+"drop",this.onDrop)},d}();b.DnDDropWrapper=d}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("ionwebIcon",["ionweb.iconService",function(a){var b=function(b,c){function d(){var b=a.getDefaultSet();return{iconSet:b,icon:b.icons["--placeHolder"]}}function e(b){var c=a.getDefaultSet(),e=c.icons[b];return e&&{iconSet:c,icon:c.icons[b]}||d()}function f(b,c){var e=a.getIconSet(b);if(e&&e.icons&&Object.getOwnPropertyNames(e.icons).length>0){var f=e.icons[c];return f&&{iconSet:e,icon:f}||d()}return e&&{iconSet:e,icon:null}||d()}function g(a,b){if(a=a&&a.trim(),i&&(b.removeClass(i),i=""),j&&(b.removeClass(j),j=""),a){var c,d=a.split(" ");c=2===d.length?f(d[0].trim(),d[1].trim()):e(a),j=c.iconSet&&!c.icon?c.iconSet.name+"-"+d[1].trim():c.icon.cssClass,c.iconSet&&c.iconSet.name!==n&&(i=c.iconSet.name,b.addClass(i)),b.addClass(j)}}function h(a,b){a=a&&a.trim(),k&&(b.removeClass(k),k=""),a&&(k=l+a+m,b.addClass(k))}var i,j,k,l="ion-branding-",m="-fg",n="ionicon";c.addClass(n),g(b.icon,c),h(b.color,c),b.$watch("icon",function(a,b){a===b&&j||g(a,c)}),b.$watch("color",function(a,b){a===b&&k||h(a,c)})};return{restrict:"E",scope:{icon:"@",color:"@"},replace:!0,link:b,template:"<span></span>"}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.FONT_FILE_NAME="ionicon-8ac60617",a.ICONS={"--density-automatic":"","--density-compact":"","--density-selector":"","--density-touch":"","--density-web":"","--placeHolder":"",accept:"",acceptFilled:"",add:"",addComment:"",addFilled:"",appearanceOptions:"",arrowDown:"",arrowLeft:"",arrowRight:"",arrowUp:"",backArrow:"",barChart:"",calendar:"",cellFormatting:"",chart:"",clear:"",clearCalendar:"",clearFilter:"",clock:"",clockFilled:"",close:"","cloud-upload":"","collapse-area":"",collapse:"",connection:"",copy:"",cut:"",dashboard:"",delete:"",details:"",disclosure:"",document:"",download:"",dragHandler:"",duplicate:"",edit:"",editDashboard:"",editFilter:"",email:"",error:"",exit:"",expand:"",expand_area:"",export:"",feedback:"",filter:"",folder:"",grid:"",heart:"",help:"",hide:"",hierarchy:"",history:"",home:"",import:"",information:"",layout:"",leftArrow:"","list-view":"",maximize:"",messageEditor:"",minimize:"",minus:"",move:"",moveDown:"",moveleft:"",moveright:"",moveUp:"",multiSelect:"",newReports:"",notEqual:"",open:"",options:"",optionsVertical:"",password:"",paste:"",pin:"",popOut:"",print:"",private:"",public:"",refresh:"",reject:"",rename:"",reset:"",resetFilter:"",rightArrow:"",samples:"",save:"",saveAs:"",scorecard:"",search:"",settings:"",sharedFolder:"",show:"",signout:"",star:"",submit:"",switch:"",table:"",tag:"","tiles-view":"",triangleDown:"",triangleUp:"",undo:"",unpin:"",unshare:"",upload:"","user-error":"",user:"",userEditor:"",users:"",usersEditor:"",warning:"",widget:""}}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c,d="--";!function(a){a[a.EmbeddedOpenType=1]="EmbeddedOpenType",a[a.Woff=2]="Woff",a[a.Woff2=4]="Woff2",a[a.TrueType=8]="TrueType"}(c=b.FontFaceFormats||(b.FontFaceFormats={}));var e=function(){function a(a,b){var c=this;if(this.name=a,this._icons={},b){var e=Array.isArray(b)?b:Object.getOwnPropertyNames(b);e.forEach(function(b){Object.defineProperty(c._icons,b,{get:function(){return{key:b,cssClass:a+"-"+b}},enumerable:b.indexOf(d)===-1})})}}return Object.defineProperty(a.prototype,"icons",{get:function(){return this._icons},enumerable:!0,configurable:!0}),a}(),f=function(){function d(a){this.defaultIconSetName="ionicon",this.defaultIconSetFontFamily="IonIcon",this.iconPathGetter=a.has("ionweb.getIconPath")?a.get("ionweb.getIconPath"):function(a){return a},this.iconSetCollection={},this.loadDefaultSet()}return d.prototype.getDefaultSet=function(){return this.iconSetCollection[this.defaultIconSetName]},d.prototype.getIconSet=function(a){return this.iconSetCollection[a]},d.prototype.registerIconSet=function(d){if(!d)throw new Error(a.stringFormat(b.Strings.Err_Invalid_Icon_Set,{value:String(d)}));if(!d.name)throw new Error(a.stringFormat(b.Strings.Err_Icon_Set_Name_Missing,{name:String(name)}));if(this.iconSetCollection[d.name])throw new Error(a.stringFormat(b.Strings.Err_Duplicate_Icon_Set,{name:d.name}));this.iconSetCollection[d.name]=new e(d.name,d.iconKeys),this.registerFontFaces([{path:d.fontFile,descriptors:{"font-family":d.fontFamily||d.name,"font-weight":"normal","font-style":"normal","font-display":"block"},formats:c.EmbeddedOpenType|c.TrueType|c.Woff}])},d.prototype.loadDefaultSet=function(){this.registerIconSet({name:this.defaultIconSetName,fontFamily:this.defaultIconSetFontFamily,fontFile:this.iconPathGetter(b.FONT_FILE_NAME),iconKeys:b.ICONS}),this.registerFontFaces([{path:this.iconPathGetter.getBootstrapPath?this.iconPathGetter.getBootstrapPath("glyphicons-halflings-regular"):this.iconPathGetter("glyphicons-halflings-regular"),descriptors:{"font-family":"'Glyphicons Halflings'"},formats:b.FontFaceFormats.EmbeddedOpenType|b.FontFaceFormats.Woff2|b.FontFaceFormats.Woff|b.FontFaceFormats.TrueType}])},d.prototype.registerFontFaces=function(a){var b=a.map(function(a){var b=Object.getOwnPropertyNames(a.descriptors).map(function(b){var c=a.descriptors[b];return b+": "+c}).join("; "),d=a.formats&c.EmbeddedOpenType?"src: url('"+a.path+".eot');":"",e=[],f=function(b,c){e.push("url('"+a.path+b+"') format('"+c+"')")};a.formats&c.EmbeddedOpenType&&f(".eot?#iefix","embedded-opentype"),a.formats&c.Woff2&&f(".woff2","woff2"),a.formats&c.Woff&&f(".woff","woff"),a.formats&c.TrueType&&f(".tff","truetype");var g=e.join(", ");return"@font-face { "+b+"; "+d+" src: "+g+"; } \n"}).join("\n"),d=document.createElement("style");d.innerHTML=b,document.getElementsByTagName("head")[0].appendChild(d)},d}();b.IconService=f,angular.module("ionwebTk").service("ionweb.iconService",["$injector",f])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.restrict="E",this.templateUrl="toolkit/button/button.tpl.html",this.scope={role:"@?",color:"@?",icon:"@?",iconColor:"@?",iconPlacement:"@?",tabindex:"@?"},this.transclude=!0,this.controller=d,this.controllerAs="ctrl",this.bindToController=!0}return a}(),d=function(){function b(a,b,c){this.$element=a,this.$scope=b,this.$attrs=c}return b.prototype.$onInit=function(){var a=this;this.$attrs.tabindex||this.$element.attr("tabindex","0"),this.setColor(),this.$scope.$watchGroup(["ctrl.color","ctrl.role"],function(b,c){b!==c&&a.setColor()})},b.prototype.setColor=function(){this.currentClass&&(this.$element.removeClass(this.currentClass),this.currentClass="");var c;c="primary"===this.role&&a.isValidIonPaletteColor(this.color)?this.color:this.role||b.defaultColor;var d="btn "+b.baseBtnClassPrefix+c;this.$element.addClass(d),this.currentClass=d},b.defaultColor="none",b.baseBtnClassPrefix="ionbtn ionbtn-",b.$inject=["$element","$scope","$attrs"],b}();angular.module("ionwebTk").directive("ionButton",function(){return new c})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionwebButton",[function(){function b(b,e){b._curClass&&(e.removeClass(b._curClass),b._curClass="");var f;f="primary"===b.role&&a.isValidIonPaletteColor(b.color)?b.color:b.role||c;var g="btn "+d+f;e.addClass(g),b._curClass=g}var c="none",d="ionbtn-",e={templateUrl:"toolkit/ionbutton/ionButtonDirective.tpl.html",restrict:"E",transclude:!0,scope:{icon:"@?",iconPlacement:"@?",color:"@?",role:"@?",iconColor:"@?"},replace:!0,link:function(a,c){a.$watchGroup(["color","role"],function(d,e){e!==d&&b(a,c)}),b(a,c)}};return e}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("ionwebSwitch",[function(){var a={templateUrl:"toolkit/ionswitch/ionSwitchDirective.tpl.html",restrict:"E",transclude:!0,scope:{icon:"@?",iconOn:"@?",iconOff:"@?",textOn:"@?",textOff:"@?",iconPlacement:"@?",color:"@?",state:"=ngModel",disabled:"=ngDisabled",style:"@?"},controller:["$scope",function(a){function b(){a.state?(a.buttonText=a.textOn,a.buttonIcon=a.iconOn||a.icon,a.role="primary"):(a.buttonText=a.textOff,a.buttonIcon=a.iconOff||a.icon,a.role="")}a.toggle=function(){a.state=!a.state,b()},a.$watchGroup(["icon","iconOn","iconOff","textOn","textOff","color","state"],function(){b()}),b()}]};return a}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.define=function(b,c){a.plugins.push({id:b,handler:c})},a.load=function(b,c){function d(){var a=b.defer();return"undefined"!=typeof window.Selectize?a.resolve(window.Selectize):window.require(["selectize"],function(b){a.resolve(b)},function(b){a.reject(b)}),a.promise}a.selectize||(a.selectize=d().then(function(b){a.plugins.forEach(function(a){b.define(a.id,a.handler)})})),a.selectize.then(function(){return c()})},a.plugins=[],a}();a.SelectizeLoader=b}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("add_item_plugin",function(a){var b=this,c=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return b.indexOf(c)===-1?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},d=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""};this.addItem=function(a,e){var f=e?[]:["change"];c(b,f,function(){var b,c,f,g,h,i=this,j=i.settings.mode;return a=d(a),i.items.indexOf(a)!==-1?void("single"===j&&i.close()):void(i.getOptionForItem(a)&&("single"===j&&i.clear(e),"multi"===j&&i.isFull()||(b=$(i.render("item",i.getOptionForItem(a))),h=i.isFull(),i.items.splice(i.caretPos,0,a),i.insertAtCaret(b),(!i.isPending||!h&&i.isFull())&&i.refreshState(),i.isSetup&&(f=i.$dropdown_content.find("[data-selectable]"),i.isPending||(c=i.getOption(a),g=i.getAdjacentOption(c,1).attr("data-value"),"single"!==j&&i.isOpen?i.refreshOptions(i.isFocused):i.isOpen&&i.$dropdown_content.html(i.$dropdown_content.html()),g&&i.setActiveOption(i.getOption(g))),!f.length||i.isFull()?i.close():i.positionDropdown(),i.updatePlaceholder(),i.trigger("item_add",a,b),i.updateOriginalInput({silent:e})))))})}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=1.5,d=function(){function b(){this.currentKeyDownKey=null,this.ignoreNextKeyUp=null,this.navigationMode=!1}return b.prototype.inNavigationMode=function(){return this.navigationMode},b.prototype.beginKeyDown=function(a){this.ignoreNextKeyUp=null,this.currentKeyDownKey=a.keyCode},b.prototype.endKeyDown=function(a){this.currentKeyDownKey=null,this.ignoreNextKeyUp||(this.navigationMode=!1)},b.prototype.processKeyUp=function(b){var c=this.ignoreNextKeyUp;this.ignoreNextKeyUp=null;var d=b.keyCode===c;return b.keyCode===a.KeyCodes.ESC&&d&&(this.navigationMode=!1),d},b.prototype.enterNavigationMode=function(a){this.navigationMode||(this.userText=a),this.ignoreNextKeyUp=this.currentKeyDownKey,this.navigationMode=!0},b.prototype.skipKeyUp=function(a){this.ignoreNextKeyUp=a.keyCode},b.prototype.getUserText=function(){return this.userText},b.prototype.revertNavigationMode=function(){var a=this.navigationMode;return this.navigationMode=!1,a},b}();b.SelectizeLoader.define("advanced_keyboard",function(){function b(a){return a.$activeOption&&a.$activeOption.attr("data-value")}function e(a){return a.options[b(a)]}function f(a){var c=e(a);return c&&c[a.settings.labelField]||b(a)}var g=this,h=new d,i=this,j=function(a,b){var c=g.$dropdown_content.height(),d=a.outerHeight(!0),e=Math.floor(c/d),f=g.getAdjacentOption(a,b*e);return f&&f.length||(f=g.$dropdown_content.find(b>0?"[data-selectable]:last":"[data-selectable]:first")),f},k=this.onKeyDown;this.onKeyDown=function(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];var f=b[0];h.beginKeyDown(f);var l=!1;try{var m=function(){var a=f.keyCode>=97&&f.keyCode<=122||f.keyCode>=65&&f.keyCode<=90||f.keyCode>=48&&f.keyCode<=57||32===f.keyCode;return a&&!g.$control_input.val()&&"single"===i.settings.mode&&i.onFocus(),k.apply(g,b)};switch(f.keyCode){case a.KeyCodes.DOWN:if(!g.isOpen&&g.hasOptions)g.open();else if(g.$activeOption){g.ignoreHover=!0;var n=g.getAdjacentOption(g.$activeOption,1);n.length&&g.setActiveOption(n,!0,!0)}else g.setActiveOption(g.$dropdown_content.find("[data-selectable]:first"),!0,!0);h.skipKeyUp(f),f.preventDefault();break;case a.KeyCodes.PAGE_DOWN:if(!g.isOpen&&g.hasOptions)g.open();else if(g.$activeOption){g.ignoreHover=!0;var o=j(g.$activeOption,1);o.length&&g.setActiveOption(o,!0,!0)}else g.setActiveOption(g.$dropdown_content.find("[data-selectable]:first"),!0,!0);h.skipKeyUp(f),f.preventDefault();break;case a.KeyCodes.PAGE_UP:if(g.$activeOption){g.ignoreHover=!0;var p=j(g.$activeOption,-1);p.length&&g.setActiveOption(p,!0,!0)}h.skipKeyUp(f),f.preventDefault();break;case a.KeyCodes.ESC:var q=h.revertNavigationMode();g.settings.modelValue?g.addItem(i.settings.modelValue()):q&&g.setTextboxValue(h.getUserText()),
k.apply(g,b);break;case a.KeyCodes.TAB:case a.KeyCodes.ENTER:if(f.keyCode===a.KeyCodes.TAB&&(l=!0),!g.settings.createOnBlur)return h.skipKeyUp(f),m();var r=e(g),s=0;if(r){var t=$.trim(g.$control_input.val());s=t?t.toLowerCase()===r[g.settings.labelField].toLowerCase()?c:0:c}s<c?(g.createItem(null,!1),i.$activeOption&&(i.$activeOption.removeClass("active"),i.$activeOption=null)):k.apply(g,b);break;case a.KeyCodes.UP:case a.KeyCodes.LEFT:case a.KeyCodes.RIGHT:return h.skipKeyUp(f),m();default:return m()}}finally{l&&i.isOpen&&i.close(),h.endKeyDown(f),i.keyPressed=!0}};var l=this.onKeyUp;this.onKeyUp=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a[0],d=h.processKeyUp(c);d?c.stopPropagation():l.apply(g,a),i.keyPressed=!1};var m=this.setActiveOption;this.setActiveOption=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a[1];if(m.apply(g,a),c===!0){var d=g.$control_input.val();g.setTextboxValue(f(g)),h.enterNavigationMode(d)}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("advanced_option_selector",function(a){var b=this,c=this,d=function(){var a=c.currentResults&&c.currentResults.items&&0===c.currentResults.items.length&&!b.getQueryString(),d=c.currentResults&&c.currentResults.items&&c.currentResults.items[0],e=c.$control_input.get(0).value;if(e&&!a&&d){for(var f=c.settings.create&&c.$dropdown_content.find("[free-text-data]:first"),g=10,h=null,i=0;i<c.currentResults.items.length&&c.currentResults.items[i].score>=g;)i++;if(i<c.currentResults.items.length||c.currentResults.items.length&&c.currentResults.items[0].score>g){var j=c.currentResults.items[i===c.currentResults.items.length?0:i],k=d.score;j&&j.score>k-g||(j=d),h=c.getOption(j.id)}}else;var l=h&&h.attr("data-value")&&c.options[h.attr("data-value")]&&c.options[h.attr("data-value")][c.settings.labelField];l=l&&l.toLowerCase(),e=e.toLowerCase();var m=c.settings.create?l===e:c.currentResults&&b.getQueryString();h&&m?(c.$dropdown_content&&c.$dropdown_content.length&&f&&f.length&&c.$dropdown_content[0].removeChild(f[0]),j&&(h=c.getOption(j.id)),c.$dropdown_content.stop().animate({scrollTop:0},0),c.setActiveOption(h,!1,!1)):f?c.setActiveOption(f):c.setActiveOption(null)};this.on("load",function(){d()}),this.on("type",function(){c.$control_input.get(0).value||(c.$dropdown_content.stop().animate({scrollTop:0},0),c.setActiveOption(null)),d()}),this.on("dropdown_open",function(){c.$control_input.get(0).value||(c.$dropdown_content.stop().animate({scrollTop:0},0),c.setActiveOption(null)),d()})})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("autoselect_on_focus",function(a){var b=this,c=this,d=function(){return"single"===c.settings.mode},e=null,f=!1;this.setup=function(){var a=c.setup;return function(){a.apply(this,arguments),c.$control.on("mousedown touchstart","*:not(input)",function(a){$(document.body).hasClass("autocomplete-fullview")&&!d()&&a.stopPropagation()}),c.$control_input.on("touchstart",function(a){$(document.body).hasClass("autocomplete-fullview")&&a.stopPropagation()}),c.$dropdown_content.on("touchstart",function(a){f=!0}),c.$dropdown_content.on("touchend touchleave touchcancel",function(a){f=!1})}}(),c.autoselectOnFocusRestoredLabel=null,this.adjustWidgetOnFocus=function(){c.$wrapper.addClass("focus"),c.$control.children("input").css("display",""),c.isOpen&&c.positionDropdown()},this.onFocus=function(){var a=c.onFocus;return function(){if(a.apply(this,arguments),d()&&c.items.length>0&&c.settings.editable){var b=c.getOptionForItem(c.items[0]);b&&b[c.settings.labelField]&&(e=c.items[0],c.autoselectOnFocusRestoredLabel=b[c.settings.labelField],c.removeItem(c.items[0],!0),c.setTextboxValue(c.autoselectOnFocusRestoredLabel),c.setActiveOption(null))}else c.settings.editable||c.settings.readonly||(c.hideInput(),c.isOpen||(c.onSearchChange(""),c.open()));this.adjustWidgetOnFocus(),c.$control_input.select(),c.$control_input.get(0).setSelectionRange(0,99999)}}();var g=function(a,b){if(c.isFocused&&(c.isFocused=!1,!c.ignoreFocus)){if(!c.ignoreBlur&&document.activeElement===c.$dropdown_content[0])return c.ignoreBlur=!0,void c.onFocus(a);var d=function(){c.close(),c.setTextboxValue(""),c.setActiveItem(null),c.setActiveOption(null),c.setCaret(c.items.length),c.refreshState(),b&&b.focus(),c.ignoreFocus=!1,c.trigger("blur")},e=c.$control_input.val()||"";c.keyPressed&&e&&(c.trigger("type",e),c.keyPressed=!1),c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,d):d()}};this.showInput=function(){var a=c.showInput;return function(){c.settings.editable&&a.apply(this,arguments)}}(),this.adjustWidgetOnBlur=function(){c.$wrapper.removeClass("focus"),c.$control.children("input")[0].style.setProperty("display","none")},this.blur=function(){return function(a){c.onBlur(null,a),c.$control_input[0].blur()}}(),this.restoreItem=function(){return!!(d()&&e&&c.autoselectOnFocusRestoredLabel===c.$control_input.get(0).value&&c.getOptionForItem(e)&&document.activeElement!==c.$dropdown_content[0])&&(c.addItem(e),!0)},this.onBlur=function(){return function(a){f||(this.restoreItem(),g.apply(this,arguments),this.adjustWidgetOnBlur())}}(),this.getOptionForItem=function(a){return d()===!0?b.getRestoreCacheItemOpt(a):b.options[a]}}),a.SelectizeLoader.define("restore_cache",function(){var a=this,b=this;this.restoreCache={},this.clearOptions=function(){var a=b.clearOptions;return function(){var c=b.settings.modelValue&&b.settings.modelValue(),d=[];if(c)if(c instanceof Array)for(var e=0;e<c.length;e++)b.options[c[e]]&&d.push(b.options[c[e]]);else b.options[c]&&d.push(b.options[c]);a.apply(this,arguments),d.forEach(function(a){b.registerOptionInRestoreCache(a)})}}(),b.on("item_add",function(c){a.options[c]&&b.registerOptionInRestoreCache(a.options[c])}),b.on("item_remove",function(a){b.settings.modelValue()!==a&&delete b.restoreCache[a]}),b.registerOptionInRestoreCache=function(c){for(var d=Object.keys(a.restoreCache),e=0;e<d.length;e++)delete a.restoreCache[d[e]];a.restoreCache[c[b.settings.valueField]]=c},b.clearRestoreCache=function(){a.restoreCache={}},b.getRestoreCacheItemOpt=function(b){var c=a.restoreCache[b];return void 0===c&&(c=a.options[b],c&&a.registerOptionInRestoreCache(c)),c}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("buttons",function(b){function c(){for(var a=0,b=e.$control.children("div[data-value]"),c=e.$wrapper.innerWidth()-e.$wrapper.children("span.buttons-container").outerWidth(),d=0;d<b.length;d++)if(a+=$(b[d]).outerWidth(!0),a>c)return!0;return!1}var d=this;b=$.extend({showUserButton:!1,userButtonCssClassName:"user-button",showArrowButton:!0,arrowButtonCssClassName:"arrow-button",arrowUpButtonIonIconKey:"triangleUp",disclosureButtonIonIconKey:"disclosure",arrowDownButtonIonIconKey:"triangleDown",showClearButton:!0,clearButtonCssClassName:"clear-button",moreButtonCssClassName:"more-button",clearButtonIonIconKey:"clear"},b);var e=this,f=function(){return"single"===e.settings.mode},g=b.context().scope;g.$watch("subContent",function(a,b){a!==b&&u()});var h=function(a,b){return angular.element('<a class="ioniconbutton '+a+'" tabindex="-1"><span class="ionicon ionicon-'+b+'"></span></a>')},i=function(){function a(a){var b={};return"backgroundColor"in a&&(b["background-color"]=a.backgroundColor),"fontWeight"in a&&(b["font-weight"]=a.fontWeight),"color"in a&&(b.color=a.color),b}var c=b.context().scope,d=c.subContent;c.subContent.htmlStyle=a(d.style);var e='<a tabindex="-1" ng-style="subContent.htmlStyle" class="ionicons autocomplete-subcontent {{\'ionbtn-\' + subContent.style.paletteColor}}" title="{{subContent.tooltip}}"><span style="vertical-align: middle">{{subContent.text}}</span></a>',f=b.context(),g=angular.element(e),h=f.compile(g)(c);return h.on("mousedown",function(a){1===a.which&&(a.preventDefault(),a.stopPropagation())}),h},j=function(a,b){d.$wrapper.on("mousedown","."+a,function(c){1===c.which&&(c.preventDefault(),d.isLocked||(e.settings.closePopup&&e.settings.closePopup(a),b&&b()),c.stopPropagation())})},k=function(a,b){d.$wrapper.on("mousedown","."+a,function(a){1===a.which&&(a.preventDefault(),a.stopPropagation())}),d.$wrapper.on("click","."+a,function(c){d.isLocked||(e.settings.closePopup&&e.settings.closePopup(a),b&&b())})},l=function(a){d.$wrapper.off("mousedown","."+a),d.$wrapper.off("click","."+a)},m=h(b.userButtonCssClassName,b.userButtonIonIconKey),n=function(){e.isOpen&&e.close(),b.userButtonAction()},o=h(b.arrowButtonCssClassName,b.arrowUpButtonIonIconKey),p=h(b.arrowButtonCssClassName,b.arrowDownButtonIonIconKey),q=!f()&&h(b.moreButtonCssClassName,b.disclosureButtonIonIconKey);this.buttonsStateRefresh=function(a){void 0===a.showArrowButton&&(a.showArrowButton=!0),void 0===a.showClearButton&&(a.showClearButton=!0),b.showArrowButton===a.showArrowButton||a.showArrowButton||(this.isOpen?o.parent()&&o.remove():p.parent()&&p.remove()),b.showClearButton===a.showClearButton||a.showClearButton||s.parent()&&s.remove(),b.showUserButton===a.showUserButton||a.showUserButton||m.parent()&&m.remove(),l(b.userButtonCssClassName),b.userButtonIonIconKey!=a.userButtonIonIconKey&&(m.parent()&&(m.remove(),m.destroy()),m=h(b.userButtonCssClassName,a.userButtonIonIconKey)),b.showArrowButton=a.showArrowButton,b.showClearButton=a.showClearButton,b.showUserButton=a.showUserButton,b.userButtonAction=function(){e.isOpen&&e.close(),a.userButtonAction()},b.userButtonIonIconKey=a.userButtonIonIconKey,k(b.userButtonCssClassName,b.userButtonAction),(b.showArrowButton||b.showClearButton||b.showUserButton)&&u()};var r=function(){if(e.isOpen)e.close();else{var a=e.$control_input&&e.$control_input.val();a&&0!==Object.keys(e.options).length||d.onSearchChange(""),e.open()}},s=h(b.clearButtonCssClassName,b.clearButtonIonIconKey),t=function(){var a=d.lastValue;d.clear(),d.refreshOptions(),d.setTextboxValue(""),e.isDynamic()&&e.onSearchChange(""),a&&(d.lastValue="",e.onSearchChange(""),d.trigger("type",""))},u=function(){var c=e.$wrapper.children("span.buttons-container");c&&c.remove(),c=angular.element('<span class="buttons-container"></span>');var g=function(b,d){var f=function(b){return b===!0||b===a.VisibilityType.Always||b===a.VisibilityType.OnHover},g=function(b){return b===!0&&e.settings.showOnHover||b===a.VisibilityType.OnHover};f(d)&&c.append(b),g(d)?b.addClass("button-hover-on-display"):b.removeClass("button-hover-on-display")};g(m,b.showUserButton),g(d.isOpen?o:p,b.showArrowButton),g(s,b.showClearButton),f()||c.append(q.addClass("hidden")),b.context().scope.subContent&&c.append(i()),d.$wrapper.append(c)},v=function(){b.showUserButton&&k(b.userButtonCssClassName,n),j(b.arrowButtonCssClassName,r),j(b.clearButtonCssClassName,t),f()||k("more-button",function(){b.context().scope.moreButtonClick.call(e)})};this.on("clear",function(){u()}),this.on("dropdown_open",function(){p.parent().length&&p.replaceWith(o),g.onDropdownStateChanged&&g.onDropdownStateChanged({autocomplete:d})}),this.on("dropdown_close",function(){o.parent().length&&o.replaceWith(p),g.onDropdownStateChanged&&g.onDropdownStateChanged({autocomplete:d})}),this.setup=function(){var a=d.setup;return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];a.apply(d,b),v(),u()}}(),this.setMoreButton=function(){return!f()&&void setTimeout(function(){return e.$wrapper&&c()?(q.removeClass("hidden"),!0):(q.addClass("hidden"),!1)},0)}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=1,d=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};b.SelectizeLoader.define("clear_options_override",function(){var b=this;this.clearOptions=function(){return function(a){var c=b.renderCache.item;b.loadedSearches={},b.userOptions={},b.renderCache={},b.renderCache.item=c,b.options=b.sifter.items={},b.lastQuery=null,b.trigger("option_clear")}}(),this.updateOriginalInput=function(){return function(b){var e,f,g,h,i=this;b=b||{};var j=i.$input.val();if(i.tagType===c){for(g=[],e=0,f=i.items.length;e<f;e++)h=i.options[i.items[e]]&&i.options[i.items[e]][i.settings.labelField]||"",g.push('<option value="'+d(i.items[e])+'" selected="selected">'+d(h)+"</option>");g.length||this.$input.attr("multiple")||g.push('<option value="" selected="selected"></option>'),i.$input.html(g.join(""))}else i.$input.val(i.getValue()),i.$input.attr("value",i.$input.val());i.isSetup&&(b.silent||(a.equals(j,i.$input.val())||i.trigger("change",i.$input.val()),"multi"===i.settings.mode&&i.setMoreButton()))}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("copy_paste_items",function(a){var b=this,c=this,d=67,e=this.onKeyDown;this.onKeyDown=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];var g=a[0];g.keyCode===d&&(g.ctrlKey||g.metaKey)?c.onCopy(g):e.apply(b,a)},this.onCopy=function(a){a.preventDefault();var b,d,e,f=[],g=c.settings.labelField;if("multi"===c.settings.mode)if(c.items&&0!==c.items.length)if(c.$activeItems&&c.$activeItems.length)for(var h=0,i=c.$activeItems.length;h<i;h++)c.$activeItems[h].hasAttribute("data-value")&&(b=c.$activeItems[h].attributes["data-value"].value,b&&(d=c.options[b]&&c.options[b][g],e=e?e+c.settings.delimiter+d:d,f.push({value:b,label:d})));else c.items.forEach(function(a){a&&(d=c.options[a]&&c.options[a][g],e=e?e+c.settings.delimiter+d:d,f.push({value:a,label:d}))});else e=$.trim(c.$control_input.val());else b=c.settings.modelValue&&c.settings.modelValue(),b&&(d=c.options[b]&&c.options[b][g],f.push({value:b,label:d}),e=d||b);if(e){if(c.settings.copyToClipboard(e),f.length){var j={id:e,key:c.settings.key,items:f};localStorage.setItem("acbCopiedItems",JSON.stringify(j))}this.focus()}},this.onPaste=function(a){function b(){c.setTextboxValue(""),a.preventDefault()}function d(a,b){c.setTextboxValue(a),b&&(c.clearOptions(),c.addOption(b)),g(!0)}function e(a,b){var d=0,e=a[c.settings.valueField].toString().toLowerCase(),f=a[c.settings.labelField].toLowerCase(),g=b.value.toLowerCase();return e===g||f===g?d=i:e.indexOf(g)===-1&&f.indexOf(g)===-1||(d=j),d}function f(a,b,f){var h=0,j=!1,k=a.filter(function(a){var c=e(a,b);if(h+=c,c===i)return j=!0,!0});if(f&&h!=i)d(b.label,a);else if(j){var l=k[0][c.settings.valueField].toString();c.settings.$q.when(c.addItem(l)).then(function(){c.items.indexOf(l)<0?f?d(b.label,a):c.settings.allowFreeText&&c.createItem(b.label||b.value):f&&g(!1)})}else c.settings.allowFreeText&&c.createItem(b.label||b.value);c.refreshOptions()}function g(a){c.isOpen&&!a&&c.close()}function h(a){for(var b,h,j,k,l,m,n=a.length,o=function(o){b=[],h=0,j=!1,k=o===n-1;for(var p in c.options)l=e(c.options[p],a[o]),l===i&&(j=!0,b.push(p)),h+=l;k&&h!=i&&!c.isDynamic()?(m=a[o].label||a[o].value,d(m)):j?(c.addItem(b[0]),o===n-1&&(c.refreshOptions(),g(!1))):c.isDynamic()?c.settings.loadOptions(a[o].label,function(b){var c=o===n-1;f(b,a[o],c)}):k?(d(a[o].label),c.refreshOptions()):c.settings.allowFreeText&&c.createItem(a[o].label||a[o].value)},p=0;p<n;p++)o(p)}var i=1.5,j=1;if(c.isFull()||c.isInputHidden||c.isLocked)return void b();var k=!0;setTimeout(function(){var a=$.trim(c.$control_input.val());if(a){var d=localStorage.getItem("acbCopiedItems"),e={};try{d&&(e=JSON.parse(d))}catch(a){d=""}if(c.settings.key&&c.settings.key!==e.key)return void b();if(d&&e.id===a)e.items&&e.items.length||(k=!1);else{var f=[];if(c.settings.delimiter?f=a.split(c.settings.delimiter):f.push(a),f&&f.length){var g=[],i=!1;f.forEach(function(a){var b=e.items&&e.items.filter(function(b){return b.label===a})[0];b?(g.push(b),i=!0):g.push({value:a,label:a})}),e.items=g.slice(),i||localStorage.removeItem("acbCopiedItems")}else k=!1}if(!k)return void b();c.$control_input.val(""),c.settings.validatePaste?c.settings.$q.when(c.settings.validatePaste({value:e.items})).then(function(a){a?h(e.items):b()}):h(e.items)}},0)}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.SelectizeLoader.define("custom_refresh_option",function(b){function c(a,b){function c(a,b){if(a.data){var c=document.createElement("span");c.className=b,c.appendChild(a.cloneNode(!0)),a.parentNode.replaceChild(c,a)}}function d(a){var b=0;if(3===a.nodeType){var f=a.data.search(e);if(f>=0&&a.data.length>0){if(a.parentNode&&"span"===a.parentNode.localName){if("match"===a.parentNode.className)return 1;if("not-match"===a.parentNode.className){var g=a.parentNode,h=g.parentNode;g.removeChild(a),h.replaceChild(a,g)}}var i=a.data.match(e),j=a,k=j.splitText(f),l=k.splitText(i[0].length);c(j,"not-match"),c(k,"match"),c(l,"not-match"),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var m=0;m<a.childNodes.length;++m)m+=d(a.childNodes[m]);return b}if("string"!=typeof b||b.length){var e="string"==typeof b?new RegExp(b,"i"):b;return a.each(function(){d(this)})}}var d=this,e=this,f=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},g=this.onKeyDown;this.onKeyDown=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var f=b[0],h=g.apply(d,b);return f.keyCode!==a.KeyCodes.DOWN&&f.keyCode!==a.KeyCodes.PAGE_DOWN||e.$activeOption&&e.$activeOption.length||e.setActiveOption(e.$dropdown_content.find("[data-selectable]:first"),!0,!1),h},this.getQueryString=function(){var a=e.$control_input[0]&&e.$control_input.val().substring(e.$control_input[0].selectionStart,e.$control_input[0].selectionEnd),b=e.$control_input.val()==a?"":$.trim(e.$control_input.val());return b},this.refreshOptions=function(){return function(a){var b,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this;"undefined"==typeof a&&(a=!0);var u=this;if(!u.isDestroyed){var v=this.getQueryString(),w=u.search(u.isDynamic()?"":v),x=u.$dropdown_content,y=u.$activeOption&&f(u.$activeOption.attr("data-value"));for(this.results=w,g=w.items.length,"number"==typeof u.settings.maxOptions&&(g=Math.min(g,u.settings.maxOptions)),h={},i=[],b=0;b<g;b++)for(j=u.options[w.items[b].id],k=u.render("option",j),l=j[u.settings.optgroupField]||"",m=$.isArray(l)?l:[l],d=0,e=m&&m.length;d<e;d++)l=m[d],u.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(this.settings.lockOptgroupOrder&&i.sort(function(a,b){var c=t.optgroups[a]&&t.optgroups[a].$order||0,d=t.optgroups[b]&&t.optgroups[b].$order||0;return c-d}),n=[],b=0,g=i.length;b<g;b++)l=i[b],u.optgroups.hasOwnProperty(l)&&h[l].length?(o=u.render("optgroup_header",u.optgroups[l])||"",o+=h[l].join(""),n.push(u.render("optgroup",$.extend({},u.optgroups[l],{html:o})))):n.push(h[l].join(""));if(x.html(n.join("")),u.settings.highlight&&w.query.length&&w.tokens.length)for(b=0,g=w.tokens.length;b<g;b++)c(x,w.tokens[b].regex);if(!u.settings.hideSelected)for(b=0,g=u.items.length;b<g;b++)u.getOption(u.items[b]).addClass("selected");p=u.canCreate(v);var z=u.autoselectOnFocusRestoredLabel&&u.autoselectOnFocusRestoredLabel.toLowerCase()==u.$control_input.get(0).value.toLowerCase();p&&!z&&(x.prepend(u.render("option_create",{input:v})),s=$(x[0].childNodes[0])),u.hasOptions=w.items.length>0||p,u.hasOptions?(w.items.length>0?(r=y&&u.getOption(y),r&&r.length?q=r:"single"===u.settings.mode&&u.items.length&&(q=null),q&&q.length||(q=s&&!u.settings.addPrecedence?u.getAdjacentOption(s,1):null)):q=s,u.setActiveOption(q),a&&!u.isOpen&&u.open()):u.setActiveOption(null)}}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("custom_search",function(b){var c=this,d=this,e=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},f=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},g={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎð]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},h=Array.isArray||"undefined"!=typeof $&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(){var a,b,c,e,f="",h={};for(c in g)if(g.hasOwnProperty(c))for(e=g[c].substring(2,g[c].length-1),f+=e,a=0,b=e.length;a<b;a++)h[e.charAt(a)]=c;var i=new RegExp("["+f+"]","g");return function(a){var b=a.replace(i,function(a){return h[a]});return d.settings.queryOptions.isCaseSensitive||(b=b.toLowerCase()),b}}(),j=function(a,b){var c,d,e,f;for(c=1,d=arguments.length;c<d;c++)if(f=arguments[c])for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);return a},k=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:a<b?-1:0:(a=i(String(a||"")),b=i(String(b||"")),a>b?1:b>a?-1:0)},l=function(a,b,c){if(a&&b){if(!c)return a[b];for(var d=b.split(".");d.length&&(a=a[d.shift()]););return a}};this.sifter.tokenize=function(b){if(b=e(String(b||"")),d.settings.queryOptions.isCaseSensitive||(b=b.toLowerCase()),!b||!b.length)return[];var h,i,j,k,l=[],m=d.settings.queryOptions&&d.settings.queryOptions.filterCriteria==a.AutocompleteFilterCriteria.MultiToken?b.split(/ +/):[b];for(h=0,i=m.length;h<i;h++){if(j=f(m[h]),c.sifter.settings.diacritics)for(k in g)g.hasOwnProperty(k)&&(j=j.replace(new RegExp(k,"g"),g[k]));d.settings.queryOptions&&d.settings.queryOptions.filterCriteria==a.AutocompleteFilterCriteria.StartsWith&&j.length>0&&(j="^"+j),l.push({string:m[h],regex:d.settings.queryOptions.isCaseSensitive?new RegExp(j):new RegExp(j,"i")})}return l},this.sifter.prepareSearch=function(a,b){if("object"==typeof a)return a;b=j({},b);var e=b.fields,f=b.sort,g=b.sort_empty;e&&!h(e)&&(b.fields=[e]),f&&!h(f)&&(b.sort=[f]),g&&!h(g)&&(b.sort_empty=[g]);var i=String(a||"");return d.settings.queryOptions.isCaseSensitive||(i=i.toLowerCase()),{options:b,query:i,tokens:c.sifter.tokenize(a),total:0,items:[]}},this.sifter.getSortFunction=function(a,b){var d,e,f,g,h,i,j,m,n,o;if(a=c.sifter.prepareSearch(a,b),o=!a.query&&b.sort_empty||b.sort,m=function(a,d){return"$score"===a?d.score:l(c.sifter.items[d.id],a,b.nesting)},g=[],o)for(d=0,e=o.length;d<e;d++)(a.query||"$score"!==o[d].field)&&g.push(o[d]);if(a.query){for(n=!0,d=0,e=g.length;d<e;d++)if("$score"===g[d].field){n=!1;break}n&&g.unshift({field:"$score",direction:"desc"})}else for(d=0,e=g.length;d<e;d++)if("$score"===g[d].field){g.splice(d,1);break}for(j=[],d=0,e=g.length;d<e;d++)j.push("desc"===g[d].direction?-1:1);return h=g.length,h?1===h?(f=g[0].field,i=j[0],function(a,b){return i*k(m(f,a),m(f,b))}):function(a,b){var c,d,e;for(c=0;c<h;c++)if(e=g[c].field,d=j[c]*k(m(e,a),m(e,b)))return d;return 0}:null}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("delete_selection",function(){var a=this,b=this.deleteSelection;this.deleteSelection=function(){var c=a.isOpen,d=b.apply(this,arguments);return c?this.positionDropdown():this.close(),d}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.SelectizeLoader.define("disable_cache",function(){var b=this;this.onSearchChange=function(){var a=b.onSearchChange;return function(){b.loadedSearches={},a.apply(this,arguments),this.clearOptions()}}(),this.onKeyDown=function(){var c=b.onKeyDown;return function(){var d=arguments[0];switch(d.keyCode){case a.KeyCodes.DOWN:var e=b.isOpen;e?c.apply(b,arguments):(b.onSearchChange(""),b.open());break;default:c.apply(b,arguments)}}}(),this.setup=function(){var a=b.setup;return function(){a.apply(b,arguments),"single"!==b.settings.mode&&b.settings.editable||b.$control.on("mousedown",function(){b.settings.readonly||b.onSearchChange("")})}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("disable_selectize_sorting",function(){this.sifter.search=function(a,b){var c,d=this,e=this.prepareSearch(a,b);b=e.options,a=e.query;var f=b.score||d.getScoreFunction(e);a.length?d.iterator(d.items,function(a,d){c=f(a),(b.filter===!1||c>0)&&e.items.push({score:c,id:d})}):d.iterator(d.items,function(a,b){e.items.push({score:1,id:b})}),e.total=e.items.length,"number"==typeof b.limit&&(e.items=e.items.slice(0,b.limit));var g=this;return e.items.sort(function(a,b){return g.items[a.id].$order-g.items[b.id].$order}),e},this.addOption=function(a){var b,c,d,e=this;if($.isArray(a))for(b=0,c=a.length;b<c;b++)delete e.options[a[b][e.settings.valueField]],delete a[b].$order,e.addOption(a[b]);else(d=e.registerOption(a))&&(e.userOptions[d]=!0,e.lastQuery=null,e.trigger("option_add",d,a))}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("dropdown_autowidth",function(a){var b=this;this.positionDropdown=function(){var a=b.positionDropdown;return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];a.apply(b,c);var e=b.$control,f=b.$wrapper,g={minWidth:e.outerWidth()+f.children("span.buttons-container").outerWidth(!0),width:"auto"};window.innerWidth/2<f.offset().left+f.width()/2?(g.right=window.innerWidth-f[0].getBoundingClientRect().right,g.left="auto"):g.right="auto",b.$dropdown.css(g)}}()}),a.SelectizeLoader.define("dropdown_position",function(a){var b=this;this.positionDropdown=function(){b.positionDropdown;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var d=b.$control,e=b.$wrapper,f=200,g=2,h=d.offset().top+d.outerHeight(!0),i={minWidth:d.outerWidth()+e.children("span.buttons-container").outerWidth(!0),width:"auto",top:h,bottom:"auto",left:d.offset().left,right:"auto"},j=b.settings.getWindowHeight();j<h+f&&(i.top="auto",i.bottom=j-d.offset().top+g+"px"),window.innerWidth/2<e.offset().left+e.width()/2&&(i.right=window.innerWidth-e[0].getBoundingClientRect().right,i.left="auto"),b.$dropdown.css(i)}}()}),a.SelectizeLoader.define("position_smallscreen_dropdown",function(a){this.positionDropdown=function(){var a={},b=this.$control.get(0).getBoundingClientRect();a.top=b.top+b.height+10+window.pageYOffset+"px",a.left=window.scrollX+"px",this.$dropdown.css(a)},this.close=function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput();var c=$(document.body).hasClass("autocomplete-fullview");c||(a.isOpen=!1,a.$dropdown.hide()),a.setActiveOption(null),a.refreshState(),!c&&b&&a.trigger("dropdown_close",a.$dropdown)}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("dropdown_customization",function(a){var b=this,c=a.context().scope;this.onOptionSelect=function(a){if("click"!==a.type){var b,c,d=this;a.preventDefault&&(a.preventDefault(),a.stopPropagation()),c=$(a.currentTarget),c.hasClass("create")?d.createItem(null,function(){d.settings.closeAfterSelect&&d.close()}):(b=c.attr("data-value"),"undefined"!=typeof b&&(d.items.indexOf(b)>=0?(d.removeItem(b),c.removeClass("selected"),d.setTextboxValue(""),d.refreshOptions(!1)):(d.lastQuery=null,d.setTextboxValue(""),d.addItem(b),d.settings.closeAfterSelect?d.close():!d.settings.hideSelected&&a.type&&/mouse/.test(a.type)&&d.setActiveOption(d.getOption(b)))))}},this.setupTemplates=function(){var d=b.setupTemplates;return function(){d.apply(b,arguments);var e=b.settings.render.option;b.settings.render.option=function(d,f){var g=$(e.apply(b,arguments)),h=angular.element('<div class="selected-option"><ionweb-icon icon="accept" color="bright-blue"></ionweb-icon></div>'),i=a.context().compile,j=c.$new(),k=i(h)(j);k.on("$destroy",function(){j.$destroy()}),g.removeClass("option"),g.addClass("option-data");var l=$('<div class="option-top-border"></div>'),m=$('<div class="option option-template">'+g.prop("outerHTML")+"</div>");return m.prepend(k),m.prepend(l),m.prop("outerHTML")}}}(),this.refreshOptions=function(){var a=b.refreshOptions;return function(){a.apply(this,arguments)}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("dropdown_open_close",function(){function b(){var b=c.$control.parent(),d=b.closest(".context-menu"),e=parseInt(d.parent().css("z-index"),10),f=a.ZINDEX_ACB_DROPDOWN;!isNaN(e)&&e>=f&&c.$dropdown.css("z-index",e+1)}var c=this;this.open=function(){if(!(c.isLocked||c.isOpen||"multi"===c.settings.mode&&c.isFull())){(!this.$control_input.is(":focus")||"single"===c.settings.mode&&parseInt(c.$control_input.css("left"),10)<0)&&c.focus();var a=c.isOpen;c.isOpen=!0,c.refreshState(),c.$dropdown.css({visibility:"hidden",display:"flex","flex-direction":"column"}),c.positionDropdown(),c.$dropdown.css({visibility:"visible"}),b(),a||c.trigger("dropdown_open",c.$dropdown)}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("dynamic_options_plugin",function(a){function b(a){for(var b=0;b<d.items.length;b++)if(d.items[b]===a)return!0;return!1}var c=function(a,b){b=Math.min(b,this.items.length),0===b?this.$control.prepend(a):$(this.$control[0].childNodes[b]).before(a);var c=Math.min(this.caretPos,this.items.length);this.setCaret(c+1)},d=this,e=this.addItem;this.addItem=function(a,f,g){var h,i,j,k=d.settings.mode;d.items.length;if(e.call(d,a,f),!b(a)&&"string"==typeof a){if(!d.settings.optionProvider&&!d.settings.allowFreeText)return null;var l=d.settings.$q.defer();d.settings.optionProvider?d.settings.optionProvider(a,l):l.resolve(a);var m=d.modelIdx;return l.promise.then(function(e){if(e&&!b(a)&&m===d.modelIdx){if(e===a&&"string"==typeof a&&0!==a.length)e={},e.$group="free",e[d.settings.valueField]=a,e[d.settings.labelField]=a;else if("string"!=typeof a||0===a.length)return;if(e[d.settings.valueField]==a&&(e[d.settings.labelField]||(e[d.settings.labelField]=a),"single"===k&&d.clear(!0),"multi"!==k||!d.isFull())){d.registerOption(e),h=$(d.render("item",d.options[a])),j=d.isFull();var l=angular.isDefined(g)?g:d.caretPos;d.items.splice(l,0,a),c.call(d,h,l),(!d.isPending||!j&&d.isFull())&&d.refreshState(),d.isSetup&&(i&&!i.length||d.isFull()?d.close():d.positionDropdown(),d.updatePlaceholder(),d.trigger("item_add",a,h),d.updateOriginalInput({silent:f}))}}}).catch(function(){})}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("editable_plugin",function(a){var b=this;b.hideInput=function(){var a={opacity:0,position:"absolute",left:b.rtl?1e4:-1e4};b.setTextboxValue(""),b.$control_input.css(a),b.isInputHidden=!0,b.settings.editable===!1&&(b.$control_input.attr("readonly",!0),b.getValue()&&b.getValue().length?b.$control_input.css(a):b.$control_input.css({opacity:1,position:"relative",left:0}))},b.showInput=function(){b.$control_input.css({opacity:1,position:"relative",left:0}),b.settings.editable!==!1&&b.$control_input.removeAttr("readonly"),b.isInputHidden=!1}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.SelectizeLoader.define("enable_cache",function(){var b,c=this;this.on("dropdown_open",function(){this.hasOptions||(clearTimeout(b),b=setTimeout(function(){c.onSearchChange("")},100))}),this.onKeyDown=function(){var b=c.onKeyDown;return function(){var d=arguments[0];switch(d.keyCode){case a.KeyCodes.DOWN:var e=c.isOpen;e?b.apply(c,arguments):c.open();break;default:b.apply(c,arguments)}}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("free_options",function(a){function b(){var a=c.results&&c.results.items,b=[];if(a)for(var d=0;d<a.length;d++)b.push(a[d].id);else b=Object.keys(c.options);return b}var c=this;this.removeItem=function(){var a=c.removeItem;return function(b,d){a.apply(this,arguments),c.freeOptionsMap&&c.freeOptionsMap[b]&&(delete c.freeOptionsMap[b],c.removeOption(b,d),c.refreshOptions(!1))}}(),this.deSelectAll=function(){var a=c.deSelectAll;return function(){for(var d=b(),e=0;e<d.length;e++){var f=d[e];c.freeOptionsMap&&c.freeOptionsMap[f]&&(delete c.freeOptionsMap[f],
this.removeOption(f,!0))}a.apply(c,arguments)}}(),this.clear=function(){var a=c.clear;return function(b){a.apply(this,arguments),window.setTimeout(function(){!c.isDestroyed&&c.freeOptionsMap&&(Object.keys(c.freeOptionsMap).forEach(function(a){c.items.indexOf(a)<0&&(c.removeOption(a,b),delete c.freeOptionsMap[a])}),c.refreshOptions(!1))},0)}}(),this.setup=function(){var a=c.setup;return function(){var b=this;a.apply(this,arguments),this.freeOptionsMap={},this.settings.createOnBlur=!0,this.settings.create=function(a){b.freeOptionsMap[a]=a;var d={$group:"free"};return d[c.settings.labelField]=a,d[c.settings.valueField]=a,d}}}(),this.clearOptions=function(){var a=c.clearOptions;return function(){var b=c.options[c.getValue()];a.apply(this,arguments),b&&"free"===b.$group&&c.registerOption(b)}}(),this.registerOption=function(){var a=c.registerOption;return function(){var b=arguments[0];return"free"===b.$group&&(c.freeOptionsMap[b[c.settings.valueField]]=b),a.apply(this,arguments)}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("scroll_plugin",function(){var a=this;$(document).on("mousewheel"+a.eventNS,function(b){a.isOpen&&0===$(b.target).closest("div.selectize-dropdown").length&&a.close()})})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("item_nowrap",function(){var a=this.setupTemplates;this.setupTemplates=function(){if(a.apply(this,arguments),1===this.settings.maxItems){var b=this;this.settings.render.item=function(a,c){var d=b.settings.labelField;return'<div style="display: block; white-space: nowrap; overflow-x: hidden;">'+c(a[d])+"</div>"}}},HTMLElement})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("placeholder",function(a){var b=this;this.updatePlaceholder=function(){var a=b.updatePlaceholder;return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];b.settings.placeholder?a.apply(b,c):b.$control_input.removeAttr("placeholder")}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("preview_selector",function(a){var b=this;this.setActiveOption=function(){var a=b.setActiveOption;return function(){b.$selection_preview.val(""),a.apply(this,arguments);var c=b.$activeOption&&b.$activeOption.attr("data-value"),d=b.$control_input.val();if(c){var e=b.options[c][b.labelField];if(d.length>0&&0===e.toLowerCase().indexOf(d.toLowerCase())){var f=d?e.substring(d.length):e;b.$selection_preview.val(f),b.$selection_preview.get(0).style.left=parseInt(b.$control_input.get(0).style.width)}}}}(),this.setup=function(){var a=b.setup;return function(){a.apply(this,arguments);var c='<input style="position: absolute; color: gray; margin-left: -4px !important;" readonly ></input>';b.$selection_preview=$(c),b.$control.append(b.$selection_preview)}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.SelectizeLoader.define("readonly_plugin",function(b){var c=this,d=this,e=function(){return d.settings.readonly&&"single"===d.settings.mode},f=this.hideInput;this.hideInput=function(){e()?(d.setTextboxValue(""),d.$control_input.css({opacity:0,position:"absolute",left:d.rtl?1e4:-1e4}),d.isInputHidden=!0):d.settings.readonly||f.apply(c)};var g=this.showInput;this.showInput=function(){e()?(d.$control_input.css({opacity:1,position:"relative",left:0,display:""}),d.isInputHidden=!1):d.settings.readonly||g.apply(c)};var h=this.deleteSelection;this.deleteSelection=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];d.settings.readonly||h.apply(c,a)};var i=this.open;this.open=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];d.settings.readonly||i.apply(c,a)};var j=this.onKeyDown;this.onKeyDown=function(){for(var b=[],e=0;e<arguments.length;e++)b[e]=arguments[e];var f=b[0];if(!d.settings.readonly||f.keyCode!==a.KeyCodes.UP&&f.keyCode!==a.KeyCodes.DOWN&&f.keyCode!==a.KeyCodes.PAGE_DOWN&&f.keyCode!==a.KeyCodes.ENTER&&f.keyCode!==a.KeyCodes.ESC)return j.apply(c,b)}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("remove_next_item_selection",function(a){var b=this,c=b.onOptionSelect;this.onOptionSelect=function(){c.apply(this,arguments),b.$activeOption&&b.isOpen&&(b.$activeOption.removeClass("active"),b.$activeOption=null)},this.onOptionHover=function(){}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("render_plugin",function(a){var b=this,c=b.render;this.render=function(a,d){var e=c.call(b,a,d);if("item"===a&&!$(this.$wrapper).hasClass("focus")){var f=$(e).css("display","inline").css("white-space","nowrap");return f.prop("outerHTML")}return e}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b="selected",c="autocomplete-all-selected";a.SelectizeLoader.define("select_all",function(a){function d(){var a=f.results&&f.results.items,b=[];if(a)for(var c=0;c<a.length;c++)b.push(a[c].id);else b=Object.keys(f.options);return b}function e(){var a=!0;f.results.items&&0!=f.results.items.length||(a=!1);for(var c=0;c<f.results.items.length;c++){var d=f.results.items[c];if(f.items.indexOf(d.id)==-1){a=!1;break}}return a?f.selectAllHeader.addClass(b):f.selectAllHeader.removeClass(b),a}var f=this,g=a.context().scope;this.onFocus=function(){var a=f.onFocus;return function(){f.$control.removeClass(c),f.compiledSelectAllItem&&f.compiledSelectAllItem.remove(),f.$control.children("input").css("display",""),a.apply(f,arguments)}}(),this.onItemSelect=function(a){f.isLocked||"multi"===f.settings.mode&&(a.preventDefault(),f.setActiveItem(a.currentTarget.classList.contains("autocomplete-selectall-item")?null:a.currentTarget,a))},this.adjustWidgetOnBlur=function(){f.$wrapper.removeClass("focus"),0===f.items.length?f.$control.children("input")[0].style.setProperty("display","none"):f.$control.children("input")[0].style.setProperty("display","none","important")},this.setup=function(){var c=f.setup;return function(){c.apply(this,arguments);var d=angular.element('<div class="selected-option"><ionweb-icon icon="accept" color="bright-blue""></ionweb-icon></div>'),e=a.context().compile,h=g.$new(),i=e(d)(h);if(i.on("$destroy",function(){h.$destroy()}),this.selectAllHeader=$('<div class="autocomplete-header"><div class="option-data"><span>Select all</span></div></div>'),this.selectAllHeader.prepend(i),this.selectAllHeader.on("mousedown",function(a){a.preventDefault(),a.stopPropagation();$(a.target);f.selectAllHeader.hasClass(b)?f.deSelectAllOptions():f.selectAllOptions()}),"function"!=typeof g.options){var j=$('<div class="autocomplete-selectall-item">{{selectAllSummaryText}}</div>'),k=e(j)(g);f.compiledSelectAllItem=k,this.on("blur",f.toggleSelectAllSummaryText),this.on("item_add",f.debounceSelectAllSummaryText),this.on("item_remove",f.debounceSelectAllSummaryText)}this.$dropdown.prepend(this.selectAllHeader)}}(),f.debounceSelectAllSummaryText=function(){clearTimeout(f.toggleSelectAllSummaryTimeout),f.toggleSelectAllSummaryTimeout=setTimeout(f.toggleSelectAllSummaryText,250)},f.toggleSelectAllSummaryText=function(){if(g.selectAllSummaryText){var a=!0,b=f.options&&Object.keys(f.options)||[];if(0===b.length)a=!1;else for(var d=0,e=b.length;d<e;d++){var h=b[d];if(f.items.indexOf(h)==-1){a=!1;break}}!f.$control.hasClass("focus")&&a?(f.$control.addClass(c),f.$control.prepend(f.compiledSelectAllItem),f.$control_input[0].style.setProperty("display","none","important")):a||(f.$control.removeClass(c),f.compiledSelectAllItem.remove()),0===f.items.length&&delete f.$control_input[0].style.display}},this.deSelectAllOptions=function(){return function(){for(var a,b,c=d(),e=0;e<c.length;e++){var g=c[e];a=f.getItem(g),b=f.items.indexOf(g),b!=-1&&(a.remove(),f.items.splice(b,1))}f.setCaret(f.items.length),f.lastQuery=null,f.refreshState(),f.setTextboxValue(""),f.refreshOptions(),f.updatePlaceholder(),f.updateOriginalInput({silent:!1}),f.positionDropdown()}}(),this.selectAllOptions=function(){var a=this,b=[],c=d(),e=a.caretPos;c.forEach(function(c){if(a.items.indexOf(c)===-1){var d=$(a.render("item",a.options[c]));a.items.splice(e++,0,c),b.push(d)}}),a.insertAtCaret(b),a.setCaret(a.items.length),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:!1}),a.setTextboxValue(""),a.refreshOptions()},this.refreshOptions=function(){var a=f.refreshOptions;return function(){a.apply(f,arguments),e()}}(),this.onOptionSelect=function(){var a=f.onOptionSelect;return function(){a.apply(f,arguments),e()}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("selectize_item_scroll",function(a){function b(a){a.addClass("hide-right")}function c(a){a.removeClass("hide-right")}function d(a){a.addClass("hide-left")}function e(a){a.removeClass("hide-left")}function f(){k.$activeItems&&k.$activeItems.length&&k.setActiveItem(null);var a=k.$control.children("div[data-value]");if(0!==a.length&&$(a[0]).hasClass("hide-left")){var c,d,e=0,f=k.$control.children("div[data-value].hide-left");for(c=0,d=f.length;c<d;c++)$(f[c]).removeClass("hide-right hide-left");var g=k.containerWidth(),h=k.$control.children("div[data-value]:not(.hide-right)");for(c=0,d=h.length;c<d;c++)e+=$(h[c]).outerWidth(!0),e+l>g&&b($(h[c]))}}function g(){if(i<=0)return void(m=!0);var a,c,e=k.$control.children("div[data-value]:not(input)"),f=0,g=i;for(k.$wrapper.find(".more-button:visible").length&&(g-=18),a=k.caretPos-1;a>=0;a--)f+=$(e[a]).outerWidth(!0),f+l>g&&d($(e[a]));for(a=k.caretPos,c=e.length;a<c;a++)f+$(e[a]).outerWidth(!0)+l>g&&b($(e[a]))}function h(){var a,b,d=k.$control.children("div[data-value].hide-right"),f=k.containerWidth(),g=0,h=k.$control.children("div[data-value]:not(.hide-left):not(.hide-right)");for(a=0,b=h.length;a<b;a++)if(g+=$(h[a]).outerWidth(!0),g+l>f)return;if(d.length)for(a=0,b=d.length;a<b&&(g+=$(d[a]).outerWidth(!0),g+l<f);a++)c($(d[a]));if(g+l<f){var i=k.$control.children("div[data-value].hide-left");if(i.length)for(a=i.length-1;a>=0&&(g+=$(i[a]).outerWidth(!0),g+l<f);a--)e($(i[a]))}}var i,j=this,k=this,l=5,m=!1,n=35,o=36;this.containerWidth=function(){return k.$wrapper.innerWidth()-k.$wrapper.children("span.buttons-container").outerWidth(!0)};var p=k.addItem;this.addItem=function(a,b,c){return i=j.containerWidth(),p.call(k,a,b,c)},this.advanceSelection=function(){var a=k.advanceSelection;return function(b){a.apply(this,arguments),k.scrollItem(b)}}(),this.onFocus=function(){var a=k.onFocus;return function(){a.apply(this,arguments);var c=k.$activeItems&&k.$activeItems.length>0,d=k.$control.children("div[data-value]"),e=d.length;if(m){m=!1;for(var f=k.containerWidth(),g=0,h=0;h<e;h++)g+=$(d[h]).outerWidth(!0),g+l>f&&(c&&d[h]===k.$activeItems[0]||b($(d[h])))}!c&&0!==e&&$(d[e-1]).hasClass("hide-right")&&k.moveToLastItem()}}();var q=this.onKeyDown;this.onKeyDown=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a[0];c.keyCode===n?(k.moveToLastItem(!0),k.setCaret(k.items.length)):c.keyCode===o?(f(),k.setCaret(0)):q.apply(j,a)},this.moveToLastItem=function(){k.$activeItems&&k.$activeItems.length&&k.setActiveItem(null);var a,b,c=0,e=k.$control.children("div[data-value].hide-right");for(a=0,b=e.length;a<b;a++)$(e[a]).removeClass("hide-right hide-left");var f=k.containerWidth(),g=k.$control.children("div[data-value]:not(.hide-left)");for(a=g.length-1;a>=0;a--)c+=$(g[a]).outerWidth(!0),c+l>f&&d($(g[a]))},this.on("item_add",function(){g();var a=k.$wrapper.find(".selectize-input");a.scrollLeft(a.get(0).scrollWidth)}),this.on("item_remove",function(){h()}),this.on("clear",function(){k.setMoreButton()});var r=0;this.on("resize",function(a){r<a.width?h():r>a.width&&g(),r=a.width}),this.scrollItem=function(a){var f,g,h=k.$control.children("div[data-value]:not(.hide-left):not(.hide-right)"),i=k.containerWidth(),j=k.$control.children("div[data-value].hide-left"),m=0,n=k.caretPos;if(1===a){if(n-j.length>=h.length){var o=k.$control.children("div[data-value].hide-right"),p=0,q=0;for(o.length&&(c($(o[0])),o=k.$control.children("div[data-value].hide-right"),h=k.$control.children("div[data-value]:not(.hide-left):not(.hide-right)"),p=$(o[0]).outerWidth(!0)),m=0,f=h.length-1;f>=0;f--)m+=$(h[f]).outerWidth(!0),m+l>i&&(q+=$(h[f]).outerWidth(!0),d($(h[f])));if(q>p)for(f=0,g=o.length;f<g&&(p+=$(o[f]).outerWidth(!0),p<q);f++)c($(o[f]))}}else if(j.length&&n<=j.length){var r=!1;for(e($(j[j.length-1])),h=k.$control.children("div[data-value]:not(.hide-left):not(.hide-right)"),f=0,g=h.length;f<g;f++)r?b($(h[f])):(m+=$(h[f]).outerWidth(!0),m+l>i&&(r=!0))}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("custom_select_template",function(a){var b=this;this.setup=function(){var a=b.setup;return function(){a.apply(this,arguments),b.$wrapper.addClass("custom-item-template")}}(),this.refreshClasses=function(){var a=b.refreshClasses;return function(){a.apply(this,arguments),b.$wrapper.toggleClass("has-items",b.items.length>0)}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){b.SelectizeLoader.define("enter_key_normalization",function(){function b(){c.clear(),c.setTextboxValue(""),c.onSearchChange(""),c.trigger("change",null)}var c=this;this.onKeyDown=function(){var d=c.onKeyDown;return function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];var g=e[0];switch(g.keyCode){case a.KeyCodes.ENTER:if(c.items.length)c.onFocus();else{var h=$.trim(this.$control_input.val()),i=void 0;if(!c.$activeOption&&h){if(this.restoreItem())break;this.settings.createOnBlur||(i=h,h="")}h?d.apply(this,e):(i&&this.trigger("type",""),b(),this.refreshOptions())}break;default:d.apply(this,e)}}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("single_select_copy_paste",function(a){function b(a,b){var d=a[c.settings.valueField].toString().toLowerCase(),e=a[c.settings.labelField].toLowerCase(),f=b.toLowerCase();return d===f||e===f}var c=this,d=!1,e=a.context().scope;this.onPaste=function(){e.selectSingleOptionOnPaste&&(d=!0)},c.load=function(a){var e=c.$wrapper.addClass(c.settings.loadingClass);c.loading++,a.apply(c,[function(a){c.loading=Math.max(c.loading-1,0),a&&a.length&&(c.addOption(a),c.refreshOptions(c.isFocused&&!c.isInputHidden)),c.loading||e.removeClass(c.settings.loadingClass),c.trigger("load",a),d&&(1===a.length&&b(a[0],c.$control_input.val())&&c.addItem(a[0][c.settings.valueField]),d=!1)}])}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("disable_spell_check",function(a){var b=this,c=a.context().scope,d=c.$watch("disableSpellCheck",function(a){a?b.$control_input.attr("spellcheck","false"):b.$control_input.removeAttr("spellcheck")});this.setup=function(){var a=b.setup;return function(){a.apply(b,arguments),c.spellcheck&&b.$control_input.attr("spellcheck",!1)}}(),this.destroy=function(){var a=b.destroy;return function(){a.apply(b,arguments),d()}}()})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.SelectizeLoader.define("enable_mouse_navigation",function(){var a=this,b=this,c=function(a){if(a.target===b.$control[0]){for(var c=b.$control.children("div[data-value]:not(.hide-left):not(.hide-right)"),d=b.$control.children("div[data-value].hide-left").length,e=0,f=-1,g=0;g<c.length;g++)if(e+=$(c[g]).outerWidth(!0),e>a.offsetX+1){f=g;break}f=f>=0?f:c.length,b.setCaret(f+d)}},d=this.setup;this.setup=function(){d.apply(a),b.$control.addClass("large-margins"),b.$control.on("mousedown",c)};var e=this.moveToLastItem;this.moveToLastItem=function(b){b&&e.apply(a)}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.SingleToken=0]="SingleToken",a[a.MultiToken=1]="MultiToken",a[a.StartsWith=2]="StartsWith"}(b=a.AutocompleteFilterCriteria||(a.AutocompleteFilterCriteria={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){function b(a){function b(a,b){var c,d=a,e=a;do if(b(d),!(c=d.$$childHead||d!==e&&d.$$nextSibling))for(;d!==e&&!(c=d.$$nextSibling);)d=d.$parent;while(d=c)}b(a,function(a){var b=a.$$watchers;if(b)for(var c,d=0;d<b.length;d++){c=b[d];var e=c.get(a);c.fn(e,e,a)}})}a.applyWatchers=b}(b=a.angularExt||(a.angularExt={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$compile=a,this.$timeout=c,this.$templateCache=d,this.$scope=e,this.$element=f,this.$attrs=g,this.$ctrl=h,this.$q=i,this.q=j,this.domOptions=k,this.footerTemplate=l,this.selectTemplate=m,this.selectTemplateItemName=n,this.clipboardService=o,this.popupService=p,this.environmentService=q,this.toolkitConfigService=r,this.responsivenessService=s,this.watchHandlers=[],this.inSetModel=void 0,this.inSetView=void 0,this.itemPopup=void 0,this.cache={},this.WINDOWINNERHEIGHT=window.innerHeight,this.getWindowHeight=function(){return t.environmentService.isMobileDevice()?t.WINDOWINNERHEIGHT:window.innerHeight},this.environmentService.isTouchDevice()?this.$element.addClass("touch-device"):this.$element.addClass("no-touch-device"),e.queryOptions||(e.queryOptions={filterCriteria:b.AutocompleteFilterCriteria.SingleToken}),e.labelField=e.labelField||"label",e.valueField=e.valueField||"value",["labelField","valueField","searchField","multiple","allowFreeText","showFooter","disableCache","editable","disableDefaultSorting","allowEmptyValue","enableSelectAll","showSelectedOptions"].forEach(function(a){e.$watch(a,function(a,b){a!==b&&(t.$scope.allowEmptyValue!==!1&&t.$ctrl.$setViewValue(null),t.init(),t.$scope.allowEmptyValue===!1&&t.updateModelWithFirstItem())})}),e.$watch("tabindex",function(a){t.selectize.$control_input.attr("tabindex",a),f.removeAttr("tabindex")}),e.$watch("placeholder",function(a,b){a===b&&(t.selectize.settings.placeholder=a,t.selectize.updatePlaceholder())}),e.$watch("queryOptions",function(a,b){a!==b&&(t.selectize.settings.queryOptions=t.$scope.queryOptions)},!0),e.$watch("readonly",function(a,b){a!==b&&void 0!==a&&t.checkAndApplyReadonly(a)}),["showArrowButton","showClearButton","showUserButton","userButtonIcon","userButtonAction"].forEach(function(a){e.$watch(a,function(a,b){a!==b&&t.selectize.buttonsStateRefresh({showClearButton:e.showClearButton,showArrowButton:e.showArrowButton,showUserButton:e.showUserButton,userButtonIonIconKey:e.userButtonIcon,userButtonAction:e.userButtonAction})})}),e.getActiveOption=function(){var a=null,b=t.selectize.$activeOption&&t.selectize.$activeOption.attr("data-value");return null!==b&&(a=t.selectize.options[b]),a},e.moreButtonClick=function(){return t.showSelectizePopup()},e.destroySelectizePopup=function(){return t.destroyPopup()},e.dropDownOpenState=function(){return t.selectize.isOpen};var u=!1;e.$watch("options",function(a,b){return a||b?void(u&&a===b||(u=!0,t._refreshOptions(a))):void(u=!0)}),e.$on("$destroy",function(){t.watchHandlers=null,t.$timeout.cancel(t.delayTimer),c(function(){return t.destroySelectize()})}),this.init(),this.$scope.allowEmptyValue===!1&&this.updateModelWithFirstItem();var v=function(a,b){var c=!1;t.watchHandlers.push(b),e.$watch(a,function(a,d){c&&a===d||(b(),c=!0)})};v("disabled",function(){e.disabled?(t.selectize.disable(),t.selectize.$control_input.attr("tabindex",-1),t.selectize.$wrapper.addClass("disabled"),t.selectize.close(),t.destroyPopup()):(t.selectize.enable(),t.selectize.$control_input.attr("tabindex",e.tabindex),t.selectize.$wrapper.removeClass("disabled"))}),v("limit",function(){return t.currentLimit=Number(e.limit)})}return c.prototype._refreshOptions=function(a,b){var c=this;if(a instanceof Array)for(var d=0;d<a.length;d++)a[d][this.selectize.settings.labelField]=a[d][this.selectize.settings.labelField]||a[d][this.selectize.settings.valueField],this.selectize.updateOption(a[d][this.selectize.settings.valueField],a[d]);this.initArrayOptions();var e=function(a,b){var d=!1;if(b instanceof Array)for(var e=0,f=b&&b.length;e<f&&!d;e++)d=b[e][c.selectize.settings.valueField]===a;return d};this.$scope.allowEmptyValue!==!1||this.$scope.allowFreeText||e(this.$ctrl.$viewValue,a)||(this.$ctrl.$setViewValue(null),this.updateModelWithFirstItem())},c.prototype.refreshOptions=function(){if("function"==typeof this.$scope.options)throw Error("Refresh option function is not supported for dynamic options");this._refreshOptions(this.$scope.options)},c.prototype.updateModelWithFirstItem=function(a){if(a||this.isDynamic())a?this.updateViewNoGuard(a[this.selectize.settings.valueField]):this.isDynamic()&&this.selectize.onSearchChange("");else if(void 0===this.$ctrl.$viewValue||null===this.$ctrl.$viewValue){var b=this.$scope.options;this.$scope.options||(b=this.domOptions),b&&b.length&&this.updateViewNoGuard(b[0][this.selectize.settings.valueField])}},c.prototype.getCurrentResults=function(){var a=[];return this.selectize.currentResults&&(a=this.selectize.currentResults.items.map(function(a){return a.id})),JSON.stringify(a)},c.prototype.checkTextMatch=function(a){var b=a?a.toLowerCase():"";if(this.selectize.options)for(var c=Object.getOwnPropertyNames(this.selectize.options),d=0;d<c.length;d++){var e=c[d],f=this.selectize.options[e],g=f[this.selectize.settings.valueField].toString().toLowerCase(),h=f[this.selectize.settings.labelField].toLowerCase();if(g===b||h===b)return!0}return!1},c.prototype.setSearch=function(a){var b=this,c=this.$q.defer(),d=this.selectize.settings.loadThrottle||0;return d+=10,this.selectize.setTextboxValue(a),this.selectize.onSearchChange(a),this.selectize.refreshOptions(),setTimeout(function(){b.$scope.$evalAsync(function(){c.resolve(null)})},d),c.promise},c.prototype.isDynamic=function(){return"function"==typeof this.$scope.options},c.prototype.addGroup=function(a,b){this.selectize.addOptionGroup(a,{label:b||a})},c.prototype.fixGroup=function(a){var b=a.group;b?this.addGroup(b):b=a.alwaysShown?"$fixed":"$other",a.$group=a.$group||b},c.prototype.handleResult=function(a,b,c){function d(a){var b=[];if(f.selectize.freeOptionsMap){var c=f.selectize.freeOptionsMap;Object.keys(c).filter(function(b){return b.indexOf(a)!==-1}).forEach(function(a){c[a].$group="free",b.push(c[a])})}return b}var e=this,f=this,g=null;if(a.options.forEach(function(a){e.fixGroup(a),a.alwaysShown&&!g&&(g=a)}),this.currentTotalCount=a.total,b&&b(this.$scope.multiple&&this.$scope.showSelectedOptions!==!1?a.options.concat(d(c)):a.options),this.$scope.allowEmptyValue===!1&&!this.$ctrl.$viewValue){var h=g||a.options&&a.options.length&&a.options[0];h&&this.updateModelWithFirstItem(h)}},c.prototype.setSearchText=function(a){var b=this.selectize.$control_input.val();a!==b&&(this.selectize.setTextboxValue(a),this.isDynamic()?this.reload():this.selectize.refreshOptions(),this.$scope.onTextChange({value:a}))},c.prototype.initArrayOptions=function(){var a=this;angular.isArray(this.$scope.options)&&(this.domOptions=this.$scope.options);var b=[];this.domOptions.forEach(function(c){var d={};angular.extend(d,c);var e=a.$scope.labelField||"label",f=a.$scope.valueField||"value";d[e]=c[e]||c[f],d[f]=c[f],d.alwaysShown=c.alwaysShown,a.selectize.freeOptionsMap&&delete a.selectize.freeOptionsMap[c[f]],a.fixGroup(d),b.push(d)}),this.selectize.clearOptions(),this.selectize.addOption(b),this.currentTotalCount=b.length},c.prototype.readAsyncOptions=function(a){return this.$q.when(this.$scope.options(a))},c.prototype.init=function(){function b(a){var b=void 0;return b=a===!0?void 0:a===!1?null:a}function c(a){return a&&a.split(/ |,/)}var d=this;this.$element.children().remove();var e=angular.element("<select></select>");e.attr("placeholder",this.$attrs.placeholder),this.$attrs.tabindex&&this.$scope.tabindex&&e.attr("tabindex",this.$scope.tabindex),this.$scope.multiple===!0&&(this.$scope.allowEmptyValue=!0),this.$element.append(e);var f={context:function(){return{compile:d.$compile,scope:d.$scope,angular:angular}}},g=["add_item_plugin","render_plugin","remove_button","advanced_option_selector","autoselect_on_focus","dynamic_options_plugin","custom_refresh_option","dropdown_autowidth","clear_options_override","scroll_plugin","delete_selection","dropdown_open_close","custom_search","editable_plugin","copy_paste_items","remove_next_item_selection","placeholder","advanced_keyboard"],h=this.$scope.editable!==!1,i=this.environmentService.isMobileDevice()&&this.environmentService.isSmallScreen();if(this.$scope.multiple&&this.$scope.itemDelimiter!==!1||!this.isDynamic()||g.push({name:"single_select_copy_paste",options:f}),this.environmentService.isSmallScreen()&&h?h&&i&&g.push("position_smallscreen_dropdown"):g.push("dropdown_position"),g.push({name:"buttons",options:angular.extend({showClearButton:this.$scope.showClearButton,showArrowButton:this.$scope.showArrowButton,showUserButton:this.$scope.showUserButton,userButtonIonIconKey:this.$scope.userButtonIcon,userButtonAction:this.$scope.userButtonAction},f)}),this.$scope.multiple&&this.$scope.showSelectedOptions!==!1){var j={name:"dropdown_customization",options:f};g.splice(1,0,j),this.$scope.enableSelectAll&&g.push({name:"select_all",options:f})}this.$scope.multiple||g.push("enter_key_normalization"),this.$scope.allowFreeText&&this.$scope.editable!==!1&&g.push("free_options"),this.isDynamic()&&g.push("disable_cache"),this.$scope.multiple||g.push("restore_cache"),this.$scope.disableDefaultSorting&&g.push("disable_selectize_sorting"),this.selectTemplate&&g.push("custom_select_template"),this.selectTemplate||g.push("item_nowrap"),this.$scope.multiple&&g.push("selectize_item_scroll"),g.push({name:"disable_spell_check",options:f}),g.push({name:"readonly_plugin",options:f}),this.$scope.multiple&&h&&this.$scope.enableMouseNavigation&&g.push("enable_mouse_navigation");var k={searchField:c(this.$scope.searchField||this.$scope.labelField||"label"),labelField:this.$scope.labelField||"label",valueField:this.$scope.valueField||"value",plugins:g,render:{},selectOnTab:!0,selectAll:this.$scope.enableSelectAll,persist:!0,maxItems:this.$scope.multiple?null:1,dropdownParent:"body",openOnFocus:!1,delimiter:b(this.$scope.itemDelimiter),optgroupField:"$group",editable:void 0==this.$scope.editable||this.$scope.editable,readonly:1==this.$scope.readonly,allowFreeText:this.$scope.allowFreeText,validatePaste:this.$scope.validatePaste,key:this.$scope.key,hideSelected:this.$scope.multiple&&void 0!=this.$scope.showSelectedOptions&&!this.$scope.showSelectedOptions,showOnHover:this.toolkitConfigService.autoComplete.showIconOnHover,optgroups:[{value:"$free",label:"Free text item"},{value:"$fixed",label:"Fixed Items"},{value:"$other",label:"Free Items"}],lockOptgroupOrder:!0,score:function(a){var b=d.selectize.getScoreFunction(a);return function(a){var c=b(a);return a.alwaysShown&&(c+=10),c}},copyToClipboard:function(a){d.clipboardService.copyToClipboard(a)},closePopup:function(a){a&&"more-button"==a||d.destroyPopup()},$q:this.$q,getWindowHeight:this.getWindowHeight};this.$scope.multiple||(k.modelValue=function(){return d.$ctrl?d.$ctrl.$viewValue:null}),this.isDynamic()&&(k.load=function(a,b){d.$scope.disableCache&&(d.cache={});var c=d.cache[a];return c?void d.handleResult(c,b,a):void d.readAsyncOptions(a).then(function(b){if(d.selectize)return d.$scope.disableCache||(d.cache[a]=b),b}).catch(function(a){return{options:[]}}).then(function(c){c&&(d.selectize.clearOptions(),d.selectize.refreshOptions(!1),d.handleResult(c,b,a))})},k.loadOptions=function(a,b){d.readAsyncOptions(a).then(function(a){return a}).catch(function(a){return{options:[]}}).then(function(c){d.handleResult(c,b,a)})}),this.$scope.optionProvider&&(k.optionProvider=function(a,b){b.resolve(d.$scope.optionProvider(a))}),k.render.optgroup_header=function(a,b){return["$free","$fixed","$other"].indexOf(a.value)>=0?"":'<div class="optgroup-header">'+b(a.label)+"</div>"},this.$scope.optionTemplate&&(k.render.option=function(b){var c=d.$scope.$new(!1,d.$scope);c[d.$scope.optionTemplateItemName]=b;var e=d.$compile(d.$scope.optionTemplate)(c);return a.angularExt.applyWatchers(c),c.$on("$destroy",function(){e.remove()}),c.$destroy(),e[0].outerHTML}),this.selectTemplate&&(k.render.item=function(b){var c=d.$scope.$new(!1,d.$scope);c[d.selectTemplateItemName]=b;var e=d.$compile(d.selectTemplate.cloneNode(!0))(c);return c.$on("$destroy",function(){e.remove()}),a.angularExt.applyWatchers(c),c.$destroy(),e[0].outerHTML}),k.render.option_create=function(a,b){var c=d.$scope.newItemContentTemplate&&d.$scope.newItemContentTemplate({$input:a.input,$escape:b});return c||(c=b(a.input)),'<div class="create" free-text-data data-value="'+a.input+'">'+c+"</div>"},this.selectize&&this.destroySelectize(),this.selectize=e.selectize(k).get(0).selectize,this.$scope.selectize=this.selectize,this.selectize.settings.queryOptions=this.$scope.queryOptions,this.selectize.isDynamic=function(){return d.isDynamic()},this.isDynamic()||this.initArrayOptions();var l=this.selectize.getSearchOptions;if(this.selectize.getSearchOptions=function(){var a=l.apply(d.selectize,[]);return d.currentLimit>0&&(a.limit=d.currentLimit),a},this.selectize.on("dropdown_open",function(a){return d.addFooter(a)}),this.$ctrl){var m=this.selectize;this.$ctrl.$render=this.$scope.allowEmptyValue===!1?this.updateViewNonEmpty.bind(this):this.updateView.bind(this),m.on("change",function(a){d.$scope.allowEmptyValue===!1?d.updateModelNonEmpty(a):d.updateModel(a),d.$scope.reloadOnModelChange&&d.isDynamic()&&d.reload()}),m.on("blur",function(){0===m.items.length&&d.$scope.allowEmptyValue!==!1&&d.updateModel(null)}),this.updateView()}this.$scope.multiple&&this.isDynamic()&&(this.$scope.reloadOnModelChange||this.selectize.$control_input.on("update",function(a,b){m.$control_input.val()||b&&b.force||d.reload()})),this.$scope.onTextChange&&this.selectize.on("type",function(a){return d.$scope.onTextChange({value:a})}),this.$scope.onFocus&&this.selectize.on("focus",function(){d.$scope.$evalAsync(function(){d.$scope.onFocus()})}),this.selectize.on("focus",function(){i&&d.$scope.editable!==!1&&!d.$scope.disableFullscreenMode&&d.$scope.readonly!==!0&&d.openXSScreenACBHolder()}),this.selectize.on("blur",function(){if(d.$scope.allowEmptyValue===!1){var a=d.selectize.getValue();a||d.selectize.addItem(d.$ctrl.$viewValue),d.destroyPopup()}d.$scope.$evalAsync(function(){d.$scope.onBlur&&d.$scope.onBlur()})}),this.$scope.editable===!1&&this.selectize.hideInput(),this.$scope.$on("$clearCache",function(){d.selectize.clearCache()}),this.watchHandlers.forEach(function(a){a()}),this.$scope.getCurrentOptions=function(){return d.getCurrentResults()},this.$scope.setSearch=function(a){return d.setSearch(a)},!this.bound&&this.$scope.scopeOptions&&this.$scope.scopeOptions.onAutocompleteBound&&(this.bound=!0,this.$scope.scopeOptions.onAutocompleteBound(this));var n;this.$scope.$watchGroup(["validationState","validationMessage","errorAnimation"],function(b){"undefined"!=typeof d.$scope.validationState&&!n&&d.selectize.$wrapper&&(n=new a.validation.ValidationController(d.selectize.$wrapper,d.$scope.validationMessage,d.$scope.validationState,d.$scope.errorAnimation)),n&&(n.state=d.$scope.validationState,n.message=d.$scope.validationMessage)}),this.$scope.autofocus&&this.selectize.focus(),this.checkAndApplyReadonly(this.$scope.readonly),this.$scope.multiple&&this.responsivenessService.register(this.$element[0],function(a){d.selectize&&(d.selectize.setMoreButton(),d.selectize.trigger("resize",a))})},c.prototype.checkAndApplyReadonly=function(a){this.selectize.settings.readonly=this.$scope.readonly,a?(this.selectize.$control_input.attr("readonly","true"),this.selectize.$wrapper.addClass("readonly"),
this.selectize.close(),this.selectize.buttonsStateRefresh({showClearButton:!1,showArrowButton:!1,showUserButton:this.$scope.showUserButton,userButtonIonIconKey:this.$scope.userButtonIcon,userButtonAction:this.$scope.userButtonAction})):(this.selectize.$control_input.removeAttr("readonly"),this.selectize.$wrapper.removeClass("readonly"),this.selectize.buttonsStateRefresh({showClearButton:this.$scope.showClearButton,showArrowButton:this.$scope.showArrowButton,showUserButton:this.$scope.showUserButton,userButtonIonIconKey:this.$scope.userButtonIcon,userButtonAction:this.$scope.userButtonAction})),this.$scope.multiple&&void 0!==this.$scope.readonly&&this.selectize.setMoreButton()},c.prototype.openXSScreenACBHolder=function(){var a=this,b=45,c="autocomplete-absolute-position",d="element-relative-position",e="autocomplete-fullview",f="calc(100vw - 3.5rem)";if(!this.$backDropPanel||0===this.$backDropPanel.parent().length){$(document.body).addClass("autocomplete-fullview body-auto-height"),this.$backDropPanel=angular.element(this.$templateCache.get("toolkit/ionautocomplete/ionwebSmallScreenACBPopup.tpl.html"));var g=this.$element.parent(),h=this.$element.css("top"),i=this.$element.css("left"),j=this.$element.get(0).style.width;this.$xsPopupScreenScope=this.$scope.$new(!1),this.$xsPopupScreenScope.doneButtonAction=function(b){b&&b.stopPropagation()&&b.preventDefault(),$(window).scrollTop(0),a.setOverride(g,!1),$(document.body).removeClass(e),g.removeClass(d),a.$element.css("top",h).css("left",i),a.$element.removeClass(c),a.setSelectizeWidth(j),clearInterval(m),clearInterval(r),a.selectize.setMoreButton(),a.selectize.close(),k.remove(),a.$backDropPanel.remove(),a.$xsPopupScreenScope.$destroy(),a.$xsPopupScreenScope=void 0,a.selectize.$control_input.blur()},this.setOverride(g,!0),g.addClass(d),this.$element.addClass(c),g.prepend(this.$backDropPanel);var k=document.createElement("div");k.style.height="800px",k.style.width="20px",$(document.body).append(k);var l=this.$element.get(0).parentElement.getBoundingClientRect();this.$backDropPanel=this.$compile(this.$backDropPanel)(this.$xsPopupScreenScope),this.$backDropPanel.css("top",-l.top+"px"),this.$backDropPanel.css("left",-l.left+"px"),this.$element.css("top",-l.top+5+"px").css("left",b-l.left+"px"),this.setSelectizeWidth(f),$(window).scrollTop(10),$(window).scrollTop(0),this.selectize.setMoreButton(),this.selectize.onSearchChange("");var m,n=l.top,o=!1,p=function(){m=setInterval(function(){var c=g.get(0).getBoundingClientRect(),d=c.top;return d==n?(document.body.classList.remove("body-auto-height"),clearInterval(m),!o&&a.selectize.open(),void(o=!0)):(n=d,a.$backDropPanel.css("top",-c.top+"px"),a.$backDropPanel.css("left",-c.left+"px"),a.$element.css("top",-c.top+5+"px").css("left",b-c.left+"px"),$(window).scrollTop(10),void $(window).scrollTop(0))},100)};p();var q=window.innerHeight,r=setInterval(function(){q!==window.innerHeight&&(clearInterval(m),p(),q=window.innerHeight)},100)}},c.prototype.setOverride=function(a,b){for(var c="autocomplete-overflow-visible",d=a;d.get(0)!=document.body;){b?d.addClass(c):d.removeClass(c);var d=d.parent()}},c.prototype.setSelectizeWidth=function(a){this.$element.css("width",a)},c.prototype.initializePopup=function(){var a=this,c={automaticallyUpdatePosition:!1,anchorPoint:this.environmentService.isSmallScreen()?b.PopupAnchorPoint.TopLeft:b.PopupAnchorPoint.RightBottom,automaticallyClose:!0};if(this.destroyPopup(),!this.itemPopup){var d=this.$scope.labelField||"label",e=this.$scope.valueField||"value",f=this.$scope.readonly||!1,g=this.popupService.createWithTemplate('<ionweb-selectize-popup  destroy-selectize-popup="destroySelectizePopup()" selectize="selectize" value-field="'+e+'" label-field="'+d+'" readonly='+f+"></ionweb-selectize-popup>",$(this.selectize.$wrapper),this.$scope,c);g.onClose.add(function(){a.destroyPopup()}),g&&(this.itemPopup=g,this.itemPopup.show())}},c.prototype.destroyPopup=function(){this.itemPopup&&(this.itemPopup.hide(),this.itemPopup.destroy(),this.itemPopup=null)},c.prototype.showSelectizePopup=function(){if(this.$scope.multiple)return this.itemPopup?void this.destroyPopup():void this.initializePopup()},c.prototype.addFooter=function(a){var b=this;this.selectize.off("dropdown_open",function(a){return b.addFooter(a)});var c=this.$element.closest(".ion-contrast").length>0;a.toggleClass("ion-contrast",c);var d=this.$scope.footerOptions&&this.$scope.footerOptions.footerTemplate||this.footerTemplate;if(this.$scope.showFooter&&d){var e=this.$scope.footerOptions&&this.$scope.footerOptions.footerScope||this.$scope.$parent.$new(),f=this.$compile(d)(e);f.addClass("selectize-dropdown-content autocomplete-footer"),a.append(f),e.$on("$destroy",function(){$(f).remove()});var g=function(){e.$evalAsync(function(){e.$itemCount=b.selectize.currentResults&&b.selectize.currentResults.items&&b.selectize.currentResults.items.length||0,e.$itemTotalCount=b.currentTotalCount,e.$itemText=1===e.$itemCount?"item":"items",b.currentTotalCount>0&&(e.$itemText+=" out of "+b.currentTotalCount)})};this.selectize.on("dropdown_open",g),this.selectize.on("option_add",g),this.selectize.on("option_remove",g),this.selectize.on("option_clear",g),this.selectize.on("item_add",g),this.selectize.on("item_remove",g),this.selectize.on("type",g),g()}},c.prototype.updateViewNoGuard=function(a){var b=this,c=[];this.selectize.items.forEach(function(b,d){Array.isArray(a)?(a||[]).indexOf(b)!==d&&c.push(b):a!==b&&c.push(b)}),c.forEach(function(a){return b.selectize.removeItem(a,!0)}),this.isDynamic()||void 0===this.$scope.options||this.$scope.options===this.domOptions||this.initArrayOptions(),this.selectize.modelIdx=(this.selectize.modelIdx||0)+1;var d=[];if(a){var e=Array.isArray(a)?a:[a];e.forEach(function(a,c){d.push(b.$q.when(b.selectize.addItem(a,!0,c)))})}this.$q.all(d).then(function(){b.selectize&&(b.selectize.refreshItems(),b.$scope.allowEmptyValue===!1&&b.updateModelNonEmpty(a))})},c.prototype.updateViewNonEmpty=function(){if(!this.$ctrl.$viewValue){var a=this.selectize.getValue();return void(a&&(this.$ctrl.$viewValue=a,this.$ctrl.$render()))}this.updateView()},c.prototype.updateView=function(){var a=this.$ctrl.$viewValue;if(this.inSetModel!==a){this.inSetView=a;try{this.updateViewNoGuard(a)}finally{this.inSetView=void 0}}},c.prototype.updateModelNonEmpty=function(a){a&&this.updateModel(a)},c.prototype.updateModel=function(a){if(this.inSetView!==a){this.inSetModel=a;try{var b=!1,c=this.$ctrl.$viewValue;if(Array.isArray(a)){if(Array.isArray(c)&&a.length===c.length){for(var d=0;d<c.length&&c[d]===a[d];d++);d===c.length&&(b=!0)}}else b=c===a;b||(0==this.$scope.multiple&&this.environmentService.isSmallScreen()&&this.$xsPopupScreenScope&&this.$xsPopupScreenScope.doneButtonAction(),this.$ctrl.$setViewValue(a))}finally{this.inSetModel=void 0}}},c.prototype.getOptionByKey=function(a){var b=this.selectize.options[a];return b&&b[this.selectize.settings.labelField]},Object.defineProperty(c.prototype,"state",{get:function(){function a(a){return a?"string"==typeof a?[a]:a:[]}var b=this,c=a(this.$ctrl.$viewValue);return{items:c.map(function(a){return{value:a,label:b.getOptionByKey(a)}})}},set:function(a){var b=this;a&&angular.isArray(a.items)&&(this.delayTimer=this.$timeout(function(){if(!b.isDestroyed){if(b.isDynamic())for(var c=0;c<a.items.length;c++){var d=a.items[c];if(d.value&&!b.getOptionByKey(d.value)){var e={};e[b.selectize.settings.valueField]=d.value,e[b.selectize.settings.labelField]=d.label,b.selectize.registerOption(e)}}1===b.selectize.settings.maxItems&&a.items.length>0?b.updateViewNoGuard(a.items[0].value):b.updateViewNoGuard(a.items.map(function(a){return a.value}))}},0))},enumerable:!0,configurable:!0}),c.prototype.clearCache=function(){this.selectize.clearOptions(),this.selectize.refreshOptions(!1),this.cache={}},c.prototype.focus=function(){this.selectize.focus()},c.prototype.destroySelectize=function(){this.selectize.off("change"),this.selectize.off("dropdown_open"),this.selectize.off("clear"),this.selectize.off("type"),this.selectize.off("focus"),this.selectize.off("blur"),this.selectize.off("option_add"),this.selectize.off("option_remove"),this.selectize.off("option_clear"),this.selectize.off("item_add"),this.selectize.off("item_remove"),this.selectize.off("resize"),this.$backDropPanel&&this.$backDropPanel.remove(),this.selectize.destroy(),this.selectize.isDestroyed=!0,this.isDestroyed=!0,this.selectize=null},c.prototype.reload=function(){return this.q.when(this.reset())},c.prototype.reset=function(){var a=this;if(!this.isDynamic())return this.refreshOptions(),this.$q.when();var b=this.$q.defer();return this.cache={},this.selectize.load(function(c){var d=a.selectize.$control_input.val()||"";a.readAsyncOptions(d).then(function(b){return a.selectize.loadedSearches[d]=!0,b}).catch(function(a){return{options:[]}}).then(function(e){a.selectize&&(a.clearCache(),a.handleResult(e,c,d),a.selectize.refreshOptions(!1)),b.resolve(null)})}),b.promise},c}(),d=function(){function a(d,e,f,g,h,i,j,k,l,m){var n=this;this.$compile=d,this.$timeout=e,this.$templateCache=f,this.clipboardService=g,this.popupService=h,this.environmentService=i,this.$q=j,this.q=k,this.toolkitConfigService=l,this.responsivenessService=m,this.require="?ngModel",this.scope={options:"=?",placeholder:"@?",multiple:"=?",disabled:"=?ngDisabled",readonly:"=?ngReadonly",valueField:"@?",labelField:"@?",searchField:"@?",showArrowButton:"=?",showClearButton:"=?",showUserButton:"=?",userButtonIcon:"=?",showFooter:"=?",allowFreeText:"=?",limit:"=?",scopeOptions:"=?",disableCache:"=?",validationState:"=?",validationMessage:"=?",errorAnimation:"=?",tabindex:"@?",optionProvider:"=?",queryOptions:"=?",editable:"=?",disableDefaultSorting:"=?",allowEmptyValue:"=?",selectAllSummaryText:"=?",selectSingleOptionOnPaste:"=?",key:"@?",reloadOnModelChange:"=?",autofocus:"<?",onTextChange:"&?",onFocus:"&?",onBlur:"&?",validatePaste:"&?",userButtonAction:"&?",onDropdownStateChanged:"&?",optionTemplate:"<?",optionTemplateItemName:"<?",subContent:"=?",enableSelectAll:"=?",showSelectedOptions:"=?",disableFullscreenMode:"=?",newItemContentTemplate:"&?",footerOptions:"<?",disableSpellCheck:"=?",itemDelimiter:"<?",enableMouseNavigation:"<?"},this.compile=function(d){var e=[];e=e.concat(n.getDOMOptions(d)),d.children("optgroup").each(function(a,b){var c=$(b);e=e.concat(n.getDOMOptions(c,c.attr("label")))});var f,g,h=d.find("[footer-template]"),i=h.length>0?h.get(0).outerHTML:a.DEFAULT_FOOTER_TEMPLATE,j=d.find("[option-template]");j.length>0&&(f=j.addClass("option").clone(!1).get(0),g=j.attr("option-template")||"item");var k,l,m=d.find("[item-template]");return m.length>0&&(k=m.clone(!1).get(0),l=m.attr("item-template")||"item"),d.children().remove(),{post:function(a,d,h,j){f&&(a.optionTemplate=f.outerHTML,g&&(a.optionTemplateItemName=g)),b.SelectizeLoader.load(n.$q,function(){new c(n.$compile,n.$timeout,n.$templateCache,a,d,h,j,n.$q,n.q,e,i,k,l,n.clipboardService,n.popupService,n.environmentService,n.toolkitConfigService,n.responsivenessService)})}}}}return a.prototype.getDOMOptions=function(a,b){return a.children("option, opt").map(function(a,c){var d={};return Object.keys(c.attributes).forEach(function(a){d[c.attributes[a].name]=c.attributes[a].value}),d.value||(d.value=$(c).text().trim()),b&&(d.group=b),d}).get()},a.DEFAULT_FOOTER_TEMPLATE='<div><p class="autocomplete-footer-content"><span class="autocomplete-item-count">{{$itemCount}}</span> <span class="autocomplete-item-count-label">{{$itemText}}</span></p></div>',a}();angular.module("ionwebTk").directive("ionwebAutocomplete",["$compile","$timeout","$templateCache","ionweb.clipboardService","ionweb.popupService","ionwebTk.environmentService","$q","ionwebTk.q","ionwebTk.toolkitConfigService","ionweb.responsivenessService",function(a,b,c,e,f,g,h,i,j,k){return new d(a,b,c,e,f,g,h,i,j,k)}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a){var b=this;this.$scope=a,this.popupMouseDowned=!1,this.popupMouseDowned=void 0,this.$scope.selectize.on("item_remove",this.updatePopupOnItemRemove.bind(this)),this.$scope.selectize.on("item_add",this.addSelectedItemOptions.bind(this)),this.$scope.selectize.on("clear",this.clearSelectedItemsOptions.bind(this)),this.$scope.selectize.on("type",this.closePopup.bind(this)),this.$scope.selectize.$wrapper.addClass("ionweb-popup-container"),this.populateTemplatesForSelectedItems(),this.$scope.removePopupItem=function(a){b.$scope.selectize.removeItem($(a.currentTarget).siblings("div").find("div").attr("data-value"),!1),b.popupMouseDowned=!1,a.preventDefault(),a.stopPropagation()},this.$scope.popupupMouseDown=function(a){b.popupMouseDowned=!0,b.$scope.selectize.ignoreBlur=!0,a.preventDefault(),a.stopPropagation()}}return a.prototype.updatePopupOnItemRemove=function(a,b){var c=this;if(this.$scope.templates.length>0){var d=this.$scope.templates.map(function(a){return a.value}).indexOf(a);d>-1&&this.$scope.$evalAsync(function(){return c.$scope.templates.splice(d,1)})}},a.prototype.addSelectedItemOptions=function(a,b){this.addTemplate(a,this.$scope.selectize.items.indexOf(a))},a.prototype.clearSelectedItemsOptions=function(){this.popupMouseDowned=!1},a.prototype.closePopup=function(){this.$scope.selectize.off("item_remove",this.updatePopupOnItemRemove.bind(this)),this.$scope.selectize.off("item_add",this.addSelectedItemOptions.bind(this)),this.$scope.selectize.off("clear",this.clearSelectedItemsOptions.bind(this)),this.$scope.selectize.off("type",this.closePopup.bind(this)),this.$scope.destroySelectizePopup&&this.$scope.destroySelectizePopup()},a.prototype.populateTemplatesForSelectedItems=function(){var a=this.$scope.selectize.items.length;this.$scope.templates=[];for(var b=0;b<a;b++)this.addTemplate(this.$scope.selectize.items[b],-1)},a.prototype.addTemplate=function(a,b){var c;this.$scope.selectize.renderCache.item&&(c=this.$scope.selectize.renderCache.item[a]),c||(c=this.$scope.selectize.render("item",this.$scope.selectize.options[a]||a));var d=$("<div/>",{html:c});d.find("a.remove").remove(),b===-1?this.$scope.templates.push({value:a,template:d.html()}):this.$scope.templates.splice(b,0,{value:a,template:d.html()})},a.$inject=["$scope"],a}();angular.module("ionwebTk").controller("ionwebSelectizePopupController",b).directive("ionwebSelectizePopup",[function(){return{restrict:"E",templateUrl:"toolkit/ionautocomplete/ionwebSelectizePopup.tpl.html",controller:"ionwebSelectizePopupController",scope:{selectize:"=",valueField:"@",labelField:"@",destroySelectizePopup:"&",readonly:"="}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("ionwebSelectizePopupItemTemplate",["$compile",function(a){return{restrict:"E",scope:{html:"="},link:function(b,c){b.$watch("html",function(){if(b.html){var d=angular.element(b.html);a(d)(b),c.append(d)}})}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.ButtonOnRight=0]="ButtonOnRight",a[a.ButtonOnLeft=1]="ButtonOnLeft",a[a.WrapHorizontal=2]="WrapHorizontal",a[a.WrapVertical=3]="WrapVertical"}(b=a.SpinnerPosition||(a.SpinnerPosition={}));var c;!function(a){a[a.Increment=0]="Increment",a[a.Decrement=1]="Decrement"}(c=a.UpdateTickMode||(a.UpdateTickMode={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.coreScope={}}return a.prototype.incrementValue=function(a){return void 0!=a&&null!=a||(a=this.coreScope.tick),this.coreScope.value=this.validateValue(this.coreScope.value+a),this.coreScope.value},a.prototype.decrementValue=function(a){return void 0!=a&&null!=a||(a=this.coreScope.tick),this.coreScope.value=this.validateValue(this.coreScope.value-a)},a.prototype.applyValue=function(a){return""==a?this.coreScope.value=void 0:this.coreScope.value=this.validateValue(this.parseValue(a)),this.coreScope.value},a.prototype.validateValue=function(a){return(this.coreScope.maxValue||0==this.coreScope.maxValue)&&a>=this.coreScope.maxValue&&(a=this.coreScope.maxValue),(this.coreScope.minValue||0==this.coreScope.minValue)&&a<=this.coreScope.minValue&&(a=this.coreScope.minValue),a},a.prototype.parseValue=function(a){return a?Number(a):NaN},a.prototype.formatValue=function(a){return void 0==a||null==a?"":isNaN(a)?"NaN":a.toString()},a}();b.NumericUpDownModel=c,angular.module("ionwebTk").directive("ionwebNumericUpDown",["$injector",function(d){function e(a){if(a&&a.length>0){var b=a[0];if("number"==typeof b){var c=[];return a.forEach(function(a){var b={tickValue:a,displayName:a.toString()};c.push(b)}),c}}return a}function f(f,g,h){function i(a){var b=f.modelInternal.formatValue(a);return void 0==a||null==a?b="":isNaN(a)&&(b=f.textfieldData.textboxValue),b}function j(){return void 0==f.value||null==f.value||""==f.textfieldData.textboxValue}function k(){j()&&(f.value=0,f.textfieldData.textboxValue=f.modelInternal.formatValue(0))}function l(a){return(void 0!=a||null!=a)&&isNaN(a)}function m(c){setTimeout(function(){f.$apply(function(){f.validationStateInternal=a.validation.ValidationState.Error,f.validationMessageInternal=c+b.Strings.Err_NumericUpDownDirective_IsInvalid})},0)}function n(a){var c=a.originalEvent;f.modelInternal.coreScope.spinnerDisabled||(c.deltaY<0?o(b.UpdateTickMode.Increment):c.deltaY>0&&o(b.UpdateTickMode.Decrement)),a.preventDefault()}function o(a){E?f.updateTick(a):(E=setTimeout(p,f.wheelEventThrottlingTime),f.updateTick(a,!0),F=f.value)}function p(){clearTimeout(E),E=void 0,q(F)}function q(a){f.value!==a&&f.onValueCommit&&f.onValueCommit({$newValue:f.value,$oldValue:a})}function r(a){f.textfieldData.textboxValue=a}function s(){u(),v(),f.modelInternal.coreScope.disabled||t()}function t(){j()?(u(!1),v(!1),clearInterval(G)):isNaN(f.modelInternal.coreScope.value)?(u(!0),v(!0),clearInterval(G)):(void 0!=f.modelInternal.coreScope.maxValue&&f.modelInternal.coreScope.value>=f.modelInternal.coreScope.maxValue?(u(!0),clearInterval(G)):u(!1),void 0!=f.modelInternal.coreScope.minValue&&f.modelInternal.coreScope.value<=f.modelInternal.coreScope.minValue?(v(!0),clearInterval(G)):v(!1))}function u(a){f.upDisabled=f.modelInternal.coreScope.spinnerDisabled||f.modelInternal.coreScope.disabled||a}function v(a){f.downDisabled=f.modelInternal.coreScope.spinnerDisabled||f.modelInternal.coreScope.disabled||a}function w(){f.model?(f.modelInternal=f.model,f.modelInternal.coreScope=f):(f.modelInternal=new c,f.modelInternal.coreScope=f)}var x,y=this;g.addClass("ionweb-numeric-up-down");var z=-1,A=-1,B=d.get("ionwebTk.environmentService");w(),f.model=f.modelInternal,void 0==f.modelInternal.coreScope.tick&&(f.modelInternal.coreScope.tick=1),void 0==f.modelInternal.coreScope.fontSize&&(f.modelInternal.coreScope.fontSize="100%"),void 0==f.modelInternal.coreScope.toolbarFontSize&&(f.modelInternal.coreScope.toolbarFontSize="100%"),void 0==f.modelInternal.coreScope.spinnerDisabled&&(f.modelInternal.coreScope.spinnerDisabled=!1),void 0==f.modelInternal.coreScope.showSpinner&&(f.modelInternal.coreScope.showSpinner=!0),void 0==f.modelInternal.coreScope.spinModeEnabled&&(f.modelInternal.coreScope.spinModeEnabled=!1),void 0==f.modelInternal.coreScope.disabled&&(f.modelInternal.coreScope.disabled=!1),void 0==f.modelInternal.coreScope.spinnerSize&&(f.modelInternal.coreScope.spinnerSize="24px"),void 0==f.modelInternal.coreScope.toolbarHeight&&(f.modelInternal.coreScope.toolbarHeight="24px"),void 0==f.modelInternal.coreScope.spinnerPosition&&(f.modelInternal.coreScope.spinnerPosition=b.SpinnerPosition.WrapHorizontal),void 0==f.modelInternal.coreScope.upIconName&&(f.modelInternal.coreScope.upIconName="triangleUp"),void 0==f.modelInternal.coreScope.downIconName&&(f.modelInternal.coreScope.downIconName="triangleDown"),void 0==f.modelInternal.coreScope.minValue&&(f.modelInternal.coreScope.minValue=Number(-2e53)),void 0==f.modelInternal.coreScope.maxValue&&(f.modelInternal.coreScope.maxValue=Number(2e53)),void 0==f.modelInternal.coreScope.useDefaultModifiers&&(f.modelInternal.coreScope.useDefaultModifiers=!1),f.textfieldData={textboxValue:"",textboxOldValue:""},f.exponentialIncrement={exponentialIncrementStartDelay:400,exponentialIncrementSpeed:100,startValue:void 0},f.wheelEventThrottlingTime=100,f.$topToolBar={buttons:e(f.topToolBar)},f.$bottomToolBar={buttons:e(f.bottomToolBar)};var C=i(f.modelInternal.coreScope.value);if(f.textfieldData={textboxValue:C,textboxOldValue:C},f.incrementValue=function(a){var b=f.value;f.modelInternal.incrementValue(a),q(b),f.updateSpinnerStateAndTextBoxValue(f.modelInternal.coreScope.value)},f.modelInternal.coreScope.$watch("spinnerDisabled",t),this.preferenceChangedEventUnsubscriber=[],d.has("ionweb.numberFormattingService")){var D=d.get("ionweb.numberFormattingService");this.preferenceChangedEventUnsubscriber.push(D.preferenceChanged.add(function(){f.textfieldData.textboxValue=f.modelInternal.formatValue(f.value)}))}f.$on("$destroy",function(){for(var a=0;a<y.preferenceChangedEventUnsubscriber.length;a++)y.preferenceChangedEventUnsubscriber[a]();y.preferenceChangedEventUnsubscriber=[]}),f.$watch("value",function(b,c){if(void 0!==b||void 0!==c){var d=f.modelInternal.validateValue(b);void 0==b&&null==b||(f.value=f.modelInternal.parseValue(f.modelInternal.formatValue(d))),f.updateSpinnerStateAndTextBoxValue(b),f.validationStateInternal=a.validation.ValidationState.Valid}}),f.updateSpinnerStateAndTextBoxValue=function(a){var b=i(a);t(),f.textfieldData.textboxValue=b,f.textfieldData.textboxOldValue=b,f.$evalAsync()},f.getDisplayText=function(){return f.textfieldData.textboxValue},f.$watch("tick",function(a,b){(isNaN(a)||null==a)&&(f.tick=1)}),f.commitTextBoxValue=function(){if(f.textfieldData.textboxOldValue!==f.textfieldData.textboxValue){var b=f.textfieldData.textboxValue.trim(),c=f.modelInternal.applyValue(b);f.validationStateInternal=a.validation.ValidationState.Valid,l(f.value)?(void 0==f.onInvalidValue&&null==f.onInvalidValue||(c=f.modelInternal.coreScope.onInvalidValue(b)),l(c)?(f.value=NaN,m(b)):f.value=c):f.value=f.modelInternal.parseValue(f.modelInternal.formatValue(c)),f.updateSpinnerStateAndTextBoxValue(f.value)}};var E,F;f.textBoxDidEndEditing=function(){g.off("wheel",n);var a=f.value;f.commitTextBoxValue(),q(a)},f.textBoxWillBeginEditing=function(){g.on("wheel",n),f.textfieldData.textboxOldValue=f.textfieldData.textboxValue,x=!0},f.onClickedByMouse=function(a){x&&(a.currentTarget.select(),x=!1)},void 0==f.tabindex?f.tabindex=0:h.hasOwnProperty("tabindex")&&g.removeAttr("tabindex"),f.$watch(function(){return g.attr("tabindex")},function(a){a&&g.removeAttr("tabindex")}),f.onkeypress=function(a){var b,c=!1;void 0==f.onModifierKeyPress&&null==f.onModifierKeyPress||(b=f.onModifierKeyPress(a.key?a.key:String.fromCharCode(a.charCode),f.modelInternal.parseValue(f.textfieldData.textboxValue,!1)),void 0!=b&&("boolean"==typeof b?b&&(a.preventDefault(),c=!0):"number"==typeof b&&(r(f.modelInternal.formatValue(b)),a.preventDefault(),c=!0))),f.useDefaultModifiers&&!c&&f.defaultModifierKeyPress(a.key?a.key:String.fromCharCode(a.charCode),f.modelInternal.parseValue(f.textfieldData.textboxValue,!1))&&a.preventDefault()},f.defaultModifierKeyPress=function(a,b){var c=!1;switch(a){case"k":case"K":case"T":case"t":r(f.modelInternal.formatValue(1e3*b)),c=!0;break;case"m":case"M":r(f.modelInternal.formatValue(1e6*b)),c=!0;break;case"b":case"B":case"y":case"Y":r(f.modelInternal.formatValue(1e9*b)),c=!0}return c},f.modelInternal.coreScope.changeTextBoxValue=function(a){f.modelInternal.coreScope.$evalAsync(function(){f.textfieldData.textboxValue=a})},f.modelInternal.coreScope.$watch("disabled",s),f.$watch("minValue",function(a,b){a>f.maxValue&&(f.modelInternal.coreScope.minValue=f.modelInternal.coreScope.maxValue),f.modelInternal.applyValue(f.textfieldData.textboxValue),f.updateSpinnerStateAndTextBoxValue(f.modelInternal.coreScope.value)}),f.getValidationMessage=function(){return f.validationMessage?f.validationMessage:f.validationMessageInternal},f.getValidationState=function(){return f.validationStateInternal===a.validation.ValidationState.Error?f.validationStateInternal:void 0===f.validationState?f.validationStateInternal:f.validationState},f.modelInternal.coreScope.$watch("maxValue",function(a,b){a<f.modelInternal.coreScope.minValue&&(f.modelInternal.coreScope.maxValue=f.modelInternal.coreScope.minValue),f.modelInternal.applyValue(f.textfieldData.textboxValue),f.updateSpinnerStateAndTextBoxValue(f.modelInternal.coreScope.value)}),f.mouseDownOnUpButton=function(a){a.preventDefault(),a.stopImmediatePropagation(),f.incrementDecrementAction(b.UpdateTickMode.Increment)},f.mouseDownOnDownButton=function(a){a.preventDefault(),a.stopImmediatePropagation(),f.incrementDecrementAction(b.UpdateTickMode.Decrement)};var G=void 0;f.incrementDecrementAction=function(a){clearTimeout(this.exponentialCounterStartTimer),f.updateTick(a,!0),B.isMobileDevice()||(f.exponentialIncrement.startValue=f.value,this.exponentialCounterStartTimer=setTimeout(function(){G=setInterval(function(){f.updateTick(a)},f.exponentialIncrement.exponentialIncrementSpeed)},f.exponentialIncrement.exponentialIncrementStartDelay))},f.mouseup=f.mouseleave=function(a){clearTimeout(this.exponentialCounterStartTimer),clearInterval(G),f.exponentialIncrement.startValue&&f.value!==f.exponentialIncrement.startValue&&(q(f.exponentialIncrement.startValue),f.exponentialIncrement.startValue=void 0),a.originalEvent&&"mouseup"===a.originalEvent.type&&(a.preventDefault(),a.stopImmediatePropagation())},f.updateTick=function(a,c){f.commitTextBoxValue();var d=f.value;k(),a==b.UpdateTickMode.Increment?f.modelInternal.incrementValue():a==b.UpdateTickMode.Decrement&&f.modelInternal.decrementValue(),f.updateSpinnerStateAndTextBoxValue(f.modelInternal.coreScope.value),c&&q(d)},f.changeEventHandler=function(){var a=f.getDisplayText();if(f.modelInternal.onlyParseValueOnCommit)f.onCurrentTextChange&&f.onCurrentTextChange(a);else{var b=f.modelInternal.parseValue(a);f.onCurrentValueChange&&f.onCurrentValueChange(a,b)}},f.keyboardEventHandler=function(a){var c,d=a.key?a.key:a.keyCode.toString();switch(d){case"ArrowUp":case"Up":case"38":f.modelInternal.coreScope.spinnerDisabled||f.updateTick(b.UpdateTickMode.Increment,!0);break;case"ArrowDown":case"Down":case"40":f.modelInternal.coreScope.spinnerDisabled||f.updateTick(b.UpdateTickMode.Decrement,!0);break;case"Enter":case"Tab":case"13":c=f.value,f.commitTextBoxValue(),q(c)}},f.onToolbarButtonClick=function(a,b,c){f.modelInternal.coreScope.spinModeEnabled?(k(),f.incrementValue(a.tickValue)):c==A&&b==z||(z=b,A=c,f.modelInternal.coreScope.tick=Math.abs(a.tickValue))},f.getToolbarState=function(){return l(f.modelInternal.coreScope.value)||f.modelInternal.coreScope.disabled},f.getToolbarSelectedButtonIndex=function(a){return A>=0&&!f.modelInternal.coreScope.spinModeEnabled&&Number(a)==A?z:-1},f.getContentUrl=function(){switch(f.spinnerPosition){case b.SpinnerPosition.ButtonOnLeft:return"toolkit/numericupdown/numericUpDownLeft.tpl.html";case b.SpinnerPosition.ButtonOnRight:return"toolkit/numericupdown/numericUpDownRight.tpl.html";case b.SpinnerPosition.WrapVertical:return"toolkit/numericupdown/numericUpDownWrapVertical.tpl.html";default:return"toolkit/numericupdown/numericUpDownWrapHorizontal.tpl.html"}},f.$watch("model",function(a,b){w(),f.updateSpinnerStateAndTextBoxValue(f.value)}),f.modelInternal.coreScope.$watchGroup(["topToolBar","bottomToolBar","topToolBar.length","bottomToolBar.length"],function(a,b,c){c.$topToolBar={buttons:e(c.topToolBar)},c.$bottomToolBar={buttons:e(c.bottomToolBar)},z=-1,A=-1}),f.autofocus&&setTimeout(function(){var a=g.find("input")[0];a&&(a.focus(),a.select())})}return{restrict:"E",scope:{value:"=?ngModel",tick:"=?",showSpinner:"=?",disabled:"=?ngDisabled",minValue:"=?",maxValue:"=?",spinnerPosition:"=?",spinnerSize:"=?",onInvalidValue:"=?",model:"=?",showToolBar:"=?",topToolBar:"=?",bottomToolBar:"=?",spinModeEnabled:"=?",fontSize:"=?",upIconName:"=?",downIconName:"=?",toolbarFontSize:"=?",toolbarHeight:"=?",spinnerDisabled:"=?",onModifierKeyPress:"=?",changeTextBoxValue:"=?",placeholder:"@?",onValueCommit:"&?",onCurrentValueChange:"<?",onCurrentTextChange:"<?",placeholderAlign:"@?",validationMessage:"=?",validationState:"=?",tabindex:"@?",useDefaultModifiers:"=?",autofocus:"<?"},link:f,template:'<ng-include src="getContentUrl()" style="height: inherit; width: inherit;"></ng-include>'}}]).directive("ionwebNumericUpDownToolbar",["$compile",function(a){return{restrict:"EA",scope:{options:"=?",selectedButtonIndex:"=?",disabled:"=?",unselectButtons:"&?",onButtonClick:"=?",fontSize:"=?",tag:"=?"},replace:!1,template:'<button ng-repeat="button in options.buttons" tabindex="-1"  class="{{getClassForButtonSelectionState($index)}}" ng-disabled="disabled" ng-style="{width: buttonWidth(), \'font-size\': fontSize}">{{button.displayName}}</button>',link:function(a,b){$(document).ready(function(){$(b).on("click","*",function(){var c=$(b).children(),d=$(this),e=c.index(d);a.selectedButtonIndex(a.tag)!=e&&(a.unselectButtons(),d.removeClass().addClass(a.getClassForButtonSelectionState()),void 0!=a.onButtonClick&&a.onButtonClick(a.options.buttons[e],e,a.tag))})}),a.options.clearSelection=function(){var a=$(b).children();a.removeClass().addClass("ion-numericupdown-toolbar-button-unselected")},a.buttonWidth=function(){return 100/a.options.buttons.length+"%"},a.getClassForButtonSelectionState=function(b){return a.selectedButtonIndex(a.tag)==b?"ion-numericupdown-toolbar-button-selected":"ion-numericupdown-toolbar-button-unselected"}}}}]).directive("includeUnisolate",function(){return{templateUrl:function(a,b){return b.templatePath},replace:!0}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.Date=0]="Date",a[a.Time=1]="Time",a[a.DateTime=2]="DateTime"}(b=a.DateTimePickerMode||(a.DateTimePickerMode={}));var c;!function(a){a[a.Dropdown=0]="Dropdown",a[a.TagPanel=1]="TagPanel",a[a.Both=2]="Both"}(c=a.TagVisibility||(a.TagVisibility={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.None=0]="None",a[a.FromDate=1]="FromDate",a[a.ToDate=2]="ToDate",a[a.Tags=3]="Tags"}(b=a.RangePickerSubEditorMode||(a.RangePickerSubEditorMode={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.Seconds=1]="Seconds"}(b=a.TimeComparisonLevel||(a.TimeComparisonLevel={}));var c=function(){function c(a){this.dateFormattingService=a}return c.prototype.compareDate=function(a,b){var c=new Date(a.getTime());c.setHours(0,0,0,0);var d=new Date(b.getTime());return d.setHours(0,0,0,0),c.getTime()-d.getTime()},c.prototype.compareTime=function(a,c,d){var e=new Date,f=new Date(e.getTime());return d&&d==b.Seconds?(e.setHours(a.getHours(),a.getMinutes(),a.getSeconds()),f.setHours(c.getHours(),c.getMinutes(),c.getSeconds())):(e.setHours(a.getHours(),a.getMinutes()),f.setHours(c.getHours(),c.getMinutes())),e.getTime()-f.getTime()},c.prototype.compareDateTime=function(a,c,d){var e=new Date(a.getTime()),f=new Date(c.getTime());return d&&d==b.Seconds?(e.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),0),f.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),0)):(e.setHours(a.getHours(),a.getMinutes(),0,0),f.setHours(c.getHours(),c.getMinutes(),0,0)),e.getTime()-f.getTime()},c.prototype.sortRange=function(a,b,c){if(a){var d=this.dateFromDateTimeTag(a.fromDate),e=this.dateFromDateTimeTag(a.toDate);if(d&&e&&this.compare(d,e,b,c)>0){var f=a.fromDate;a.fromDate=a.toDate,a.toDate=f}return a}},c.prototype.compare=function(b,c,d,e){switch(d){case a.DateTimePickerMode.Date:return this.compareDate(b,c);case a.DateTimePickerMode.Time:return this.compareTime(b,c,e);case a.DateTimePickerMode.DateTime:default:return this.compareDateTime(b,c,e)}},c.prototype.isDateTimeTag=function(a){
return!(a instanceof Date||!a)},c.prototype.dateFromDateTimeTag=function(a){return a instanceof Date?a:a&&a.date||void 0},c.prototype.dateTimeTagFromDate=function(a,b,c,d){var e=void 0;if(a&&b)for(var f=0;f<a.length;++f){var g=a[f],h=this.dateFromDateTimeTag(g);if(h&&0===this.compare(b,h,c,d)){e=g;break}}return e},c.prototype.rangeTagFromDates=function(a,b,c,d,e,f){var g=void 0;if((b||c)&&a){for(var h=0;h<a.length;++h){var i=a[h],j=this.dateFromDateTimeTag(i.fromDate),k=!j&&!b||j&&b&&0===this.compare(b,j,d,e);if(k){var l=this.dateFromDateTimeTag(i.toDate);k=!l&&!c||l&&c&&0===this.compare(c,l,d,f)}if(k){g=i;break}}return g}},c.prototype.getDatesFromRangeTag=function(a){var b,c;return a.fromDate&&(b=this.dateFromDateTimeTag(a.fromDate)),a.toDate&&(c=this.dateFromDateTimeTag(a.toDate)),{fromDate:b,toDate:c}},c.prototype.formattedDate=function(b,c,d,e){var f=this.dateFromDateTimeTag(b);if(!f)return"";if(e)return e(f);var g=this.dateFormattingService;if(!g)return f.toDateString();switch(c){case a.DateTimePickerMode.Date:return d?g.toLongDate(f):g.toShortDate(f);case a.DateTimePickerMode.Time:return d?g.toLongTime(f):g.toShortTime(f);case a.DateTimePickerMode.DateTime:default:return d?g.toLongDate(f)+" "+g.toLongTime(f):g.toShortDate(f)+" "+g.toShortTime(f)}},c}();a.DateTimePickerHelper=c;var d=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.camelToDash=function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},c.prototype.isTagAvailable=function(a,b,c,d,e){if(void 0===d&&(d=!0),a&&b&&b.date)for(var f=0;f<a.length;++f){var g=a[f];if(!d||!g||g.name===b.name){var h=this.dateFromDateTimeTag(g);if(h&&0===this.compare(b.date,h,c,e))return!0}}return!1},c.prototype.compareTags=function(a,b,c,d,e){return void 0===d&&(d=!0),!(!a||!b)&&((!d||a.name===b.name)&&(!a.date&&!b.date||!(!a.date||!b.date)&&0===this.compare(a.date,b.date,c,e)))},c.prototype.getTagWithName=function(a,b){if(b&&a)for(var c=0;c<b.length;c++)if(b[c].name===a)return b[c]},c.prototype.getTagStyle=function(a){var b={};return a&&a.style&&(a.style.backgroundColor&&(b["background-color"]=a.style.backgroundColor),a.style.color&&(b.color=a.style.color),a.style.fontWeight&&(b["font-weight"]=a.style.fontWeight)),b},c.prototype.tagToAutoCompleteInfo=function(b,c,d){var e=this.dateFormattingService.toShortDate(b.date);d===a.DateTimePickerMode.DateTime?e+=" "+this.dateFormattingService.toShortTime(b.date):d===a.DateTimePickerMode.Time&&(e=this.dateFormattingService.toShortTime(b.date));var f={text:b.name,tooltip:e};return f.style=angular.extend({},c),f},c}(c);angular.module("ionwebTk").service("ionweb.dateTimePickerHelperService",["ionwebTk.dateFormattingService",function(a){return new d(a)}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(a,b,c){this.$scope=a,this.dateTimePickerHelper=b,this.$templateCache=c,this.initTagFormattings(),this.$scope.numberOfTagColumns=this.getUpdatedTagColumns(this.$scope.numberOfTagColumns)}return Object.defineProperty(a.prototype,"tagStyleMap",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"panelTags",{get:function(){},enumerable:!0,configurable:!0}),a.prototype.getUpdatedTagColumns=function(b){return null===b||void 0===b||isNaN(b)?b=3:b<a.MIN_TAGS_COLUMN?b=a.MIN_TAGS_COLUMN:b>a.MAX_TAGS_COLUMN&&(b=a.MAX_TAGS_COLUMN),b},a.prototype.updateTagStyleCache=function(a){var b={};b.classes={},a.style?(b.style=this.dateTimePickerHelper.getTagStyle(a),a.style.paletteColor&&a.style.paletteColor.length?b.classes["ionbtn-"+a.style.paletteColor]=!0:b.classes["ionbtn-auto"]=!0):(b.classes["ion-datetimepicker-tag-default-style"]=!0,b.classes["ion-datetimepicker-tag-normal"]=!0),this.tagStyleMap[a.name]=b},a.prototype.initTagFormattings=function(){var b=this;this.$scope.styleForTag=function(a){var c=b.tagStyleMap[a.name];return c?(b.isTagSelected(a)||(c=b.tagStyleMap[a.name]),c&&c.style):null},this.$scope.classForTag=function(c){var d=b.tagStyleMap[c.name];if(!d)return null;if(b.isTagSelected(c)){var e=(Math.max(a.MIN_TAGS_COLUMN,Math.min(c.colSpan||1,a.MAX_TAGS_COLUMN)),{"ion-datetimepicker-tag-default-style":!0,"ion-datetimepicker-tag-select":!0});return e}return d&&d.classes}},a.prototype.isTagSelected=function(a){throw new Error("Base class doesn't have the implementation")},a.MIN_TAGS_COLUMN=1,a.MAX_TAGS_COLUMN=4,a}();b.DatePanelManger=c;var d=function(c){function d(a,d,e,f,g,h,i){var j=c.call(this,a,g,i)||this;return j.$scope=a,j.$element=d,j.$attrs=e,j.dateFormattingService=f,j.dateTimePickerHelper=g,j.$compile=h,j.$templateCache=i,j._dateStyleMap={},j._tagStyleMap={},j.preferenceChangeHandler=function(){j.$scope.$evalAsync()},j.dateFormattingService.preferenceChanged.add(j.preferenceChangeHandler),j.$scope.internalDate=g.dateFromDateTimeTag(j.$scope.date),j.$scope.internalTime=j.$scope.internalDate?new Date(j.$scope.internalDate.getTime()):new Date,void 0!==j.$scope.mode&&null!==j.$scope.mode||(j.$scope.mode=b.DateTimePickerMode.DateTime),void 0!==j.$scope.isOpen&&null!==j.$scope.isOpen||(j.$scope.isOpen=!0),void 0!==j.$scope.selectedSummary&&null!==j.$scope.selectedSummary||(j.$scope.selectedSummary=j.$scope.useDateTimeTags&&!j.$scope.hideTagPanel&&j.$scope.dateTimeTags&&j.$scope.dateTimeTags.length>0?b.SelectedDateTimeSummary.Tags:j.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date),j.initDateHandlingFunction(),j.initTagHandlingFunctions(),j.initTagsFormattingFunctions(),j.initWatches(),j.buildAndAppendDateTimePicker(),j.$scope.onBind&&j.$scope.onBind(j),j}return __extends(d,c),Object.defineProperty(d.prototype,"tagStyleMap",{get:function(){return this._tagStyleMap},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"panelTags",{get:function(){return this.$scope.tagsForTagsPanel},enumerable:!0,configurable:!0}),d.prototype.buildAndAppendDateTimePicker=function(){var b=this,c='<div ionweb-timepicker ng-model="internalTime" ng-change="onTimeChange(internalTime)"';Object.keys(this.$scope.timepickerOptions||{}).forEach(function(a){var d=b.dateTimePickerHelper.camelToDash(a);c+=" "+d+'="timepickerOptions.'+a+'"'});var d=a.firstOrDefault(Object.keys(this.$scope.timepickerOptions||{}),function(a){return"showSeconds"==a});if(!d){var e=this.dateTimePickerHelper.camelToDash("showSeconds");c+="  "+e+'= "timepickerOptions.showSeconds"'}c+="></div>";var f=this.$compile(c)(this.$scope);this.$element.find(".timepicker-holder").append(f);var g='\n                <div ionweb-datepicker\n                     ng-model="internalDate"\n                     ng-change="onDateChange(internalDate)"\n                     is-out-of-range="isOutOfRange"\n                     refresh="refreshDatePicker"\n                     navigate="navigate"\n                     datepicker-options="datepickerOptions"\n                     is-tag-selected-for-date="isTagSelectedForDate"\n                     use-date-time-tags="useDateTimeTags"\n                     mode="mode"\n                     is-open="isOpen"\n                     is-date-selected="isDateSelected"\n                     get-custom-classes-and-styles-for-date="getCustomClassesAndStylesForDate"\n                     use-mobile-layout="{{useMobileLayout}}" class="ion-datetimepicker-datepicker">\n                </div>',h=this.$compile(g)(this.$scope);this.$element.find(".datepicker-holder").append(h),this.$element.on("$destroy",function(){b.$scope&&b.$scope.$destroy()}),this.$scope.$on("$destroy",function(){h.remove(),f.remove(),b.dateFormattingService.preferenceChanged.remove(b.preferenceChangeHandler)})},d.prototype.navigateToToday=function(){var a=new Date;a.setHours(0,0,0,0);var b=!this.$scope.isOutOfRange(a);!b&&this.$scope.datepickerOptions&&this.$scope.datepickerOptions.minDate?this.$scope.navigate(this.$scope.datepickerOptions.minDate):!b&&this.$scope.datepickerOptions&&this.$scope.datepickerOptions.maxDate?this.$scope.navigate(this.$scope.datepickerOptions.maxDate):this.$scope.navigate(a),this.$scope.refreshDatePicker()},d.prototype.navigateToDate=function(a){var b=this.dateTimePickerHelper.dateFromDateTimeTag(a);b&&!this.$scope.isOutOfRange(b)?(this.$scope.navigate(b),this.$scope.refreshDatePicker()):this.navigateToToday()},d.prototype.initWatches=function(){var a=this;this.$scope.$watch("mode",function(c,d){c!==d&&(a.$scope.mode=!b.DateTimePickerMode[c]&&b.DateTimePickerMode.DateTime||c,a.$scope.selectedSummary!=b.SelectedDateTimeSummary.Tags&&(a.$scope.selectedSummary=a.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date),a.$scope.refresh())}),this.$scope.$watch("useDateTimeTags",function(c,d){c!==d&&(a.filterTagsAndCreateStyleCache(),a.$scope.refresh(),c||a.$scope.selectedSummary!=b.SelectedDateTimeSummary.Tags||(a.$scope.selectedSummary=a.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date))}),this.$scope.$watch("hideTagPanel",function(c,d){c!==d&&c&&a.$scope.selectedSummary==b.SelectedDateTimeSummary.Tags&&(a.$scope.selectedSummary=a.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date)}),this.$scope.$watch("dateTimeTags",function(b,c){a.filterTagsAndCreateStyleCache(),a.$scope.refresh()},!0),this.$scope.$watch("numberOfTagColumns",function(b,c){a.$scope.numberOfTagColumns=a.getUpdatedTagColumns(b)}),this.$scope.$watch("isOpen",function(b,c){b!==c&&b&&a.$scope.refresh()}),this.$scope.$watchGroup(["compact","headerOptions"],function(b,c){for(var d=0;d<b.length&&b[d]===c[d];d++);d<b.length&&a.$scope.refresh()}),this.$scope.$watch("date",function(b,c){b!==c&&a.validateModelValue(b)}),this.$scope.datepickerOptions&&this.$scope.$watchGroup(["datepickerOptions.minDate","datepickerOptions.maxDate"],function(b,c){for(var d=0;d<b.length&&b[d]===c[d];d++);if(d<b.length){var e=a.dateTimePickerHelper.dateFromDateTimeTag(a.$scope.date),f=a.$scope.isOutOfRange(e);f&&a.$scope.$evalAsync(function(){a.$scope.date=null})}})},d.prototype.showSeconds=function(){return this.$scope.timepickerOptions&&this.$scope.timepickerOptions.showSeconds},d.prototype.isTagSelected=function(a){if(!this.$scope.date||!a||!a.date)return!1;var c=this.dateTimePickerHelper.isDateTimeTag(this.$scope.date);if(!c)return!1;var d=this.dateTimePickerHelper.dateFromDateTimeTag(this.$scope.date);return!!d&&(!this.$scope.isDateDisabled(a.date)&&this.dateTimePickerHelper.compareTags(this.$scope.date,a,this.$scope.mode,!0,this.showSeconds()&&b.TimeComparisonLevel.Seconds))},d.prototype.updateDateStyleCache=function(a){var b=this.dateTimePickerHelper.dateFromDateTimeTag(a);if(b){b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);var c=this._dateStyleMap[b.getTime()];!c&&a.style&&(c={},c.classes={},c.style=this.dateTimePickerHelper.getTagStyle(a),a.style.paletteColor&&a.style.paletteColor.length?c.classes["ionbtn-"+a.style.paletteColor]=!0:c.classes["ionbtn-auto"]=!0,this._dateStyleMap[b.getTime()]=c)}},d.prototype.filterTagsAndCreateStyleCache=function(){if(this._dateStyleMap={},this._tagStyleMap={},this.$scope.useDateTimeTags&&this.$scope.dateTimeTags){for(var a=[],c={},d=0;d<this.$scope.dateTimeTags.length;++d){var e=this.$scope.dateTimeTags[d];if(c[e.name])throw new Error("Tag with name '"+e.name+"' already exists.");c[e.name]=!0,e.visibility!==b.TagVisibility.Dropdown&&(a.push(e),this.updateTagStyleCache(e)),this.updateDateStyleCache(e)}this.$scope.tagsForTagsPanel=a}else this.$scope.tagsForTagsPanel=null},d.prototype.initTagHandlingFunctions=function(){var a=this;this.$scope.isTagSelectedForDate=function(c){if(!a.$scope.useDateTimeTags||!c)return!1;var d=a.dateTimePickerHelper.isDateTimeTag(a.$scope.date);if(!d)return!1;var e=a.dateTimePickerHelper.dateFromDateTimeTag(a.$scope.date);if(!e)return!1;var f=new Date(c.getTime());if(a.$scope.internalTime?f.setHours(a.$scope.internalTime.getHours(),a.$scope.internalTime.getMinutes(),1==a.showSeconds()?a.$scope.internalTime.getSeconds():0,0):f.setHours(0,0,0,0),a.$scope.isDateDisabled(f))return!1;var g=a.dateTimePickerHelper.compare(f,e,a.$scope.mode,a.showSeconds()&&b.TimeComparisonLevel.Seconds);return 0===g},this.$scope.isTagDisabled=function(b){var c=b&&b.date;return a.$scope.isDateDisabled(c)},this.$scope.onTagChanged=function(b){a.$scope.internalDate=b.date,b.date&&(a.$scope.internalTime=new Date(b.date.getTime())),a.$scope.date=b,a.$scope.onDateTimeChanged&&a.$scope.onDateTimeChanged({date:a.$scope.date})}},d.prototype.initDateHandlingFunction=function(){var a=this;this.$scope.isOutOfRange=function(c){return!(!a.$scope.datepickerOptions||!c)&&(a.$scope.datepickerOptions.minDate&&a.dateTimePickerHelper.compare(c,a.$scope.datepickerOptions.minDate,b.DateTimePickerMode.Date)<0||a.$scope.datepickerOptions.maxDate&&a.dateTimePickerHelper.compare(c,a.$scope.datepickerOptions.maxDate,b.DateTimePickerMode.Date)>0)},this.$scope.isDateDisabled=function(c){return a.$scope.mode===b.DateTimePickerMode.Time?!c||a.$scope.datepickerOptions&&a.$scope.datepickerOptions.dateDisabled&&a.$scope.datepickerOptions.dateDisabled(c,"day"):!c||a.$scope.isOutOfRange(c)||a.$scope.datepickerOptions&&a.$scope.datepickerOptions.dateDisabled&&a.$scope.datepickerOptions.dateDisabled(c,"day")},this.$scope.isDateSelected=function(c){var d=a.$scope.getSelectedRangeDate&&a.$scope.getSelectedRangeDate();if(!c||!d)return!1;var e=new Date(c.getTime());return e.setHours(a.$scope.internalTime.getHours(),a.$scope.internalTime.getMinutes(),1==a.showSeconds()?a.$scope.internalTime.getSeconds():0,0),0==a.dateTimePickerHelper.compare(d,e,a.$scope.mode,a.showSeconds()&&b.TimeComparisonLevel.Seconds)},this.$scope.formattedDate=function(){return a.$scope.internalDate&&a.dateFormattingService.toShortDate(a.$scope.internalDate)||""},this.$scope.formattedTime=function(){return a.$scope.internalTime?a.showSeconds()?a.dateFormattingService.toLongTime(a.$scope.internalTime):a.dateFormattingService.toShortTime(a.$scope.internalTime):""},this.$scope.onDateChange=function(c){if(c){var d=new Date(c.getTime());a.$scope.internalTime?d.setHours(a.$scope.internalTime.getHours(),a.$scope.internalTime.getMinutes(),1==a.showSeconds()?a.$scope.internalTime.getSeconds():0,0):d.setHours(0,0,0,0),a.$scope.date=!!a.$scope.useDateTimeTags&&a.dateTimePickerHelper.dateTimeTagFromDate(a.$scope.dateTimeTags,d,a.$scope.mode,a.showSeconds()&&b.TimeComparisonLevel.Seconds)||d,a.$scope.onDateTimeChanged&&a.$scope.onDateTimeChanged({date:a.$scope.date})}},this.$scope.onTimeChange=function(c){if(!c)return void a.$scope.refresh();if(!a.$scope.internalDate&&a.$scope.mode===b.DateTimePickerMode.DateTime&&a.$scope.isDateDisabled(c))return void a.$scope.refresh();var d=new Date(c.getTime());a.$scope.internalDate&&d.setFullYear(a.$scope.internalDate.getFullYear(),a.$scope.internalDate.getMonth(),a.$scope.internalDate.getDate()),a.$scope.date=!!a.$scope.useDateTimeTags&&a.dateTimePickerHelper.dateTimeTagFromDate(a.$scope.dateTimeTags,d,a.$scope.mode,a.showSeconds()&&b.TimeComparisonLevel.Seconds)||d,a.$scope.refresh()},this.$scope.clearDate=function(){a.$scope.date=null},this.$scope.refresh=function(){a.$scope.refreshDatePicker&&a.$scope.refreshDatePicker(),a.validateModelValue(a.$scope.date)},this.$scope.onTagsClicked=function(){a.$scope.selectedSummary=b.SelectedDateTimeSummary.Tags}},d.prototype.initTagsFormattingFunctions=function(){var a=this;this.$scope.getCustomClassesAndStylesForDate=function(b){var c,d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0),e=a._dateStyleMap[d.getTime()];return a.$scope.rangePickerDateStyleMap?(c=a.$scope.rangePickerDateStyleMap[d.getTime()],{style:c&&c.style||e&&e.style,classes:c&&c.classes||e&&e.classes}):e}},d.prototype.validateModelValue=function(a){if(!a)return void this.clearInternalDateTime();var b=this.isValid(a);if(b){var c=this.dateTimePickerHelper.dateFromDateTimeTag(a);this.updateInternalDateTime(c)}else this.$scope.date=null,this.clearInternalDateTime()},d.prototype.isValid=function(a){if(!a)return!1;var c=this.dateTimePickerHelper.isDateTimeTag(a);if(!this.$scope.useDateTimeTags)return!c&&!this.$scope.isDateDisabled(a);if(this.$scope.useDateTimeTags){if(c){var d=this.dateTimePickerHelper.isTagAvailable(this.$scope.dateTimeTags,a,this.$scope.mode,!0,this.showSeconds()&&b.TimeComparisonLevel.Seconds);return d&&!this.$scope.isTagDisabled(a)}return!this.$scope.isDateDisabled(a)}},d.prototype.clearInternalDate=function(){this.$scope.internalDate=null},d.prototype.clearInternalTime=function(){var a=new Date;a.setHours(0,0,0,0),this.$scope.internalTime=a},d.prototype.clearInternalDateTime=function(){this.clearInternalDate(),this.clearInternalTime()},d.prototype.updateInternalDate=function(a){(this.$scope.internalDate&&0!==this.dateTimePickerHelper.compare(a,this.$scope.internalDate,b.DateTimePickerMode.Date)||!this.$scope.internalDate)&&(this.$scope.internalDate=new Date(a.getTime()))},d.prototype.updateInternalTime=function(a){(this.$scope.internalTime&&0!==this.dateTimePickerHelper.compare(a,this.$scope.internalTime,b.DateTimePickerMode.Time,this.showSeconds()&&b.TimeComparisonLevel.Seconds)||!this.$scope.internalTime)&&(this.$scope.internalTime=new Date(a.getTime()))},d.prototype.updateInternalDateTime=function(a){this.updateInternalDate(a),this.updateInternalTime(a)},d}(c);angular.module("ionwebTk").directive("ionwebDateTimePicker",["$compile","ionwebTk.dateFormattingService","ionweb.dateTimePickerHelperService","$templateCache","ionwebTk.toolkitConfigService","ionwebTk.environmentService",function(a,b,c,e,f,g){return{restrict:"EA",scope:{date:"=?ngModel",datepickerOptions:"=?",timepickerOptions:"=?",mode:"=?",dateTimeTags:"=?",numberOfTagColumns:"=?",useDateTimeTags:"=?",tagsHeaderText:"@?",onDateTimeChanged:"&?",refresh:"=?",onBind:"=?",compact:"=?",hideTagPanel:"=?",headerOptions:"=?",isOpen:"=?",getSelectedRangeDate:"=?",rangePickerDateStyleMap:"=?",selectedSummary:"=?"},templateUrl:f.datePicker.disableMobileLayout||!f.datePicker.enableMobileLayoutOnDesktop&&!g.isMobileDevice()?"toolkit/datetimepicker/ionwebDateTimepicker.tpl.html":"toolkit/datetimepicker/ionwebDateTimepickerMobile.tpl.html",link:function(h,i,j){h.useMobileLayout=!f.datePicker.disableMobileLayout&&(f.datePicker.enableMobileLayoutOnDesktop||g.isMobileDevice()),h.usingMobileLayoutOnDesktop=h.useMobileLayout&&!g.isSmallScreen(),new d(h,i,j,b,c,a,e)}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").filter("datePickerDayFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){return a.toCustom(b," "+c).trim()}}]),angular.module("ionwebTk").filter("datePickerWeekFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){var d=new Date,e=d.getDay(),f=(b+7-e)%7;return d.setDate(d.getDate()+f),a.toCustom(d,c)}}]),angular.module("ionwebTk").filter("datePickerYearFormat",["ionwebTk.dateFormattingService",function(a){return function(b,c){var d=Number(b),e=new Date;return e.setFullYear(d),a.toCustom(e,c)}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionDateTimePickerPopup",["$compile","ionweb.popupService","ionwebTk.environmentService","ionwebTk.toolkitConfigService",function(c,d,e,f){var g=function(c,g,h){function i(){var a;c.showPopupFullScreen()&&(a={showFullScreen:!0}),d.createPopup("toolkit/datetimepicker/dateTimepickerPopover.tpl.html",c.popupAnchorPoint&&c.popupAnchorPoint()||g,c,a).then(function(a){k=a,k.onClose.add(m),j(c.isOpen)})}function j(a){a&&c.dateTimePicker&&(c.popupInternalDate=c.date,c.dateTimePicker.navigateToDate(c.date)),a&&"day"!==c.datepickerOptions.datepickerMode&&(c.datepickerOptions.datepickerMode="day"),a&&k?(k.show(),c.disableFocusOnDatePicker||setTimeout(function(){k.element&&k.element.find(".ion-datetimepicker-popup").focus()})):k&&k.hide()}var k=void 0;c.datepickerOptions=c.datepickerOptions||{},c.datepickerOptions.datepickerMode="day",void 0!==c.isOpen&&null!==c.isOpen||(c.isOpen=!1),void 0!==c.closeOnDateSelection&&null!==c.closeOnDateSelection||(c.closeOnDateSelection=!0),void 0!==c.showPopupOnKeydown&&null!==c.showPopupOnKeydown||(c.showPopupOnKeydown=!0),c.getWindowHeight=function(){return c.showPopupFullScreen()?window.innerHeight+"px":void 0},c.showPopupFullScreen=function(){return!f.datePicker.disableMobileLayout&&e.isMobileDevice()&&e.isSmallScreen()},c.isMobileLayout=function(){return!f.datePicker.disableMobileLayout&&(f.datePicker.enableMobileLayoutOnDesktop||e.isMobileDevice())},c.isLandscapeMode=e.orientation==a.Orientation.Landscape&&c.showPopupFullScreen(),e.orientationChanged.add(function(b,d){c.isLandscapeMode=d==a.Orientation.Landscape&&c.showPopupFullScreen()}),c.onBindInternal=function(a){c.dateTimePicker=a,c.onBind&&c.onBind(c.dateTimePicker)},c.popupInternalDate=c.date,c.$watch("date",function(a,b){a!==b&&(c.popupInternalDate=a)}),c.onDateTimeChanged=function(a){c.isMobileLayout()||(a&&c.closeOnDateSelection&&(c.date=a),c.closeOnDateSelection&&c.close())},c.onOkClicked=function(){if(void 0!==c.popupInternalDate&&null!==c.popupInternalDate||c.mode!==b.DateTimePickerMode.Time)c.date=c.popupInternalDate;else{var a=new Date;a.setHours(0,0,0,0),c.date=a}c.close()},c.preventFocusOnMouseDown=function(a){c.disableFocusOnDatePicker&&(a.stopPropagation(),a.preventDefault())};var l=function(b){c.showPopupOnKeydown&&(b.which===a.KeyCodes.ESC&&c.isOpen?(b.preventDefault(),b.stopPropagation(),c.$apply(function(){c.isOpen=!1}),g[0].focus()):40!==b.which||c.isOpen||(b.preventDefault(),b.stopPropagation(),c.$apply(function(){c.isOpen=!0})))};g.bind("keydown",l),c.keydown=function(b){b.which===a.KeyCodes.ESC&&c.close()},c.$watch("isOpen",function(a,b){a!==b&&(a&&!k?i():j(a))}),c.close=function(){c.isOpen=!1,g[0].focus(),c.onDateTimePickerClose&&c.onDateTimePickerClose()};var m=function(){c.isOpen&&c.$evalAsync(function(){c.isOpen=!1})};c.$on("$destroy",function(){k&&(k.onClose.remove(m),k.destroy(),k=null),c.isOpen===!0&&(c.isOpen=!1),g.unbind("keydown",l)})};return{restrict:"EA",require:"ngModel",scope:{date:"=?ngModel",datepickerOptions:"=?",timepickerOptions:"=?",mode:"=?",isOpen:"=?",closeOnDateSelection:"=?",showPopupOnKeydown:"=?",dateTimeTags:"=?",numberOfTagColumns:"=?",useDateTimeTags:"=?",tagsHeaderText:"@?",refresh:"=?",onBind:"=?",compact:"=?",hideTagPanel:"=?",popupAnchorPoint:"=?",disableFocusOnDatePicker:"=?",onDateTimePickerClose:"&?",headerOptions:"=?"},compile:function(){return{post:g}}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){(function(){function a(){}return a})();angular.module("ionwebTk").constant("ionwebDatepickerConfig",{datepickerMode:"day",formatDay:"d",formatMonth:"MMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",isOpen:!0,maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!1,yearColumns:5,yearRows:4,formatMonthHeader:"MMMM",formatDateHeader:"dd"}),angular.module("ionwebTk").value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0);var c=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.$scope=a,this.$element=b,this.$locale=e,this.$log=f,this.datepickerConfig=h,this.$datepickerSuppressError=j,this.dateParser=k,this.modes=["day","month","year"],this.watchListeners=[],this.eventListeners=[],this.updateMode=function(a,b){a!==b&&(l.modes.indexOf(a)!==-1?l.$scope.datepickerMode=a:l.modes.indexOf(b)!==-1?l.$scope.datepickerMode=b:l.$scope.datepickerMode=l.datepickerConfig.datepickerMode,l.refreshView())},this.updateStartingDay=function(a){angular.isDefined(a)?l.startingDay=a:angular.isNumber(a)?l.startingDay=a:l.startingDay=(l.$locale.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,l.refreshView()},this.focusElement=function(){l.isDatePickerFocused=!0,l.controller.$element[0].focus()},this.blurElement=function(){l.isDatePickerFocused=!1,l.controller.$element[0].blur()},c.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),a.isOpen=angular.isDefined(a.isOpen)?a.isOpen:h.isOpen,["dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows","formatDateHeader","formatMonthHeader"].forEach(function(b){switch(b){case"dateDisabled":a[b]=a.datepickerOptions[b]||function(){return!1};break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:h.datepickerMode,l.watchListeners.push(a.$watch("datepickerOptions."+b,l.updateMode));break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":case"formatMonthHeader":case"formatDateHeader":l[b]=angular.isDefined(a.datepickerOptions[b])?d(a.datepickerOptions[b])(a.$parent):h[b],a[b]=l[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":l[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:h[b];break;case"startingDay":l.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,l.watchListeners.push(a.$watch("datepickerOptions."+b,l.updateStartingDay));break;case"maxDate":case"minDate":l.watchListeners.push(a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?l[b]=k.fromTimezone(new Date(a.getTime()),l.ngModelOptions.timezone):(i&&f.warn("Literal date support has been deprecated, please switch to date object usage"),l[b]=new Date(g(a,"medium"))):l[b]=h[b]?k.fromTimezone(new Date(h[b]),l.ngModelOptions.timezone):null,l.refreshView()}));break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch("datepickerOptions."+b,function(c){l[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b],("minMode"===b&&l.modes.indexOf(l.$scope.datepickerOptions.datepickerMode)<l.modes.indexOf(l[b])||"maxMode"===b&&l.modes.indexOf(l.$scope.datepickerOptions.datepickerMode)>l.modes.indexOf(l[b]))&&(a.datepickerMode=l[b],a.datepickerOptions.datepickerMode=l[b])}):l[b]=a[b]=h[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(c.disabled)||!1,angular.isDefined(c.ngDisabled)&&this.watchListeners.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b,l.refreshView()})),a.isActive=function(b){return 0===l.controller.compare(b.date,l.activeDate)&&(a.activeDateId=b.uid,!0)},a.select=function(b){if(a.datepickerMode===l.minMode){var c=l.ngModelCtrl.$viewValue?k.fromTimezone(new Date(l.ngModelCtrl.$viewValue),l.ngModelOptions.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=k.toTimezone(c,l.ngModelOptions.timezone),l.ngModelCtrl.$setViewValue(c),l.ngModelCtrl.$render()}else a.datepickerMode===l.maxMode?(l.activeDate.setFullYear(b.getFullYear(),l.activeDate.getMonth(),l.activeDate.getDate()),l.setMode(l.modes[l.modes.indexOf(a.datepickerMode)-1]),a.$emit("ionweb:datepicker.mode")):(l.activeDate.setFullYear(b.getFullYear(),b.getMonth(),l.activeDate.getDate()),l.setMode(l.modes[l.modes.indexOf(a.datepickerMode)-1]),a.$emit("ionweb:datepicker.mode"))},a.move=function(a){var b=l.activeDate.getFullYear()+a*(l.controller.step.years||0),c=l.activeDate.getMonth()+a*(l.controller.step.months||0);l.activeDate.setFullYear(b,c,1),l.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===l.maxMode&&1===b||a.datepickerMode===l.minMode&&b===-1||(l.setMode(l.modes[l.modes.indexOf(a.datepickerMode)+b]),a.$emit("ionweb:datepicker.mode"))},a.setDatePickerMode=function(b){l.setMode(b),a.$emit("ionweb:datepicker.mode")},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"},a.raiseFocus=function(b){a.$emit("ionweb:datepicker.focus")},a.raiseBlur=function(b){a.$emit("ionweb:datepicker.blur")},this.eventListeners.push(a.$on("ionweb:datepicker.focus",this.focusElement)),this.eventListeners.push(a.$on("ionweb:datepicker.blur",this.blurElement)),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),l.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(l.isDisabled(l.activeDate))return;a.select(l.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(l.controller.handleKeyDown(c,b),l.refreshView()):a.toggleMode("up"===c?1:-1)},b.on("keydown",function(b){a.$evalAsync(function(){a.keydown(b)})}),a.$on("$destroy",function(){for(;l.watchListeners.length;)l.watchListeners.shift()();for(;l.eventListeners.length;)l.eventListeners.shift()()})}return a.prototype.setMode=function(a){this.$scope.datepickerMode=a,this.$scope.datepickerOptions.datepickerMode=a},a.prototype.init=function(a){var b=this;this.ngModelCtrl=a,this.ngModelOptions=a.$options||this.$scope.datepickerOptions.ngModelOptions||this.datepickerConfig.ngModelOptions;var c=this.$scope.datepickerOptions.initDate;c?(this.activeDate=this.dateParser.fromTimezone(c,this.ngModelOptions.timezone)||new Date,this.$scope.$watch("datepickerOptions.initDate",function(a){a&&(b.ngModelCtrl.$isEmpty(b.ngModelCtrl.$modelValue)||b.ngModelCtrl.$invalid)&&(b.activeDate=b.dateParser.fromTimezone(a,b.ngModelOptions.timezone),b.refreshView())})):this.activeDate=new Date;var d=this.ngModelCtrl.$modelValue?new Date(this.ngModelCtrl.$modelValue):new Date;this.activeDate=isNaN(d.getTime())?this.dateParser.fromTimezone(new Date,this.ngModelOptions.timezone):this.dateParser.fromTimezone(d,this.ngModelOptions.timezone),this.ngModelCtrl.$render=function(){b.render()}},a.prototype.initController=function(a){this.controller=a,this.controller.init(this)},a.prototype.render=function(){if(this.ngModelCtrl.$viewValue){var a=new Date(this.ngModelCtrl.$viewValue),b=!isNaN(a.getTime());b?this.activeDate=this.dateParser.fromTimezone(a,this.ngModelOptions.timezone):this.$datepickerSuppressError||this.$log.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},a.prototype.refreshView=function(){if(this.controller){this.$scope.selectedDt=null,this.controller._refreshView(),this.$scope.activeDt&&(this.$scope.activeDateId=this.$scope.activeDt.uid);var a=this.ngModelCtrl.$viewValue?new Date(this.ngModelCtrl.$viewValue):null;a=this.dateParser.fromTimezone(a,this.ngModelOptions.timezone),this.ngModelCtrl.$setValidity("dateDisabled",!a||this.controller.$element&&!this.isDisabled(a))}},a.prototype.classesAndStylesForDate=function(a){var b=this.$scope.isActive(a);return this.controller._classesAndStylesForDate&&this.controller._classesAndStylesForDate(a,this.isDatePickerFocused,b)},a.prototype.createDateObject=function(a,b){var c=this.ngModelCtrl.$viewValue?new Date(this.ngModelCtrl.$viewValue):null;c=this.dateParser.fromTimezone(c,this.ngModelOptions.timezone);var d=new Date;d=this.dateParser.fromTimezone(d,this.ngModelOptions.timezone);var e=this.controller.compare(a,d),f={date:a,label:this.dateParser.filter(a,b),selected:c&&0===this.controller.compare(a,c),disabled:this.isDisabled(a),past:e<0,current:0===e,future:e>0};return f.selected&&(this.$scope.selectedDt=f),this.activeDate&&0===this.controller.compare(f.date,this.activeDate)&&(this.$scope.activeDt=f),f},a.prototype.isDisabled=function(a){return this.$scope.disabled||this.minDate&&this.controller.compare(a,this.minDate)<0||this.maxDate&&this.controller.compare(a,this.maxDate)>0||this.$scope.dateDisabled&&this.$scope.dateDisabled(a,this.$scope.datepickerMode)},a.prototype.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.$inject=["$scope","$element","$attrs","$interpolate","$locale","$log","dateFilter","ionwebDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser"],a}(),d=function(){function b(b,c,d){var e=this;this.$scope=b,
this.$element=c,this.dateFilter=d,this.step={months:1},this.onFocus=function(a){e.$scope.$evalAsync(function(){e.$scope.raiseFocus(a)})},this.onBlur=function(a){e.$scope.$evalAsync(function(){e.$scope.raiseBlur(a)})},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c.getTime()-d.getTime()},this._classesAndStylesForDate=function(b,c,d){var f=e.$scope.isTagSelectedForDate(b.date),g={"ion-datepicker-roundbtn":!0,"ion-datepicker-roundbtn-out-of-month":b.secondary&&!(b.disabled||b.current||b.selected),"ion-datepicker-roundbtn-current":!!b.current,"ion-datepicker-roundbtn-selected":e.$scope.useDateTimeTags?b.selected&&!f:!!b.selected,"ion-datepicker-roundbtn-selected-tag":b.selected&&(!!e.$scope.useDateTimeTags&&f||e.$scope.isDateSelected&&e.$scope.isDateSelected(b.date)),"ion-datepicker-roundbtn-active":c&&d&&!b.selected&&!b.current&&!b.disabled&&(!e.$scope.useDateTimeTags||!f),"ion-datepicker-roundbtn-active-disabled":c&&d&&b.disabled},h=!b.selected&&e.$scope.getCustomClassesAndStylesForDate&&e.$scope.getCustomClassesAndStylesForDate(b.date);return!b.selected&&h&&h.classes?g=a.extend(g,[h.classes]):(g["ion-datepicker-roundbtn-defaultstyle"]=!0,g["ion-datepicker-roundbtn-disabled"]=!!b.disabled),{classes:g,style:h&&h.style}},this.handleKeyDown=function(a,b){var c=e.datePickerController.activeDate.getDate();switch(a){case"left":c-=1;break;case"up":c-=7;break;case"right":c+=1;break;case"down":c+=7;break;case"pageup":case"pagedown":var d=e.datePickerController.activeDate.getMonth()+("pageup"===a?-1:1);e.datePickerController.activeDate.setMonth(d,1),c=Math.min(e.getDaysInMonth(e.datePickerController.activeDate.getFullYear(),e.datePickerController.activeDate.getMonth()),c);break;case"home":c=1;break;case"end":c=e.getDaysInMonth(e.datePickerController.activeDate.getFullYear(),e.datePickerController.activeDate.getMonth())}e.datePickerController.activeDate.setDate(c)},this.$element.on("focus",this.onFocus),this.$element.on("blur",this.onBlur),this.$element.on("$destroy",function(){e.$element.off("focus",e.onFocus),e.$element.off("blur",e.onBlur)})}return b.prototype.getDaysInMonth=function(a,c){return 1!==c||a%4!==0||a%100===0&&a%400!==0?b.DAYS_IN_MONTH[c]:29},b.prototype.init=function(a){this.datePickerController=a,this.$scope.showWeeks=a.showWeeks,a.refreshView()},b.prototype._refreshView=function(){var a=this.datePickerController.activeDate.getFullYear(),b=this.datePickerController.activeDate.getMonth(),c=new Date(this.datePickerController.activeDate);c.setFullYear(a,b,1);var d=this.datePickerController.startingDay-c.getDay(),e=d>0?7-d:-d,f=new Date(c.getTime());e>0&&f.setDate(-e+1);for(var g,h=new Array(42),i=new Date(f),j=0;j<42;j++){g=new Date(i.getTime()),h[j]=angular.extend(this.datePickerController.createDateObject(g,this.datePickerController.formatDay),{uid:this.$scope.uniqueId+"-"+j,secondary:g.getMonth()!==b});var k=this.datePickerController.classesAndStylesForDate(h[j]);h[j].customClass=k&&k.classes||null,h[j].customStyle=k&&k.style||null,i.setDate(i.getDate()+1)}this.$scope.labels=new Array(7);for(var l=0;l<7;l++)this.$scope.labels[l]={abbr:this.dateFilter(h[l].date,this.datePickerController.formatDayHeader),full:this.dateFilter(h[l].date,"EEEE"),weekday:h[l].date.getDay()};if(this.$scope.title=this.dateFilter(this.datePickerController.activeDate,this.datePickerController.formatDayTitle),this.$scope.rows=this.datePickerController.split(h,7),this.$scope.showWeeks){this.$scope.weekNumbers=[];for(var m=(11-this.datePickerController.startingDay)%7,n=this.$scope.rows.length,o=0;o<n;o++)this.$scope.weekNumbers.push(this.getISO8601WeekNumber(this.$scope.rows[o][m].date))}},b.prototype.getISO8601WeekNumber=function(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b.getTime())/864e5)/7)+1},b.$inject=["$scope","$element","dateFilter"],b.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],b}(),e=function(){function a(a,b,c){var d=this;this.$scope=a,this.$element=b,this.dateFilter=c,this.step={years:1},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c.getTime()-d.getTime()},this.handleKeyDown=function(a,b){var c=d.datePickerController.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=d.datePickerController.monthColumns;else if("right"===a)c+=1;else if("down"===a)c+=d.datePickerController.monthColumns;else if("pageup"===a||"pagedown"===a){var e=d.datePickerController.activeDate.getFullYear()+("pageup"===a?-1:1);d.datePickerController.activeDate.setFullYear(e)}else"home"===a?c=0:"end"===a&&(c=11);d.datePickerController.activeDate.setMonth(c)},this.onFocus=function(a){d.$scope.$evalAsync(function(){d.$scope.raiseFocus(a)})},this.onBlur=function(a){d.$scope.$evalAsync(function(){d.$scope.raiseBlur(a)})},this.$element.on("focus",this.onFocus),this.$element.on("blur",this.onBlur),this.$element.on("$destroy",function(){d.$element.off("focus",d.onFocus),d.$element.off("blur",d.onBlur)})}return a.prototype.init=function(a){this.datePickerController=a,a.refreshView()},a.prototype._refreshView=function(){for(var a=new Array(12),b=this.datePickerController.activeDate.getFullYear(),c=0;c<12;c++){var d=new Date(this.datePickerController.activeDate);d.setFullYear(b,c,1);var e=angular.extend(this.datePickerController.createDateObject(d,this.datePickerController.formatMonth),{uid:this.$scope.uniqueId+"-"+c}),f=this.datePickerController.classesAndStylesForDate(e);e.customClass=f&&f.classes||null,e.customStyle=f&&f.style||null,a[c]=e}this.$scope.title=this.dateFilter(this.datePickerController.activeDate,this.datePickerController.formatMonthTitle),this.$scope.rows=this.datePickerController.split(a,this.datePickerController.monthColumns),this.$scope.yearHeaderColspan=this.datePickerController.monthColumns>3?this.datePickerController.monthColumns-2:1},a.prototype._classesAndStylesForDate=function(a,b,c){return{classes:{"ion-datepicker-ovalbtn":!0,"ion-datepicker-ovalbtn-disabled":a.disabled,"ion-datepicker-ovalbtn-current":a.current,"ion-datepicker-ovalbtn-selected":a.selected,"ion-datepicker-ovalbtn-active":b&&c&&!a.selected&&!a.current&&!a.disabled,"ion-datepicker-ovalbtn-active-disabled":b&&c&&a.disabled}}},a.$inject=["$scope","$element","dateFilter"],a}(),f=function(){function a(a,b,c){var d=this;this.scope=a,this.$element=b,this.dateFilter=c,this.step={years:1},this.onFocus=function(a){d.scope.$evalAsync(function(){d.scope.raiseFocus(a)})},this.onBlur=function(a){d.scope.$evalAsync(function(){d.scope.raiseBlur(a)})},this.$element.on("focus",this.onFocus),this.$element.on("blur",this.onBlur),this.$element.on("$destroy",function(){d.$element.off("focus",d.onFocus),d.$element.off("blur",d.onBlur)})}return a.prototype.getStartingYear=function(a){return parseInt(String((a-1)/this.range),10)*this.range+1},a.prototype.init=function(a){this.datePickerController=a,this.columns=this.datePickerController.yearColumns,this.range=this.datePickerController.yearRows*this.columns,this.step={years:this.range},a.refreshView()},a.prototype._refreshView=function(){for(var a=new Array(this.range),b=0,c=this.getStartingYear(this.datePickerController.activeDate.getFullYear());b<this.range;b++){var d=new Date(this.datePickerController.activeDate);d.setFullYear(c+b,0,1);var e=angular.extend(this.datePickerController.createDateObject(d,this.datePickerController.formatYear),{uid:this.scope.uniqueId+"-"+b}),f=this.datePickerController.classesAndStylesForDate(e);e.customClass=f&&f.classes||null,e.customStyle=f&&f.style||null,a[b]=e}this.scope.title=[a[0].label,a[this.range-1].label].join(" - "),this.scope.rows=this.datePickerController.split(a,this.columns),this.scope.columns=this.columns},a.prototype.compare=function(a,b){return a.getFullYear()-b.getFullYear()},a.prototype.handleKeyDown=function(a,b){var c=this.datePickerController.activeDate.getFullYear();switch(a){case"left":c-=1;break;case"up":c-=this.columns;break;case"right":c+=1;break;case"down":c+=this.columns;break;case"pageup":case"pagedown":c+=("pageup"===a?-1:1)*this.range;break;case"home":c=this.getStartingYear(this.datePickerController.activeDate.getFullYear());break;case"end":c=this.getStartingYear(this.datePickerController.activeDate.getFullYear())+this.range-1}this.datePickerController.activeDate.setFullYear(c)},a.prototype._classesAndStylesForDate=function(a,b,c){return{classes:{"ion-datepicker-ovalbtn":!0,"ion-datepicker-ovalbtn-year":!0,"ion-datepicker-ovalbtn-disabled":a.disabled,"ion-datepicker-ovalbtn-current":a.current,"ion-datepicker-ovalbtn-selected":a.selected,"ion-datepicker-ovalbtn-active":b&&c&&!a.selected&&!a.current&&!a.disabled,"ion-datepicker-ovalbtn-active-disabled":b&&c&&a.disabled}}},a.$inject=["$scope","$element","dateFilter"],a}();angular.module("ionwebTk").directive("ionwebDatepicker",function(){return{restrict:"A",require:["ionwebDatepicker","^ngModel"],templateUrl:function(a,b){return b.templateUrl||"toolkit/datetimepicker/datepickerOverride.tpl.html"},scope:{datepickerOptions:"=?",isTagSelectedForDate:"=?",useDateTimeTags:"=?",mode:"=?",isOpen:"=?",isDateSelected:"=?",getCustomClassesAndStylesForDate:"=?",isOutOfRange:"=?",refresh:"=?",activeDate:"=?",navigate:"=?",useMobileLayout:"@?"},controller:c,controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("ionwebDaypicker",function(){return{restrict:"A",require:["^ionwebDatepicker","ionwebDaypicker"],templateUrl:function(a,b){return b.templateUrl||"toolkit/datetimepicker/daypickerOverride.tpl.html"},controller:d,link:function(a,b,c,d){var e=d[0],f=d[1];e.initController(f)}}}).directive("ionwebMonthpicker",function(){return{restrict:"A",require:["^ionwebDatepicker","ionwebMonthpicker"],templateUrl:function(a,b){return b.templateUrl||"toolkit/datetimepicker/monthpickerOverride.tpl.html"},controller:e,link:function(a,b,c,d){var e=d[0],f=d[1];e.initController(f)}}}).directive("ionwebYearpicker",function(){return{restrict:"A",require:["^ionwebDatepicker","ionwebYearpicker"],templateUrl:function(a,b){return b.templateUrl||"toolkit/datetimepicker/yearpickerOverride.tpl.html"},controller:f,link:function(a,b,c,d){var e=d[0],f=d[1];e.initController(f)}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").constant("ionwebTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"toolkit/datetimepicker/timepickerOverride.tpl.html",showSeconds:!1}),angular.module("ionwebTk").controller("ionwebTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","ionwebTimepickerConfig","ionwebTk.toolkitConfigService","ionwebTk.environmentService",function(c,d,e,f,g,h,i,j,k){function l(){var a=+c.hours,b=c.showMeridian?a>0&&a<13:a>=0&&a<24;if(b&&""!==c.hours)return c.showMeridian&&(12===a&&(a=0),c.meridian===C[1]&&(a+=12)),a}function m(){var a=+c.minutes,b=a>=0&&a<60;if(b&&""!==c.minutes)return a}function n(){var a=+c.seconds,b=a>=0&&a<60;if(b&&""!==c.seconds)return a}function o(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function p(a){q(),B.$setViewValue(new Date(z.getTime())),r(a)}function q(){w&&w.$setValidity("hours",!0),x&&x.$setValidity("minutes",!0),y&&y.$setValidity("seconds",!0),B.$setValidity("time",!0),c.invalidHours=!1,c.invalidMinutes=!1,c.invalidSeconds=!1}function r(a){if(B.$modelValue){var b=z.getHours(),d=z.getMinutes(),e=z.getSeconds();c.showMeridian&&(b=0===b||12===b?12:b%12),c.hours="h"===a?b.toString():o(b,!D),"m"!==a&&(c.minutes=o(d)),"s"!==a&&(c.seconds=o(e)),c.meridian=z.getHours()<12?C[0]:C[1]}else c.hours=null,c.minutes=null,c.seconds=null,c.meridian=C[0]}function s(a){z=u(z,a),p()}function t(a,b){return u(a,60*b)}function u(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function v(){return c.showSeconds?!(null!==c.hours&&""!==c.hours||null!==c.minutes&&""!==c.minutes||null!==c.seconds&&""!==c.seconds):!(null!==c.hours&&""!==c.hours||null!==c.minutes&&""!==c.minutes)}var w,x,y,z=new Date,A=[],B={$setViewValue:angular.noop},C=angular.isDefined(e.meridians)?c.$parent.$eval(e.meridians):i.meridians||h.DATETIME_FORMATS.AMPMS,D=!angular.isDefined(e.padHours)||c.$parent.$eval(e.padHours);c.tabindex=angular.isDefined(e.tabindex)?e.tabindex:0,c.useMobileLayout=!j.datePicker.disableMobileLayout&&(j.datePicker.enableMobileLayoutOnDesktop||k.isMobileDevice()),c.isDesktop=!k.isMobileDevice(),d.removeAttr("tabindex"),this.init=function(b,d){B=b,B.$render=this.render,B.$formatters.unshift(function(a){return a?new Date(a):null}),c.hoursValidationState=a.validation.ValidationState.Valid,c.minutesValidationState=a.validation.ValidationState.Valid,c.secondsValidationState=a.validation.ValidationState.Valid,c.hoursValidationMessage="",c.minutesValidationMessage="",c.secondsValidationMessage="";var f=d.eq(0),g=d.eq(1),h=d.eq(2);w=f.controller("ngModel"),x=g.controller("ngModel"),y=h.controller("ngModel"),c.mousewheel=angular.isDefined(c.mousewheel)?c.mousewheel:i.mousewheel,this.setupMousewheelEvents(f,g,h);var j=angular.isDefined(e.arrowkeys)?c.$parent.$eval(e.arrowkeys):i.arrowkeys;j&&this.setupArrowkeyEvents(f,g,h),c.readonlyInput=angular.isDefined(e.readonlyInput)?c.$parent.$eval(e.readonlyInput):i.readonlyInput,this.setupInputEvents(f,g,h)},A.push(c.$watch("hours",function(){c.invalidHours?(c.hoursValidationState=a.validation.ValidationState.Error,c.hoursValidationMessage=b.Strings.Err_dateTimepickerDecorator_Invalid_Hours):(c.hoursValidationState=a.validation.ValidationState.Valid,c.hoursValidationMessage="")})),A.push(c.$watch("minutes",function(){c.invalidMinutes?(c.minutesValidationState=a.validation.ValidationState.Error,c.minutesValidationMessage=b.Strings.Err_dateTimepickerDecorator_Invalid_Minutes):(c.minutesValidationState=a.validation.ValidationState.Valid,c.minutesValidationMessage="")})),A.push(c.$watch("seconds",function(){c.invalidSeconds?(c.secondsValidationState=a.validation.ValidationState.Error,c.secondsValidationMessage=b.Strings.Err_dateTimepickerDecorator_Invalid_Seconds):(c.secondsValidationState=a.validation.ValidationState.Valid,c.secondsValidationMessage="")}));var E=i.hourStep;e.hourStep&&A.push(c.$parent.$watch(f(e.hourStep),function(a){E=+a}));var F=i.minuteStep;e.minuteStep&&A.push(c.$parent.$watch(f(e.minuteStep),function(a){F=+a}));var G=i.secondStep;c.secondStep&&A.push(c.$watch("secondStep",function(a,b){a!=b&&(G=+a)}));var H;A.push(c.$parent.$watch(f(e.min),function(a){var b=new Date(a);H=isNaN(b.getTime())?void 0:b}));var I;A.push(c.$parent.$watch(f(e.max),function(a){var b=new Date(a);I=isNaN(b.getTime())?void 0:b}));var J=!1;e.ngDisabled&&A.push(c.$parent.$watch(f(e.ngDisabled),function(a){J=a})),c.noIncrementHours=function(){var a=t(z,60*E);return J||a>I||a<z&&a<H},c.noDecrementHours=function(){var a=t(z,60*-E);return J||a<H||a>z&&a>I},c.noIncrementMinutes=function(){var a=t(z,F);return J||a>I||a<z&&a<H},c.noDecrementMinutes=function(){var a=t(z,-F);return J||a<H||a>z&&a>I},c.shouldIncrementSeconds=function(){var a=u(z,G);return!J&&a<I&&a>z&&a>H},c.shouldDecrementSeconds=function(){var a=u(z,-G);return!J&&a>H&&a<z&&a<I},c.noToggleMeridian=function(){return z.getHours()<12?J||t(z,720)>I:J||t(z,-720)<H},c.showMeridian=angular.isDefined(c.showMeridian)?c.showMeridian:i.showMeridian,e.showMeridian&&A.push(c.$parent.$watch(f(e.showMeridian),function(a){if(c.showMeridian=!!a,B.$error.time){var b=l(),d=m(),e=n();angular.isDefined(b)&&angular.isDefined(d)&&angular.isDefined(e)&&(z.setHours(b),p())}else r()})),c.showSeconds=angular.isDefined(c.showSeconds)?c.showSeconds:i.showSeconds,c.$watch("showSeconds",function(a,b){if(a!=b)if(B.$error.time){var c=l(),d=m(),e=n();angular.isDefined(c)&&angular.isDefined(d)&&angular.isDefined(e)&&(z.setHours(c,d,e),p())}else r()}),this.setupMousewheelEvents=function(a,b,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0},f=function(a){J||c.$apply(e(a)?c.incrementHours():c.decrementHours()),a.preventDefault()},g=function(a){J||c.$apply(e(a)?c.incrementMinutes():c.decrementMinutes()),a.preventDefault()},h=function(a){J||c.$apply(e(a)?c.incrementSeconds():c.decrementSeconds()),a.preventDefault()};A.push(c.$watch("mousewheel"),function(c,e){c!==e&&(c||(a.unbind("mousewheel wheel",f),b.unbind("mousewheel wheel",g),d.unbind("mousewheel wheel",h)))}),a.bind("focus",function(b){c.mousewheel&&a.bind("mousewheel wheel",f)}),b.bind("focus",function(a){c.mousewheel&&b.bind("mousewheel wheel",g)}),d.bind("focus",function(a){c.mousewheel&&d.bind("mousewheel wheel",h)}),a.bind("blur",function(b){a.unbind("mousewheel wheel",f)}),b.bind("blur",function(a){b.unbind("mousewheel wheel",g)}),d.bind("blur",function(a){d.unbind("mousewheel wheel",h)})},this.setupArrowkeyEvents=function(a,b,d){a.bind("keydown",function(a){J||(38===a.which?(a.preventDefault(),c.incrementHours(),c.$apply()):40===a.which&&(a.preventDefault(),c.decrementHours(),c.$apply()))}),b.bind("keydown",function(a){J||(38===a.which?(a.preventDefault(),c.incrementMinutes(),c.$apply()):40===a.which&&(a.preventDefault(),c.decrementMinutes(),c.$apply()))}),d.bind("keydown",function(a){J||(38===a.which?(a.preventDefault(),c.incrementSeconds(),c.$apply()):40===a.which&&(a.preventDefault(),c.decrementSeconds(),c.$apply()))})},this.setupInputEvents=function(a,b,d){if(c.readonlyInput)return c.updateHours=angular.noop,c.updateMinutes=angular.noop,void(c.updateSeconds=angular.noop);var e=function(a,b,d){B.$setViewValue(null),B.$setValidity("time",!1),angular.isDefined(a)&&(c.invalidHours=a,w&&w.$setValidity("hours",!1)),angular.isDefined(b)&&(c.invalidMinutes=b,x&&x.$setValidity("minutes",!1)),angular.isDefined(d)&&(c.invalidSeconds=d,y&&y.$setValidity("seconds",!1))};c.validateHours=function(){var a=+c.hours,b=c.showMeridian?12:23;a=a>b?b:a,c.hours=a.toString(),z.setHours(a),B.$setViewValue(new Date(z.getTime()))},c.updateHours=function(){var a=l(),b=m(),c=n();B.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)&&angular.isDefined(c)?(z.setHours(a),z.setMinutes(b),z.setSeconds(c),z<H||z>I?e(!0):p("h")):e(!0)},a.bind("blur",function(a){B.$setTouched(),v()?q():null===c.hours||""===c.hours?e(!0):!c.invalidHours&&Number(c.hours)<10&&c.$apply(function(){c.hours=o(Number(c.hours),!D)})}),c.validateMinutes=function(){var a=+c.minutes;a=a>59?59:a,c.minutes=a.toString(),z.setMinutes(a),B.$setViewValue(new Date(z.getTime()))},c.updateMinutes=function(){var a=m(),b=l(),c=n();B.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)&&angular.isDefined(c)?(z.setHours(b),z.setMinutes(a),z.setSeconds(c),z<H||z>I?e(void 0,!0):p("m")):e(void 0,!0)},b.bind("blur",function(a){B.$setTouched(),v()?q():null===c.minutes?e(void 0,!0):!c.invalidMinutes&&Number(c.minutes)<10&&c.$apply(function(){c.minutes=o(Number(c.minutes))})}),c.updateSeconds=function(){var a=n(),b=m(),c=l();B.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)&&angular.isDefined(c)?(z.setSeconds(a),z.setHours(c),z.setMinutes(b),z<H||z>I?e(void 0,void 0,!0):p("s")):e(void 0,void 0,!0)},c.validateSeconds=function(){var a=+c.seconds;a=a>59?59:a,c.seconds=a.toString(),z.setSeconds(a),B.$setViewValue(new Date(z.getTime()))},d.bind("blur",function(a){B.$setTouched(),v()?q():null===c.seconds?e(void 0,void 0,!0):!c.invalidSeconds&&Number(c.seconds)<10&&c.$apply(function(){c.seconds=o(Number(c.seconds))})})},this.render=function(){var a=B.$viewValue;isNaN(a)?(B.$setValidity("time",!1),g.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(z=a),z<H||z>I?(B.$setValidity("time",!1),c.invalidHours=!0,c.invalidMinutes=!0,c.invalidSeconds=!0):q(),r())},c.showSpinners=angular.isDefined(e.showSpinners)?c.$parent.$eval(e.showSpinners):i.showSpinners,c.incrementHours=function(){c.noIncrementHours()||s(60*E*60)},c.decrementHours=function(){c.noDecrementHours()||s(60*-E*60)},c.incrementMinutes=function(){c.noIncrementMinutes()||s(60*F)},c.decrementMinutes=function(){c.noDecrementMinutes()||s(60*-F)},c.toggleMeridian=function(){var a=m(),b=l(),d=n();c.noToggleMeridian()||(angular.isDefined(a)&&angular.isDefined(b)&&angular.isDefined(d)?s(720*(z.getHours()<12?60:-60)):c.meridian=c.meridian===C[0]?C[1]:C[0])},c.incrementSeconds=function(){c.shouldIncrementSeconds&&s(G)},c.decrementSeconds=function(){c.shouldDecrementSeconds&&s(-G)},c.blur=function(){B.$setTouched()},c.$on("$destroy",function(){for(;A.length;)A.shift()()})}]),angular.module("ionwebTk").directive("ionwebTimepicker",["ionwebTimepickerConfig",function(a){var b=function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))};return{require:["ionwebTimepicker","?^ngModel"],restrict:"A",controller:"ionwebTimepickerController",controllerAs:"timepicker",scope:{hourStep:"=?",minuteStep:"=?",showMeridian:"=?",meridians:"=?",mousewheel:"=?",showSeconds:"=?",secondStep:"=?"},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:b}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionwebDateTimeEntryBox",["ionwebTk.dateFormattingService","$timeout","ionweb.dateTimePickerHelperService","$q","ionwebTk.environmentService","ionwebTk.toolkitConfigService",function(c,d,e,f,g,h){function i(d,h,i){function j(){return d.timepickerOptions&&d.timepickerOptions.showSeconds}function k(){d.internalValidationState=a.validation.ValidationState.Valid,void 0!==d.validationState&&d.validationState!==a.validation.ValidationState.Valid&&(d.validationState=a.validation.ValidationState.Valid),d.internalValidationMessage=null}function l(b){d.internalValidationState=a.validation.ValidationState.Error,d.internalValidationMessage=b}function m(a){d.autoCompleteBoxData.formattedDateString!==a&&(q=!0),k(),d.autoCompleteBoxData.formattedDateString=a}function n(){if(d.hasDropDownTags=!1,d.dateTimeTags&&d.dateTimeTags.length>0)for(var a=0;a<d.dateTimeTags.length;a++){var c=d.dateTimeTags[a];if(c.visibility!==b.TagVisibility.TagPanel&&!d.isTagDisabled(c)){d.hasDropDownTags=!0;break}}}function o(f,g,h){f||(f=c.parseDate(g)||null),d.useDateTimeTags&&(f instanceof Date?f=e.dateTimeTagFromDate(d.dateTimeTags,f,d.mode,j()&&b.TimeComparisonLevel.Seconds)||f:f||(f=e.getTagWithName(g,d.dateTimeTags)));var i=!1;if(f&&(i=d.isDateDisabled(f instanceof Date?f:f.date)),k(),d.userInput&&d.userInput.length&&d.userInput===d.autoCompleteBoxData.formattedDateString&&(!f||i)){var n;i?(f=null,n=a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:d.userInput})):n=a.stringFormat(b.Strings.Err_Unable_To_Parse_Date,{userInput:d.userInput}),l(n)}f!==d.date?d.date=f:f&&m(h)}d.userInput="";d.$watch(function(){return h.attr("tabindex")},function(a){a&&h.removeAttr("tabindex")});d.isOutOfRange=function(a){return!(!d.datepickerOptions||!a)&&(d.datepickerOptions.minDate&&e.compare(a,d.datepickerOptions.minDate,b.DateTimePickerMode.Date)<0||d.datepickerOptions.maxDate&&e.compare(a,d.datepickerOptions.maxDate,b.DateTimePickerMode.Date)>0)},d.isDateDisabled=function(a){return d.mode===b.DateTimePickerMode.Time?!a||void 0!=d.datepickerOptions&&void 0!=d.datepickerOptions.dateDisabled&&d.datepickerOptions.dateDisabled(a,"day"):!a||d.isOutOfRange(a)||void 0!=d.datepickerOptions&&void 0!=d.datepickerOptions.dateDisabled&&d.datepickerOptions.dateDisabled(a,"day")},d.isTagDisabled=function(a){var b=a&&a.date;return d.isDateDisabled(b)},d.showHidePopup=function(a){d.$evalAsync(function(){d.isOpen=!d.isOpen})},d.acbFocused=function(){d.$evalAsync(function(){d.isOpen=!1})},d.onDateTimePickerClose=function(){g.isMobileDevice()||h.find("ionweb-autocomplete input").focus()},d.acbDropdownStateChanged=function(a){d.useDateTimeTags&&d.hasDropDownTags||a.close(),a.isOpen&&d.$evalAsync(function(){d.isOpen=!1})};var p=function(){d.date&&d.$evalAsync(function(){var a=e.formattedDate(d.date,d.mode,j(),d.customFormatter),b=d.onDateUpdated&&d.onDateUpdated(d.date,a)||a;d.autoCompleteBoxData?d.autoCompleteBoxData.formattedDateString!==b&&(q=!0,d.autoCompleteBoxData.formattedDateString=b):(q=!0,d.autoCompleteBoxData={formattedDateString:b})})};c.preferenceChanged&&c.preferenceChanged.add(p);var q;d.getValidationMessage=function(){return d.internalValidationState===a.validation.ValidationState.Error?d.internalValidationMessage:d.validationMessage?d.validationMessage:d.internalValidationMessage},d.getValidationState=function(){return d.internalValidationState===a.validation.ValidationState.Error?(void 0!==d.validationState&&d.validationState!==a.validation.ValidationState.Error&&(d.validationState=a.validation.ValidationState.Error),a.validation.ValidationState.Error):void 0!==d.validationState?d.validationState:d.internalValidationState},!d.showTagInline||!d.date||d.date instanceof Date||(d.inlineTagInfo=e.tagToAutoCompleteInfo(d.date,d.styleForInlineTag&&d.styleForInlineTag(d.date)||d.date.style,d.mode)),d.$watch("showTagInline",function(a,b){(a||a!==b)&&(!d.showTagInline||!d.date||d.date instanceof Date?d.inlineTagInfo=void 0:d.inlineTagInfo=e.tagToAutoCompleteInfo(d.date,d.styleForInlineTag&&d.styleForInlineTag(d.date)||d.date.style,d.mode))}),d.$watch("date",function(a,b){if(a||b){d.showTagInline&&(!a||a instanceof Date?d.inlineTagInfo=void 0:d.inlineTagInfo=e.tagToAutoCompleteInfo(a,d.styleForInlineTag&&d.styleForInlineTag(a)||a.style,d.mode));var c=e.formattedDate(d.date,d.mode,j(),d.customFormatter)||d.userInput,f=d.onDateUpdated&&d.onDateUpdated(a,c)||c;q=!1,d.userInput&&d.userInput.length?f!==d.userInput&&d.userInput&&d.userInput.length&&a&&m(f):m(f)}}),d.$watch("dateTimeTags.length",function(a,b){n()}),d.$watch("mode",function(a,b){if(a!==b){var c=e.formattedDate(d.date,a,j(),d.customFormatter);d.autoCompleteBoxData={formattedDateString:d.onDateUpdated&&d.onDateUpdated(d.date,c)||c}}});var r;d.$watch("autoCompleteBoxData.formattedDateString",function(a,b){if(q===!0)return void(q=!1);if(a||b){(b===d.userInput&&""===a||a!==d.userInput)&&(d.userInput=""),r&&r.reject("");var c;d.onValueUpdate?(r=f.defer(),f.race([r.promise,f.when(d.onValueUpdate(a))]).then(function(e){e&&(c=e,!e||e instanceof Date||d.useDateTimeTags||(c=e.date)),o(c,a,b)})):o(c,a,b)}}),d.$watch("disabled",function(a,b){a!==b&&d.$evalAsync(function(){d.isOpen=!1})}),d.$on("$destroy",function(){c.preferenceChanged&&p&&c.preferenceChanged.remove(p)})}return{restrict:"EA",compile:function(){return{pre:function(a,c){a.popupAnchorPoint=function(){return c.find("ionweb-autocomplete .selectize-control")},a.showUserButton=h.getIconVisibilityType(!0,h.datePicker.showIconOnHover),a.getClearButtonVisibility=function(){var b;return b=void 0===a.showClearButton||a.showClearButton,h.getIconVisibilityType(b,h.datePicker.showIconOnHover)},a.getArrowButtonVisibility=function(){var c;return c=void 0===a.showArrowButton||a.showArrowButton,a.useDateTimeTags&&a.hasDropDownTags?h.getIconVisibilityType(c,h.datePicker.showIconOnHover):b.VisibilityType.Never},a.dropDownTagsProvider=function(c){if(a.dateTimeTags&&a.useDateTimeTags){var d=[],e=a.userInput&&a.userInput.toLowerCase()||"";return a.dateTimeTags.forEach(function(c){c.visibility!==b.TagVisibility.TagPanel&&!a.isTagDisabled(c)&&c.name.toLowerCase().indexOf(e)>=0&&d.push({value:c.name,label:c.name})}),{options:d,total:d.length}}return{options:[],total:0}},a.autoCompleteBoxData||(a.autoCompleteBoxData={formattedDateString:void 0}),a.textChanged=function(b){a.userInput=b}},post:i}},templateUrl:"toolkit/iondatetimeentrybox/ionDateTimeEntryBox.tpl.html",scope:{date:"=?ngModel",datepickerOptions:"=?",timepickerOptions:"=?",customFormatter:"<?",mode:"=?",isOpen:"=?",closeOnDateSelection:"=?",placeholder:"@?",onDateUpdated:"=?",onValueUpdate:"=?",dateTimeTags:"=?",userInput:"=?",numberOfTagColumns:"=?",useDateTimeTags:"=?",tagsHeaderText:"@?",disableFocusOnDatePicker:"=?",showTagInline:"=?",styleForInlineTag:"=?",refresh:"=?",validationMessage:"=?",validationState:"=?",onBind:"=?",disabled:"=ngDisabled",showClearButton:"=?",showArrowButton:"=?",editable:"=?",tabindex:"@?",compact:"=?",hideTagPanel:"=?",headerOptions:"=?"}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b,c=22,d=16;!function(a){a[a.None=0]="None",a[a.Date=1]="Date",a[a.Time=2]="Time",a[a.Tags=3]="Tags"}(b=a.SelectedDateTimeSummary||(a.SelectedDateTimeSummary={}));var e=function(){function a(){this.restrict="E",this.templateUrl="toolkit/datetimepicker/dateTimeSummary.tpl.html",this.controller=f,this.controllerAs="ctrl",this.bindToController=!0,this.scope={date:"@?",time:"@?",tagsHeader:"@?",mode:"=?",selectedSummary:"=?",showTags:"=?",headerOptions:"=?",onClear:"&?"},this.link=function(a,b,c){}}return a}(),f=function(){function a(a,b){this.$scope=a,this.$element=b}return a.prototype.getFontSizeForDate=function(a){var b=this.$element.find(".ion-datetimepicker-summary-label-date"),e=c;if(b&&b.length&&b[0].offsetWidth)for(var f=this.getMaxWidth(b[0],e+"px",[a]);f>b[0].offsetWidth&&e>d;)e-=2,f=this.getMaxWidth(b[0],e+"px",[a]);return e+"px"},a.prototype.getMaxWidth=function(a,b,c,d){if(!a)return 0;var e=document.createElement("canvas");e.width=100,e.height=100,document.body.appendChild(e);var f=e.getContext("2d"),g=this.getAdditionalSpace(a),h=window.getComputedStyle(a,null);f.font=h.fontStyle+" "+h.fontVariant+" "+h.fontWeight+" "+(b||h.fontSize)+"/"+h.lineHeight+" "+h.fontFamily;var i=f.measureText("W").width;return c.forEach(function(a,b){return i=Math.max(f.measureText(a).width+(d?d[b]:0),i)}),document.body.removeChild(e),i+g},a.prototype.getAdditionalSpace=function(a){for(var b=window.getComputedStyle(a,null),c=parseInt(b.getPropertyValue("padding-left")),d=parseInt(b.getPropertyValue("padding-right")),e=parseInt(b.getPropertyValue("margin-left")),f=parseInt(b.getPropertyValue("margin-right")),g=e+c+d+f,h=0;h<a.children.length;h++)g+=this.getAdditionalSpace(a.children[h]);return g>=0?g:0},a.prototype.tagsClicked=function(a){a.stopPropagation(),this.selectedSummary=b.Tags},a.prototype.dateClicked=function(a){a.stopPropagation(),this.selectedSummary=b.Date},a.prototype.timeClicked=function(a){a.stopPropagation(),this.selectedSummary=b.Time},a.prototype.clearClicked=function(){this.onClear&&this.onClear()},a.$inject=["$scope","$element"],a}();angular.module("ionwebTk").directive("ionwebDateTimeSummary",function(){return new e})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(c){function d(a,d,e,f,g,h){var i=c.call(this,a,f,h)||this;return i.$scope=a,i.$element=d,i.dateFormattingService=e,i.dateTimePickerHelper=f,i.$compile=g,i.$templateCache=h,i._rangeTagStyleMap={},i.getSelectedRanges=function(){var a=i.$scope.fromDatePicker.$scope,b=i.$scope.toDatePicker.$scope,c={fromDate:a.date,toDate:b.date};return i.validateModelValue(c)},i.$scope.fromDateTimePickerOptions||(i.$scope.fromDateTimePickerOptions={}),i.$scope.toDateTimePickerOptions||(i.$scope.toDateTimePickerOptions={}),i.$scope.internalFromDate=i.$scope.range&&i.$scope.range.fromDate,i.$scope.internalToDate=i.$scope.range&&i.$scope.range.toDate,i.$scope.fromDateStyleMap={},i.$scope.toDateStyleMap={},i.initGetters(),i.initDateUIStateHandlingFunction(),i.initWatches(),i.initBindingFunctions(),i.$scope.subEditorMode=i.$scope.useRangeTags&&i.$scope.dateTimeRangeTags&&i.$scope.dateTimeRangeTags.length>0?b.RangePickerSubEditorMode.Tags:b.RangePickerSubEditorMode.FromDate,i.resetSummary(),i.$scope.onBind&&i.$scope.onBind(i),i.$scope.clearFromDate=function(){i.$scope.internalFromDate=null},
i.$scope.clearToDate=function(){i.$scope.internalToDate=null},i.$scope.formattedFromDate=function(){return i.$scope.internalFromDate&&i.dateFormattingService.toShortDate(i.$scope.internalFromDate.date||i.$scope.internalFromDate)||""},i.$scope.formattedFromTime=function(){var a=i.$scope.internalFromDate&&(i.$scope.internalFromDate.date||i.$scope.internalFromDate);return a?i.showSecondsFromDate()?i.dateFormattingService.toLongTime(a):i.dateFormattingService.toShortTime(a):""},i.$scope.formattedToDate=function(){return i.$scope.internalToDate&&i.dateFormattingService.toShortDate(i.$scope.internalToDate.date||i.$scope.internalToDate)||""},i.$scope.formattedToTime=function(){var a=i.$scope.internalToDate&&(i.$scope.internalToDate.date||i.$scope.internalToDate);return a?i.showSecondsToDate()?i.dateFormattingService.toLongTime(a):i.dateFormattingService.toShortTime(a):""},i}return __extends(d,c),d.prototype.navigateToRange=function(a){this.$scope.fromDatePicker&&(this.$scope.fromDatePicker.navigateToDate(a&&a.fromDate),this.$scope.fromDatePickerRefresh()),this.$scope.toDatePicker&&(this.$scope.toDatePicker.navigateToDate(a&&a.toDate),this.$scope.toDatePickerRefresh())},Object.defineProperty(d.prototype,"tagStyleMap",{get:function(){return this._rangeTagStyleMap},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"panelTags",{get:function(){return this.$scope.rangeTagsForTagsPanel},enumerable:!0,configurable:!0}),d.prototype.initWatches=function(){var a=this;this.$scope.$watch("numberOfTagColumns",function(b,c){a.$scope.numberOfTagColumns=a.getUpdatedTagColumns(b)}),this.$scope.$watch("range",function(b,c){b!==c&&(b||!c||c.fromDate||c.toDate)&&(c||!b||b.fromDate||b.toDate)&&a.validateModelValue(b)},!0),this.$scope.$watch("internalFromDate",function(b,c){b!==c&&(b?(a.$scope.range||(a.$scope.range={}),a.$scope.range.fromDate=b):a.$scope.range&&(a.$scope.range.fromDate=b),a.$scope.toDatePickerRefresh())}),this.$scope.$watch("internalToDate",function(b,c){b!==c&&(b?(a.$scope.range||(a.$scope.range={}),a.$scope.range.toDate=b):a.$scope.range&&(a.$scope.range.toDate=b),a.$scope.fromDatePickerRefresh())}),this.$scope.$watch("dateTimeRangeTags",function(b,c){a.filterTagsAndCreateStyleCache(),a.$scope.refresh()},!0),this.$scope.$watch("useRangeTags",function(c,d){c!==d&&(a.filterTagsAndCreateStyleCache(),a.$scope.refresh(),c||a.$scope.subEditorMode!=b.RangePickerSubEditorMode.Tags||(a.$scope.subEditorMode=b.RangePickerSubEditorMode.FromDate,a.$scope.fromSelectedSummary=a.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date,a.$scope.toSelectedSummary=b.SelectedDateTimeSummary.None))}),this.$scope.$watch("hideRangeTagPanel",function(c,d){c!=d&&c&&a.$scope.subEditorMode==b.RangePickerSubEditorMode.Tags&&(a.$scope.subEditorMode=b.RangePickerSubEditorMode.FromDate,a.$scope.fromSelectedSummary=a.$scope.mode==b.DateTimePickerMode.Time?b.SelectedDateTimeSummary.Time:b.SelectedDateTimeSummary.Date,a.$scope.toSelectedSummary=b.SelectedDateTimeSummary.None)}),this.$scope.$watch("mode",function(b,c){b!==c&&a.validateModelValue(a.$scope.range)}),this.$scope.$watch("fromSelectedSummary",function(c,d){c==d||d!=b.SelectedDateTimeSummary.None&&c==b.SelectedDateTimeSummary.None||(a.$scope.subEditorMode=b.RangePickerSubEditorMode.FromDate,a.$scope.toSelectedSummary=b.SelectedDateTimeSummary.None)}),this.$scope.$watch("toSelectedSummary",function(c,d){c==d||d!=b.SelectedDateTimeSummary.None&&c==b.SelectedDateTimeSummary.None||(a.$scope.subEditorMode=b.RangePickerSubEditorMode.ToDate,a.$scope.fromSelectedSummary=b.SelectedDateTimeSummary.None)})},d.prototype.showSecondsFromDate=function(){return this.$scope.fromDateTimePickerOptions&&this.$scope.fromDateTimePickerOptions.timepickerOptions&&this.$scope.fromDateTimePickerOptions.timepickerOptions.showSeconds},d.prototype.showSecondsToDate=function(){return this.$scope.toDateTimePickerOptions&&this.$scope.toDateTimePickerOptions.timepickerOptions&&this.$scope.toDateTimePickerOptions.timepickerOptions.showSeconds},d.prototype.initGetters=function(){var a=this;this.$scope.getSelectedFromDate=function(){var b=a.getSelectedRanges();return b&&a.dateTimePickerHelper.dateFromDateTimeTag(b.fromDate)},this.$scope.getSelectedToDate=function(){var b=a.getSelectedRanges();return b&&a.dateTimePickerHelper.dateFromDateTimeTag(b.toDate)}},d.prototype.initBindingFunctions=function(){var a=this;this.$scope.onFromDatePickerBind=function(b){a.$scope.fromDatePicker=b},this.$scope.onToDatePickerBind=function(b){a.$scope.toDatePicker=b},this.$scope.onTagsClicked=function(){a.$scope.subEditorMode=b.RangePickerSubEditorMode.Tags,a.resetSummary()}},d.prototype.resetSummary=function(){this.$scope.fromSelectedSummary=b.SelectedDateTimeSummary.None,this.$scope.toSelectedSummary=b.SelectedDateTimeSummary.None},d.prototype.initDateUIStateHandlingFunction=function(){var c=this;this.$scope.isOutOfRange=function(a,d){return!(!d||!a)&&(d.minDate&&c.dateTimePickerHelper.compare(a,d.minDate,b.DateTimePickerMode.Date)<0||d.maxDate&&c.dateTimePickerHelper.compare(a,d.maxDate,b.DateTimePickerMode.Date)>0)},this.$scope.isDateDisabled=function(a,d){return c.$scope.mode===b.DateTimePickerMode.Time?!a||void 0!=d&&void 0!=d.dateDisabled&&d.dateDisabled(a,"day"):!a||c.$scope.isOutOfRange(a,d)||void 0!=d&&void 0!=d.dateDisabled&&d.dateDisabled(a,"day")},this.$scope.isRangeTagDisabled=function(a){var b=!1,d=!1,e=c.dateTimePickerHelper.getDatesFromRangeTag(a);return!!e&&(a.fromDate&&(b=c.$scope.isDateDisabled(e.fromDate,c.$scope.fromDateTimePickerOptions.datepickerOptions)),!b&&a.toDate&&(d=c.$scope.isDateDisabled(e.toDate,c.$scope.toDateTimePickerOptions.datepickerOptions)),b||d)},this.$scope.onRangeTagChanged=function(b){c.$scope.range=a.extend({},[b])},this.$scope.refresh=function(){c.$scope.fromDatePickerRefresh&&c.$scope.fromDatePickerRefresh(),c.$scope.toDatePickerRefresh&&c.$scope.toDatePickerRefresh(),c.validateModelValue(c.$scope.range)}},d.prototype.isTagSelected=function(a){var c=!1,d=!1;if(!this.$scope.range||!a)return!1;if(this.$scope.isRangeTagDisabled(a))return!1;if(this.$scope.range.name&&this.$scope.range.name!==a.name)return!1;var e=this.dateTimePickerHelper.getDatesFromRangeTag(a),f=this.dateTimePickerHelper.dateFromDateTimeTag(this.$scope.range.fromDate),g=this.dateTimePickerHelper.dateFromDateTimeTag(this.$scope.range.toDate);return f||e.fromDate?f&&e.fromDate&&(c=0==this.dateTimePickerHelper.compare(f,e.fromDate,this.$scope.mode,this.showSecondsFromDate()&&b.TimeComparisonLevel.Seconds)):c=!0,!!c&&(g||e.toDate?g&&e.toDate&&(d=0==this.dateTimePickerHelper.compare(g,e.toDate,this.$scope.mode,this.showSecondsToDate()&&b.TimeComparisonLevel.Seconds)):d=!0,c&&d)},d.prototype.validateModelValue=function(c){function d(){e.$scope.internalFromDate=void 0,e.$scope.internalToDate=void 0,e.$scope.range=void 0}var e=this;if(!c||!c.fromDate&&!c.toDate)return void d();var f=this.dateTimePickerHelper.dateFromDateTimeTag(c.fromDate),g=this.dateTimePickerHelper.dateFromDateTimeTag(c.toDate);if(this.$scope.useRangeTags){var h=this.dateTimePickerHelper.rangeTagFromDates(this.$scope.dateTimeRangeTags,f,g,this.$scope.mode,this.showSecondsFromDate()&&b.TimeComparisonLevel.Seconds,this.showSecondsToDate()&&b.TimeComparisonLevel.Seconds);if(h)return this.$scope.isRangeTagDisabled(h)?d():(this.$scope.range=a.extend({},[h]),this.$scope.internalFromDate=h.fromDate,this.$scope.internalToDate=h.toDate),this.$scope.range}var i=void 0;if(c.fromDate){var j=this.dateTimePickerHelper.dateFromDateTimeTag(c.fromDate);if(this.$scope.isDateDisabled(j,this.$scope.fromDateTimePickerOptions.datepickerOptions))return void d();this.$scope.fromDateTimePickerOptions.useDateTimeTags&&!this.dateTimePickerHelper.isDateTimeTag(c.fromDate)&&(i=this.dateTimePickerHelper.dateTimeTagFromDate(this.$scope.fromDateTimePickerOptions.dateTimeTags,c.fromDate,this.$scope.mode,this.showSecondsFromDate()&&b.TimeComparisonLevel.Seconds)),i=i||c.fromDate}var k=void 0;if(c.toDate){var j=this.dateTimePickerHelper.dateFromDateTimeTag(c.toDate);if(this.$scope.isDateDisabled(j,this.$scope.toDateTimePickerOptions.datepickerOptions))return void d();this.$scope.toDateTimePickerOptions.useDateTimeTags&&!this.dateTimePickerHelper.isDateTimeTag(c.toDate)&&(k=this.dateTimePickerHelper.dateTimeTagFromDate(this.$scope.toDateTimePickerOptions.dateTimeTags,c.toDate,this.$scope.mode,this.showSecondsToDate()&&b.TimeComparisonLevel.Seconds)),k=k||c.toDate}return i||k?(this.$scope.range={fromDate:i,toDate:k},this.$scope.internalFromDate=c.fromDate,void(this.$scope.internalToDate=c.toDate)):void d()},d.prototype.getRangeTagFromDate=function(a,c){for(var d=void 0,e=0;e<this.$scope.dateTimeRangeTags.length;++e){var f,g=this.$scope.dateTimeRangeTags[e];if(f=0==c?this.dateTimePickerHelper.dateFromDateTimeTag(g.fromDate):this.dateTimePickerHelper.dateFromDateTimeTag(g.toDate),f&&0==this.dateTimePickerHelper.compare(a,f,b.DateTimePickerMode.Date)){g.visibility!==b.TagVisibility.Dropdown&&(d=g);break}}return d},d.prototype.getTag=function(a,b){var c;return 0==b?this.dateTimePickerHelper.isDateTimeTag(a.fromDate)&&(c=a.fromDate):this.dateTimePickerHelper.isDateTimeTag(a.toDate)&&(c=a.toDate),c},d.prototype.updateToDateStyleCache=function(a){var b=this.dateTimePickerHelper.dateFromDateTimeTag(a.toDate);if(b){b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);var c=this.$scope.toDateStyleMap[b.getTime()];!c&&a.style&&(c={},c.classes={},c.style=this.dateTimePickerHelper.getTagStyle(a),a.style.paletteColor&&a.style.paletteColor.length?c.classes["ionbtn-"+a.style.paletteColor]=!0:c.classes["ionbtn-auto"]=!0,this.$scope.toDateStyleMap[b.getTime()]=c)}},d.prototype.updateFromDateStyleCache=function(a){var b=this.dateTimePickerHelper.dateFromDateTimeTag(a.fromDate);if(b){b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);var c=this.$scope.fromDateStyleMap[b.getTime()];!c&&a.style&&(c={},c.classes={},c.style=this.dateTimePickerHelper.getTagStyle(a),a.style.paletteColor&&a.style.paletteColor.length?c.classes["ionbtn-"+a.style.paletteColor]=!0:c.classes["ionbtn-auto"]=!0,this.$scope.fromDateStyleMap[b.getTime()]=c)}},d.prototype.filterTagsAndCreateStyleCache=function(){if(this.$scope.fromDateStyleMap={},this.$scope.toDateStyleMap={},this._rangeTagStyleMap={},this.$scope.useRangeTags&&this.$scope.dateTimeRangeTags){for(var a=[],c={},d=0;d<this.$scope.dateTimeRangeTags.length;++d){var e=this.$scope.dateTimeRangeTags[d];if(c[e.name])throw new Error("Range-Tag with name '"+e.name+"' already exists.");c[e.name]=!0,e.visibility!==b.TagVisibility.Dropdown&&(a.push(e),this.updateTagStyleCache(e)),this.updateFromDateStyleCache(e),this.updateToDateStyleCache(e)}this.$scope.rangeTagsForTagsPanel=a}else this.$scope.rangeTagsForTagsPanel=null},d}(b.DatePanelManger);angular.module("ionwebTk").directive("ionwebDateTimeRangePicker",["ionwebTk.dateFormattingService","ionweb.dateTimePickerHelperService","$compile","$templateCache","ionwebTk.toolkitConfigService","ionwebTk.environmentService",function(a,b,d,e,f,g){var h=function(h,i){h.useMobileLayout=!f.datePicker.disableMobileLayout&&(f.datePicker.enableMobileLayoutOnDesktop||g.isMobileDevice()),h.usingMobileLayoutOnDesktop=h.useMobileLayout&&!g.isSmallScreen(),new c(h,i,a,b,d,e)};return{restrict:"EA",link:{pre:h},scope:{range:"=?ngModel",mode:"=?",compact:"=?",fromDateTimePickerOptions:"=?",toDateTimePickerOptions:"=?",refresh:"=?",onBind:"=?",dateTimeRangeTags:"=?",numberOfTagColumns:"=?numberOfRangeTagColumns",useRangeTags:"=?",rangeTagsHeaderText:"@?",hideRangeTagPanel:"=?",headerOptions:"=?",isOpen:"=?"},templateUrl:f.datePicker.disableMobileLayout||!f.datePicker.enableMobileLayoutOnDesktop&&!g.isMobileDevice()?"toolkit/datetimerangepicker/ionwebDateTimeRangePicker.tpl.html":"toolkit/datetimerangepicker/ionwebDateTimeRangePickerMobile.tpl.html"}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionwebDateTimeRangePickerPopup",["$rootScope","$compile","ionweb.popupService","ionweb.dateTimePickerHelperService","ionwebTk.environmentService","ionwebTk.toolkitConfigService",function(c,d,e,f,g,h){var i=function(c,d,f){function i(){var a;c.showPopupFullScreen()&&(a={showFullScreen:!0}),e.createPopup("toolkit/datetimerangepicker/dateTimeRangepickerPopover.tpl.html",d,c,a).then(function(a){k=a,k.onClose.add(m),j(c.isOpen)})}function j(b){b&&"day"!==c.fromDateTimePickerOptions.datepickerOptions.datepickerMode&&(c.fromDateTimePickerOptions.datepickerOptions.datepickerMode="day"),b&&"day"!==c.toDateTimePickerOptions.datepickerOptions.datepickerMode&&(c.toDateTimePickerOptions.datepickerOptions.datepickerMode="day"),b&&c.dateTimeRangePicker&&(c.popupInternalRange=c.range&&a.extend({},[c.range])||void 0,c.dateTimeRangePicker.navigateToRange(c.popupInternalRange)),b&&k?(k.show(),setTimeout(function(){k.element&&k.element.find(".ion-datetime-rangepicker-popup").focus()})):k&&k.hide()}var k=void 0;c.fromDateTimePickerOptions=c.fromDateTimePickerOptions||{},c.fromDateTimePickerOptions.datepickerOptions=c.fromDateTimePickerOptions.datepickerOptions||{},c.fromDateTimePickerOptions.datepickerOptions.datepickerMode="day",c.toDateTimePickerOptions=c.toDateTimePickerOptions||{},c.toDateTimePickerOptions.datepickerOptions=c.toDateTimePickerOptions.datepickerOptions||{},c.toDateTimePickerOptions.datepickerOptions.datepickerMode="day",c.popupInternalRange=c.range&&a.extend({},[c.range])||void 0,void 0!==c.showPopupOnKeydown&&null!==c.showPopupOnKeydown||(c.showPopupOnKeydown=!0),void 0!==c.isOpen&&null!==c.isOpen||(c.isOpen=!1),c.isMobileLayout=function(){return!h.datePicker.disableMobileLayout&&(h.datePicker.enableMobileLayoutOnDesktop||g.isMobileDevice())},c.getWindowHeight=function(){return c.showPopupFullScreen()?window.innerHeight+"px":void 0},c.showPopupFullScreen=function(){return g.isMobileDevice()&&g.isSmallScreen()},c.isLandscapeMode=g.orientation==a.Orientation.Landscape&&c.showPopupFullScreen(),g.orientationChanged.add(function(b,d){c.isLandscapeMode=d==a.Orientation.Landscape&&c.showPopupFullScreen()}),c.$watch("range",function(b,d){b!==d&&(b?void 0===b.name?c.popupInternalRange=b&&a.extend({},[b])||void 0:c.popupInternalRange=a.extend({},[b]):c.popupInternalRange=void 0)},!0),c.$watch("popupInternalRange",function(b,d){b!==d&&(c.isOpen||(c.range=b&&a.extend({},[b])||void 0))},!0),c.onOkClicked=function(){if(void 0===c.popupInternalRange&&c.mode===b.DateTimePickerMode.Time){var d=new Date;d.setHours(0,0,0,0),c.range={fromDate:d,toDate:d}}else c.range=c.popupInternalRange&&a.extend({},[c.popupInternalRange])||void 0;c.close()};var l=function(b){c.showPopupOnKeydown&&(b.which===a.KeyCodes.ESC&&c.isOpen?(b.preventDefault(),b.stopPropagation(),c.$apply(function(){c.isOpen=!1}),d[0].focus()):40!==b.which||c.isOpen||(b.preventDefault(),b.stopPropagation(),c.$apply(function(){c.isOpen=!0})))};d.bind("keydown",l),c.keydown=function(b){b.which===a.KeyCodes.ESC&&c.close()},c.$watch("isOpen",function(a,b){a!==b&&(a&&!k?i():j(a))}),c.close=function(){c.isOpen=!1,d[0].focus(),c.onDateTimePickerClose&&c.onDateTimePickerClose()};var m=function(){c.isOpen&&c.$evalAsync(function(){c.isOpen=!1})};c.$on("$destroy",function(){k&&(k.onClose.remove(m),k.destroy(),k=null),c.isOpen===!0&&(c.isOpen=!1),d.unbind("keydown",l)}),c.onBindInternal=function(a){c.dateTimeRangePicker=a,c.onBind&&c.onBind(a)},i()};return{restrict:"EA",require:"ngModel",link:i,scope:{range:"=?ngModel",mode:"=?",fromDateTimePickerOptions:"=?",toDateTimePickerOptions:"=?",isOpen:"=?",refresh:"=?",onBind:"=?",compact:"=?",dateTimeRangeTags:"=?",numberOfRangeTagColumns:"=?",useRangeTags:"=?",rangeTagsHeaderText:"@?",hideRangeTagPanel:"=?",showPopupOnKeydown:"=?",headerOptions:"=?",onDateTimePickerClose:"&?"}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("ionwebDateTimeRangeEntryBox",["ionwebTk.dateFormattingService","ionweb.dateTimePickerHelperService","ionwebTk.environmentService","ionwebTk.toolkitConfigService",function(c,d,e,f){function g(f,g,h){function i(){var b=c.dateRangeSeparator&&c.dateRangeSeparator()||a.localization.PredefinedRangeSeparator;return b}function j(b){f.internalValidationState=a.validation.ValidationState.Error,f.internalValidationMessage=b}function k(){f.internalValidationState=a.validation.ValidationState.Valid,void 0!==f.validationState&&f.validationState!==a.validation.ValidationState.Valid&&(f.validationState=a.validation.ValidationState.Valid),f.internalValidationMessage=null}function l(){function d(a){var b=!1;return m.toUpperCase().indexOf(a.toUpperCase())>-1&&(f.identifier=a,b=!0),b}function e(){var d=!1,e=m.trim(),g=c.parseDate(e);return g&&(f.isDateDisabled(g,f.fromDateTimePickerOptions.datepickerOptions)?j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:e})):(f.userDates={fromDate:g,toDate:g},d=!0)),d}function g(d){var e=!1;if(m.toUpperCase().indexOf(d.toUpperCase())>0)return e;var g=m.slice(d.length).trim(),h=c.parseDate(g);return h?(d===q?f.isDateDisabled(h,f.fromDateTimePickerOptions.datepickerOptions)?j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:g})):(f.userDates={fromDate:h,toDate:void 0},e=!0):f.isDateDisabled(h,f.toDateTimePickerOptions.datepickerOptions)?j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:g})):(f.userDates={fromDate:void 0,toDate:h},e=!0),e):e}function h(){var d=m.toUpperCase().lastIndexOf(s.toUpperCase()),e=!1;if(d+s.length!==m.length)return e;var g=m.slice(0,d).trim(),h=c.parseDate(g);return h&&(f.isDateDisabled(h,f.fromDateTimePickerOptions.datepickerOptions)?j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:g})):(f.userDates={fromDate:h,toDate:void 0},e=!0)),e}function k(){var d,e,g,h,k=m.split(i()),l=k.length;if(2!==l)return!1;if(d=k[0].trim(),e=k[1].trim(),!isNaN(d)){var n=e.indexOf(" ");n>-1&&(d+=e.slice(n))}return g=c.parseDate(d),h=c.parseDate(e),!(!g||!h)&&(f.isDateDisabled(g,f.fromDateTimePickerOptions.datepickerOptions)?(j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:d})),g=void 0):f.isDateDisabled(h,f.toDateTimePickerOptions.datepickerOptions)&&(j(a.stringFormat(b.Strings.Err_Disabled_Date,{userInput:e})),h=void 0),!(!g||!h)&&(f.userDates={fromDate:g,toDate:h},!0))}if(!f.autoCompleteBoxData.formattedDateString)return!0;var l=!1,m=f.autoCompleteBoxData.formattedDateString.trim();if(j(a.stringFormat(b.Strings.Err_Unable_To_Parse_Date,{userInput:m})),f.userDates={},f.useRangeTags&&f.dateTimeRangeTags){var n=f.getRangeTag(m);if(n)return f.identifier="",f.isRangeTagDisabled(n)||(f.userDates=a.extend({},[n]),l=!0),l}return l=d(i())?k():d(r)?g(r):d(t)?g(t):d(q)?g(q):d(s)?h():e()}function m(){if(!f.range)return f.autoCompleteBoxData.formattedDateString||"";var a=d.dateFromDateTimeTag(f.range.fromDate),b=d.dateFromDateTimeTag(f.range.toDate),c=d.formattedDate(f.range.fromDate,f.mode,f.fromDateTimePickerOptions&&f.fromDateTimePickerOptions.timepickerOptions&&f.fromDateTimePickerOptions.timepickerOptions.showSeconds),e=d.formattedDate(f.range.toDate,f.mode,f.toDateTimePickerOptions&&f.toDateTimePickerOptions.timepickerOptions&&f.toDateTimePickerOptions.timepickerOptions.showSeconds),g="";return a&&b?g=c+" "+i()+" "+e:a?g=f.identifier===s?c+" "+s:q+" "+c:b&&(g=f.identifier===t?t+" "+e:r+" "+e),g}function n(){if(f.hasDropDownTags=!1,f.dateTimeRangeTags&&f.dateTimeRangeTags.length>0)for(var a=0;a<f.dateTimeRangeTags.length;a++){var c=f.dateTimeRangeTags[a];if(c.visibility!==b.TagVisibility.TagPanel&&!f.isRangeTagDisabled(c)){f.hasDropDownTags=!0;break}}}var o,p,q="After",r="Before",s="Onwards",t="Until";f.userInput="",f.$watch(function(){return g.attr("tabindex")},function(a){a&&g.removeAttr("tabindex")}),f.isOutOfRange=function(a,c){return!(!c||!a)&&(c.minDate&&d.compare(a,c.minDate,b.DateTimePickerMode.Date)<0||c.maxDate&&d.compare(a,c.maxDate,b.DateTimePickerMode.Date)>0)},f.isDateDisabled=function(a,c){return f.mode===b.DateTimePickerMode.Time?!a||void 0!=c&&void 0!=c.dateDisabled&&c.dateDisabled(a,"day"):!a||f.isOutOfRange(a,c)||void 0!=c&&void 0!=c.dateDisabled&&c.dateDisabled(a,"day")},f.isRangeTagDisabled=function(a){var b=!1,c=!1,d=f.getDatesFromRangeTag(a);return!!d&&(a.fromDate&&(b=f.isDateDisabled(d.fromDate,f.fromDateTimePickerOptions.datepickerOptions)),!b&&a.toDate&&(c=f.isDateDisabled(d.toDate,f.toDateTimePickerOptions.datepickerOptions)),b||c)},f.getRangeTag=function(a){if(a&&a.length)for(var b=0;b<f.dateTimeRangeTags.length;b++)if(f.dateTimeRangeTags[b].name===a)return f.dateTimeRangeTags[b]},f.getDatesFromRangeTag=function(a){var b,c;return a.fromDate&&(b=d.dateFromDateTimeTag(a.fromDate)),a.toDate&&(c=d.dateFromDateTimeTag(a.toDate)),{fromDate:b,toDate:c}},f.getValidationMessage=function(){return f.internalValidationState===a.validation.ValidationState.Error?f.internalValidationMessage:f.validationMessage?f.validationMessage:f.internalValidationMessage},f.getValidationState=function(){return f.internalValidationState===a.validation.ValidationState.Error?(void 0!==f.validationState&&f.validationState!==a.validation.ValidationState.Error&&(f.validationState=a.validation.ValidationState.Error),a.validation.ValidationState.Error):void 0!==f.validationState?f.validationState:f.internalValidationState},f.showHidePopup=function(){f.$evalAsync(function(){f.isOpen=!f.isOpen})},f.acbFocused=function(){f.$evalAsync(function(){f.isOpen=!1})},f.onDateTimePickerClose=function(){e.isMobileDevice()||g.find("ionweb-autocomplete input").focus()},f.acbDropdownStateChanged=function(a){f.useRangeTags&&f.hasDropDownTags||a.close(),a.isOpen&&f.$evalAsync(function(){f.isOpen=!1})};var u=function(){f.range&&f.$evalAsync(function(){var a=m(),b=f.onRangeUpdated&&f.onRangeUpdated(f.range,a)||a;f.autoCompleteBoxData?f.autoCompleteBoxData.formattedDateString!==b&&(o=!0,f.autoCompleteBoxData.formattedDateString=b):(o=!0,f.autoCompleteBoxData={formattedDateString:b})})};c.preferenceChanged&&c.preferenceChanged.add(u),f.$watch("dateTimeRangeTags.length",function(a,b){n()}),f.$watch("range",function(a,c){function e(){k(),f.userDates={},f.autoCompleteBoxData.formattedDateString=""}if(c||a){if(p===!0)return void(p=!1);if(a&&(a.fromDate||a.toDate)){if(a.fromDate){var g=d.dateFromDateTimeTag(a.fromDate);if(f.isDateDisabled(g,f.fromDateTimePickerOptions.datepickerOptions))return void e()}if(a.toDate){var h=d.dateFromDateTimeTag(a.toDate);if(f.isDateDisabled(h,f.toDateTimePickerOptions.datepickerOptions))return void e()}var i=m();if(g&&h&&g>h)return p=!0,o=!0,f.range=void 0,f.autoCompleteBoxData.formattedDateString=i,f.userDates={},void j(b.Strings.Err_Invalid_Range_selection);k();var l=f.onRangeUpdated&&f.onRangeUpdated(a,i)||i;l!==f.autoCompleteBoxData.formattedDateString&&(o=!0,f.userDates={},f.autoCompleteBoxData.formattedDateString=l)}else o=!1,f.userDates&&(f.userDates.fromDate||f.userDates.toDate)?e():f.autoCompleteBoxData.formattedDateString=f.userInput||""}},!0),f.$watch("autoCompleteBoxData.formattedDateString",function(b,c){if(b||c){if(o===!0)return void(o=!1);if((c===f.userInput&&""===b||b!==f.userInput)&&(f.userInput=""),!b)return f.range=void 0,f.userInput="",f.identifier="",f.userDates=void 0,void k();if(!l())return void(f.range=void 0);JSON.stringify(f.range)!==JSON.stringify(f.userDates)&&(p=!0,f.range=a.extend({},[f.userDates])),k();var d=m(),e=f.onRangeUpdated&&f.onRangeUpdated(f.range,d)||d;e!==f.autoCompleteBoxData.formattedDateString&&(o=!0,f.autoCompleteBoxData.formattedDateString=e)}}),f.$watch("mode",function(a,b){if(a!==b){var c=m();f.autoCompleteBoxData.formattedDateString=f.onRangeUpdated&&f.onRangeUpdated(f.range,c)||c}}),f.$watch("disabled",function(a,b){a!==b&&f.$evalAsync(function(){f.isOpen=!1})}),f.$on("$destroy",function(){c.preferenceChanged&&u&&c.preferenceChanged.remove(u)})}return{restrict:"EA",compile:function(){return{pre:function(a){a.dropDownTagsProvider=function(c){if(a.dateTimeRangeTags&&a.useRangeTags){var d=a.userInput&&a.userInput.toLowerCase()||"",e=[];return a.dateTimeRangeTags.forEach(function(c){c.visibility!==b.TagVisibility.TagPanel&&!a.isRangeTagDisabled(c)&&c.name.toLowerCase().indexOf(d)>=0&&e.push({value:c.name,label:c.name})}),{options:e,total:e.length}}return{options:[],total:0}},a.autoCompleteBoxData||(a.autoCompleteBoxData={formattedDateString:void 0}),a.showUserButton=f.getIconVisibilityType(!0,f.datePicker.showIconOnHover),a.getClearButtonVisibility=function(){var b;return b=void 0===a.showClearButton||a.showClearButton,f.getIconVisibilityType(b,f.datePicker.showIconOnHover)},a.getArrowButtonVisibility=function(){var c;return c=void 0===a.showArrowButton||a.showArrowButton,a.useRangeTags&&a.hasDropDownTags?f.getIconVisibilityType(c,f.datePicker.showIconOnHover):b.VisibilityType.Never},a.textChanged=function(b){a.userInput=b}},post:g}},templateUrl:"toolkit/iondatetimerangeentrybox/ionDateTimeRangeEntryBox.tpl.html",scope:{range:"=?ngModel",mode:"=?",fromDateTimePickerOptions:"=?",toDateTimePickerOptions:"=?",isOpen:"=?",placeholder:"@?",onRangeUpdated:"=?",refresh:"=?",validationMessage:"=?",validationState:"=?",errorAnimation:"=?",onBind:"=?",showClearButton:"=?",showArrowButton:"=?",disabled:"=ngDisabled",editable:"=?",tabindex:"@?",dateTimeRangeTags:"=?",compact:"=?",numberOfRangeTagColumns:"=?",useRangeTags:"=?",rangeTagsHeaderText:"@?",hideRangeTagPanel:"=?",headerOptions:"=?",userInput:"=?"}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.restrict="E",this.scope={model:"=ngModel",disabled:"=ngDisabled",showLabels:"=?",onLabel:"=?",offLabel:"=?",onColor:"=?",offColor:"=?",validationMessage:"=?",validationState:"=?",ngChange:"&?",ngFalseValue:"=?",ngTrueValue:"=?"},this.templateUrl="toolkit/toggle/toggle.tpl.html",this.controller=e,this.controllerAs="ctrl",this.bindToController=!0,this.compile=function(a,b){if(void 0==a.attr("ionweb-validation")){var c=a.find(".ionweb-toggle-container");c.attr("ionweb-validation","")}return{}}}return a}(),d={showLabels:!0,onLabel:"ON",offLabel:"OFF",onColor:"accent",offColor:"secondary"},e=function(){function b(a){this.$scope=a}return b.prototype.$onInit=function(){var a=this;angular.forEach(d,function(b,c){angular.isUndefined(a[c])&&(a[c]=b)});var b=function(b,c){a[b+"ColorBg"]="ion-theme-"+c+"-bg",a[b+"ColorFg"]="ion-theme-"+c+"-contrast-fg"};this.$scope.$watch("ctrl.onColor",function(a){return b("on",a)}),this.$scope.$watch("ctrl.offColor",function(a){return b("off",a)}),this.toInternalState(),this.$scope.$watch("ctrl.model",function(){return a.toInternalState()})},b.prototype.toggleValue=function(b){var c=this;this.disabled||"click"!==b.type&&(!b.keyCode||b.keyCode!=a.KeyCodes.SPACE&&b.keyCode!=a.KeyCodes.ENTER)||this.$scope.$evalAsync(function(){c._state=!c._state,c.fromInternalState(),c.ngChange&&c.ngChange({$value:c.model})})},b.prototype.toInternalState=function(){"undefined"!=typeof this.ngFalseValue&&this.model===this.ngFalseValue?this._state=!1:"undefined"!=typeof this.ngTrueValue&&this.model===this.ngTrueValue?this._state=!0:this._state=!!this.model},b.prototype.fromInternalState=function(){"undefined"==typeof this.ngFalseValue||this._state?"undefined"!=typeof this.ngTrueValue&&this._state?this.model=this.ngTrueValue:this.model=this._state:this.model=this.ngFalseValue},b.$inject=["$scope"],b.DARK_CONTRAST="text",b.LIGHT_CONTRAST="background",b}();angular.module("ionwebTk").directive("ionwebToggle",function(){return new c})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a,b){["checkbox","radio"].indexOf(b)<0&&(b="checkbox"),this.input=a.find("input[type="+b+"]"),0===this.input.length&&(this.input=a.prepend('<input type="'+b+'">'));var c=a.contents().filter(function(a,c){return!$(c).is("input[type="+b+"]")});$("<div />").append(c).insertAfter(this.input)}return a}(),c=function(){function a(){this.restrict="C",this.link=function(a,c){new b(c,"checkbox")}}return a}(),d=function(){function a(){this.restrict="C",this.link=function(a,c){new b(c,"radio")}}return a}();angular.module("ionwebTk").directive("ionInputCheckbox",function(){return new c}).directive("ionInputRadio",function(){return new d})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c;!function(a){a[a.Flat=0]="Flat",a[a.Grouped=1]="Grouped"}(c=b.SwapPanelMode||(b.SwapPanelMode={}));var d;!function(a){a[a.ByName=1]="ByName",a[a.ByCategory=2]="ByCategory"}(d=b.SwapPanelSorting||(b.SwapPanelSorting={}));var e=function(){function c(){this.selectedAvailableItemIds={},this.selectedChosenItemIds={},this._currentAvailableSelection=[],this._currentChosenSelection=[],this.chosenNodes=[],this.availableNodes=[],this.flatAvailableItems=[],this.flatChosenItems=[],this._onAction=new a.Event,this._onAvailableSelectionChanged=new a.Event,this._onChosenSelectionChanged=new a.Event,this.isExpanded={},this._onDisplayedItemChanged=new a.Event}return c.prototype.readNodes=function(a,c,d,e,f,g){var h=this,i={},j=function(a){(f||!h.filter||a.displayName&&a.displayName.toLowerCase().indexOf(h.filter.toLowerCase())>=0)&&c.push(a)},k=g||this.hierarchyMode===b.HierarchyMode.Grouped;return a.forEach(function(a){i[a.descriptor.id]=!0;var b=!k&&a.children&&a.children.length;b||j(a.descriptor),!a.children||!h.isExpanded[a.descriptor.id]&&k||a.children.forEach(function(a){i[a.id]=!0,j(a),e[a.id]=k});var c=!!(k&&a.children&&a.children.length);d[a.descriptor.id]=c}),i},c.prototype.refreshItems=function(){var a=this;this.flatAvailableItems=[],this.flatChosenItems=[],this.isAvailableGroup={},this.isChosenGroup={},this.isChildren={};var c=this.readNodes(this.availableNodes,this.flatAvailableItems,this.isAvailableGroup,this.isChildren,!1,!1);this.chosenNodes.forEach(function(b){"undefined"==typeof a.isExpanded[b.descriptor.id]&&(a.isExpanded[b.descriptor.id]=!0)});var e=this.readNodes(this.chosenNodes,this.flatChosenItems,this.isChosenGroup,this.isChildren,!0,!0);Object.keys(this.selectedAvailableItemIds).forEach(function(b){c[b]||delete a.selectedAvailableItemIds[b]}),Object.keys(this.selectedChosenItemIds).forEach(function(b){e[b]||delete a.selectedChosenItemIds[b]}),this.hierarchyMode===b.HierarchyMode.Flat&&(this.flatAvailableItems=this.flatAvailableItems.sort(function(b,c){if(a._currentAvailableSorting===d.ByCategory){var e=(b.category||"").localeCompare(c.category||"");return(e||b.displayName.localeCompare(c.displayName))*(a.isSortingDescending?-1:1)}return b.displayName.localeCompare(c.displayName)*(a.isSortingDescending?-1:1)})),Object.keys(this.isExpanded).forEach(function(b){e[b]||c[b]||delete a.isExpanded[b]}),this.updateCurrentChosenSelection(),this.updateCurrentAvailableSelection(),this._onDisplayedItemChanged.raise(this,null)},c.prototype.setState=function(a,c,d){this.hierarchyMode=d||b.HierarchyMode.Grouped,this.availableNodes=a.slice().sort(function(a,b){return a.descriptor.displayName.localeCompare(b.descriptor.displayName)}),this.availableNodes.forEach(function(a){a.children&&(a.children=a.children.slice().sort(function(a,b){return a.displayName.localeCompare(b.displayName)}))}),this.chosenNodes=c.slice(),this.refreshItems()},c.prototype.sortAvailableByName=function(){this._currentAvailableSorting===d.ByName&&(this._isSortingDescending=!this._isSortingDescending),this._currentAvailableSorting=d.ByName,this.refreshItems()},c.prototype.sortAvailableByCategory=function(){this._currentAvailableSorting===d.ByCategory&&(this._isSortingDescending=!this._isSortingDescending),this._currentAvailableSorting=d.ByCategory,this.refreshItems()},Object.defineProperty(c.prototype,"currentAvailableSorting",{get:function(){return this._currentAvailableSorting},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isSortingDescending",{get:function(){return this._isSortingDescending},enumerable:!0,configurable:!0}),c.prototype.toggleCollapseState=function(a){
this.isExpanded[a]=!this.isExpanded[a],this.refreshItems()},c.prototype.setFilter=function(a){this.filter=a,this.refreshItems()},Object.defineProperty(c.prototype,"onDisplayedItemChanged",{get:function(){return this._onDisplayedItemChanged},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onAction",{get:function(){return this._onAction},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onAvailableSelectionChanged",{get:function(){return this._onAvailableSelectionChanged},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onChosenSelectionChanged",{get:function(){return this._onChosenSelectionChanged},enumerable:!0,configurable:!0}),c.prototype.cleanAvailableSelection=function(){this.selectedAvailableItemIds={},this.updateCurrentAvailableSelection()},c.prototype.cleanChosenSelection=function(){this.selectedChosenItemIds={},this.updateCurrentChosenSelection()},c.prototype.selectAvailable=function(a){this.selectedAvailableItemIds[a]=!0,this.updateCurrentAvailableSelection()},c.prototype.selectChosen=function(a,b){b&&(this.selectedChosenItemIds={}),this.selectedChosenItemIds[a]=!0,this.updateCurrentChosenSelection()},c.prototype.isSelectedAvailable=function(a){return!!this.selectedAvailableItemIds[a]},c.prototype.isSelectedChosen=function(a){return!!this.selectedChosenItemIds[a]},c.prototype.toggleAvailableSelection=function(a){this.selectedAvailableItemIds[a]=!this.selectedAvailableItemIds[a],this.updateCurrentAvailableSelection()},c.prototype.toggleChosenSelection=function(a){this.selectedChosenItemIds[a]=!this.selectedChosenItemIds[a],this.updateCurrentChosenSelection()},Object.defineProperty(c.prototype,"currentAvailableSelection",{get:function(){return this._currentAvailableSelection},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"currentChosenSelection",{get:function(){return this._currentChosenSelection},enumerable:!0,configurable:!0}),c.prototype.moveItems=function(a,b,c,d){var e={items:a,targetItem:d,toLeft:b,fromLeft:c};this._onAction.raise(this,e)},c.prototype.moveCurrentSelection=function(a,b,c){this.moveItems(this._currentAvailableSelection,a,b,c)},c.prototype.updateCurrentAvailableSelection=function(){var a=this,b=this._currentAvailableSelection;this._currentAvailableSelection=this.flatAvailableItems.filter(function(b){return a.selectedAvailableItemIds[b.id]}),angular.equals(b,this._currentAvailableSelection)||this._onAvailableSelectionChanged.raise(this,this._currentAvailableSelection)},c.prototype.updateCurrentChosenSelection=function(){var a=this,b=this._currentChosenSelection;this._currentChosenSelection=this.flatChosenItems.filter(function(b){return a.selectedChosenItemIds[b.id]}),angular.equals(b,this._currentChosenSelection)||this._onChosenSelectionChanged.raise(this,this._currentChosenSelection)},c}();b.SwapPanel=e}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.None=1]="None",a[a.Move=2]="Move"}(b=a.SwapPanelAllowedOperation||(a.SwapPanelAllowedOperation={}));var c;!function(a){a[a.Grouped=1]="Grouped",a[a.Flat=2]="Flat"}(c=a.HierarchyMode||(a.HierarchyMode={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(a){var b=this;this.responsivenessService=a,this.restrict="E",this.scope={availableNodes:"=?",chosenNodes:"=?",onAction:"&?",allowedOperationOptions:"=?",isVerticalMode:"=?",chosenActionDescriptors:"=?"},this.templateUrl="toolkit/swapPanel/swapPanelDirective.tpl.html",this.link=function(a,c,e,f,g){new d(a,c,b.responsivenessService)}}return a}(),d=function(){function c(c,d,e){var f=this;this.restrict="E",this.templateUrl="toolkit/swapPanel/swapPanelDirective.tpl.html",this.firstChosenSelectedItem=function(){return f.swapPanel.currentChosenSelection.length?f.swapPanel.currentChosenSelection[0]:null},this.$scope=c,this.swapPanel=new b.SwapPanel,this.$scope=c,this.$scope.availablePanelId="availablePanelId",this.$scope.chosenPanelId="chosenPanelId",this.swapPanel.onDisplayedItemChanged.add(function(){f.fetchItems()}),this.$scope.swapPanel=this.swapPanel,this.$scope.isHierarchyViewMode=!1,this.updateButtonsState();var g=function(){var a=null,b=f.lastChosenSelectedItemIndex(),c=b+1;return c<f.$scope.flatChosen.length&&(a=f.$scope.flatChosen[c]),a};c.onToRightPressed=function(){f.swapPanel.moveItems(f.swapPanel.currentAvailableSelection,!1,!0,g())},c.onToLeftPressed=function(){f.swapPanel.moveItems(f.swapPanel.currentChosenSelection,!0,!1,null)},c.onAvailablePanelItemClick=function(a,b){f.handleAvailableSelectionEvent(a,b)},c.onChosenPanelItemClick=function(a,b){f.handleChosenSelectionEvent(a,b)},c.onAvailablePanelItemDblClick=function(a,b){f.isAllowedOperation([b],g(),!1,!0)&&f.swapPanel.moveItems([b],!1,!0,g())},c.onChosenPanelItemDblClick=function(a,b){f.isAllowedOperation([b],null,!0,!1)&&f.swapPanel.moveItems([b],!0,!1,null)},c.toggleExpand=function(a){f.swapPanel.toggleCollapseState(a)},c.$watch("filterInput",function(){f.swapPanel.setFilter(c.filterInput),f.fetchItems()}),c.$watch("isHierarchyViewMode",function(){f.onNodesChange()}),c.$watchCollection("availableNodes",function(a,b){f.onNodesChange()}),c.$watchCollection("chosenNodes",function(a,b){f.onNodesChange()});var h,i=function(){h&&(h(),h=null)},j=!1,k=function(a){c.$evalAsync(function(){a.width&&a.height&&(j=a.height>a.width,c.isVerticalLayout=j)})};c.$watch("isVerticalMode",function(){i(),c.isVerticalMode?c.isVerticalLayout=!0:(h=e.register(d[0],function(a){return k(a)},!0),c.isVerticalLayout=j)}),c.$on("$destroy",function(){i()}),c.isAvailableItemSelected=function(a){return f.swapPanel.isSelectedAvailable(a.id)},c.isChosenItemSelected=function(a){return f.swapPanel.isSelectedChosen(a.id)};var l=function(a,b,c){var d=!1,e=f.$scope.allowedOperationOptions&&f.$scope.allowedOperationOptions.onHasAllowedOperation;if(e){var g={items:c,fromLeft:b};e(g),g.noOperation&&(d=!0)}return d||a.setData("selected_items",c),!d};c.availableDndOptions={onDragStart:function(a){f.swapPanel.isSelectedAvailable(a.uid)||(f.swapPanel.cleanAvailableSelection(),f.swapPanel.selectAvailable(a.uid));var b=l(a.dataTransfer,!0,f.swapPanel.currentAvailableSelection);a.cancel=!b}},c.chosenDndOptions={onDragStart:function(a){f.swapPanel.isSelectedChosen(a.uid)||f.swapPanel.selectChosen(a.uid,!0);var b=l(a.dataTransfer,!0,f.swapPanel.currentChosenSelection);a.cancel=!b}},c.onAvailableDragEnter=function(b){b.setDropEffect(a.DnDDropEffect.Move),c.isDraggingOverAvailable=!0},c.onAvailableDragLeave=function(a){c.isDraggingOverAvailable=!1},c.onAvailableDragOver=function(c){var d,e=f.$scope.allowedOperationOptions&&f.$scope.allowedOperationOptions.onAllowedOperationRequest;if(e){var g=c.getData("selected_items"),h={action:{items:g,targetItem:null,toLeft:!0,fromLeft:!1}};e(h),d=h.allowedOperation&&h.allowedOperation!==b.SwapPanelAllowedOperation.Move}return d?a.DnDDropEffect.None:a.DnDDropEffect.Move},c.onAvailableDrop=function(a){c.isDraggingOverAvailable=!1;var b=a.getData("selected_items"),d={items:b,targetItem:null,toLeft:!0,fromLeft:!1};c.onAction&&c.onAction({$args:d})},c.onMoveTopPressed=function(){f.raiseReorder(f.$scope.flatChosen[0])},c.onMoveUpPressed=function(){var a=f.chosenItemBeforeFirstSelectedItemOrNull();f.raiseReorder(a)},c.onMoveDownPressed=function(){var a=f.chosenItemBeforeLastSelectedItemOrNull();f.raiseReorder(a)},c.onMoveBottomPressed=function(){f.raiseReorder(null)},c.selectHierarchyViewMode=function(){f.$scope.isHierarchyViewMode=!0},c.selectListViewMode=function(){f.$scope.isHierarchyViewMode=!1},c.sortByName=function(){f.swapPanel.sortAvailableByName()},c.sortByCategory=function(){f.swapPanel.sortAvailableByCategory()};var m=function(a){c.$evalAsync(function(){if(c.description="",c.lastSelectedId=null,a&&1===a.length){var b=a[0];c.description=b.description,c.lastSelectedId=b.id}f.updateButtonsState()})};this.swapPanel.onAvailableSelectionChanged.add(function(a,b){m(b)}),this.swapPanel.onChosenSelectionChanged.add(function(a,b){m(b)});var n=function(a){var b=f.$scope.flatChosen,c=-1;if(b.forEach(function(b,d){b.id===a.actionData.targetUid&&(c=d)}),c>=0)switch(a.action){case"DND_MOVE_BEFORE":case"DND_INSERT_BEFORE":break;case"DND_MOVE_AFTER":case"DND_INSERT_AFTER":c++}return c>=0?b[c]:null};c.handleDndAction=function(a,b){var d=n(a),e=b.getData("selected_items"),g=a.actionData.containerUid===c.availablePanelId;f.swapPanel.moveItems(e,!1,g,d)},c.onCanDrop=function(a,d){var e=n(a),g=d.getData("selected_items"),h=a.actionData.containerUid===c.availablePanelId,i={action:{items:g,targetItem:e,toLeft:!1,fromLeft:h}},j=f.$scope.allowedOperationOptions&&f.$scope.allowedOperationOptions.onAllowedOperationRequest;j&&j(i);var k=i.allowedOperation&&i.allowedOperation!==b.SwapPanelAllowedOperation.Move;return!k},this.swapPanel.onAction.add(function(a,b){c.onAction&&c.onAction({$args:b})})}return c.prototype.moveTopOperationRequestArgs=function(){return{action:{items:this.swapPanel.currentChosenSelection,targetItem:this.$scope.flatChosen[0],toLeft:!1,fromLeft:!1}}},c.prototype.hasAllowedOperation=function(a,b){var c=this.$scope.allowedOperationOptions&&this.$scope.allowedOperationOptions.onHasAllowedOperation;if(c){var d={items:a,fromLeft:b};if(c(d),d.noOperation)return!1}return!0},c.prototype.isAllowedOperation=function(a,c,d,e){var f=this.$scope.allowedOperationOptions&&this.$scope.allowedOperationOptions.onAllowedOperationRequest;if(f){var g={action:{items:a,targetItem:c,toLeft:d,fromLeft:e}};if(f(g),g.allowedOperation&&g.allowedOperation!==b.SwapPanelAllowedOperation.Move)return!1}return!0},c.prototype.updateButtonsState=function(){var a=this.swapPanel.currentAvailableSelection,b=this.swapPanel.currentChosenSelection,c=b&&b.length,d=a&&a.length,e=c&&this.hasAllowedOperation(b,!1);if(this.$scope.isToLeftDisabled=!c||!e||!this.isAllowedOperation(b,null,!0,!1),this.$scope.isToRightDisabled=!d||!this.hasAllowedOperation(a,!0)||!this.isAllowedOperation(a,null,!1,!0),this.$scope.isMoveTopDisabled=!c,this.$scope.isMoveUpDisabled=!c,this.$scope.isMoveDownDisabled=!c,this.$scope.isMoveBottomDisabled=!c,c){var f=this.$scope.flatChosen,g=b[0],h=b[b.length-1],i=this.isChosenSelectionContiguous(f,b);if(i&&f[0]===g&&(this.$scope.isMoveTopDisabled=!0),i&&f[f.length-1]===h&&(this.$scope.isMoveBottomDisabled=!0),i&&f[f.length-1]!==h||(this.$scope.isMoveDownDisabled=!0),i&&f[0]!==g||(this.$scope.isMoveUpDisabled=!0),this.$scope.isMoveTopDisabled||(this.$scope.isMoveTopDisabled=!e||!this.isAllowedOperation(b,f[0],!1,!1)),!this.$scope.isMoveUpDisabled){var j=f.indexOf(g);this.$scope.isMoveUpDisabled=!e||!this.isAllowedOperation(b,f[j-1],!1,!1)}this.$scope.isMoveDownDisabled||(this.$scope.isMoveDownDisabled=!e||!this.isAllowedOperation(b,this.chosenItemBeforeLastSelectedItemOrNull(),!1,!1)),this.$scope.isMoveBottomDisabled||(this.$scope.isMoveBottomDisabled=!e||!this.isAllowedOperation(b,null,!1,!1))}},c.prototype.fetchItems=function(){var a=this.swapPanel.currentAvailableSorting;this.$scope.isSortedByCategory=a===b.SwapPanelSorting.ByCategory,this.$scope.isSortedByName=a===b.SwapPanelSorting.ByName,this.$scope.isSortingDescending=this.swapPanel.isSortingDescending,this.$scope.flatChosen=this.swapPanel.flatChosenItems,this.$scope.flatAvailable=this.swapPanel.flatAvailableItems,this.updateButtonsState()},c.prototype.onNodesChange=function(){var a=this.$scope.isHierarchyViewMode?b.HierarchyMode.Grouped:b.HierarchyMode.Flat;this.swapPanel.setState(this.$scope.availableNodes||[],this.$scope.chosenNodes||[],a),this.fetchItems()},c.prototype.performShiftSelection=function(a,b,c,d,e){var f=c.indexOf(a);if(f>=0){var g=void 0;b&&(g=c.indexOf(b)),g>=0||(g=f),d();for(var h=Math.min(f,g);h<=Math.max(f,g);h++)e(c[h].id)}},c.prototype.handleAvailableSelectionEvent=function(a,b){var c=this;a.shiftKey?this.performShiftSelection(b,this.lastAvailableSelected,this.$scope.flatAvailable,function(){return c.swapPanel.cleanAvailableSelection()},function(a){return c.swapPanel.selectAvailable(a)}):a.ctrlKey?this.swapPanel.toggleAvailableSelection(b.id):(this.swapPanel.cleanAvailableSelection(),this.swapPanel.selectAvailable(b.id)),this.swapPanel.isSelectedAvailable(b.id)&&!a.shiftKey&&(this.lastAvailableSelected=b)},c.prototype.handleChosenSelectionEvent=function(a,b){var c=this;a.shiftKey?this.performShiftSelection(b,this.lastChosenSelected,this.$scope.flatChosen,function(){return c.swapPanel.cleanChosenSelection()},function(a){return c.swapPanel.selectChosen(a)}):a.ctrlKey?this.swapPanel.toggleChosenSelection(b.id):this.swapPanel.selectChosen(b.id,!0),this.swapPanel.isSelectedChosen(b.id)&&!a.shiftKey&&(this.lastChosenSelected=b)},c.prototype.lastChosenSelectedItem=function(){return this.swapPanel.currentChosenSelection.length?this.swapPanel.currentChosenSelection[this.swapPanel.currentChosenSelection.length-1]:null},c.prototype.lastChosenSelectedItemIndex=function(){var a=this.lastChosenSelectedItem();return a?this.$scope.flatChosen.indexOf(a):-1},c.prototype.chosenItemBeforeLastSelectedItemOrNull=function(){var a=this.lastChosenSelectedItemIndex();return a<this.$scope.flatChosen.length-2?this.$scope.flatChosen[a+2]:null},c.prototype.firstChosenSelectedItemIndex=function(){var a=this.firstChosenSelectedItem();return a?this.$scope.flatChosen.indexOf(a):-1},c.prototype.chosenItemBeforeFirstSelectedItemOrNull=function(){var a=this.firstChosenSelectedItemIndex();return a>=0?this.$scope.flatChosen[a-1]:null},c.prototype.raiseReorder=function(a){var b={items:this.swapPanel.currentChosenSelection,targetItem:a,toLeft:!1,fromLeft:!1};this.$scope.onAction&&this.$scope.onAction({$args:b})},c.prototype.isChosenSelectionContiguous=function(a,b){if(b&&1===b.length)return!0;var c=!0,d={};b.forEach(function(a){return d[a.id]=!0});var e=-1;return a.forEach(function(a,b){var f=d[a.id];f&&e>=0&&e+1<b&&(c=!1),f&&(e=b)}),c},c}();angular.module("ionwebTk").directive("ionwebSwapPanel",["ionweb.responsivenessService",function(a){return new c(a)}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c;!function(a){a[a.Left=0]="Left",a[a.Center=1]="Center",a[a.Right=2]="Right"}(c=b.BannerTextAlignment||(b.BannerTextAlignment={}));var d;!function(a){a[a.Linear=0]="Linear",a[a.Arc=1]="Arc",a[a.Round=2]="Round"}(d=b.BannerProgressType||(b.BannerProgressType={}));var e=function(){function a(){}return a.prototype.cleanClasses=function(b){return b.map(function(b){return(a.CLASS_PREFIX+b).toLowerCase()})},a.prototype.flattenClasses=function(a){return this.cleanClasses(a).join(" ")},a.prototype.getDefaultModel=function(){return{backgroundColor:"transparent",header:{content:"Header Text",size:22,alignment:c.Left,color:"@ion-theme-accent",wrap:!1},primary:{content:"Primary Text",size:16,alignment:c.Left,color:"@ion-theme-accent",wrap:!0},secondary:{content:"Secondary Text",size:12,alignment:c.Left,color:"grey",wrap:!0},progress:{size:16,color:"#6d6dae"}}},a.prototype.getDefaultTextConfig=function(){return{show:!0,canEditContent:!0,canEditAlignment:!0,canEditColor:!0,canEditSize:!0,canEditWrap:!0}},a.prototype.getDefaultProgressConfig=function(){return{show:!0,value:75,maxValue:100,type:d.Linear,canEditColor:!0,canEditSize:!0}},a.prototype.getDefaultBannerItemSettings=function(){return{showIcon:!1,classes:[],isOpen:!1,isColorPickerOpen:!1}},a.prototype.getDefaultConfig=function(){return{editMode:!1,canEditBackgroundColor:!0,progressBeforeText:!0,textOnSingleLine:!1,header:f.getDefaultTextConfig(),primary:f.getDefaultTextConfig(),secondary:f.getDefaultTextConfig(),progress:f.getDefaultProgressConfig()}},a.CLASS_PREFIX="ionbanner-",a.PLACEHOLDER_TEXT="enter text",a}();b.BannerService=e,angular.module("ionwebTk").service("ionweb.bannerService",[e]);var f=function(){function b(){}return b.getDefaultModel=function(){return angular.element(a._rootDiv||document.body).injector().get("ionweb.bannerService").getDefaultModel()},b.getDefaultTextConfig=function(){return angular.element(a._rootDiv||document.body).injector().get("ionweb.bannerService").getDefaultTextConfig()},b.getDefaultProgressConfig=function(){return angular.element(a._rootDiv||document.body).injector().get("ionweb.bannerService").getDefaultProgressConfig()},b.getDefaultConfig=function(){return angular.element(a._rootDiv||document.body).injector().get("ionweb.bannerService").getDefaultConfig()},b}();b.Banner=f}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={})),function(a){}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(){this.restrict="E",this.templateUrl="toolkit/banner/banner.tpl.html",this.controller="ionwebBannerController",this.controllerAs="ctrl",this.scope={model:"=",config:"=",actualBackgroundColor:"=?"}}return a}(),d=function(){function c(a,c,d){var e=this;this.$scope=a,this.bannerService=d,this.containerClasses="",this.containerStyle={},this.alignments=b.BannerTextAlignment,this.headerSettings=d.getDefaultBannerItemSettings(),this.primarySettings=d.getDefaultBannerItemSettings(),this.secondarySettings=d.getDefaultBannerItemSettings(),this.progressSettings=d.getDefaultBannerItemSettings(),a.model||(a.model=d.getDefaultModel()),a.config||(a.config=d.getDefaultConfig()),a.$watch("model.backgroundColor",function(){return e.updateContainerClassesAndStyle()}),a.$watch("config.backgroundColorOverride",function(){return e.updateContainerClassesAndStyle()}),a.$watch("config.editMode",function(){e.updateContainerClassesAndStyle(),e.updateSettingsClasses(e.headerSettings,a.model.header),e.updateSettingsClasses(e.primarySettings,a.model.primary),e.updateSettingsClasses(e.secondarySettings,a.model.secondary),e.updateSettingsClasses(e.progressSettings,a.model.progress)}),a.$watch("config.textOnSingleLine",function(){return e.updateContainerClassesAndStyle()}),a.$watch("ctrl.headerSettings.isOpen",function(){return e.updateSettingsClasses(e.headerSettings,a.model.header)}),a.$watch("ctrl.primarySettings.isOpen",function(){return e.updateSettingsClasses(e.primarySettings,a.model.primary)}),a.$watch("ctrl.secondarySettings.isOpen",function(){return e.updateSettingsClasses(e.secondarySettings,a.model.secondary)}),a.$watch("ctrl.progressSettings.isOpen",function(){return e.updateSettingsClasses(e.progressSettings,a.model.progress)}),a.$watch("config.progress.type",function(a){e.progressType=b.BannerProgressType[a],e.headerSettings.isOpen=!1,e.primarySettings.isOpen=!1,e.secondarySettings.isOpen=!1,e.progressSettings.isOpen=!1})}return c.prototype.updateContainerClassesAndStyle=function(){var a=[];this.$scope.config.editMode&&a.push("edit-mode"),this.$scope.config.textOnSingleLine&&a.push("single-line");var c=this.bannerService.flattenClasses(a);this.$scope.actualBackgroundColor=this.$scope.config.backgroundColorOverride||this.$scope.model.backgroundColor;var d=b.getThemeClassOrStyle(this.$scope.actualBackgroundColor,"bg");this.containerClasses=(d.classStr+" "+c).trim(),this.containerStyle=d.styleObj},c.prototype.updateSettingsClasses=function(c,d){var e=c.isOpen||this.$scope.config.editMode&&c.showIcon;if(!e){var f=d.alignment;angular.isDefined(f)||(f=b.BannerTextAlignment.Center),a.spliceAll(c.classes,function(a){return"center"===a||"left"===a||"right"===a}),c.classes.push((b.BannerTextAlignment[f]||"").toLowerCase())}e?c.classes.push("open"):a.spliceAll(c.classes,function(a){return"open"===a})},c.$inject=["$scope","$injector","ionweb.bannerService"],c}();angular.module("ionwebTk").directive("ionwebBanner",[function(){return new c}]).controller("ionwebBannerController",d)}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){this.scope={config:"=",model:"="},this.restrict="E",this.controller="ionwebBannerProgressController",this.controllerAs="ctrl",this.templateUrl="toolkit/banner/bannerProgress.tpl.html"}return a}(),c=function(){function b(b,c){var d=this;this.$scope=b,this.bannerService=c,b.$watch("model",function(){return d.buildClassesAndStyle()},!0),b.$watch("config",function(){d.isSemi=d.$scope.config&&d.$scope.config.type===a.BannerProgressType.Arc,d.isLinear=d.$scope.config&&d.$scope.config.type===a.BannerProgressType.Linear,d.buildClassesAndStyle()},!0)}return b.prototype.getProgressActualWidth=function(){return this.$scope.config.type!==a.BannerProgressType.Linear?this.getRoundProgressActualWidth():this.getProgressWidth()},b.prototype.getProgressActualHeight=function(){return this.getProgressHeight()},b.prototype.buildClassesAndStyle=function(){if(this.$scope.model){var b=["progress"];this.containerClasses=this.bannerService.flattenClasses(b);var c=(this.$scope.config.colorOverride||this.$scope.model.color).replace("@"+a.THEME_PREFIX+"-","@");if(this.isLinear){var d="",e="",f={},g={height:this.getProgressActualHeight(),width:this.getProgressActualWidth()},h=a.getThemeClass(c,"bg");h?(d+=h,e+=h):(f["background-color"]=c,g["background-color"]=c),this.linearTrackClasses=d,this.linearTrackStyle=f,this.linearBarClasses=e,this.linearBarStyle=g}else this.roundTrackClass=a.getThemeClass(c,"stroke"),this.roundBarClass=this.roundTrackClass}},b.prototype.getProgressWidth=function(){var a=this.$scope.config.value/this.$scope.config.maxValue;return 100*Math.min(1,Math.max(0,a))+"%"},b.prototype.getProgressHeight=function(){var b=this.$scope.model.size*a.DensityServicePixelToRemFactor;return b+"rem"},b.prototype.getRoundProgressActualWidth=function(){var b=Math.max(12,Math.min(28,this.$scope.model.size)),c=b*a.DensityServicePixelToRemFactor;return this.$scope.model.size=b,12*c+"rem"},b.$inject=["$scope","ionweb.bannerService"],b}();angular.module("ionwebTk").directive("ionwebBannerProgress",[function(){return new b}]).controller("ionwebBannerProgressController",c)}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){this.scope={model:"=",config:"=",editable:"=",placeholder:"=?"},this.restrict="E",this.controller="ionwebBannerTextController",this.controllerAs="ctrl",this.templateUrl="toolkit/banner/bannerText.tpl.html"}return a}(),c=function(){function b(a,b){var c=this;this.$scope=a,this.bannerService=b,a.$watch("model",function(){c.buildClassesAndStyle(),c.checkPlaceholder()},!0),a.$watch("config.colorOverride",function(){return c.buildClassesAndStyle()})}return b.prototype.checkPlaceholder=function(){var b=this.$scope.model;b&&(null==b.content||b.content.trim().length<1)&&(b.content=this.$scope.placeholder||a.BannerService.PLACEHOLDER_TEXT)},b.prototype.buildClassesAndStyle=function(){var b=this.$scope.model,c=this.$scope.config||{},d=this.$scope.placeholder||a.BannerService.PLACEHOLDER_TEXT;if(b){var e=["align-"+a.BannerTextAlignment[b.alignment]];b.wrap&&e.push("wrap"),b.content===d&&e.push("placeholder"),e=this.bannerService.cleanClasses(e);var f=b.size*a.DensityServicePixelToRemFactor,g={"font-size":f+"rem"},h=(c.colorOverride||b.color||"").replace("@"+a.THEME_PREFIX+"-","@"),i=a.getThemeClass(h,"fg");i?e.push(i):g.color=h,b.classes&&(e=e.concat(b.classes)),this.contentClasses=e,this.contentStyle=g}},b.$inject=["$scope","ionweb.bannerService"],b}();angular.module("ionwebTk").directive("ionwebBannerText",[function(){return new b}]).controller("ionwebBannerTextController",c)}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("contenteditable",function(){return{restrict:"A",require:"ngModel",replace:!0,link:function(a,b,c,d){function e(){var a=b.html().replace(/\u00A0/g," ");d.$setViewValue(a)}d.$render=function(){b.html(d.$viewValue||"")},b.bind("paste",function(a){function b(a){var b,c;if(window.getSelection)b=window.getSelection(),b.getRangeAt&&b.rangeCount&&(c=b.getRangeAt(0),c.deleteContents(),c.insertNode(document.createTextNode(a)));else{var d=document;d.selection&&d.selection.createRange&&(d.selection.createRange().text=a)}}var c=a.originalEvent;if(c.preventDefault(),c.clipboardData&&c.clipboardData.getData){var d=c.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,d)}else{var e=window;if(e.clipboardData&&e.clipboardData.getData){var d=e.clipboardData.getData("Text");b(d)}}}),b.bind("blur change",function(){a.$evalAsync(e)})}}})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={})),angular.module("ionwebTk").constant("roundProgressConfig",{max:50,semi:!1,rounded:!1,responsive:!1,clockwise:!0,radius:100,color:"#45ccce",fgClass:"",bgcolor:"#eaeaea",bgClass:"",stroke:15,duration:800,animation:"easeOutCubic",animationDelay:0,offset:0}),angular.module("ionwebTk").service("roundProgressService",["$window",function(a){function b(a,b,c,d){var e=(d-90)*Math.PI/180,f=a+c*Math.cos(e),g=b+c*Math.sin(e);return f+" "+g}var c={},d=angular.isNumber,e=document.head.querySelector("base");return c.isSupported=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),c.resolveColor=e&&e.href?function(a){var b=a.indexOf("#");return b>-1&&a.indexOf("url")>-1?a.slice(0,b)+window.location.href+a.slice(b):a}:function(a){return a},c.toNumber=function(a){return d(a)?a:parseFloat((a+"").replace(",","."))},c.getOffset=function(a,b){var c=+b.offset||0;if("inherit"===b.offset)for(var d=a.$parent;d;){if(d.hasOwnProperty("$$getRoundProgressOptions")){var e=d.$$getRoundProgressOptions();c+=(+e.offset||0)+(+e.stroke||0)}d=d.$parent}return c},c.getTimestamp=a.performance&&a.performance.now&&angular.isNumber(a.performance.now())?function(){return a.performance.now()}:function(){return(new a.Date).getTime()},c.updateState=function(a,c,d,e,f,g){if(!f)return e;var h=a>0?Math.min(a,c):0,i=g?180:359.9999,j=0===c?0:h/c*i,k=b(f,f,d,j),l=b(f,f,d,0),m=j<=180?0:1,n="M "+k+" A "+d+" "+d+" 0 "+m+" 0 "+l;return e.attr("d",n)},c.animations={linearEase:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),-(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f))+b)},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),g*Math.pow(2,-10*a)*Math.sin((a*d-e)*(2*Math.PI)/f)+c+b)},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;return 0==a?b:2==(a/=d/2)?b+c:(f||(f=d*(.3*1.5)),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),a<1?-.5*(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f))+b:g*Math.pow(2,-10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f)*.5+c+b)},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*(a*a*(((e*=1.525)+1)*a-e))+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,d,e){return d-c.animations.easeOutBounce(e-a,0,d,e)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,d,e){return a<e/2?.5*c.animations.easeInBounce(2*a,0,d,e)+b:.5*c.animations.easeOutBounce(2*a-e,0,d,e)+.5*d+b}},c}]),angular.module("ionwebTk").directive("roundProgress",["$window","roundProgressService","roundProgressConfig",function(a,b,c){var d={restrict:"EA",replace:!0,transclude:!0,scope:{current:"=",max:"=",semi:"=",rounded:"=",clockwise:"=",responsive:"=",onRender:"=",radius:"@",color:"@",fgClass:"@",bgcolor:"@",bgClass:"@",stroke:"@",duration:"@",animation:"@",offset:"@",animationDelay:"@"}};return b.isSupported?angular.extend(d,{link:function(e,f,g){function h(a){return g.hasOwnProperty(a)}var i,j,k=!f.hasClass("round-progress-wrapper"),l=k?f:f.find("svg").eq(0),m=l.find("path").eq(0),n=l.find("circle").eq(0),o=angular.copy(c),p=0;e.$$getRoundProgressOptions=function(){return o};var q=function(){var a=o.semi,c=o.responsive,d=+o.radius||0,g=+o.stroke,h=2*d,i=d-g/2-b.getOffset(e,o);l.css({top:0,left:0,position:c?"absolute":"static",width:c?"100%":h+"px",height:c?"100%":(a?d:h)+"px",overflow:"hidden"}),k||l[0].setAttribute("viewBox","0 0 "+h+" "+(a?d:h)),f.css({width:c?"100%":"auto",position:"relative",paddingBottom:c?a?"50%":"100%":0}),m.attr({class:o.fgClass||""}).css({stroke:o.fgClass?"":b.resolveColor(o.color),strokeWidth:g,strokeLinecap:o.rounded?"round":"butt"}),a?m.attr("transform",o.clockwise?"translate(0, "+h+") rotate(-90)":"translate("+h+", "+h+") rotate(90) scale(-1, 1)"):m.attr("transform",o.clockwise?"":"scale(-1, 1) translate("+-h+" 0)"),n.attr({class:o.bgClass||"",cx:d,cy:d,r:i>=0?i:0}).css({strokeWidth:g,stroke:o.bgClass?"":b.resolveColor(o.bgcolor)})},r=function(c,d,g){var h=b.toNumber(o.max||0),j=c>0?a.Math.min(c,h):0,k=d===j||d<0?0:d||0,n=j-k,q=b.animations[o.animation],r=+o.duration||0,s=g||c>h&&d>h||c<0&&d<0||r<25,t=b.toNumber(o.radius),u=t-o.stroke/2-b.getOffset(e,o),v=o.semi;l.attr({"aria-valuemax":h,"aria-valuenow":j});var w=function(){if(s)b.updateState(j,h,u,m,t,v),o.onRender&&o.onRender(j,o,f);else{var c=b.getTimestamp(),d=++p;a.requestAnimationFrame(function e(){var g=a.Math.min(b.getTimestamp()-c,r),i=q(g,k,n,r);b.updateState(i,h,u,m,t,v),o.onRender&&o.onRender(i,o,f),d===p&&g<r&&a.requestAnimationFrame(e)})}};o.animationDelay>0?(a.clearTimeout(i),a.setTimeout(w,o.animationDelay)):w()},s=Object.keys(d.scope).filter(function(a){return h(a)&&"current"!==a});e.$watchGroup(s,function(a){for(var b=0;b<a.length;b++)"undefined"!=typeof a[b]&&(o[s[b]]=a[b]);q(),e.$broadcast("$parentOffsetChanged"),"inherit"!==o.offset||j?"inherit"!==o.offset&&j&&j():j=e.$on("$parentOffsetChanged",function(){r(e.current,e.current,!0),q()})}),e.$watchGroup(["current","max","radius","stroke","semi","offset"].filter(h),function(a,c){r(b.toNumber(a[0]),b.toNumber(c[0]))})},template:function(a){for(var b=a.parent(),c="round-progress",d=['<svg class="'+c+'" xmlns="http://www.w3.org/2000/svg" role="progressbar" aria-valuemin="0">','<circle fill="none"/>','<path fill="none"/>',"<g ng-transclude></g>","</svg>"];b.length&&b[0].nodeName.toLowerCase()!==c&&"undefined"==typeof b.attr(c);)b=b.parent();return b&&b.length||(d.unshift('<div class="round-progress-wrapper">'),d.push("</div>")),d.join("\n")}}):angular.extend(d,{template:'<div class="round-progress" ng-transclude></div>'})}]);var ionweb;
!function(a){var b;!function(a){var b=function(b,c,d,e){b.onAction=function(a){d.dispatchAction({uid:b.uid,action:a})};var f=function(){return{dragStart:function(a,c,e){var f=d.getDndSourceId();if(f){var g={uid:b.uid,containerUid:f},h=!0;if(b.dndOptions&&"function"==typeof b.dndOptions.onDragStart){var i={uid:b.uid,dataTransfer:c,cancel:!1};b.dndOptions.onDragStart(i),h=!i.cancel}h&&c.setData("INTERACTIVE_LIST_ITEM_DND_TYPE",g)}}}},g=new a.DnDDragWrapper(c,f,e);b.$on("$destroy",function(){g.dispose()})};angular.module("ionwebTk").directive("actionableItem",["ionwebTk.loggerFactory",function(a){return{scope:{uid:"@",actions:"=?",dndOptions:"=?"},transclude:!0,require:"^?interactiveList",templateUrl:"toolkit/actionableItem/actionableItem.tpl.html",link:function(c,d,e,f){return b(c,d,f,a)}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){angular.module("ionwebTk").directive("ionwebCustomContent",["$templateCache","$compile",function(a,b){return{link:function(c,d){var e=c.templateUrl&&a.get(c.templateUrl)||c.template;if(e){var f=c.templateScope;f||(f=c.$new(),c.$on("$destroy",function(){f.$destroy()}));var g=b(e)(f);d.append(g)}},restrict:"EA",replace:!0,scope:{templateUrl:"@?",template:"=?",templateScope:"=?"}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(a,b){return void 0===b&&(b="vertical"),"horizontal"===a||"horizontal-inverse"===a||"vertical"===a||"vertical-inverse"===a?a:b},c=function(){function a(){this._orientation="vertical",this._isCollapsed=!1,this.title="Panel",this.updateClasses()}return Object.defineProperty(a.prototype,"orientation",{get:function(){return this._orientation},set:function(a){this._orientation!=a&&(this._orientation=a,this.updateClasses())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"collapsedOrientation",{get:function(){return this._collapsedOrientation},set:function(a){this._collapsedOrientation!=a&&(this._collapsedOrientation=a,this.updateClasses())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isCollapsed",{get:function(){return this._isCollapsed},set:function(a){this._isCollapsed!=a&&(this._isCollapsed=a,this.updateClasses())},enumerable:!0,configurable:!0}),a.prototype.updateClasses=function(){this.containerClasses=this.getContainerClasses(),this.headingGlyphClasses=this.getHeadingGlyphClasses()},a.prototype.getActualOrientation=function(){var a=b(this.orientation);return this.isCollapsed?b(this.collapsedOrientation,a):a},a.prototype.getContainerClasses=function(){var a=[];return this.isCollapsed&&a.push("collapsed"),a.push(this.getActualOrientation()),a},a.prototype.getHeadingGlyphClasses=function(){var a=["glyphicon"],c=b(this.orientation),d=b(this.collapsedOrientation,c),e="glyphicon-chevron-";return e+=this.isCollapsed?"vertical"===d?"down":"vertical-inverse"===d?"up":"horizontal-inverse"===d?"left":"right":"vertical"===c?"up":"vertical-inverse"===c?"down":"horizontal-inverse"===c?"right":"left",a.push(e),a},a}();angular.module("ionwebTk").directive("collapsiblePane",[function(){return{scope:{},bindToController:{title:"@?",titleTemplate:"=?",titleTemplateUrl:"@?",titleTemplateScope:"=?",isCollapsed:"=?",orientation:"@?",collapsedOrientation:"@?",paneSettings:"=?"},controller:function(){return new c},controllerAs:"ctrl",templateUrl:"toolkit/collapsiblePane/collapsiblePane.tpl.html",transclude:!0,replace:!0}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){angular.module("ionwebTk").directive("interactiveList",[function(){return{controller:["$scope","$attrs","$element",c],controllerAs:"ctrl"}}]);var c=function(){function c(a,b,c,d){var e=this;this.$scope=a,this.$attrs=b,this.$element=c,this.loggerFactory=d,this.belowDecorator="dnd-insert-below-decorator",this.aboveDecorator="dnd-insert-above-decorator",b.$observe("onDndAction",function(a){e.destroyDnd(),e._dndDispatchHandler=a,e.createDnd()}),b.$observe("dndSourceId",function(a){e._dndSourceId=a}),a.$on("$destroy",function(){e.destroyDnd()})}return c.prototype.createDnd=function(){var a=this;if(this._dndDispatchHandler){var c=function(){return{dragEnter:function(b,c,d){return a.onDragEnter(b,c,d)},dragOver:function(b,c,d){return a.onDragOver(b,c,d)},dragLeave:function(b,c){return a.onDragLeave(b,c)},drop:function(b,c,d){return a.drop(b,c,d)}}};this._dndWrapper=new b.DnDDropWrapper(this.$element,c,this.loggerFactory)}},c.prototype.destroyDnd=function(){this._dndDispatchHandler=null,this._dndWrapper&&this._dndWrapper.dispose()},c.prototype.dispatchAction=function(a){var b=this.$attrs.onAction;b&&(this.$scope.$action=a,this.$scope.$eval(b))},c.prototype.dispatchDndAction=function(a,b){this._dndDispatchHandler&&(this.$scope.$dndAction=a,this.$scope.$dataTransfer=b,this.$scope.$eval(this._dndDispatchHandler))},c.prototype.appWantDenyDropping=function(a,b){var c=this.$attrs.onCanDrop;return!!c&&(this.$scope.$dndAction=a,this.$scope.$dataTransfer=b,!this.$scope.$eval(c))},c.prototype.createAction=function(a,b,c){var d=b.getData("INTERACTIVE_LIST_ITEM_DND_TYPE");if(d){var e=d.containerUid,f=this.getHoveredActionableItem(a,c),g=f&&f.getAttribute("uid"),h=f&&this.isEventOnTopHalf(f,c)?"BEFORE":"AFTER",i=(this._dndSourceId===e?"DND_MOVE_":"DND_INSERT_")+h;return{uid:d.uid,action:i,actionData:{targetUid:g,containerUid:e}}}return null},c.prototype.canDrop=function(a,b,c){if(this.isDndActive()){var d=b.getData("INTERACTIVE_LIST_ITEM_DND_TYPE"),e=!!d;if(e){var f=this.createAction(a,b,c);if(f&&this.appWantDenyDropping(f,b))return!1}return e}return!1},c.prototype.onDragEnter=function(a,b,c){return this.canDrop(a,b,c)},c.prototype.onDragOver=function(b,c,d){if(this.canDrop(b,c,d)){this.cleanClasses();var e=this.getHoveredActionableItem(b,d);if(e)$(e).addClass(this.isEventOnTopHalf(e,d)?this.aboveDecorator:this.belowDecorator);else{var f=this.$element.find(".actionable-item").last();f&&$(f.parent()).addClass(this.belowDecorator)}return a.DnDDropEffect.Move}return a.DnDDropEffect.None},c.prototype.onDragLeave=function(a,b){this.isDndActive()&&this.cleanClasses()},c.prototype.drop=function(a,b,c){if(this.isDndActive()){this.cleanClasses();var d=this.createAction(a,b,c);d&&this.dispatchDndAction(d,b)}},c.prototype.isDndActive=function(){return!!this._dndDispatchHandler},c.prototype.getDndSourceId=function(){return this._dndSourceId},c.prototype.getHoveredActionableItem=function(a,b){var c=b.clientX,d=b.clientY,e=document.elementFromPoint(c,d),f=$(e).closest(".actionable-item");return f&&f.length?f.parent()[0]:null},c.prototype.isEventOnTopHalf=function(a,b){var c=a.getBoundingClientRect(),d=b.clientY-c.top;return d<c.height/2},c.prototype.cleanClasses=function(){var a=this;this.$element.children().each(function(b,c){$(c).removeClass(a.belowDecorator),$(c).removeClass(a.aboveDecorator)})},c}();b.InteractiveListController=c}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=0,c=100,d=function(){function a(a){var b=this;this.$document=a,this.restrict="E",this.scope={type:"@?",position:"=?",minPosition:"=?",maxPosition:"=?"},this.transclude=!0,this.templateUrl="toolkit/splitPane/ionwebSplitPane.tpl.html",this.link=function(a,c,d,f,g){new e(a,c,b.$document,g)}}return a}(),e=function(){function a(a,b,c,d){var e=this;this.$scope=a,this.$element=b,this.$document=c,this.onMouseMove=function(a){var b,c,d=a.originalEvent;"vertical"===e.$scope.type?(b=a.clientX||d.touches&&d.touches[0].clientX||0,c=e.$element.width()):(b=a.clientY||d.touches&&d.touches[0].clientY||0,c=e.$element.height());var f=(b-e.containerOffset)/c*100;e.updatePosition(f)},this.onMouseDown=function(a){var b=a.target&&$(a.target).parent(".prevent-split-drag");b&&b.length||(a.preventDefault(),e.containerOffset="vertical"===e.$scope.type?e.$element.offset().left:e.$element.offset().top,e.$document.on("mousemove touchmove",e.onMouseMove),e.$document.on("touchend mouseup",e.onMouseUp))},this.onMouseUp=function(){e.$document.off("touchmove mousemove",e.onMouseMove),e.$document.off("touchend mouseup",e.onMouseUp),e.$scope.$evalAsync(function(){e.$scope.position=e.splitterPosition})},angular.isUndefined(a.type)&&(this.$scope.type="horizontal"),this.$scope.showSplitter=!0,this.firstContainer=b.find(".ionweb-split-pane-content").first(),this.secondContainer=b.find(".ionweb-split-pane-content").eq(1),this.splitter=b.find(".ionweb-split-pane-splitter"),d(a.$parent,function(a){var b=".ionweb-split-pane-custom-splitter",c=":not(:text):not("+b+")",d=a.filter(c).first();e.firstContainer.append(d),setTimeout(function(){var d=a.filter(c).eq(1);if(e.secondContainer.append(d),d.length<=0||"none"==d.css("display"))return void(e.$scope.showSplitter=!1);var f=a.filter(b).first();f&&e.splitter.append(f),angular.isDefined(e.$scope.position)&&e.updatePosition(e.$scope.position)})}),this.$scope.$watchGroup(["type","position","minPosition","maxPosition"],function(a,b){angular.equals(a,b)||e.updatePosition(e.$scope.position)}),this.splitter.on("mousedown touchstart",this.onMouseDown),a.$on("$destroy",function(){e.splitter.off("mousedown touchstart",e.onMouseDown)})}return a.prototype.updatePosition=function(a){this.splitterPosition=Math.min(Math.max(a,this.$scope.minPosition||b),this.$scope.maxPosition||c);var d=this.splitterPosition+"%",e="vertical"===this.$scope.type?{width:d,minWidth:d,maxWidth:d,height:"",minHeight:"",maxHeight:""}:{width:"",minWidth:"",maxWidth:"",height:d,minHeight:d,maxHeight:d};this.firstContainer.css(e)},a}();angular.module("ionwebTk").directive("ionwebSplitPane",["$document",function(a){return new d(a)}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var filesaver;!function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=window,c=b.document,d=function(){return b.URL||b.webkitURL||b},e=c.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in e,g=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},h=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),i=b.webkitRequestFileSystem,j=b.requestFileSystem||i||b.mozRequestFileSystem,k=function(a){(b.setImmediate||b.setTimeout)(function(){throw a},0)},l="application/octet-stream",m=0,n=500,o=function(a){var c=function(){"string"==typeof a?d().revokeObjectURL(a):a.remove()};b.chrome?c():setTimeout(c,n)},p=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){k(a)}}},q=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},r=function(a,c,k){k||(a=q(a));var n,r,s,t=this,u=a.type,v=!1,w=function(){p(t,"writestart progress write writeend".split(" "))},x=function(){if(r&&h&&"undefined"!=typeof FileReader){var c=new FileReader;return c.onloadend=function(){var a=c.result;r.location.href="data:attachment/file"+a.slice(a.search(/[,;]/)),t.readyState=t.DONE,w()},c.readAsDataURL(a),void(t.readyState=t.INIT)}if(!v&&n||(n=d().createObjectURL(a)),r)r.location.href=n;else{var e=b.open(n,"_blank");void 0==e&&h&&(b.location.href=n)}t.readyState=t.DONE,w(),o(n)},y=function(a){return function(){if(t.readyState!==t.DONE)return a.apply(this,arguments)}},z={create:!0,exclusive:!1};return t.readyState=t.INIT,c||(c="download"),f?(n=d().createObjectURL(a),e.href=n,e.download=c,void setTimeout(function(){g(e),w(),o(n),t.readyState=t.DONE})):(b.chrome&&u&&u!==l&&(s=a.slice||a.webkitSlice,a=s.call(a,0,a.size,l),v=!0),i&&"download"!==c&&(c+=".download"),(u===l||i)&&(r=b),j?(m+=a.size,void j(b.TEMPORARY,m,y(function(b){b.root.getDirectory("saved",z,y(function(b){var d=function(){b.getFile(c,z,y(function(b){b.createWriter(y(function(c){c.onwriteend=function(a){r.location.href=b.toURL(),t.readyState=t.DONE,p(t,"writeend",a),o(b)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=t["on"+a]}),c.write(a),t.abort=function(){c.abort(),t.readyState=t.DONE},t.readyState=t.WRITING}),x)}),x)};b.getFile(c,{create:!1},y(function(a){a.remove(),d()}),y(function(a){a.code===a.NOT_FOUND_ERR?d():x()}))}),x)}),x)):void x())},s=r.prototype;a.saveAs=function(a,b,c){return new r(a,b,c)},"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&(a.saveAs=function(a,b,c){return c||(a=q(a)),navigator.msSaveOrOpenBlob(a,b||"download")}),s.abort=function(){var a=this;a.readyState=a.DONE,p(a,"abort")},s.readyState=s.INIT=0,s.WRITING=1,s.DONE=2,s.error=s.onwritestart=s.onprogress=s.onwrite=s.onabort=s.onerror=s.onwriteend=null}}(filesaver||(filesaver={}));var ionweb;!function(a){var b=function(){function b(a){this.notification=a}return b.prototype.exportFile=function(b,c,d){if(this.hook)this.hook.exportFile(b,c,d);else try{var e=null;if(d)try{var f=File;e=new f([b],d,{type:c})}catch(a){}e||(e=new Blob([b],{type:c})),filesaver.saveAs(e,d)}catch(b){this.notification.showError(a.toolkit.Strings.Err_FileExpService_ThisBrowser_NotSupport_ExportingFiles)}},b.prototype.installHook=function(a){this.hook=a},b}();a.FileExportService=b,angular.module("ionwebTk").service("ionweb.fileExportService",["ionwebTk.notificationService",function(a){return new b(a)}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.Square=0]="Square",a[a.Rectangle1=1]="Rectangle1",a[a.Rectangle2=2]="Rectangle2"}(b=a.TileType||(a.TileType={}));var c;!function(a){a[a.Error=0]="Error",a[a.Warning=1]="Warning",a[a.Info=2]="Info",a[a.Custom=3]="Custom"}(c=a.TileFeedbackStatus||(a.TileFeedbackStatus={}));var d;!function(a){a[a.Normal=0]="Normal",a[a.Selected=1]="Selected",a[a.Disabled=2]="Disabled"}(d=a.TileState||(a.TileState={}));var e;!function(a){a[a.Left=0]="Left",a[a.Right=1]="Right",a[a.Top=2]="Top",a[a.Bottom=3]="Bottom",a[a.Center=4]="Center"}(e=a.IconPosition||(a.IconPosition={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){function b(){return d.slice()}function c(a){return!!a&&d.indexOf(a)>=0}var d=["blue","blue-medium","blue-light","heavy-blue","bright-blue","blue-background","orange","orange-medium","orange-light","orange-background","bright-orange","red","red-medium","red-light","bright-red","heavy-red","red-background","green","green-medium","green-light","bright-green","heavy-green","green-background","violet","violet-medium","violet-light","violet-background","turquoise","turquoise-medium","turquoise-light","turquoise-background","bright-purple","heavy-purple","light-brown","heavy-brown","light-grey","heavy-grey","light-peach","light-yellow","light-sand","light-stone","bright-jade"];a.SDK_COLOR_PALETTE=["@ion-branding-blue-medium","@ion-branding-orange","@ion-branding-green-medium","@ion-branding-bright-red","@ion-branding-bright-purple","@ion-branding-light-brown","@ion-branding-red-light","@ion-branding-light-grey","@ion-branding-light-sand","@ion-branding-bright-blue"],a.getAllPaletteColor=b,a.isValidIonPaletteColor=c}(ionweb||(ionweb={}));var spectrum;!function(a){function b(b,c,d,e){for(var f=[],g=0;g<b.length;g++){var h=b[g];if(h){var i=a.tinycolor(h),j=i.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";j+=a.tinycolor.equals(c,h)?" sp-thumb-active":"";var k=i.toString(e.preferredFormat||"rgb"),l=X?"background-color:"+i.toRgbString():"filter:"+i.toFilter();f.push('<span title="'+k+'" data-color="'+i.toRgbString()+'" class="'+j+'"><span class="sp-thumb-inner" style="'+l+';" /></span>')}else{var m="sp-clear-display";f.push(T("<div />").append(T('<span data-color="" style="background-color:transparent;" class="'+m+'"></span>').attr("title",e.noColorSelectedText)).html())}}return"<div class='sp-cf "+d+"'>"+f.join("")+"</div>"}function c(){for(var a=0;a<V.length;a++)V[a]&&V[a].hide()}function d(a,b){var c=T.extend({},U,a);return c.callbacks={move:i(c.move,b),change:i(c.change,b),tagChange:i(c.tagChange,b),show:i(c.show,b),hide:i(c.hide,b),beforeShow:i(c.beforeShow,b)},c}function e(e,g){function i(){function a(a){return a.data&&a.data.ignore?(Wa=null,H(T(a.target).closest(".sp-thumb-el").data("color")),K()):(Wa=null,H(T(a.target).closest(".sp-thumb-el").data("color")),K(),pa.hideAfterPaletteSelect?(N(!0),D()):N()),!1}function b(a){var b=T(a.target).closest(".sp-tag-row"),c=b.data("tag-name");return F(c),!1}if(!$){if($=T(Z,Ta).addClass(ta),_=$.find(".sp-picker-container"),aa=$.find(".sp-color"),ba=$.find(".sp-dragger"),ca=$.find(".sp-hue"),da=$.find(".sp-slider"),ea=$.find(".sp-alpha-inner"),fa=$.find(".sp-alpha"),ga=$.find(".sp-alpha-handle"),ha=$.find(".sp-input"),ia=$.find(".sp-palette"),ja=$.find(".sp-tags"),ka=$.find(".sp-initial"),la=$.find(".sp-cancel"),ma=$.find(".sp-clear"),na=$.find(".sp-choose"),oa=$.find(".sp-palette-toggle"),W&&$.find("*:not(input)").attr("unselectable","on"),m(),gb||ma.hide(),qa)Ua.after($).hide();else{var c="parent"===pa.appendTo?Ua.parent():T(pa.appendTo);1!==c.length&&(c=T("body")),c.append($)}o(),$.click(h),ha.change(y),ha.on("paste",function(){setTimeout(y,1)}),ha.keydown(function(a){13==a.keyCode&&y()}),la.text(pa.cancelText),la.on("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),E(),D()}),ma.attr("title",pa.clearText),ma.on("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),fb=!0,K(),qa&&N(!0)}),na.text(pa.chooseText),na.on("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),W&&ha.is(":focus")&&ha.trigger("change"),J()&&(N(!0),D())}),oa.text(pa.showPaletteOnly?pa.togglePaletteMoreText:pa.togglePaletteLessText),oa.on("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),pa.showPaletteOnly=!pa.showPaletteOnly,pa.showPaletteOnly||qa||$.css("left","-="+(_.outerWidth(!0)+5)),m()}),j(fa,function(a,b,c){Ja=a/Da,fb=!1,c.shiftKey&&(Ja=Math.round(10*Ja)/10),K()},w,x),j(ca,function(a,b){Ga=parseFloat(b/Ba),fb=!1,pa.showAlpha||(Ja=1),K()},w,x),j(aa,function(a,b,c){if(c.shiftKey){if(!Sa){var d=Ha*ya,e=za-Ia*za,f=Math.abs(a-d)>Math.abs(b-e);Sa=f?"x":"y"}}else Sa=null;var g=!Sa||"x"===Sa,h=!Sa||"y"===Sa;g&&(Ha=parseFloat(a/ya)),h&&(Ia=parseFloat((za-b)/za)),fb=!1,pa.showAlpha||(Ja=1),K()},w,x),qa&&A();var d=W?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ia.on(d,".sp-thumb-el",a),ka.on(d,".sp-thumb-el:nth-child(1)",{ignore:!0},a),ja.on(d,".sp-tag-row",b)}}function m(){if(pa.showPaletteOnly&&(pa.showPalette=!0),pa.palette){Ka=pa.palette.slice(0),Ma=T.isArray(Ka[0])?Ka:[Ka],Oa={};for(var b=0;b<Ma.length;b++)for(var c=0;c<Ma[b].length;c++){var d=a.tinycolor(Ma[b][c]).toRgbString();Oa[d]=!0}}pa.tags&&(La=pa.tags.slice(0),Na=La),$&&(oa.text(pa.showPaletteOnly?pa.togglePaletteMoreText:pa.togglePaletteLessText),$.toggleClass("sp-flat",qa),$.toggleClass("sp-input-disabled",!pa.showInput),$.toggleClass("sp-alpha-enabled",pa.showAlpha),$.toggleClass("sp-clear-enabled",gb),$.toggleClass("sp-buttons-disabled",!pa.showButtons),$.toggleClass("sp-palette-buttons-disabled",!pa.togglePaletteOnly),$.toggleClass("sp-palette-disabled",!pa.showPalette),$.toggleClass("sp-tags-disabled",!pa.showTags),$.toggleClass("sp-palette-only",pa.showPaletteOnly),$.toggleClass("sp-initial-disabled",!pa.showInitial),$.addClass(pa.className).addClass(pa.containerClassName),O())}function n(){_a.on("click.spectrum touchstart.spectrum",function(a){Va||z(),a.stopPropagation(),T(a.target).is("input")||a.preventDefault()}),Za&&Ua.after($a).hide(),(Ua.is(":disabled")||pa.disabled===!0)&&S(),o(),m(),bb?(H(bb),L(),db=pa.preferredFormat||a.tinycolor(bb).format,p(bb)):L()}function o(){if(sa&&window.localStorage){try{var a=window.localStorage[sa].split(",#");a.length>1&&(delete window.localStorage[sa],T.each(a,function(a,b){p(b)}))}catch(a){}try{Pa=window.localStorage[sa].split(";")}catch(a){}}}function p(b){if(ra){var c=a.tinycolor(b).toRgbString();if(!Oa[c]&&T.inArray(c,Pa)===-1)for(Pa.push(c);Pa.length>Qa;)Pa.shift();if(sa&&window.localStorage)try{window.localStorage[sa]=Pa.join(";")}catch(a){}}}function q(){var b=[];if(pa.showPalette)for(var c=0;c<Pa.length;c++){var d=a.tinycolor(Pa[c]).toRgbString();Oa[d]||b.push(Pa[c])}return b.reverse().slice(0,pa.maxSelectionSize)}function r(){var a=I(),c=T.map(Ma,function(c,d){return b(c,a,"sp-palette-row sp-palette-row-"+d,pa)});o(),Pa&&c.push(b(q(),a,"sp-palette-row sp-palette-row-selection",pa)),ia.html(c.join(""))}function s(a){for(var b=0;b<Na.length;b++)if(Na[b].name===a)return Na[b];return null}function t(){var a=T.map(Na,function(a,b){return u(a,"sp-tag-row sp-tag-row-"+b,pa)});ja.html(a.join(""))}function u(b,c,d){var e=[],f=c?c.split(" "):[];f.push("sp-cf");var g=[b.cssClass];g.push("sp-thumb-el"),Wa===b&&g.push("sp-thumb-active");var h=T("."+b.cssClass).css("background-color");if(h){var i=a.tinycolor(h);g.push(i.toHsl().l<.5?"sp-thumb-dark":"sp-thumb-light")}var j=["sp-tag-label"];return e.push("<span class='"+g.join(" ")+"' title='"+b.displayName+"'><span class='sp-thumb-inner' /></span>"),e.push("<span class='"+j.join(" ")+"'>"+b.displayName+"</span>"),"<div data-tag-name='"+b.name+"' class='"+f.join(" ")+"'>"+e.join("")+"</div>"}function v(){if(pa.showInitial){var a=cb,c=I();ka.html(b([a,c],c,"sp-palette-row-initial",pa))}}function w(){(za<=0||ya<=0||Ba<=0)&&O(),xa=!0,$.addClass(Ra),Sa=null,Ua.trigger("dragstart.spectrum",[I()])}function x(){xa=!1,$.removeClass(Ra),Ua.trigger("dragstop.spectrum",[I()])}function y(){var b=ha.val();if(null!==b&&""!==b||!gb){var c=a.tinycolor(b);c.isValid()?(H(c),K(),N()):ha.addClass("sp-validation-error")}else H(null),K(),N()}function z(){wa?D():A()}function A(){if(wa)return void O();i();var a=T.Event("beforeShow.spectrum");Ua.trigger(a,[I()]),ua.beforeShow(I())===!1||a.isDefaultPrevented()||(c(),wa=!0,T(Ta).on("keydown.spectrum",B),T(Ta).on("click.spectrum",C),T(window).on("resize.spectrum",va),$a.addClass("sp-active"),$.removeClass("sp-hidden"),L(),O(),cb=I(),v(),ua.show(cb),Ua.trigger("show.spectrum",[cb]))}function B(a){a.keyCode===ionweb.KeyCodes.ESC&&D()}function C(a){2!=a.button&&(xa||(eb?N(!0):E(),D()))}function D(){wa&&!qa&&(wa=!1,T(Ta).off("keydown.spectrum",B),T(Ta).off("click.spectrum",C),T(window).off("resize.spectrum",va),$a.removeClass("sp-active"),$.addClass("sp-hidden"),ua.hide(I()),Ua.trigger("hide.spectrum",[I()]))}function E(){H(cb,!0),N(!0)}function F(b){var c=Wa;if(Wa=s(b)){var d=T("."+Wa.cssClass).css("background-color");if(d){var e=a.tinycolor(d);0===e.getAlpha()?window.setTimeout(function(){var a=T("."+Wa.cssClass).css("background-color");H(a)},1e3):H(d)}else L()}Wa!==c&&ua.tagChange&&ua.tagChange(b)}function G(){return Wa?Wa.name:null}function H(b,c){if(a.tinycolor.equals(b,I()))return void L();var d,e;!b&&gb?fb=!0:(b||(b="transparent"),fb=!1,d=a.tinycolor(b),e=d.toHsv(),Ga=e.h%360/360,Ha=e.s,Ia=e.v,Ja=e.a),L(),d&&d.isValid()&&!c&&(db=pa.preferredFormat||d.getFormat())}function I(b){return b=b||{},gb&&fb?null:a.tinycolor.fromRatio({h:Ga,s:Ha,v:Ia,a:Math.round(1e3*Ja)/1e3},{format:b.format||db})}function J(){return!ha.hasClass("sp-validation-error")}function K(){L(),ua.move(I()),Ua.trigger("move.spectrum",[I()])}function L(){if(ha&&ha.removeClass("sp-validation-error"),$){M();var b=a.tinycolor.fromRatio({h:Ga,s:1,v:1});aa&&aa.css("background-color",b.toHexString())}var c=db;Ja<1&&(0!==Ja||"name"!==c)&&("hex"!==c&&"hex3"!==c&&"hex6"!==c&&"name"!==c||(c="rgb"));var d=I({format:c}),e="";if(ab.removeClass("sp-clear-display"),ab.css("background-color","transparent"),!d&&gb)ab.addClass("sp-clear-display");else{var f=d.toHexString(),g=d.toRgbString();if(X||1===d.alpha?ab.css("background-color",g):(ab.css("background-color","transparent"),ab.css("filter",d.toFilter())),pa.showAlpha&&$){var h=d.toRgb();h.a=0;var i=a.tinycolor(h).toRgbString(),j="linear-gradient(left, "+i+", "+f+")";W?ea.css("filter",a.tinycolor(i).toFilter({gradientType:1},f)):(ea.css("background","-webkit-"+j),ea.css("background","-moz-"+j),ea.css("background","-ms-"+j),ea.css("background","linear-gradient(to right, "+i+", "+f+")"))}e=d.toString(c)}$&&(pa.showInput&&ha.val(e),pa.showPalette&&r(),pa.showTags&&t(),v())}function M(){if($){var a=Ha,b=Ia;if(gb&&fb)ga.hide(),da.hide(),ba.hide();else{ga.show(),da.show(),ba.show();var c=a*ya,d=za-b*za;c=Math.max(-Aa,Math.min(ya-Aa,c-Aa)),d=Math.max(-Aa,Math.min(za-Aa,d-Aa)),ba.css({top:d+"px",left:c+"px"});var e=Ja*Da;ga.css({left:e-Ea/2+"px"});var f=Ga*Ba;da.css({top:f-Fa+"px"})}}}function N(b){var c=I(),d="",e=!a.tinycolor.equals(c,cb);c&&(d=c.toString(db),p(c)),Xa&&Ua.val(d),b&&e&&(ua.change(c),Ua.trigger("change",[c]))}function O(){wa&&(ya=aa.width(),za=aa.height(),Aa=ba.height(),Ca=ca.width(),Ba=ca.height(),Fa=da.height(),Da=fa.width(),Ea=ga.width(),qa||($.css("position","absolute"),pa.offset?$.offset(pa.offset):$.offset(f($,_a))),M(),pa.showPalette&&r(),pa.showTags&&t(),Ua.trigger("reflow.spectrum"))}function P(){Ua.show(),_a.off("click.spectrum touchstart.spectrum"),$&&$.remove(),$a.remove(),V[hb.id]=null}function Q(a,b){return void 0===a?T.extend({},pa):void 0===b?pa[a]:(pa[a]=b,"preferredFormat"===a&&(db=pa.preferredFormat),void m())}function R(){Va=!1,Ua.attr("disabled",!1),_a.removeClass("sp-disabled")}function S(){D(),Va=!0,Ua.attr("disabled",!0),_a.addClass("sp-disabled")}function U(a){pa.offset=a,O()}var $,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa=d(g,e),qa=pa.flat,ra=pa.showSelectionPalette,sa=pa.localStorageKey,ta=pa.theme,ua=pa.callbacks,va=k(O,10),wa=!1,xa=!1,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=1,Ka=[],La=[],Ma=[],Na=[],Oa={},Pa=pa.selectionPalette.slice(0),Qa=pa.maxSelectionSize,Ra="sp-dragging",Sa=null,Ta=e.ownerDocument,Ua=(Ta.body,T(e)),Va=!1,Wa=null,Xa=Ua.is("input"),Ya=Xa&&"color"===Ua.attr("type")&&l(),Za=Xa&&!qa,$a=Za?T(Y).addClass(ta).addClass(pa.className).addClass(pa.replacerClassName):T([]),_a=Za?$a:Ua,ab=$a.find(".sp-preview-inner"),bb=pa.color||Xa&&Ua.val(),cb=!1,db=pa.preferredFormat,eb=!pa.showButtons||pa.clickoutFiresChange,fb=!bb,gb=pa.allowEmpty&&!Ya;n();var hb={show:A,hide:D,toggle:z,reflow:O,option:Q,enable:R,disable:S,offset:U,set:function(a){H(a),N()},setTag:F,getTag:G,get:I,destroy:P,container:$};return hb.id=V.push(hb)-1,hb}function f(a,b){var c=0,d=a.outerWidth(),e=a.outerHeight(),f=b.outerHeight(),g=a[0].ownerDocument,h=g.documentElement,i=h.clientWidth+T(g).scrollLeft(),j=h.clientHeight+T(g).scrollTop(),k=b.offset(),l=k.left,m=k.top;return m+=f,l-=Math.min(l,l+d>i&&i>d?Math.abs(l+d-i):0),m-=Math.min(m,m+e>j&&j>e?Math.abs(e+f-c):c),{top:m,bottom:k.bottom,left:l,right:k.right,width:k.width,height:k.height}}function g(){}function h(a){a.stopPropagation()}function i(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function j(a,b,c,d){function e(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function f(c){if(j){if(W&&i.documentMode<9&&!c.button)return h();var d=c.originalEvent&&c.originalEvent.touches&&c.originalEvent.touches[0],f=d&&d.pageX||c.pageX,g=d&&d.pageY||c.pageY,o=Math.max(0,Math.min(f-k.left,m)),p=Math.max(0,Math.min(g-k.top,l));n&&e(c),b.apply(a,[o,p,c])}}function g(b){var d=b.which?3==b.which:2==b.button;d||j||c.apply(a,arguments)!==!1&&(j=!0,l=T(a).height(),m=T(a).width(),k=T(a).offset(),T(i).on(o),T(i.body).addClass("sp-dragging"),f(b),e(b))}function h(){j&&(T(i).off(o),T(i.body).removeClass("sp-dragging"),setTimeout(function(){d.apply(a,arguments)},0)),j=!1}b=b||function(){},c=c||function(){},d=d||function(){};var i=document,j=!1,k={},l=0,m=0,n="ontouchstart"in window,o={};o.selectstart=e,o.dragstart=e,o["touchmove mousemove"]=f,o["touchend mouseup"]=h,T(a).on("touchstart mousedown",g)}function k(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),!c&&d||(d=setTimeout(g,b))}}function l(){return T.prototype.spectrum.inputTypeColorSupport()}function m(a){var b={r:0,g:0,b:0},c=1,d=!1,e=!1;return"string"==typeof a&&(a=S(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(b=n(a.r,a.g,a.b),d=!0,e="%"===String(a.r).substr(-1)?"prgb":"rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=P(a.s),a.v=P(a.v),b=r(a.h,a.s,a.v),d=!0,e="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=P(a.s),a.l=P(a.l),b=p(a.h,a.s,a.l),d=!0,e="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=I(c),{ok:d,format:a.format||e,r:ea(255,fa(b.r,0)),g:ea(255,fa(b.g,0)),b:ea(255,fa(b.b,0)),a:c}}function n(a,b,c){return{r:255*J(a,255),g:255*J(b,255),b:255*J(c,255)}}function o(a,b,c){a=J(a,255),b=J(b,255),c=J(c,255);var d,e,f=fa(a,b,c),g=ea(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function p(a,b,c){function d(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=J(a,360),b=J(b,100),c=J(c,100),0===b)e=f=g=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function q(a,b,c){a=J(a,255),b=J(b,255),c=J(c,255);var d,e,f=fa(a,b,c),g=ea(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function r(a,b,c){a=6*J(a,360),b=J(b,100),c=J(c,100);var d=ca.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],l=[f,f,h,c,c,g][i];return{r:255*j,g:255*k,b:255*l}}function s(a,b,c,d){var e=[O(da(a).toString(16)),O(da(b).toString(16)),O(da(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function t(a,b,c,d){var e=[O(Q(d)),O(da(a).toString(16)),O(da(b).toString(16)),O(da(c).toString(16))];return e.join("")}function u(b,c){c=0===c?0:c||10;var d=a.tinycolor(b).toHsl();return d.s-=c/100,d.s=K(d.s),a.tinycolor(d)}function v(b,c){c=0===c?0:c||10;var d=a.tinycolor(b).toHsl();return d.s+=c/100,d.s=K(d.s),a.tinycolor(d)}function w(b){return a.tinycolor(b).desaturate(100)}function x(b,c){c=0===c?0:c||10;var d=a.tinycolor(b).toHsl();return d.l+=c/100,d.l=K(d.l),a.tinycolor(d)}function y(b,c){c=0===c?0:c||10;var d=a.tinycolor(b).toRgb();return d.r=fa(0,ea(255,d.r-da(255*-(c/100)))),d.g=fa(0,ea(255,d.g-da(255*-(c/100)))),d.b=fa(0,ea(255,d.b-da(255*-(c/100)))),a.tinycolor(d)}function z(b,c){c=0===c?0:c||10;var d=a.tinycolor(b).toHsl();return d.l-=c/100,d.l=K(d.l),a.tinycolor(d)}function A(b,c){var d=a.tinycolor(b).toHsl(),e=(da(d.h)+c)%360;return d.h=e<0?360+e:e,a.tinycolor(d)}function B(b){var c=a.tinycolor(b).toHsl();return c.h=(c.h+180)%360,a.tinycolor(c)}function C(b){var c=a.tinycolor(b).toHsl(),d=c.h;return[a.tinycolor(b),a.tinycolor({h:(d+120)%360,s:c.s,l:c.l}),a.tinycolor({h:(d+240)%360,s:c.s,l:c.l})]}function D(b){var c=a.tinycolor(b).toHsl(),d=c.h;return[a.tinycolor(b),a.tinycolor({h:(d+90)%360,s:c.s,l:c.l}),a.tinycolor({h:(d+180)%360,s:c.s,l:c.l}),a.tinycolor({h:(d+270)%360,s:c.s,l:c.l})]}function E(b){var c=a.tinycolor(b).toHsl(),d=c.h;return[a.tinycolor(b),a.tinycolor({h:(d+72)%360,s:c.s,l:c.l}),a.tinycolor({h:(d+216)%360,s:c.s,l:c.l})]}function F(b,c,d){c=c||6,d=d||30;var e=a.tinycolor(b).toHsl(),f=360/d,g=[a.tinycolor(b)];for(e.h=(e.h-(f*c>>1)+720)%360;--c;)e.h=(e.h+f)%360,g.push(a.tinycolor(e));return g}function G(b,c){c=c||6;for(var d=a.tinycolor(b).toHsv(),e=d.h,f=d.s,g=d.v,h=[],i=1/c;c--;)h.push(a.tinycolor({h:e,s:f,v:g})),g=(g+i)%1;return h}function H(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function I(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function J(a,b){M(a)&&(a="100%");var c=N(a);return a=ea(b,fa(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),ca.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function K(a){return ea(1,fa(0,a))}function L(a){return parseInt(a,16)}function M(a){return"string"==typeof a&&a.indexOf(".")!=-1&&1===parseFloat(a);
}function N(a){return"string"==typeof a&&a.indexOf("%")!=-1}function O(a){return 1==a.length?"0"+a:""+a}function P(a){return a<=1&&(a=100*a+"%"),a}function Q(a){return Math.round(255*parseFloat(a)).toString(16)}function R(a){return L(a)/255}function S(a){a=a.replace(_,"").replace(aa,"").toLowerCase();var b=!1;if(ha[a])a=ha[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=ja.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=ja.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=ja.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=ja.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=ja.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=ja.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=ja.hex8.exec(a))?{a:R(c[1]),r:L(c[2]),g:L(c[3]),b:L(c[4]),format:b?"name":"hex8"}:(c=ja.hex6.exec(a))?{r:L(c[1]),g:L(c[2]),b:L(c[3]),format:b?"name":"hex"}:!!(c=ja.hex3.exec(a))&&{r:L(c[1]+""+c[1]),g:L(c[2]+""+c[2]),b:L(c[3]+""+c[3]),format:b?"name":"hex"}}var T=angular.element,U={beforeShow:g,move:g,change:g,show:g,hide:g,tagChange:g,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showTags:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],tags:[],selectionPalette:[],disabled:!1,offset:null},V=[],W=!!/msie/i.exec(window.navigator.userAgent),X=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(0,0,0,.5)",a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")}(),Y=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Z=function(){var a="";if(W)for(var b=1;b<=6;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-tags-container'>","<div class='sp-tags sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",a,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),$="spectrum.id";T.prototype.spectrum=function(a,b){if("string"==typeof a){var c=this,d=Array.prototype.slice.call(arguments,1);return this.each(function(){var b=V[T(this).data($)];if(b){var e=b[a];if(!e)throw new Error("Spectrum: no such method: '"+a+"'");"get"==a?c=b.get():"getTag"==a?c=b.getTag():"container"==a?c=b.container:"option"==a?c=b.option.apply(b,d):"destroy"==a?(b.destroy(),T(this).removeData($)):e.apply(b,d)}}),c}return this.spectrum("destroy").each(function(){var b=T.extend({},T(this).data(),a),c=e(this,b);T(this).data($,c.id)})},T.prototype.spectrum.load=!0,T.prototype.spectrum.loadOpts={},T.prototype.spectrum.draggable=j,T.prototype.spectrum.defaults=U,T.prototype.spectrum.inputTypeColorSupport=function a(){if("undefined"==typeof a._cachedResult){var b=T("<input type='color'/>")[0];a._cachedResult="color"===b.type&&""!==b.value}return a._cachedResult},T.spectrum={},T.spectrum.localization={},T.spectrum.palettes={},T.prototype.spectrum.processNativeColorInputs=function(){var a=T("input[type=color]");a.length&&!l()&&a.spectrum({preferredFormat:"hex6"})};var _=/^[\s,#]+/,aa=/\s+$/,ba=0,ca=Math,da=ca.round,ea=ca.min,fa=ca.max,ga=ca.random;a.tinycolor=function(b,c){if(b=b?b:"",c=c||{},b instanceof a.tinycolor)return b;if(!(this instanceof a.tinycolor))return new a.tinycolor(b,c);var d=m(b);this._originalInput=b,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=da(1e3*this._a)/1e3,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=da(this._r)),this._g<1&&(this._g=da(this._g)),this._b<1&&(this._b=da(this._b)),this._ok=d.ok,this._tc_id=ba++},a.tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},luma:function(){var a=this._r/255,b=this._g/255,c=this._b/255;return a=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),b=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4),c=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),.2126*a+.7152*b+.0722*c},getContrastColor:function(b,c,d){if(c instanceof a.tinycolor||(c=new a.tinycolor({r:255,g:255,b:255})),b instanceof a.tinycolor||(b=new a.tinycolor({r:0,g:0,b:0})),b.luma()>c.luma()){var e=c;c=b,b=e}return d="undefined"==typeof d?.43:Number(d),this.luma()<d?c:b},setAlpha:function(a){return this._a=I(a),this._roundA=da(1e3*this._a)/1e3,this},toHsv:function(){var a=q(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=q(this._r,this._g,this._b),b=da(360*a.h),c=da(100*a.s),d=da(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=o(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=o(this._r,this._g,this._b),b=da(360*a.h),c=da(100*a.s),d=da(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return s(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return t(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:da(this._r),g:da(this._g),b:da(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+da(this._r)+", "+da(this._g)+", "+da(this._b)+")":"rgba("+da(this._r)+", "+da(this._g)+", "+da(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:da(100*J(this._r,255))+"%",g:da(100*J(this._g,255))+"%",b:da(100*J(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+da(100*J(this._r,255))+"%, "+da(100*J(this._g,255))+"%, "+da(100*J(this._b,255))+"%)":"rgba("+da(100*J(this._r,255))+"%, "+da(100*J(this._g,255))+"%, "+da(100*J(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(ia[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(b){var c="#"+t(this._r,this._g,this._b,this._a),d=c,e=this._gradientType?"GradientType = 1, ":"";if(b){var f=a.tinycolor(b);d=f.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+c+",endColorstr="+d+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),"hex"!==a&&"hex6"!==a||(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(z,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(A,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(G,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}},a.tinycolor.fromRatio=function(b,c){if("object"==typeof b){var d={};for(var e in b)b.hasOwnProperty(e)&&("a"===e?d[e]=b[e]:d[e]=P(b[e]));b=d}return a.tinycolor(b,c)},a.tinycolor.equals=function(b,c){return!(!b||!c)&&a.tinycolor(b).toRgbString()==a.tinycolor(c).toRgbString()},a.tinycolor.random=function(){return a.tinycolor.fromRatio({r:ga(),g:ga(),b:ga()})},a.tinycolor.mix=function(b,c,d){d=0===d?0:d||50;var e,f=a.tinycolor(b).toRgb(),g=a.tinycolor(c).toRgb(),h=d/100,i=2*h-1,j=g.a-f.a;e=i*j==-1?i:(i+j)/(1+i*j),e=(e+1)/2;var k=1-e,l={r:g.r*e+f.r*k,g:g.g*e+f.g*k,b:g.b*e+f.b*k,a:g.a*h+f.a*(1-h)};return a.tinycolor(l)},a.tinycolor.readability=function(b,c){var d=a.tinycolor(b),e=a.tinycolor(c),f=d.toRgb(),g=e.toRgb(),h=d.getBrightness(),i=e.getBrightness(),j=Math.max(f.r,g.r)-Math.min(f.r,g.r)+Math.max(f.g,g.g)-Math.min(f.g,g.g)+Math.max(f.b,g.b)-Math.min(f.b,g.b);return{brightness:Math.abs(h-i),color:j}},a.tinycolor.isReadable=function(b,c){var d=a.tinycolor.readability(b,c);return d.brightness>125&&d.color>500},a.tinycolor.mostReadable=function(b,c){for(var d=null,e=0,f=!1,g=0;g<c.length;g++){var h=a.tinycolor.readability(b,c[g]),i=h.brightness>125&&h.color>500,j=3*(h.brightness/125)+h.color/500;(i&&!f||i&&f&&j>e||!i&&!f&&j>e)&&(f=i,e=j,d=a.tinycolor(c[g]))}return d};var ha=a.tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ia=a.tinycolor.hexNames=H(ha),ja=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();T(function(){T.prototype.spectrum.load&&T.prototype.spectrum.processNativeColorInputs()})}(spectrum||(spectrum={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(a){this.$scope=a}return c.setColor=function(b,d,e,f,g){b&&e&&(e.removeClass(b),b="");var h=c.DefaultBackgroundClassSuffix;(a.isValidIonPaletteColor(d)||g||"theme-default"===d)&&(h=d);var i=f+h;return e&&e.addClass(i),i},c.updateHighlightAndSelectionColor=function(a,d){if(a&&d!==b.TileState.Disabled){var e=a.css("background-color"),f=new spectrum.tinycolor(e).isDark(),g=new spectrum.tinycolor(e).setAlpha(c.transparencyFactor).darken(c.lightenDarkenColorFactor).toRgbString(),h=new spectrum.tinycolor(e).setAlpha(c.transparencyFactor).lighten(c.lightenDarkenColorFactor).toRgbString(),i=f?h:g,j=f?g:h;a.css("border-color",i),a.find(".ion-tile-selection-feedback-background").css("border-top-color",i),a.find(".ion-tile-selection-feedback-icon").css("color",j)}},c.onStateChanged=function(a,c){a&&(c!==b.TileState.Selected||a.hasClass("ion-tile-selected")?c!==b.TileState.Selected&&a.removeClass("ion-tile-selected"):a.addClass("ion-tile-selected"))},c.prototype.flash=function(){var a=this;this.$scope.flashTile=!0,setTimeout(function(){a.$scope.$evalAsync(function(){return a.$scope.flashTile=!1})},300)},c.BackgoundClassPrefix="ion-tile-background-",c.TextBackgroundClassPrefix="ion-tile-text-background-",c.ForegroundClassPrefix="ion-tile-foreground-",c.DefaultBackgroundClassSuffix="default",c.DefaultTileColor="turquoise",c.SquareTileDefaultSize=100,c.RectangleTileDefaultSize=200,c.DefaultIconSizeWithLabels=26,c.DefaultIconSizeWithOneLabel=46,c.DefaultIconSizeWithoutLabels=70,c.MarginBottom="auto auto 5px",c.MarginTop="5px auto auto",c.MarginLeft="auto auto auto 5px",c.MarginRight="auto 5px auto auto",c.TextMarginTopZero="0 auto auto",c.TextMarginBottomZero="auto auto 0",c.MarginAuto="auto",c.Margin="5x",c.TilePadding=6,c.lightenDarkenColorFactor=30,c.transparencyFactor=.65,c}(),d=function(){function a(a,d,e,f,g,h,i,j){var k=this;this.$compile=a,this.$q=d,this.contextMenuService=e,this.toolkitConfigService=f,this.$templateCache=g,this.$templateRequest=h,this.iconService=i,this.environmentService=j,this.restrict="E",this.scope={primaryTextOptions:"=?",secondaryTextOptions:"=?",tileOptions:"=?",iconOptions:"=?",tileEvents:"=?",customContent:"=?",onBound:"<?"},this.replace=!1,this.templateUrl="toolkit/tile/ionwebTile.tpl.html",this.link=function(a,d,e){var f=new c(a),g=d.children(":first"),h=function(){c.updateHighlightAndSelectionColor(g,a.tileOptions.state)};k.toolkitConfigService.currentThemeChanged.add(h),d.css("display","inline-block"),d.css("min-height","36px"),d.css("min-width","36px"),d.css("outline","none"),e.$observe("tabindex",function(b){a.tabindex=b}),k.contextMenuService.attachElement(d,null,function(c){a.tileOptions.state!=b.TileState.Disabled&&a.tileEvents&&a.tileEvents.onRightClick&&a.tileEvents.onRightClick()});var i=1;k.toolkitConfigService.tile.rounding>=0&&k.toolkitConfigService.tile.rounding<=3&&(i=k.toolkitConfigService.tile.rounding),a.roundingClass="ion-tile-border-radius-option-"+i,a.primaryTextOptions=a.primaryTextOptions||{text:""},a.secondaryTextOptions=a.secondaryTextOptions||{text:""},a.tileOptions=a.tileOptions||{},a.iconOptions=a.iconOptions||{icon:""},a.onBound&&a.onBound(f),"undefined"==typeof a.tileOptions.state&&(a.tileOptions.state=b.TileState.Normal),a.tileOptions.height||(a.tileOptions.height=a.tileOptions.type===b.TileType.Rectangle2?c.RectangleTileDefaultSize+"px":c.SquareTileDefaultSize+"px"),a.tileOptions.width||(a.tileOptions.width=a.tileOptions.type===b.TileType.Rectangle1?c.RectangleTileDefaultSize+"px":c.SquareTileDefaultSize+"px"),"undefined"==typeof a.iconOptions.position&&k.switchDefaultIconPosition(a),k.addCustomContent(a,d),k.updateDisabledState(a,d),k.updateIconPosition(a),a.onLeftClick=function(){a.tileOptions.state!=b.TileState.Disabled&&a.tileEvents&&a.tileEvents.onLeftClick&&a.tileEvents.onLeftClick()},a.$watch("tileOptions.state",function(b,e){b!=e&&(c.onStateChanged(g,b),k.updateDisabledState(a,d))}),a.$watch("customContent",function(b,c){b!=c&&k.addCustomContent(a,d)}),a.$watch("tileOptions.type",function(d,e){if(d!==e){switch(a.tileOptions.type){case b.TileType.Rectangle1:a.tileOptions.height=c.SquareTileDefaultSize+"px",a.tileOptions.width=c.RectangleTileDefaultSize+"px";break;case b.TileType.Rectangle2:a.tileOptions.height=c.RectangleTileDefaultSize+"px",a.tileOptions.width=c.SquareTileDefaultSize+"px";break;default:a.tileOptions.height=c.SquareTileDefaultSize+"px",a.tileOptions.width=c.SquareTileDefaultSize+"px"}k.switchDefaultIconPosition(a),a.updateIconSize()}}),a.$watch("iconOptions.position",function(b,c){b!=c&&(k.updateIconPosition(a),a.updateIconSize())}),a.$watchGroup(["tileOptions.height","tileOptions.width"],function(b,c){d.css("height",a.tileOptions.height),d.css("width",a.tileOptions.width),a.updateIconSize()}),a.$watchGroup(["primaryTextOptions.text","secondaryTextOptions.text"],function(b,c){a.updateIconSize(),a.tileOptions.enableFlashingOnTextChange&&f.flash()}),a.$watch("tileOptions.backgroundColor",function(b,d){if(d!==b){var e=b;e&&e.length||(e=c.DefaultTileColor),a.tileBgColor=c.setColor(a.tileBgColor,e,g,c.BackgoundClassPrefix),c.updateHighlightAndSelectionColor(g,a.tileOptions.state),c.onStateChanged(g,a.tileOptions.state)}});var j=a.tileOptions&&a.tileOptions.backgroundColor;j&&j.length||(j=c.DefaultTileColor),a.tileBgColor=c.setColor(a.tileBgColor,j,g,c.BackgoundClassPrefix),c.updateHighlightAndSelectionColor(g,a.tileOptions.state),c.onStateChanged(g,a.tileOptions.state),a.$watch("primaryTextOptions.backgroundColor",function(b,d){d!==b&&(a.primaryTextBgColor=c.setColor(a.primaryTextBgColor,a.primaryTextOptions.backgroundColor,null,c.TextBackgroundClassPrefix))}),a.primaryTextBgColor=c.setColor(a.primaryTextBgColor,a.primaryTextOptions.backgroundColor,null,c.TextBackgroundClassPrefix),a.$watch("secondaryTextOptions.backgroundColor",function(b,d){d!==b&&(a.secondaryTextBgColor=c.setColor(a.secondaryTextBgColor,a.secondaryTextOptions.backgroundColor,null,c.TextBackgroundClassPrefix))}),a.secondaryTextBgColor=c.setColor(a.secondaryTextBgColor,a.secondaryTextOptions.backgroundColor,null,c.TextBackgroundClassPrefix),a.$watch("primaryTextOptions.foregroundColor",function(b,d){d!==b&&(a.primaryTextFgColor=c.setColor(a.primaryTextFgColor,a.primaryTextOptions.foregroundColor,null,c.ForegroundClassPrefix))}),a.primaryTextFgColor=c.setColor(a.primaryTextFgColor,a.primaryTextOptions.backgroundColor,null,c.ForegroundClassPrefix),a.$watch("secondaryTextOptions.foregroundColor",function(b,d){d!==b&&(a.secondaryTextFgColor=c.setColor(a.secondaryTextFgColor,a.secondaryTextOptions.foregroundColor,null,c.ForegroundClassPrefix))}),a.secondaryTextFgColor=c.setColor(a.secondaryTextFgColor,a.secondaryTextOptions.backgroundColor,null,c.ForegroundClassPrefix),a.$watchGroup(["tileOptions.feedbackStatus","tileOptions.customFeedbackStatusColor"],function(b,c){c!==b&&k.updateFeedbackStatusColor(a)}),k.updateFeedbackStatusColor(a),a.shouldShowIcon=function(){return a.iconOptions&&a.iconOptions.icon&&"undefined"!=typeof k.iconService.getDefaultSet().icons[a.iconOptions.icon]},a.shouldShowPrimaryText=function(){return!!(a.primaryTextOptions&&a.primaryTextOptions.text&&a.primaryTextOptions.text.length)},a.shouldShowSecondaryText=function(){return!!(a.secondaryTextOptions&&a.secondaryTextOptions.text&&a.secondaryTextOptions.text.length)},a.updateIconSize=function(){var e=document.createElement("div");e.style.height=a.tileOptions.height,e.style.width=a.tileOptions.width,e.style.visibility="hidden",e.style.top="0",document.body.appendChild(e);var f=$(e).outerHeight(),g=$(e).outerWidth();e.parentElement.removeChild(e);var h=k.getTileTypeBasedOnDimensions(d,f,g),i=c.DefaultIconSizeWithLabels;switch(h){case b.TileType.Rectangle1:i=c.DefaultIconSizeWithoutLabels,a.iconOptions.position!==b.IconPosition.Left&&a.iconOptions.position!==b.IconPosition.Right&&(i=k.getIconSizeDependingOnTexts(a));break;case b.TileType.Rectangle2:i=c.DefaultIconSizeWithoutLabels,a.iconOptions.position!=b.IconPosition.Left&&a.iconOptions.position!=b.IconPosition.Right||(i=c.DefaultIconSizeWithLabels,a.shouldShowPrimaryText()||a.shouldShowSecondaryText()||(i=c.DefaultIconSizeWithoutLabels));break;default:i=c.DefaultIconSizeWithLabels,a.iconOptions.position==b.IconPosition.Left||a.iconOptions.position==b.IconPosition.Right?a.shouldShowPrimaryText()||a.shouldShowSecondaryText()||(i=c.DefaultIconSizeWithoutLabels):i=k.getIconSizeDependingOnTexts(a)}var j=Math.min(f,g),l=i*(j/c.SquareTileDefaultSize),m=j*(i/100);i=Math.min(m,l),j<c.DefaultIconSizeWithoutLabels&&(i=Math.min(i,Math.min(f-2*c.TilePadding,g-2*c.TilePadding))),a.$evalAsync(function(){a.iconFontSize=i+"px"})},a.textContainerPosition=function(){var d=c.MarginAuto;if(a.shouldShowIcon())switch(a.iconOptions.position){case b.IconPosition.Top:d=c.TextMarginBottomZero;break;case b.IconPosition.Bottom:d=c.TextMarginTopZero}return d},a.primaryTextPositionInCenterIconMode=function(){var d=c.MarginTop;if(a.shouldShowIcon())switch(a.iconOptions.position){case b.IconPosition.Top:d=c.MarginBottom;break;case b.IconPosition.Left:case b.IconPosition.Right:d=a.shouldShowSecondaryText()?c.MarginBottom:c.MarginAuto}else d=c.MarginBottom,a.shouldShowSecondaryText()||(d=c.MarginAuto);return d},a.secondaryTextPositionInCenterIconMode=function(){var d=c.MarginBottom;if(a.shouldShowIcon())switch(a.iconOptions.position){case b.IconPosition.Bottom:d=c.MarginTop;break;case b.IconPosition.Left:case b.IconPosition.Right:d=c.TextMarginTopZero}else d=c.TextMarginTopZero,a.shouldShowPrimaryText()||(d=c.MarginAuto);return d},a.getIconPosition=function(){var e=c.Margin;if(!a.shouldShowPrimaryText()&&!a.shouldShowSecondaryText()){switch(a.iconOptions.position){case b.IconPosition.Left:e=c.MarginLeft;break;case b.IconPosition.Right:e=c.MarginRight;break;case b.IconPosition.Top:e=c.MarginTop;break;case b.IconPosition.Bottom:e=c.MarginBottom}k.getTileTypeBasedOnDimensions(d)==b.TileType.Square&&(e=c.MarginAuto)}return e},a.updateIconSize(),a.$on("$destroy",function(){k.contextMenuService.detachElement(d),k.toolkitConfigService.currentThemeChanged.remove(h)})}}return a.prototype.updateIconPosition=function(a){switch(a.iconOptions.position){case b.IconPosition.Left:a.textOrderClass="ion-tile-text-items-order-2",a.iconOrderClass="ion-tile-icon-items-order-1",a.iconPositionClass="ion-tile-icon-left";break;case b.IconPosition.Right:a.textOrderClass="ion-tile-text-items-order-1",a.iconOrderClass="ion-tile-icon-items-order-2",a.iconPositionClass="ion-tile-icon-right";break;case b.IconPosition.Top:a.textOrderClass="ion-tile-text-items-order-2",a.iconOrderClass="ion-tile-icon-items-order-1",a.iconPositionClass="ion-tile-icon-top";break;case b.IconPosition.Bottom:a.textOrderClass="ion-tile-text-items-order-1",a.iconOrderClass="ion-tile-icon-items-order-2",a.iconPositionClass="ion-tile-icon-bottom";break;case b.IconPosition.Center:a.textOrderClass="ion-tile-text-items-order-1",a.iconOrderClass="ion-tile-icon-items-order-2",a.secondaryTextOrderClass="ion-tile-secondary-text-items-order-3",a.iconPositionClass="ion-tile-icon-center"}},a.prototype.updateDisabledState=function(a,c){a.tileOptions.state==b.TileState.Disabled?c.find("*").attr("disabled","disabled"):c.find("*").removeAttr("disabled"),a.tileOptions.state==b.TileState.Disabled?c.attr("tabindex","-1"):c.attr("tabindex",a.tabindex)},a.prototype.addCustomContent=function(a,b){var c=this;if(a.customContent&&(a.customContent.template||a.customContent.templateUrl)){var d;if(a.customContent.template)d=this.$q.when(a.customContent.template);else if(a.customContent.templateUrl){var e=this.$templateCache.get(a.customContent.templateUrl);d=e?this.$q.when(e):this.$templateRequest(a.customContent.templateUrl)}d.then(function(d){var e=b.find("div.tile-custom-content");e.html(""),e.append(c.$compile(d)(a.customContent.scope?a.customContent.scope:a)),c.updateDisabledState(a,b)})}else b.find("div.tile-custom-content").html("")},a.prototype.switchDefaultIconPosition=function(a){var c=2;a.tileOptions.type==b.TileType.Rectangle1&&(c=0),a.iconOptions&&"undefined"!=typeof a.iconOptions.position&&b.IconPosition[a.iconOptions.position]&&(c=a.iconOptions.position),a.iconOptions.position=c},a.prototype.updateFeedbackStatusColor=function(a){var d="none";switch(a.tileOptions.feedbackStatus){case b.TileFeedbackStatus.Error:d="error";break;case b.TileFeedbackStatus.Warning:d="warning";break;case b.TileFeedbackStatus.Info:d="info";break;case b.TileFeedbackStatus.Custom:d=a.tileOptions.customFeedbackStatusColor}a.feedbackStatusColor=c.setColor(a.feedbackStatusColor,d,null,c.TextBackgroundClassPrefix,!0)},a.prototype.getIconSizeDependingOnTexts=function(a){var b=c.DefaultIconSizeWithLabels;return a.shouldShowPrimaryText()||a.shouldShowSecondaryText()?a.shouldShowPrimaryText()&&a.shouldShowSecondaryText()||(b=c.DefaultIconSizeWithOneLabel):b=c.DefaultIconSizeWithoutLabels,b},a.prototype.getTileTypeBasedOnDimensions=function(a,c,d){if("undefined"==typeof c||"undefined"==typeof d){var e=a.find(".ion-tile");c=e.outerHeight(),d=e.outerWidth()}var f=b.TileType.Square;return d>=2*c?f=b.TileType.Rectangle1:c>=2*d&&(f=b.TileType.Rectangle2),f},a}();angular.module("ionwebTk").directive("ionwebTile",["$compile","$q","ionweb.contextMenuService","ionwebTk.toolkitConfigService","$templateCache","$templateRequest","ionweb.iconService","ionwebTk.environmentService",function(a,b,c,e,f,g,h,i){return new d(a,b,c,e,f,g,h,i)}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.Btn_Done="Done",a.Btn_Close="Close",a.Btn_Accept="Accept",a.Btn_Apply="Apply",a.Btn_New="New",a.Btn_Edit="Edit",a.Btn_Delete="Delete",a.Btn_Clear="Clear",a.Btn_Save="Save",a.Btn_Save_As="Save as",a.Err_dateTimepickerDecorator_Invalid_Hours="Invalid hours",a.Err_dateTimepickerDecorator_Invalid_Minutes="Invalid minutes",a.Err_dateTimepickerDecorator_Invalid_Seconds="Invalid seconds",a.Err_DragAndDrop_DataTransfer_Writable_Denied="DataTransfer writable denied",a.Err_dropDirective_IsNot_Valid_DropEffect=" is not a valid drop effect",a.Err_Unable_To_Parse_Date="Unable to parse '${userInput}'",a.Err_Disabled_Date="Date '${userInput}' is disabled",a.Err_Invalid_Range_selection="Invalid range selected",a.Meridian_AM="AM",a.Meridian_PM="PM",a.Date_PlaceHolder="--/--/----",a.Time_PlaceHolder="00:00",a.Err_FileExpService_ThisBrowser_NotSupport_ExportingFiles="This browser does not support exporting files",a.Text_Caption_Size_Smallest="Smallest",a.Text_Caption_Size_Small="Small",a.Text_Caption_Size_Medium="Medium",a.Text_Caption_Size_Large="Large",a.Text_Caption_Size_Larger="Larger",a.Text_Caption_Size_Largest="Largest",a.Text_Caption_Size_Custom="Custom",a.Text_Caption_Size_Increase_Current="Increase size (current: ${currentSize})",a.Text_Caption_Size_Decrease_Current="Decrease size (current: ${currentSize})",a.Text_Caption_Size_Maximum_Reached="Maximum size reached (${currentSize})",a.Text_Caption_Size_Minimum_Reached="Minimum size reached (${currentSize})",a.Err_NumericUpDownDirective_IsInvalid=" is invalid.",a.Text_Dashboard_Tooltip_Caption_Style="Caption style",a.Text_Caption_Size_Increase="Increase size",a.Text_Caption_Size_Decrease="Decrease size",a.Text_Caption_Background_Color="Background color",a.Text_Caption_Foreground_Color="Foreground color",a.Text_Caption_Wrap_Text="Wrap text",a.Text_Caption_Text_Alignment="Text alignment",a.Err_Icon_Set_Name_Missing="Unable to register icon-set, name not provided, found '${name}'.",a.Err_Invalid_Icon_Set="Invalid icon set details provided, found '${value}'.",a.Err_Duplicate_Icon_Set="Icon-set '${name}' already registered.",a.Err_PopUp_Bad_PopupPosition_ForAnchorPointPositionProvided="Popup position not provided but popup but anchor point says position is provided.",a.Title_Error="Error",a.Title_Warning="Warning",a.Title_Info="Info",a.Title_Message="Message",a.Err_DefineTemplate_Or_TemplateUrl_CreateDialog="Define template, templateUrl or textContent to create a dialog",a.Btn_Ok="Ok",a.Btn_Cancel="Cancel",a.Msg_DoNot_AskAgain="Don't ask again",a.Search="Search",a.No_Item_Selected="No item selected",a}();a.Strings=b}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=12,d=function(){function a(){this.templateUrl=function(a,b){return"vertical"===b.layout?"toolkit/styleEditor/styleEditorVertical.tpl.html":"toolkit/styleEditor/styleEditor.tpl.html"},this.restrict="E",this.controller="ionwebStyleEditorController",this.controllerAs="ctrl",this.bindToController=!0,this.scope={bgColor:"=",fgColor:"=",wrap:"=",alignment:"=",size:"=",editBgColor:"=?",editFgColor:"=?",editWrap:"=?",editAlignment:"=?",editSize:"=?",compactMode:"=?",colorPickerOpen:"=?"}}return a}(),e=function(){function d(a){var b=this;d.SIZES||(d.SIZES=Object.keys(d.SIZES_MAP).map(function(a){return parseInt(a)}).sort()),this.fixAlignment(),this.setAlignmentIcon(),a.$watchGroup(["ctrl.bgPickerOpen","ctrl.fgPickerOpen"],function(){b.colorPickerOpen=b.editBgColor&&b.bgPickerOpen||b.editFgColor&&b.fgPickerOpen}),this.isCompacted=this.compactMode}return d.prototype.fixAlignment=function(){Array.isArray(this.editAlignment)&&(0===this.editAlignment.length?this.editAlignment=!1:(this._allowAligmnent=this.editAlignment.map(function(a){return"string"==typeof a?b.BannerTextAlignment[a]:a}),this.checkValidAlignment()))},d.prototype.checkValidAlignment=function(){for(;"number"!=typeof this._allowAligmnent[this.alignment];)this.alignment=this.nextAlignment(this.alignment)},d.prototype.nextAlignment=function(a){switch(a){case b.BannerTextAlignment.Left:return b.BannerTextAlignment.Center;case b.BannerTextAlignment.Center:return b.BannerTextAlignment.Right;case b.BannerTextAlignment.Right:return null;default:return b.BannerTextAlignment.Left;
}},d.prototype.changeAlignment=function(){this.alignment=this.nextAlignment(this.alignment),this._allowAligmnent&&this.checkValidAlignment(),this.setAlignmentIcon()},d.prototype.setAlignmentIcon=function(){switch(this.alignment){case b.BannerTextAlignment.Left:this.alignmentIcon="glyphicon glyphicon-align-left";break;case b.BannerTextAlignment.Center:this.alignmentIcon="glyphicon glyphicon-align-center";break;case b.BannerTextAlignment.Right:this.alignmentIcon="glyphicon glyphicon-align-right";break;default:this.alignmentIcon="glyphicon glyphicon-align-justify"}},Object.defineProperty(d.prototype,"increaseTitle",{get:function(){return a.stringFormat(this.canIncreaseSize?b.Strings.Text_Caption_Size_Increase_Current:b.Strings.Text_Caption_Size_Maximum_Reached,{currentSize:this.getCurrentSizeLabel()})},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"decreaseTitle",{get:function(){return a.stringFormat(this.canDecreaseSize?b.Strings.Text_Caption_Size_Decrease_Current:b.Strings.Text_Caption_Size_Minimum_Reached,{currentSize:this.getCurrentSizeLabel()})},enumerable:!0,configurable:!0}),d.prototype.getCurrentSizeLabel=function(){return d.SIZES_MAP[this.size||c]||b.Strings.Text_Caption_Size_Custom},Object.defineProperty(d.prototype,"canIncreaseSize",{get:function(){return(this.size||c)<d.SIZES[d.SIZES.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"canDecreaseSize",{get:function(){return(this.size||c)>d.SIZES[0]},enumerable:!0,configurable:!0}),d.prototype.increaseSize=function(){for(var a=d.SIZES,b=0;b<a.length;b++)if(a[b]>(this.size||c)){this.size=a[b];break}},d.prototype.decrementSize=function(){for(var a=d.SIZES,b=a.length-1;b>=0;b--)if(a[b]<(this.size||c)){this.size=a[b];break}},d.prototype.stopEvent=function(a){a.stopPropagation(),a.preventDefault()},d.SIZES=null,d.SIZES_MAP={12:b.Strings.Text_Caption_Size_Smallest,16:b.Strings.Text_Caption_Size_Small,22:b.Strings.Text_Caption_Size_Medium,32:b.Strings.Text_Caption_Size_Large,40:b.Strings.Text_Caption_Size_Larger,48:b.Strings.Text_Caption_Size_Largest},d.$inject=["$scope"],d}();angular.module("ionwebTk").directive("ionwebStyleEditor",[function(){return new d}]).controller("ionwebStyleEditorController",e)}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=[["#000","#666","#999","#ccc","#eee","#fff"],["rgb(215, 70, 65)","rgb(245, 140, 70)","rgb(150, 200, 105)","rgb(0, 175, 150)","rgb(0, 165, 230)","rgb(110, 110, 175)"],["rgb(255, 200, 110)","rgb(234, 218, 172)","rgb(160, 130, 120)","rgb(175, 175, 180)","rgb(250, 175, 145)","rgb(240, 232, 225)"],["rgb(0, 20, 55)","rgb(0, 40, 30)","rgb(40, 10, 55)","rgb(65, 10, 35)","rgb(35, 40, 50)","rgb(55, 40, 40)"]];angular.module("ionwebTk").directive("ionwebColorPicker",["ionwebTk.toolkitConfigService",function(c){return{link:function(d,e,f){function g(a){return a&&"@"===a.charAt(0)}function h(a){return!a||a.getAlpha&&a.getAlpha()<.01}var i=c.getThemeVariables().sort(),j=c.currentThemeChanged.add(function(){d.$applyAsync(function(){var a=e.spectrum("getTag");a&&e.spectrum("setTag",a)})});d.$on("$destroy",function(){j&&j(),e.spectrum("destroy")});var k=i.map(function(b){return{name:b,displayName:b.substr(1),cssClass:a.getThemeClass(b,"bg")}}),l=function(){e.data("spectrum.id")&&e.spectrum("destroy");var a=b;d.supportTransparent&&(a=a.slice(),a.push(["transparent"])),d.showTags=d.showTags!==!1,e.spectrum({theme:"sp-ion",showInput:!0,allowEmpty:!1,palette:a,showButtons:!1,showPalette:!0,showTags:d.showTags,tags:k,showSelectionPalette:!1,preferredFormat:"rgb",color:d.ngValue,move:function(a){var b;b=d.supportTransparent&&d.transparentIsNull&&h(a)?null:a.toRgbString(),d.$applyAsync(function(){d.ngValue=b,d.valueExt=b})},show:function(a){d.$applyAsync(function(){d.shown=!0})},hide:function(a){d.$applyAsync(function(){d.shown=!1})},tagChange:function(a){d.$applyAsync(function(){return d.valueExt=a})}})};l(),d.$watch("supportTransparent",function(a){l()}),d.$watch("ngValue",function(a,b){a!==b&&e.spectrum("set",a)}),d.$watch("valueExt",function(a,b){if(g(a)){var c=e.spectrum("getTag");c!=a&&e.spectrum("setTag",a)}else e.spectrum("set",a)})},restrict:"A",scope:{supportTransparent:"=?",shown:"=?",transparentIsNull:"=?",ngValue:"=?ngModel",valueExt:"=?",showTags:"=?"}}}])}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){this.restrict="E",this.scope=!0,this.controller=c,this.controllerAs="ctrl",this.bindToController=!0,this.transclude=!0,this.template='\n\t\t\t<div class="ionweb-scrollable-indicator left"></div>\n\t\t\t<div class="ionweb-scrollable-content" ng-transclude></div>\n\t\t\t<div class="ionweb-scrollable-indicator right"></div>\n\t\t\t<responsive-content\n\t\t\t\tresponsive-template-resolver="ctrl.checkContentWidth(); null"\n\t\t\t\tresponsive-template-resolver-design-size-driven="false">\n\t\t\t</responsive-content>'}return a}(),c=function(){function a(b,c,d){var e=this;this.$element=b,this.$document=c,this.$scope=d,this.checkContentWidth=function(){var a=e.getMaxScroll();e.maximumScroll!==a&&(e.maximumScroll=e.getMaxScroll(),e.toggleScrollIndicators(e.$content.scrollLeft()))},this.onMouseDown=function(b){e.maximumScroll=e.getMaxScroll(),Math.abs(e.maximumScroll)<=a.TOLLERANCE||(e.initialOffset=e.$content.scrollLeft(),e.initialPosition=e.getMousePosition(b),e.$document.on("mousemove touchmove",e.onMouseMove),e.$document.on("mouseup touchend",e.onMouseUp),e.$document[0].removeEventListener("click",e.onClick,!0),e.$document[0].addEventListener("click",e.onClick,!0))},this.onMouseMove=function(a){e.$element.addClass("grabbing");var b=e.getMousePosition(a);e.setScroll(e.initialOffset+e.initialPosition-b)},this.onMouseUp=function(a){e.$element.hasClass("grabbing")&&(a.stopPropagation(),a.preventDefault(),e.$element.removeClass("grabbing")),e.$document.off("mousemove touchmove",e.onMouseMove),e.$document.off("mouseup touchend",e.onMouseUp),e.$scope.$evalAsync(function(){e.$scope.scrolled=!1,e.$document[0].removeEventListener("click",e.onClick,!0)})},this.onClick=function(a){e.$scope.scrolled&&(e.$scope.scrolled=!1,a.stopPropagation()),e.$document[0].removeEventListener("click",e.onClick,!0)},this.$content=b.find(".ionweb-scrollable-content"),this.$element.on("mousedown touchstart",this.onMouseDown),d.$on("$destroy",function(){e.$element.off("mousedown touchstart",e.onMouseDown),e.observer.disconnect()})}return a.prototype.$onInit=function(){var a=this;this.$scope.$evalAsync(function(){return setTimeout(a.checkContentWidth)}),this.observer=new MutationObserver(this.checkContentWidth),this.observer.observe(this.$content[0],{attributes:!0,childList:!0,subtree:!0})},a.prototype.getMaxScroll=function(){return this.$content[0].scrollWidth-this.$content.outerWidth()},a.prototype.toggleScrollIndicators=function(b){b>a.TOLLERANCE?this.$element.addClass("show-left-indicator"):this.$element.removeClass("show-left-indicator"),b<this.maximumScroll-a.TOLLERANCE?this.$element.addClass("show-right-indicator"):this.$element.removeClass("show-right-indicator")},a.prototype.setScroll=function(a){this.initialOffset!==a&&(this.$scope.scrolled=!0),this.toggleScrollIndicators(a),this.$content.scrollLeft(a),a<0&&(this.initialPosition-=a),a>this.maximumScroll&&(this.initialPosition+=this.maximumScroll-a)},a.prototype.getMousePosition=function(a){var b=a.originalEvent,c=a.clientX||b.touches&&b.touches[0].clientX||0;return c},a.TOLLERANCE=1,a.$inject=["$element","$document","$scope"],a}();angular.module("ionwebTk").directive("ionwebScrollable",function(){return new b})}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b;!function(a){a[a.Never=0]="Never",a[a.Always=1]="Always",a[a.OnHover=2]="OnHover"}(b=a.VisibilityType||(a.VisibilityType={}))}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={}));var jqueryUiTouchPunch;!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if($.support.touch="ontouchend"in document,$.support.touch){var c,d=$.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,d._touchInitPos=iosDragDrop.toPoint(a.originalEvent),b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){if(c){if(!this._touchMoved&&this._touchInitPos){var d=iosDragDrop.toPoint(a.originalEvent),e=iosDragDrop.toRadius(a.originalEvent);if(iosDragDrop.dist(d,this._touchInitPos)<e*iosDragDrop.MOVE_THRESHOLD_RADIUSES)return}this._touchMoved=!0,b(a,"mousemove")}},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var a=this;a.element.bind({touchstart:$.proxy(a,"_touchStart"),touchmove:$.proxy(a,"_touchMove"),touchend:$.proxy(a,"_touchEnd")}),e.call(a)},d._mouseDestroy=function(){var a=this;a.element.unbind({touchstart:$.proxy(a,"_touchStart"),touchmove:$.proxy(a,"_touchMove"),touchend:$.proxy(a,"_touchEnd")}),f.call(a)}}}(jqueryUiTouchPunch||(jqueryUiTouchPunch={}));var ionweb;!function(a){var b;!function(a){a.ZINDEX_POPUP_BASE=1040,a.ZINDEX_ACB_DROPDOWN=1200}(b=a.toolkit||(a.toolkit={}))}(ionweb||(ionweb={})),angular.module("ionwebTk").run(["$templateCache",function(a){"use strict";a.put("toolkit/actionableItem/actionableItem.tpl.html",'<div uid={{uid}} class=actionable-item><div ng-transclude style="flex-grow: 1; overflow: hidden"></div><div><div ng-repeat="a in actions" style="cursor: pointer; margin:3px" ng-click="onAction(a.action); $event.stopPropagation()" class={{a.iconClass}}></div></div></div>'),a.put("toolkit/banner/banner.tpl.html",'<div class=ionbanner-container ng-class=ctrl.containerClasses ng-style=ctrl.containerStyle ng-mouseenter="ctrl.editable = config.editMode" ng-mouseleave="ctrl.editable = false"><div class=ionbanner-content ng-if="ctrl.progressType === \'Linear\' || !config.progress.show"><div class=ionbanner-content-item ng-if=config.header.show ionweb-popup-container ng-mouseenter="ctrl.headerSettings.showIcon = true" ng-mouseleave="ctrl.headerSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.headerSettings.isOpen || (config.editMode && ctrl.headerSettings.showIcon)" ng-class=ctrl.headerSettings.classes ng-click="ctrl.headerSettings.isOpen = !ctrl.headerSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.header config=config.header editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.headerSettings.isOpen automatically-update-position=false automatically-close=!ctrl.headerSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.headerSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.header.canEditColor edit-wrap=config.header.canEditWrap edit-alignment=config.header.canEditAlignment edit-size=config.header.canEditSize bg-color=model.backgroundColor fg-color=model.header.color wrap=model.header.wrap alignment=model.header.alignment size=model.header.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-content-item ng-if="config.progress.show && config.progressBeforeText" ionweb-popup-container ng-mouseenter="ctrl.progressSettings.showIcon = true" ng-mouseleave="ctrl.progressSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.progressSettings.isOpen || (config.editMode && ctrl.progressSettings.showIcon)" ng-class=ctrl.progressSettings.classes ng-click="ctrl.progressSettings.isOpen = !ctrl.progressSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-progress config=config.progress model=model.progress></ionweb-banner-progress><ionweb-popup visible=ctrl.progressSettings.isOpen automatically-update-position=false automatically-close=!ctrl.progressSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.progressSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.progress.canEditColor edit-wrap=config.progress.canEditWrap edit-alignment=config.progress.canEditAlignment edit-size=config.progress.canEditSize bg-color=model.backgroundColor fg-color=model.progress.color wrap=model.progress.wrap alignment=model.progress.alignment size=model.progress.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-multiple-text-container ng-class="{\'ionbanner-single-line\': config.textOnSingleLine}"><div class=ionbanner-content-item ng-if=config.primary.show ionweb-popup-container ng-mouseenter="ctrl.primarySettings.showIcon = true" ng-mouseleave="ctrl.primarySettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.primarySettings.isOpen || (config.editMode && ctrl.primarySettings.showIcon)" ng-class="config.textOnSingleLine ? \'left\' : ctrl.primarySettings.classes" ng-click="ctrl.primarySettings.isOpen = !ctrl.primarySettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.primary config=config.primary editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.primarySettings.isOpen automatically-update-position=false automatically-close=!ctrl.primarySettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.primarySettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.primary.canEditColor edit-wrap=config.primary.canEditWrap edit-alignment="config.primary.canEditAlignment && !config.textOnSingleLine" edit-size=config.primary.canEditSize bg-color=model.backgroundColor fg-color=model.primary.color wrap=model.primary.wrap alignment=model.primary.alignment size=model.primary.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-content-item ng-if=config.secondary.show ionweb-popup-container ng-mouseenter="ctrl.secondarySettings.showIcon = true" ng-mouseleave="ctrl.secondarySettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.secondarySettings.isOpen || (config.editMode && ctrl.secondarySettings.showIcon)" ng-class="config.textOnSingleLine ? \'right\' : ctrl.secondarySettings.classes" ng-click="ctrl.secondarySettings.isOpen = !ctrl.secondarySettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.secondary config=config.secondary editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.secondarySettings.isOpen automatically-update-position=false automatically-close=!ctrl.secondarySettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.secondarySettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.secondary.canEditColor edit-wrap=config.secondary.canEditWrap edit-alignment="config.secondary.canEditAlignment && !config.textOnSingleLine" edit-size=config.secondary.canEditSize bg-color=model.backgroundColor fg-color=model.secondary.color wrap=model.secondary.wrap alignment=model.secondary.alignment size=model.secondary.size></ionweb-style-editor></ionweb-popup></div></div><div class=ionbanner-content-item ng-if="config.progress.show && !config.progressBeforeText" ionweb-popup-container ng-mouseenter="ctrl.progressSettings.showIcon = true" ng-mouseleave="ctrl.progressSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.progressSettings.isOpen || (config.editMode && ctrl.progressSettings.showIcon)" ng-class=ctrl.progressSettings.classes ng-click="ctrl.progressSettings.isOpen = !ctrl.progressSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-progress config=config.progress model=model.progress></ionweb-banner-progress><ionweb-popup visible=ctrl.progressSettings.isOpen automatically-update-position=false automatically-close=!ctrl.progressSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.progressSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.progress.canEditColor edit-wrap=config.progress.canEditWrap edit-alignment=config.progress.canEditAlignment edit-size=config.progress.canEditSize bg-color=model.backgroundColor fg-color=model.progress.color wrap=model.progress.wrap alignment=model.progress.alignment size=model.progress.size></ionweb-style-editor></ionweb-popup></div></div><div class="ionbanner-content ionbanner-alt-layout" ng-if="ctrl.progressType !== \'Linear\' && config.progress.show" ng-class="{\'ionbanner-alt-layout-arc\': ctrl.progressType === \'Arc\'}"><div class=ionbanner-content-item ng-if="config.header.show && !config.progressBeforeText" ionweb-popup-container ng-mouseenter="ctrl.headerSettings.showIcon = true" ng-mouseleave="ctrl.headerSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.headerSettings.isOpen || (config.editMode && ctrl.headerSettings.showIcon)" ng-class=ctrl.headerSettings.classes ng-click="ctrl.headerSettings.isOpen = !ctrl.headerSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.header config=config.header editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.headerSettings.isOpen automatically-update-position=false automatically-close=!ctrl.headerSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.headerSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.header.canEditColor edit-wrap=config.header.canEditWrap edit-alignment=config.header.canEditAlignment edit-size=config.header.canEditSize bg-color=model.backgroundColor fg-color=model.header.color wrap=model.header.wrap alignment=model.header.alignment size=model.header.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-progress-alt-wrapper><div class=ionbanner-progress-alt-wrapper-inner><div class=ionbanner-content-item ng-if=config.progress.show ionweb-popup-container ng-mouseenter="ctrl.progressSettings.showIcon = true" ng-mouseleave="ctrl.progressSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings right" ng-if="ctrl.progressSettings.isOpen || (config.editMode && ctrl.progressSettings.showIcon)" ng-click="ctrl.progressSettings.isOpen = !ctrl.progressSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-progress config=config.progress model=model.progress></ionweb-banner-progress><ionweb-popup visible=ctrl.progressSettings.isOpen automatically-update-position=false automatically-close=!ctrl.progressSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.progressSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.progress.canEditColor edit-wrap=config.progress.canEditWrap edit-alignment=config.progress.canEditAlignment edit-size=config.progress.canEditSize bg-color=model.backgroundColor fg-color=model.progress.color wrap=model.progress.wrap alignment=model.progress.alignment size=model.progress.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-progress-alt-wrapper-inner-text><div class=ionbanner-content-item ng-if=config.primary.show ionweb-popup-container ng-mouseenter="ctrl.primarySettings.showIcon = true" ng-mouseleave="ctrl.primarySettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.primarySettings.isOpen || (config.editMode && ctrl.primarySettings.showIcon)" ng-class=ctrl.primarySettings.classes ng-click="ctrl.primarySettings.isOpen = !ctrl.primarySettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.primary config=config.primary editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.primarySettings.isOpen automatically-update-position=false automatically-close=!ctrl.primarySettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.primarySettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.primary.canEditColor edit-wrap=config.primary.canEditWrap edit-alignment="config.primary.canEditAlignment && !config.textOnSingleLine" edit-size=config.primary.canEditSize bg-color=model.backgroundColor fg-color=model.primary.color wrap=model.primary.wrap alignment=model.primary.alignment size=model.primary.size></ionweb-style-editor></ionweb-popup></div><div class=ionbanner-content-item ng-if="config.secondary.show && ctrl.progressType === \'Round\'" ionweb-popup-container ng-mouseenter="ctrl.secondarySettings.showIcon = true" ng-mouseleave="ctrl.secondarySettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.secondarySettings.isOpen || (config.editMode && ctrl.secondarySettings.showIcon)" ng-class=ctrl.secondarySettings.classes ng-click="ctrl.secondarySettings.isOpen = !ctrl.secondarySettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.secondary config=config.secondary editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.secondarySettings.isOpen automatically-update-position=false automatically-close=!ctrl.secondarySettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.secondarySettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.secondary.canEditColor edit-wrap=config.secondary.canEditWrap edit-alignment="config.secondary.canEditAlignment && !config.textOnSingleLine" edit-size=config.secondary.canEditSize bg-color=model.backgroundColor fg-color=model.secondary.color wrap=model.secondary.wrap alignment=model.secondary.alignment size=model.secondary.size></ionweb-style-editor></ionweb-popup></div></div></div><div class=ionbanner-content-item ng-if="config.secondary.show && ctrl.progressType === \'Arc\'" ionweb-popup-container ng-mouseenter="ctrl.secondarySettings.showIcon = true" ng-mouseleave="ctrl.secondarySettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.secondarySettings.isOpen || (config.editMode && ctrl.secondarySettings.showIcon)" ng-class=ctrl.secondarySettings.classes ng-click="ctrl.secondarySettings.isOpen = !ctrl.secondarySettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.secondary config=config.secondary editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.secondarySettings.isOpen automatically-update-position=false automatically-close=!ctrl.secondarySettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.secondarySettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.secondary.canEditColor edit-wrap=config.secondary.canEditWrap edit-alignment="config.secondary.canEditAlignment && !config.textOnSingleLine" edit-size=config.secondary.canEditSize bg-color=model.backgroundColor fg-color=model.secondary.color wrap=model.secondary.wrap alignment=model.secondary.alignment size=model.secondary.size></ionweb-style-editor></ionweb-popup></div></div><div class=ionbanner-header-text-container ng-if="config.header.show && config.progressBeforeText"><div class=ionbanner-content-item ionweb-popup-container ng-mouseenter="ctrl.headerSettings.showIcon = true" ng-mouseleave="ctrl.headerSettings.showIcon = false"><div class="ionbanner-settings ionicon ionicon-settings" ng-if="ctrl.headerSettings.isOpen || (config.editMode && ctrl.headerSettings.showIcon)" ng-class=ctrl.headerSettings.classes ng-click="ctrl.headerSettings.isOpen = !ctrl.headerSettings.isOpen" ionweb-popup-anchor></div><ionweb-banner-text model=model.header config=config.header editable=ctrl.editable></ionweb-banner-text><ionweb-popup visible=ctrl.headerSettings.isOpen automatically-update-position=false automatically-close=!ctrl.headerSettings.isColorPickerOpen anchor-point="\'BottomLeft\'"><ionweb-style-editor layout=vertical color-picker-open=ctrl.headerSettings.isColorPickerOpen edit-bg-color=config.canEditBackgroundColor edit-fg-color=config.header.canEditColor edit-wrap=config.header.canEditWrap edit-alignment=config.header.canEditAlignment edit-size=config.header.canEditSize bg-color=model.backgroundColor fg-color=model.header.color wrap=model.header.wrap alignment=model.header.alignment size=model.header.size></ionweb-style-editor></ionweb-popup></div></div></div></div>'),a.put("toolkit/banner/bannerProgress.tpl.html","<div class=ionbanner-progress-container ng-class=ctrl.containerClasses><div ng-if=ctrl.isLinear class=ionbanner-linear-progress><div class=ionbanner-linear-progress-track ng-class=ctrl.linearTrackClasses ng-style=ctrl.linearTrackStyle></div><div class=ionbanner-linear-progress-bar ng-class=ctrl.linearBarClasses ng-style=ctrl.linearBarStyle></div></div><div class=ionbanner-round-progress ng-if=!ctrl.isLinear ng-style=\"{'width': ctrl.getProgressActualWidth()}\"><round-progress max=config.maxValue current=config.value color={{model.color}} bgcolor={{model.color}} fg-class={{ctrl.roundBarClass}} bg-class={{ctrl.roundTrackClass}} radius=100 stroke=20 semi=ctrl.isSemi rounded=false clockwise=true responsive=true duration=800 animation=easeOutCubic animation-delay=0></round-progress></div></div>"),a.put("toolkit/banner/bannerText.tpl.html",'<p contenteditable="{{!!editable && !!config.canEditContent}}" spellcheck=false class=ionbanner-text-field ng-class=ctrl.contentClasses ng-style=ctrl.contentStyle ng-model=model.content></p>'),a.put("toolkit/button/button.tpl.html","<ionweb-icon icon={{ctrl.icon}} color={{ctrl.iconColor}} ng-if=\"ctrl.icon && (!ctrl.iconPlacement || ctrl.iconPlacement === 'before')\" class=side-icon></ionweb-icon><span ng-transclude class=center-span></span><ionweb-icon icon={{ctrl.icon}} color={{ctrl.iconColor}} ng-if=\"ctrl.icon && ctrl.iconPlacement === 'after'\" class=side-icon></ionweb-icon>"),a.put("toolkit/collapsiblePane/collapsiblePane.tpl.html",'<div class=ionweb-collapsible-pane ng-class=ctrl.containerClasses><div ng-click="ctrl.isCollapsed = !ctrl.isCollapsed" class=collapsible-pane-heading><ionweb-icon ng-show="ctrl.paneSettings && ctrl.paneSettings.icon && ctrl.paneSettings.visible && !ctrl.isCollapsed" icon={{ctrl.paneSettings.icon}} class=config-option ng-click="ctrl.paneSettings.clickHandler && ctrl.paneSettings.clickHandler($event);$event.stopPropagation()"></ionweb-icon><span ng-show="!ctrl.isCollapsed || (!ctrl.titleTemplate && !ctrl.titleTemplateUrl)" ng-class=ctrl.headingGlyphClasses></span> <span ng-if="!ctrl.titleTemplate && !ctrl.titleTemplateUrl">{{ctrl.title}}</span><ionweb-custom-content class=grid-side-panel-tab-icon-container ng-show="ctrl.isCollapsed && (!!ctrl.titleTemplate || !!ctrl.titleTemplateUrl)" template=ctrl.titleTemplate template-url={{ctrl.titleTemplateUrl}} template-scope=ctrl.titleTemplateScope></ionweb-custom-content></div><div ng-transclude class=collapsible-pane-content></div></div>'),a.put("toolkit/contentBlock/contentBlock.tpl.html","<label class=ion-content-block-caption ng-if=ctrl.caption ng-style=\"ctrl.inline ? {'flex-basis': ctrl.inlineWidth + '%'} : {}\" ng-class=\"{\n           'error': ctrl.validationState === ctrl.validationStates.Error,\n           'warning': ctrl.validationState === ctrl.validationStates.Warning,\n           'success': ctrl.validationState === ctrl.validationStates.Success\n       }\"><span class=ionicon ng-if=\"ctrl.validationIcon && (\n            ctrl.validationState === ctrl.validationStates.Error ||\n            ctrl.validationState === ctrl.validationStates.Warning ||\n            ctrl.validationState === ctrl.validationStates.Success)\" ng-class=\"{\n            'ionicon-error': ctrl.validationState === ctrl.validationStates.Error,\n            'ionicon-warning': ctrl.validationState === ctrl.validationStates.Warning,\n            'ionicon-accept': ctrl.validationState === ctrl.validationStates.Success\n          }\"></span> {{ctrl.caption}}</label><div ng-transclude></div>"),a.put("toolkit/contextmenu/contextMenu.tpl.html",'<ul class="dropdown-menu context-menu"><li ng-repeat="item in items" ng-if="(item.menuType === 1 ? item.isVisible : true)" ng-switch=item.menuType ng-class="{\'menu-item-divider\': item.menuType === 1 && !item.text, \'dropdown-submenu\': (item.menuType === 3 && !!item.subMenu), \'disabled\': item.disabled, \'menu-item-custom\': item.menuType === 2 , \'dropdown-menu-open\' : item.isOpen===true,\n     \'menu-item-text-divider\': item.menuType === 1 && item.text}" ng-mouseleave=clearSubmenuTimeout($event)><a title={{item.tooltip}} ng-switch-when=0 direct-click-dir="item.needDirectEvent && item.directItemClicked" ng-click=item.itemClicked($event) class=menu-item ng-mouseenter="!item.disabled && closeSubmenu($event, item)"><ionweb-icon icon="{{item.icon || \'\'}}" ng-if=item._leaveIconSpace></ionweb-icon><span>{{item.text}}</span></a> <a ng-switch-when=1 ng-mouseenter="!item.disabled && closeSubmenu($event, item)"><span ng-show="item.text && item.text.length>0">{{item.text}}</span></a><div context-menu-custom-item ng-switch-when=2 ng-click=item.itemClicked($event) template={{item.template}} template-url={{item.templateUrl}} template-scope=item.scope ng-mouseenter="!item.disabled && closeSubmenu($event, item)"></div><div context-menu-submenu-item ng-switch-when=3 ng-click=item.itemClicked($event) ng-mouseenter="!item.disabled && showSubmenu($event, item)" item=item></div><a title={{item.tooltip}} ng-switch-when=4 ng-click=item.itemClicked($event) class=menu-item ng-class="{\'checked\': item.checked }" ng-mouseenter="!item.disabled && closeSubmenu($event, item)"><ionweb-icon icon="{{(!item.icon && item.checked) ? \'accept\' : item.icon || \'\'}}"></ionweb-icon><span>{{item.text}}</span></a></li></ul>'),a.put("toolkit/contextmenu/contextMenuSubmenuItem.tpl.html",'<a class=menu-item><div ng-if=isLoading class="pull-right ionweb-spinner-extra-small ionweb-spinner contextmenu-submenu-spinner"></div><ionweb-icon class="pull-right disclosure-icon" icon=disclosure ng-if=!isLoading></ionweb-icon><ionweb-icon icon="{{(item.icon)? item.icon :\'\'}}" ng-if=item._leaveIconSpace></ionweb-icon><span title={{item.tooltip}}>{{item.text}}</span></a>'),a.put("toolkit/datetimepicker/dateTimeSummary.tpl.html",'<div class=ion-datetimepicker-summary ng-click=ctrl.dateClicked($event)><label class="ion-datetimepicker-summary-label ion-datetimepicker-summary-label-header" ng-if="ctrl.headerOptions && ctrl.headerOptions.headerTitle">{{ctrl.headerOptions.headerTitle}}</label><div class=ion-datetimepicker-summary-content><div class=ion-datetimepicker-summary-body ng-click=ctrl.dateClicked($event) ng-class="{\'ion-datetimepicker-summary-body-active\':ctrl.selectedSummary == 1}"><label class="ion-datetimepicker-summary-label ion-datetimepicker-summary-label-date" ng-if="ctrl.mode === 0 || ctrl.mode === 2">{{ctrl.date || (\'Date_PlaceHolder\' | resource)}}</label></div><div class=ion-datetimepicker-summary-body ng-click=ctrl.timeClicked($event) ng-class="{\'ion-datetimepicker-summary-body-active\':ctrl.selectedSummary == 2}"><label class="ion-datetimepicker-summary-label ion-datetimepicker-summary-label-time" ng-if="ctrl.mode === 1 || ctrl.mode === 2">{{ctrl.time || (\'Time_PlaceHolder\' | resource)}}</label></div><div class=ion-datetimepicker-summary-body ng-click=ctrl.tagsClicked($event) ng-class="{\'ion-datetimepicker-summary-body-active\':ctrl.selectedSummary == 3}"><label class="ion-datetimepicker-summary-label ion-datetimepicker-summary-label-tags" ng-if=ctrl.showTags>{{ctrl.tagsHeader}}</label></div></div><ionweb-icon ng-if="ctrl.headerOptions && ctrl.headerOptions.showClearButton" class=clear-button icon=clearCalendar ng-click=ctrl.clearClicked()></ionweb-icon></div>'),
a.put("toolkit/datetimepicker/dateTimepickerPopover.tpl.html",'<div class=ion-datetimepicker-popup ng-style="{\'height\': getWindowHeight()}" ng-class="{\'datetime-compact\' : (compact && mode===0 && !isMobileLayout()), \'mobile-layout\': isMobileLayout(), \'fullscreen-popup\': showPopupFullScreen(),\'landscape\': isLandscapeMode}" ng-keydown=keydown($event) tabindex=-1 ng-mousedown=preventFocusOnMouseDown($event)><ionweb-date-time-picker mode=mode ng-model=popupInternalDate is-open=!!isOpen timepicker-options=timepickerOptions datepicker-options=datepickerOptions on-date-time-changed=onDateTimeChanged(date) use-date-time-tags=useDateTimeTags tags-header-text={{tagsHeaderText}} date-time-tags=dateTimeTags number-of-tag-columns=numberOfTagColumns refresh=refresh on-bind=onBindInternal compact=compact hide-tag-panel=hideTagPanel header-options=headerOptions></ionweb-date-time-picker><div class="group ion-datetimepicker-ok-cancel-button-container" ng-class="{\'ion-datetimepicker-ok-cancel-button-container-small\': mode === 1 && (!useDateTimeTags || !tagsHeaderText.length)}" ng-if="!closeOnDateSelection || mode === 1 || isMobileLayout()"><ionweb-button class="ion-datetimepicker-buttons ion-datetimepicker-ok-button" role=primary ng-click=onOkClicked()>{{"Btn_Ok"|resource}}</ionweb-button><ionweb-button class="ion-datetimepicker-buttons ion-datetimepicker-cancel-button" role=secondary ng-click=close();>{{"Btn_Cancel"|resource}}</ionweb-button></div></div>'),a.put("toolkit/datetimepicker/datepickerOverride.tpl.html",'<div id=header role=application ng-show=!!isOpen><div style=width:100% role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}} ng-show={{useMobileLayout}}><div class="ion-datepicker-day-title ion-datepicker-mobile-header"><div class=ion-datepicker-table-header><ionweb-button class=ion-datepicker-title-arrow-buttons ng-click=move(-1) tabindex=-1><span class="glyphicon glyphicon-chevron-left ion-datepicker-navigation-icon"></span></ionweb-button></div><div class=ion-datepicker-table-header ng-class="{\'ion-datepicker-title-button-active\': (datepickerOptions.datepickerMode == \'month\')}"><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true class=ion-datepicker-title-button ng-click="setDatePickerMode(\'month\')" tabindex=-1>{{activeDate | ionCustomDateTimeFormat: formatMonthHeader | uppercase}}</ionweb-button></div><div class=ion-datepicker-table-header ng-class="{\'ion-datepicker-title-button-active\': (datepickerOptions.datepickerMode == \'year\')}"><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true class=ion-datepicker-title-button ng-click="setDatePickerMode(\'year\')" tabindex=-1>{{activeDate | ionCustomDateTimeFormat: formatMonthTitle}}</ionweb-button></div><div class=ion-datepicker-table-header><ionweb-button class=ion-datepicker-title-arrow-buttons ng-click=move(1) tabindex=-1><span class="glyphicon glyphicon-chevron-right ion-datepicker-navigation-icon"></span></ionweb-button></div></div></div></div><div ng-switch=datepickerMode ng-show=!!isOpen class=ion-datepicker><div ng-switch-when=day ionweb-daypicker template-url=toolkit/datetimepicker/daypickerOverride.tpl.html tabindex=0></div><div ng-switch-when=month ionweb-monthpicker template-url=toolkit/datetimepicker/monthpickerOverride.tpl.html tabindex=0></div><div ng-switch-when=year ionweb-yearpicker template-url=toolkit/datetimepicker/yearpickerOverride.tpl.html tabindex=0></div></div>'),a.put("toolkit/datetimepicker/daypickerOverride.tpl.html",'<table style=width:100% role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr class=ion-datepicker-day-title ng-show=!{{useMobileLayout}}><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-left" ng-click=move(-1) tabindex=-1><span class="glyphicon glyphicon-chevron-left ion-datepicker-navigation-icon"></span></ionweb-button></th><th class=ion-datepicker-table-header colspan="{{5 + showWeeks}}"><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true ng-click=toggleMode() tabindex=-1 class=ion-datepicker-title-button>{{activeDate | ionCustomDateTimeFormat: formatDayTitle}}</ionweb-button></th><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-right" ng-click=move(1) tabindex=-1><span class="glyphicon glyphicon-chevron-right ion-datepicker-navigation-icon"></span></ionweb-button></th></tr><tr class=ion-datepicker-week-title><th ng-if=showWeeks class="text-center ion-datepicker-table-header"></th><th ng-repeat="label in labels track by label.weekday" class="text-center ion-datepicker-table-header"><label class=ion-datepicker-week-name-display aria-label="{{(label.weekday | datePickerWeekFormat: \'dddd\')}}">{{(label.weekday | datePickerWeekFormat: \'ddd\')}}</label></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-if=showWeeks><button disabled=disabled class=ion-datepicker-weeks>{{ weekNumbers[$index] }}</button></td><td ng-repeat="dt in row track by dt.date" class=text-center role=gridcell id={{::dt.uid}}><button data-toggle=tooltip ng-class=dt.customClass ng-click=select(dt.date) ng-disabled=dt.disabled tabindex=-1 ng-style=dt.customStyle>{{::(dt.date | datePickerDayFormat: formatDay)}}</button></td></tr></tbody></table>'),a.put("toolkit/datetimepicker/ionwebDateTimepicker.tpl.html",'<div ng-class="{\r\n        \'ion-datetimepicker-time-container\': (mode === 1 && !useDateTimeTags),\r\n        \'ion-datetimepicker-container\': !(mode === 1 && !useDateTimeTags),\r\n        \'datetime-compact\': (compact && mode === 0)\r\n    }"><div ng-class="(mode === 1 && useDateTimeTags) ? \'ion-datetimepicker-time-only-picker-container\' : \'ion-datetimepicker-picker-container\'"><div class=ion-datetimepicker-header-toolbar-container ng-if=headerOptions><label class=ion-datetimepicker-date-title>{{headerOptions.headerTitle}}</label><ionweb-button ng-if=headerOptions.showClearButton role=secondary icon=clear icon-placement=after ng-click=clearDate()>{{"Btn_Clear"|resource}}</ionweb-button></div><div class=ion-datetimepicker-header ng-show="mode === 2 || mode === 1"><label ng-if="mode === 0 || mode === 2" class=ion-datetimepicker-date-info><span style="margin-right: 10px; font-size: 16px" class="ionicon ionicon-calendar ionicon-default-color"></span>{{formattedDate()}}</label><div ng-style="{\'float\': (mode !== 1 && \'right\')}" ng-class="{\r\n                    \'text-center ion-datetimepicker-time-picker-fixed-width\': mode === 1,\r\n                    \'ion-datetimepicker-time-picker-auto-width\': mode !== 1,\r\n                    \'ion-datetimepicker-time-picker-full-width\': (mode === 1 && useDateTimeTags)\r\n                }"><span ng-if="mode === 2" class="glyphicon glyphicon-time ion-datetimepicker-icons ionicon-default-color" ng-style="{\'float\': (mode !== 1 && \'left\')}"></span><div class=timepicker-holder ng-style="{\'float\': (mode !== 1 && \'right\')}" ng-show="mode === 1 || mode === 2"></div></div></div><div ng-show="mode === 0 || mode === 2" class="ion-datetimepicker-date-container datepicker-holder"></div></div><div ng-if="useDateTimeTags && !hideTagPanel && isOpen" class=ion-datetimepicker-tag-container-wrapper ng-class="\'tags-panel-layout-columns-\' + numberOfTagColumns"><div class=ion-datetimepicker-tag-container><div ng-if="tagsHeaderText && tagsHeaderText.length" class=ion-datetimepicker-tags-header-container><label class=ion-datetimepicker-tags-header>{{tagsHeaderText}}</label></div><div class=ion-datetimepicker-tag-button-container><div ng-repeat="tag in tagsForTagsPanel track by tag.name" class=ion-datetimepicker-tag-button ng-class="\'col-span-\' + (tag.colSpan || 1)"><ionweb-button class=ion-datepicker-tag-border ng-style=styleForTag(tag) ng-class=classForTag(tag) ng-disabled=isTagDisabled(tag) ng-click=onTagChanged(tag) role=secondry title="{{tag.tooltip || tag.name}}">{{tag.name}}</ionweb-button></div></div></div></div></div>'),a.put("toolkit/datetimepicker/ionwebDateTimepickerMobile.tpl.html",'<div class="ion-datetimepicker-container mobile-layout" ng-class="{\'desktop\': usingMobileLayoutOnDesktop, \'mobile\': !usingMobileLayoutOnDesktop,\'time-picker-only\': mode === 1}"><div class=ion-datetimepicker-summary-container><ionweb-date-time-summary selected-summary=selectedSummary date={{formattedDate()}} time={{formattedTime()}} mode=mode ng-class="{\'active\': selectedSummary != 3}" show-tags=false tags-header={{tagsHeaderText}} header-options=headerOptions on-clear=clearDate()></ionweb-date-time-summary><div ng-if="useDateTimeTags && !hideTagPanel && isOpen && tagsHeaderText && tagsHeaderText.length" class=ion-datetimepicker-tags-header-container ng-class="{\'active\': selectedSummary == 3}" ng-click=onTagsClicked()>{{tagsHeaderText | uppercase}} {{(date && date.name) ? (": " + (date && date.name)) : "" | uppercase }}</div></div><div ng-show="(mode === 0 || mode === 2) && (selectedSummary == 1 || selectedSummary == 0)" class="ion-datetimepicker-date-container datepicker-holder"></div><div class=timepicker-holder ng-show="(mode === 1 || mode === 2) && selectedSummary == 2"></div><div ng-if="useDateTimeTags && !hideTagPanel && isOpen && selectedSummary == 3" class=ion-datetimepicker-tag-container-wrapper ng-class="\'tags-panel-layout-columns-\' + numberOfTagColumns"><div class=ion-datetimepicker-tag-container><div class=ion-datetimepicker-tag-button-container><div ng-repeat="tag in tagsForTagsPanel track by tag.name" class=ion-datetimepicker-tag-button ng-class="\'col-span-\' + (tag.colSpan || 1)"><ionweb-button class=ion-datepicker-tag-border ng-style=styleForTag(tag) ng-class=classForTag(tag) ng-disabled=isTagDisabled(tag) ng-click=onTagChanged(tag) role=secondary title="{{tag.tooltip || tag.name}}">{{tag.name}}</ionweb-button></div></div></div></div></div>'),a.put("toolkit/datetimepicker/monthpickerOverride.tpl.html",'<table style="width: 100%" role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr class=ion-datepicker-month-title ng-show=!{{useMobileLayout}}><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-left" ng-click=move(-1) tabindex=-1><span class="glyphicon glyphicon-chevron-left ion-datepicker-navigation-icon"></span></ionweb-button></th><th class=ion-datepicker-table-header><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true class=ion-datepicker-title-button ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1>{{activeDate | ionCustomDateTimeFormat: formatMonthTitle}}</ionweb-button></th><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-right" ng-click=move(1) tabindex=-1><span class="glyphicon glyphicon-chevron-right ion-datepicker-navigation-icon"></span></ionweb-button></th></tr><tr class=ion-datepicker-title-border ng-show={{useMobileLayout}}></tr><tr ng-show=!{{useMobileLayout}} style="height: 10px"></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class=text-center role=gridcell id={{::dt.uid}} aria-disabled={{!!dt.disabled}}><button ng-class=dt.customClass ng-click=select(dt.date) ng-disabled=dt.disabled tabindex=-1>{{::(dt.date | ionCustomDateTimeFormat: formatMonth)}}</button></td></tr></tbody></table>'),a.put("toolkit/datetimepicker/timepickerOverride.tpl.html","<div class=ion-timepicker ng-class=\"{'mobile-layout': useMobileLayout,'is-Desktop': isDesktop}\"><div class=ion-timepicker-column><ionweb-button tabindex=-1 ng-click=incrementHours() class=ion-timepicker-arrow-button-top icon=\"{{!useMobileLayout ? 'triangleUp' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-up ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button><span class=ion-timepicker-span ng-class=\"{'has-error': invalidHours}\"><input type=text ng-model=hours ng-change=validateHours() ng-blur=updateHours() class=\"text-center ion-timepicker-textbox\" ng-mousewheel=incrementHours() ng-readonly=readonlyInput maxlength=2 ionweb-validation validation-message=hoursValidationMessage validation-state=hoursValidationState ng-blur=blur()></span><ionweb-button tabindex=-1 ng-click=decrementHours() class=ion-timepicker-arrow-button-bottom icon=\"{{!useMobileLayout ? 'triangleDown' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-down ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button></div><div class=\"ion-timepicker-column ion-timepicker-colon-column\"><label class=ion-timepicker-colon>:</label></div><div class=ion-timepicker-column><ionweb-button tabindex=-1 ng-click=incrementMinutes() class=ion-timepicker-arrow-button-top icon=\"{{!useMobileLayout ? 'triangleUp' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-up ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button><span class=ion-timepicker-span ng-class=\"{'has-error': invalidMinutes}\"><input type=text ng-model=minutes ng-change=validateMinutes() ng-blur=updateMinutes() class=\"text-center ion-timepicker-textbox\" ng-readonly=readonlyInput maxlength=2 ionweb-validation validation-message=minutesValidationMessage validation-state=minutesValidationState ng-blur=blur()></span><ionweb-button tabindex=-1 ng-click=decrementMinutes() class=ion-timepicker-arrow-button-bottom icon=\"{{!useMobileLayout ? 'triangleDown' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-down ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button></div><div ng-show=showSeconds class=ion-timepicker-seconds><div class=\"ion-timepicker-column ion-timepicker-colon-column\"><label class=ion-timepicker-colon>:</label></div><div class=ion-timepicker-column><ionweb-button tabindex=-1 ng-click=incrementSeconds() class=ion-timepicker-arrow-button-top icon=\"{{!useMobileLayout ? 'triangleUp' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-up ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button><span class=ion-timepicker-span ng-class=\"{'has-error': invalidSeconds}\"><input type=text ng-model=seconds ng-change=validateSeconds() ng-blur=updateSeconds() class=\"text-center ion-timepicker-textbox\" ng-readonly=readonlyInput maxlength=2 ionweb-validation validation-message=secondsValidationMessage validation-state=secondsValidationState ng-blur=blur()></span><ionweb-button tabindex=-1 ng-click=decrementSeconds() class=ion-timepicker-arrow-button-bottom icon=\"{{!useMobileLayout ? 'triangleDown' : ''}}\" ng-class=\"{'glyphicon glyphicon-chevron-down ion-datepicker-navigation-icon': useMobileLayout}\"></ionweb-button></div></div><div class=\"ion-timepicker-column ion-timepicker-meridian-column\" ng-if=showMeridian><ionweb-button class=\"text-center ion-timepicker-meridian\" ng-click=toggleMeridian()>{{('Meridian_' + meridian) | resource}}</ionweb-button></div></div>"),a.put("toolkit/datetimepicker/yearpickerOverride.tpl.html",'<table style="width: 100%" role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr class=ion-datepicker-year-title ng-show=!{{useMobileLayout}}><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-left" ng-click=move(-1) tabindex=-1><span class="glyphicon glyphicon-chevron-left ion-datepicker-navigation-icon"></span></ionweb-button></th><th colspan=3 class=ion-datepicker-table-header><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true class=ion-datepicker-title-button ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1>{{title.split("-")[0] | datePickerYearFormat: formatYear}} - {{title.split("-")[1] | datePickerYearFormat: formatYear}}</ionweb-button></th><th class=ion-datepicker-table-header><ionweb-button class="ion-datepicker-title-arrow-buttons pull-right" ng-click=move(1) tabindex=-1><span class="glyphicon glyphicon-chevron-right ion-datepicker-navigation-icon"></span></ionweb-button></th></tr><tr class=ion-datepicker-title-border ng-show={{useMobileLayout}}></tr><tr ng-show={{useMobileLayout}}><th colspan=6 class=ion-datepicker-table-header><ionweb-button id={{::uniqueId}}-title aria-live=assertive aria-atomic=true class=ion-datepicker-title-button ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1>{{title.split("-")[0] | datePickerYearFormat: formatYear}} - {{title.split("-")[1] | datePickerYearFormat: formatYear}}</ionweb-button></th></tr><tr ng-show=!{{useMobileLayout}} style="height: 10px"></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class=text-center role=gridcell id={{::dt.uid}} aria-disabled={{!!dt.disabled}}><button ng-class=dt.customClass ng-click=select(dt.date) ng-disabled=dt.disabled tabindex=-1>{{::(dt.date | ionCustomDateTimeFormat: formatYear)}}</button></td></tr></tbody></table>'),a.put("toolkit/datetimerangepicker/dateTimeRangepickerPopover.tpl.html",'<div class=ion-datetime-rangepicker-popup-wrapper ng-style="{\'height\': getWindowHeight()}" ng-class="{\'mobile-layout\': isMobileLayout(), \'fullscreen-popup\': showPopupFullScreen(),\'landscape\': isLandscapeMode}"><div class=ion-datetime-rangepicker-popup ng-class="{\'datetime-compact\' : (compact && mode==0 && !isMobileLayout())}" ng-keydown=keydown($event) tabindex=-1><ionweb-date-time-range-picker is-open=isOpen ng-model=popupInternalRange mode=mode from-date-time-picker-options=fromDateTimePickerOptions to-date-time-picker-options=toDateTimePickerOptions refresh=refresh on-bind=onBindInternal compact=compact date-time-range-tags=dateTimeRangeTags number-of-range-tag-columns=numberOfRangeTagColumns use-range-tags=useRangeTags range-tags-header-text={{rangeTagsHeaderText}} hide-range-tag-panel=hideRangeTagPanel header-options=headerOptions></ionweb-date-time-range-picker><div class="ion-datetimepicker-ok-cancel-button-container group" ng-if="!closeOnDateSelection || mode === 1"><ionweb-button class="ion-datetimepicker-buttons ion-datetimepicker-ok-button" role=primary ng-click=onOkClicked()>{{"Btn_Ok"|resource}}</ionweb-button><ionweb-button class="ion-datetimepicker-buttons ion-datetimepicker-cancel-button" role=secondary ng-click=close();>{{"Btn_Cancel"|resource}}</ionweb-button></div></div></div>'),a.put("toolkit/datetimerangepicker/ionwebDateTimeRangePicker.tpl.html",'<div class=ion-datetime-rangepicker-container ng-class="{\'datetime-compact\' : (compact && mode==0)}"><div ng-if="useRangeTags && !hideRangeTagPanel && isOpen" class=ion-datetimepicker-range-tag-container-wrapper ng-class="\r\n    \'tags-panel-layout-columns-\' + numberOfTagColumns"><div class=ion-datetime-rangepicker-tag-container><div ng-if="rangeTagsHeaderText && rangeTagsHeaderText.length" class=ion-datetimepicker-tags-header-container><label class=ion-datetimepicker-tags-header>{{rangeTagsHeaderText}}</label></div><div class=ion-datetimepicker-tag-button-container><div ng-repeat="tag in rangeTagsForTagsPanel track by tag.name" class=ion-datetimepicker-tag-button ng-class="\'col-span-\' + (tag.colSpan || 1)"><ionweb-button class=ion-datepicker-tag-border ng-style=styleForTag(tag) ng-class=classForTag(tag) ng-disabled=isRangeTagDisabled(tag) ng-click=onRangeTagChanged(tag) role=secondry title="{{tag.tooltip || tag.name}}">{{tag.name}}</ionweb-button></div></div></div></div><ionweb-date-time-picker is-open=isOpen mode=mode ng-model=internalFromDate timepicker-options=fromDateTimePickerOptions.timepickerOptions datepicker-options=fromDateTimePickerOptions.datepickerOptions use-date-time-tags=fromDateTimePickerOptions.useDateTimeTags tags-header-text={{fromDateTimePickerOptions.tagsHeaderText}} date-time-tags=fromDateTimePickerOptions.dateTimeTags number-of-tag-columns=fromDateTimePickerOptions.numberOfTagColumns refresh="fromDatePickerRefresh\r\n        " on-bind=onFromDatePickerBind compact=compact hide-tag-panel=fromDateTimePickerOptions.hideTagPanel header-options="headerOptions.from\r\n        " get-selected-range-date=getSelectedFromDate range-picker-date-style-map=fromDateStyleMap></ionweb-date-time-picker><ionweb-date-time-picker is-open=isOpen class=ion-datetime-rangepicker-divider mode=mode ng-model=internalToDate timepicker-options=toDateTimePickerOptions.timepickerOptions datepicker-options=toDateTimePickerOptions.datepickerOptions use-date-time-tags=toDateTimePickerOptions.useDateTimeTags tags-header-text={{toDateTimePickerOptions.tagsHeaderText}} date-time-tags=toDateTimePickerOptions.dateTimeTags number-of-tag-columns=toDateTimePickerOptions.numberOfTagColumns refresh=toDatePickerRefresh on-bind=onToDatePickerBind compact=compact hide-tag-panel=toDateTimePickerOptions.hideTagPanel header-options=headerOptions.to get-selected-range-date=getSelectedToDate range-picker-date-style-map=toDateStyleMap></ionweb-date-time-picker></div>'),a.put("toolkit/datetimerangepicker/ionwebDateTimeRangePickerMobile.tpl.html",'<div class="ion-datetime-rangepicker-container mobile-layout" ng-class="{\'desktop\': usingMobileLayoutOnDesktop, \'mobile\': !usingMobileLayoutOnDesktop,\'time-picker-only\': mode === 1}"><div class=ion-datetime-rangepicker-summary-container><div class=ion-datetime-rangepicker-summary><ionweb-date-time-summary header-options=headerOptions.from selected-summary=fromSelectedSummary date={{formattedFromDate()}} ng-class="{\'active\': subEditorMode == 0 || subEditorMode == 1}" time={{formattedFromTime()}} mode=mode show-tags="fromDateTimePickerOptions.useDateTimeTags && !fromDateTimePickerOptions.hideTagPanel" tags-header="{{(range && range.fromDate && range.fromDate.name) ? range.fromDate.name : fromDateTimePickerOptions.tagsHeaderText}}" on-clear=clearFromDate() class=ion-datetime-rangepicker-from-summary></ionweb-date-time-summary><ionweb-date-time-summary header-options=headerOptions.to selected-summary=toSelectedSummary date={{formattedToDate()}} ng-class="{\'active\': subEditorMode == 2}" time={{formattedToTime()}} mode=mode show-tags="toDateTimePickerOptions.useDateTimeTags && !toDateTimePickerOptions.hideTagPanel" tags-header="{{(range && range.toDate && range.toDate.name) ? range.toDate.name : toDateTimePickerOptions.tagsHeaderText}}" on-clear=clearToDate()></ionweb-date-time-summary></div><div ng-if="useRangeTags && !hideRangeTagPanel && isOpen && rangeTagsHeaderText && rangeTagsHeaderText.length" class=ion-datetimepicker-tags-header-container ng-class="{\'active\': subEditorMode == 3}" ng-click=onTagsClicked()>{{rangeTagsHeaderText | uppercase}} {{(range && range.name) ? (":" + (range && range.name)) : "" | uppercase }}</div></div><div class=ion-datetime-rangepicker-sub-editor-container><div ng-if="useRangeTags && !hideRangeTagPanel && isOpen" ng-show="subEditorMode == 3" class=ion-datetimepicker-range-tag-container-wrapper ng-class="\r\n                \'tags-panel-layout-columns-\' + numberOfTagColumns"><div class=ion-datetime-rangepicker-tag-container><div class=ion-datetimepicker-tag-button-container><div ng-repeat="tag in rangeTagsForTagsPanel track by tag.name" class=ion-datetimepicker-tag-button ng-class="\'col-span-\' + (tag.colSpan || 1)"><ionweb-button class=ion-datepicker-tag-border ng-style=styleForTag(tag) ng-class=classForTag(tag) ng-disabled=isRangeTagDisabled(tag) ng-click=onRangeTagChanged(tag) role=secondary title="{{tag.tooltip || tag.name}}">{{tag.name}}</ionweb-button></div></div></div></div><ionweb-date-time-picker ng-show="subEditorMode == 0 || subEditorMode == 1" selected-summary=fromSelectedSummary is-open=isOpen mode=mode ng-model=internalFromDate timepicker-options=fromDateTimePickerOptions.timepickerOptions datepicker-options=fromDateTimePickerOptions.datepickerOptions use-date-time-tags=fromDateTimePickerOptions.useDateTimeTags tags-header-text={{fromDateTimePickerOptions.tagsHeaderText}} date-time-tags=fromDateTimePickerOptions.dateTimeTags number-of-tag-columns=fromDateTimePickerOptions.numberOfTagColumns refresh="fromDatePickerRefresh\r\n                    " on-bind=onFromDatePickerBind compact=compact hide-tag-panel=fromDateTimePickerOptions.hideTagPanel header-options="headerOptions.from\r\n                    " get-selected-range-date=getSelectedFromDate range-picker-date-style-map=fromDateStyleMap></ionweb-date-time-picker><ionweb-date-time-picker ng-show="subEditorMode == 2" is-open=isOpen selected-summary=toSelectedSummary class=ion-datetime-rangepicker-divider mode=mode ng-model=internalToDate timepicker-options=toDateTimePickerOptions.timepickerOptions datepicker-options=toDateTimePickerOptions.datepickerOptions use-date-time-tags=toDateTimePickerOptions.useDateTimeTags tags-header-text={{toDateTimePickerOptions.tagsHeaderText}} date-time-tags=toDateTimePickerOptions.dateTimeTags number-of-tag-columns=toDateTimePickerOptions.numberOfTagColumns refresh=toDatePickerRefresh on-bind=onToDatePickerBind compact=compact hide-tag-panel=toDateTimePickerOptions.hideTagPanel header-options=headerOptions.to get-selected-range-date=getSelectedToDate range-picker-date-style-map=toDateStyleMap></ionweb-date-time-picker></div></div>'),a.put("toolkit/dialogs/customDialogFrame.tpl.html","<div class=modal-content-flex ng-class=\"{'modal-content-no-border': !modeless}\" ng-style=\"!isFullscreen && size === 3 && modeless && {'width': fixedSizeDialogOptions.width, 'height': fixedSizeDialogOptions.height}\"><div ionweb-dialog-content class=modal-dialog-content-flex></div></div>"),a.put("toolkit/dialogs/dialogFrame.tpl.html",'<div ng-controller=ionweb.dialogFrameController class=modal-dialog-frame ng-class="{\'modal-dialog-xs\': isFullscreen}" ng-style="!isFullscreen && size === 3 && modeless && {\'width\': fixedSizeDialogOptions.width, \'height\': fixedSizeDialogOptions.height, \'max-width\': fixedSizeDialogOptions.width, \'max-height\': fixedSizeDialogOptions.height}"><div class="modal-content modal-content-flex" ng-class="{\'modal-content-xs\': isFullscreen, \'modal-content-no-border\': !modeless}"><div class="modal-header dialog-header-{{severity || \'info\'}}" ng-class="{\'draggable\': !isFullscreen && !!draggableDialogOptions.draggable}"><button type=button class="close back-btn" ng-click=$dismiss() ng-if="isFullscreen && !useCrossButtonOnSmallScreen && showCloseButton"><ionweb-icon icon=leftArrow icon-color=bright-blue></ionweb-icon></button><h4 class=modal-title ng-class="{\'draggable\': !!draggableDialogOptions.draggable}">{{title || \'&nbsp;\'}}</h4><div ng-show="captionButtons && !!captionButtons.length" class=caption-button-container ng-class="{\'modal-close-btn-enabled\': !xsScreenSize && showCloseButton}"><button class=caption-button ng-repeat="captionButton in captionButtons" ng-disabled="captionButton.disabled || !captionButton.onClick" ng-click=captionButton.onClick() title={{captionButton.tooltip}}><ionweb-icon icon={{captionButton.icon}} color={{captionButton.iconColor}}></ionweb-icon></button></div><button type=button class="close ionicon ionicon-close close-btn" ng-click=$dismiss() ng-if="(!xsScreenSize || disableFullScreenMode || useCrossButtonOnSmallScreen) && showCloseButton"></button></div><div class="modal-body modal-body-flex" ng-class="{\'allow-flex-shrink\': enableFlexLayout, \'compact-modal-dialog\': enableCustomSpacing}"><div ionweb-dialog-content class=modal-dialog-content-flex></div></div><div ng-show="buttons && buttons.length>0" class=modal-footer><span ng-if=checkboxState style=float:left class=checkbox><label><input type=checkbox ng-model="checkboxState.value">{{checkboxState.text}}</label></span><ionweb-button ng-repeat="button in buttons" icon-placement={{button.iconPlacement}} role={{button.role}} icon={{button.icon}} color={{button.color}} ng-disabled=!(buttonStates[$index].enabled) ng-click=handleButtonClick($index)>{{button.title}}</ionweb-button></div></div></div>'),a.put("toolkit/dialogs/dialogWindow.tpl.html","<div modal-render={{$isRendered}} tabindex=-1 role=dialog class=\"modal in\" uib-modal-animation-class=fade style=\"display: block\" ng-click=close($event) draggable-dialog><div class=modal-dialog ng-class=\"['modal-' + size, {'modal-dialog-xs': isFullscreen}]\" ng-style=\"{'max-width': (!isFullscreen && $parent.size === 3 && fixedSizeDialogOptions.width), 'max-height': (!isFullscreen && $parent.size === 3 && fixedSizeDialogOptions.height) || $parent.maxDialogHeight, 'margin-top': $parent.dialogTopBottomMargin.top, 'margin-bottom': $parent.dialogTopBottomMargin.bottom, 'width': !isFullscreen && $parent.size === 3 && fixedSizeDialogOptions.width, 'height': !isFullscreen && $parent.size === 3 && fixedSizeDialogOptions.height}\"><div uib-modal-transclude class=\"modal-content modal-content-flex\" ng-class=\"{'modal-content-xs': isFullscreen}\"></div></div></div>"),a.put("toolkit/dialogs/standardDialog.tpl.html","<div><p class=selectableText>{{dialogText}}</p></div>"),a.put("toolkit/ionautocomplete/ionwebSelectizePopup.tpl.html",'<div ng-show="templates.length > 0" class=selectize-popup ng-mousedown=popupupMouseDown($event)><div class=selectize-popup-item ng-repeat="template in templates"><div class=selectize-popup-item-template><ionweb-selectize-popup-item-template html=template.template></ionweb-selectize-popup-item-template></div><ionweb-icon ng-mousedown=removePopupItem($event) ng-if=!readonly class=selectize-popup-item-remove icon=clear tabindex=-1 title=Remove></ionweb-icon></div></div>'),a.put("toolkit/ionautocomplete/ionwebSmallScreenACBPopup.tpl.html","<div class=autocomplete-xsscreen-popup><ionweb-button ng-mousedown=doneButtonAction($event) class=autocomplete-xsscreen-popup-done-button icon=leftArrow tabindex=-1 icon-color=bright-blue></ionweb-button></div>"),a.put("toolkit/ionbutton/ionButtonDirective.tpl.html","<button type=button class=ionbtn><ionweb-icon icon={{icon}} color={{iconColor}} ng-if=\"icon && (!iconPlacement || iconPlacement=='before')\" class=side-icon></ionweb-icon><span ng-transclude class=center-span></span><ionweb-icon icon={{icon}} color={{iconColor}} ng-if=\"icon && iconPlacement=='after'\" class=side-icon></ionweb-icon></button>"),a.put("toolkit/iondatetimeentrybox/ionDateTimeEntryBox.tpl.html",'<div class=ionweb-date-time-entry ion-date-time-picker-popup ng-model=date is-open=isOpen mode=mode datepicker-options=datepickerOptions timepicker-options=timepickerOptions disable-focus-on-date-picker=disableFocusOnDatePicker close-on-date-selection=closeOnDateSelection use-date-time-tags=useDateTimeTags tags-header-text={{tagsHeaderText}} date-time-tags=dateTimeTags on-date-time-picker-close=onDateTimePickerClose() number-of-tag-columns=numberOfTagColumns refresh=refresh on-bind=onBind show-popup-on-keydown=!useDateTimeTags compact=compact hide-tag-panel=hideTagPanel popup-anchor-point=popupAnchorPoint header-options=headerOptions><ionweb-autocomplete ng-model=autoCompleteBoxData.formattedDateString ng-disabled=disabled show-clear-button=getClearButtonVisibility() placeholder={{placeholder}} allow-free-text=true multiple=false show-arrow-button=getArrowButtonVisibility() show-user-button=showUserButton user-button-icon="\'calendar\'" user-button-action=showHidePopup($event) options=dropDownTagsProvider on-text-change=textChanged(value) validation-state=getValidationState() validation-message=getValidationMessage() editable=editable disable-cache=true on-focus=acbFocused() on-dropdown-state-changed=acbDropdownStateChanged(autocomplete) tabindex={{tabindex}} sub-content=inlineTagInfo ng-model-options={debounce:100} disable-fullscreen-mode="!dateTimeTags || !dateTimeTags.length"></ionweb-autocomplete></div>'),a.put("toolkit/iondatetimerangeentrybox/ionDateTimeRangeEntryBox.tpl.html",'<div class=ionweb-date-time-entry ionweb-date-time-range-picker-popup ng-model=range is-open=isOpen mode=mode from-date-time-picker-options=fromDateTimePickerOptions to-date-time-picker-options=toDateTimePickerOptions refresh=refresh compact=compact date-time-range-tags=dateTimeRangeTags number-of-range-tag-columns=numberOfRangeTagColumns use-range-tags=useRangeTags on-date-time-picker-close=onDateTimePickerClose() range-tags-header-text={{rangeTagsHeaderText}} hide-range-tag-panel=hideRangeTagPanel show-popup-on-keydown=!useRangeTags header-options=headerOptions><ionweb-autocomplete ng-model=autoCompleteBoxData.formattedDateString ng-disabled=disabled placeholder={{placeholder}} allow-free-text=true multiple=false show-clear-button=getClearButtonVisibility() show-arrow-button=getArrowButtonVisibility() show-user-button=showUserButton user-button-action=showHidePopup() user-button-icon="\'calendar\'" user-button-action=showHidePopup() options=dropDownTagsProvider on-text-change=textChanged(value) on-focus=acbFocused() on-dropdown-state-changed=acbDropdownStateChanged(autocomplete) validation-state=getValidationState() validation-message=getValidationMessage() error-animation=errorAnimation editable=editable disable-cache=true tabindex={{tabindex}} ng-model-options={debounce:100} disable-fullscreen-mode="!dateTimeRangeTags || !dateTimeRangeTags.length"></ionweb-autocomplete></div>'),
a.put("toolkit/ionswitch/ionSwitchDirective.tpl.html","<ionweb-button icon={{buttonIcon}} icon-placement={{iconPlacement}} color={{color}} role={{role}} ng-click=toggle() ng-disabled=disabled style={{style}}><span ng-transclude></span> <span>{{buttonText}}</span></ionweb-button>"),a.put("toolkit/numericupdown/downSpinnerButton.tpl.html","<form class=ion-numericupdown-spinner-form><ionweb-button tabindex=-1 role=secondary class=ion-numericupdown-spinner icon-placement=before icon={{downIconName}} ng-mousedown=mouseDownOnDownButton($event) ng-mouseup=mouseup($event) ng-mouseleave=mouseleave($event) ng-disabled=downDisabled></ionweb-button></form>"),a.put("toolkit/numericupdown/numericUpDown.tpl.html",'<table style="height: 100%; width: 100%"><tbody><tr style="padding: 0" ng-style="{\'height\': toolbarHeight}" ng-show=showToolBar><td><form><ionweb-numeric-up-down-toolbar tag=0 style="width: 100%" options=$topToolBar disabled=getToolbarState() unselect-buttons=$bottomToolBar.clearSelection() on-button-click=onToolbarButtonClick font-size=toolbarFontSize selected-button-index=getToolbarSelectedButtonIndex></ionweb-numeric-up-down-toolbar></form></td></tr><tr style=height:100%><td><form><input type=text ng-class="(placeholderAlign ? \'ion-numericupdown-textbox-placeholder-align-\' + placeholderAlign : \'\') + \' \' +\r\n                                      (validationState === 1 ? \'validation-error\':validationState === 2 ? \'validation-warning\':\'\')" class=ion-numericupdown-textbox autocomplete=off tabindex={{tabindex}} ng-disabled=disabled placeholder={{placeholder}} ng-style="{\'font-size\': fontSize}" ng-model=textfieldData.textboxValue ng-change=changeEventHandler() ng-keydown=keyboardEventHandler($event) ng-keypress=onkeypress($event) ng-click=onClickedByMouse($event) ng-focus=textBoxWillBeginEditing() ng-blur=textBoxDidEndEditing() ionweb-validation validation-message=getValidationMessage() validation-state="getValidationState()"></form></td></tr><tr style="padding: 0" ng-style="{\'height\': toolbarHeight}" ng-show=showToolBar><td><form><ionweb-numeric-up-down-toolbar tag=1 style="width: 100%" options=$bottomToolBar disabled=getToolbarState() unselect-buttons=$topToolBar.clearSelection() on-button-click=onToolbarButtonClick font-size=toolbarFontSize selected-button-index=getToolbarSelectedButtonIndex></ionweb-numeric-up-down-toolbar></form></td></tr></tbody></table>'),a.put("toolkit/numericupdown/numericUpDownLeft.tpl.html",'<table><tbody><tr><td ng-style="{width:spinnerSize, height: \'100%\'}" ng-show=showSpinner><table style="width: 100%; height: 100%"><tbody><tr><td style="width: 100%; height: 50%" class=button-no-border><include-unisolate template-path=toolkit/numericupdown/upSpinnerButton.tpl.html></include-unisolate></td></tr><tr><td style="width: 100%; height: 50%"><include-unisolate template-path=toolkit/numericupdown/downSpinnerButton.tpl.html></include-unisolate></td></tr></tbody></table></td><td style="height: 100%"><include-unisolate template-path=toolkit/numericupdown/numericUpDown.tpl.html></include-unisolate></td></tr></tbody></table>'),a.put("toolkit/numericupdown/numericUpDownRight.tpl.html",'<table><tbody><tr><td style="height: 100%"><include-unisolate template-path=toolkit/numericupdown/numericUpDown.tpl.html></include-unisolate></td><td ng-show=showSpinner ng-style="{width:spinnerSize, height: \'100%\'}"><table style="width: 100%; height: 100%"><tbody><tr><td style="width: 100%; height: 50%" class=button-no-border><include-unisolate template-path=toolkit/numericupdown/upSpinnerButton.tpl.html></include-unisolate></td></tr><tr><td style="width: 100%; height: 50%"><include-unisolate template-path=toolkit/numericupdown/downSpinnerButton.tpl.html></include-unisolate></td></tr></tbody></table></td></tr></tbody></table>'),a.put("toolkit/numericupdown/numericUpDownWrapHorizontal.tpl.html",'<table class=wrap-horizontal><tbody><tr><td ng-style="{width:spinnerSize, height: \'100%\'}" ng-show=showSpinner><include-unisolate template-path=toolkit/numericupdown/downSpinnerButton.tpl.html></include-unisolate></td><td style="height: 100%"><include-unisolate template-path=toolkit/numericupdown/numericUpDown.tpl.html></include-unisolate></td><td ng-style="{width:spinnerSize, height: \'100%\'}" ng-show=showSpinner><include-unisolate template-path=toolkit/numericupdown/upSpinnerButton.tpl.html></include-unisolate></td></tr></tbody></table>'),a.put("toolkit/numericupdown/numericUpDownWrapVertical.tpl.html",'<table class=wrap-vertical><tbody><tr ng-show=showSpinner><td ng-style="{height:spinnerSize, width: \'100%\'}" class=button-no-border><include-unisolate template-path=toolkit/numericupdown/upSpinnerButton.tpl.html></include-unisolate></td></tr><tr><td style="height: 100%"><include-unisolate template-path=toolkit/numericupdown/numericUpDown.tpl.html></include-unisolate></td></tr><tr ng-show=showSpinner class=button-no-border><td ng-style="{height:spinnerSize, width: \'100%\'}"><include-unisolate template-path=toolkit/numericupdown/downSpinnerButton.tpl.html></include-unisolate></td></tr></tbody></table>'),a.put("toolkit/numericupdown/upSpinnerButton.tpl.html","<form class=ion-numericupdown-spinner-form><ionweb-button tabindex=-1 role=secondary class=ion-numericupdown-spinner icon={{upIconName}} ng-mousedown=mouseDownOnUpButton($event) ng-mouseup=mouseup($event) ng-mouseleave=mouseleave($event) ng-disabled=upDisabled></ionweb-button></form>"),a.put("toolkit/splitPane/ionwebSplitPane.tpl.html","<div class=ionweb-split-pane-container ng-class=type><div class=ionweb-split-pane-content></div><div class=ionweb-split-pane-splitter ng-show=showSplitter></div><div class=ionweb-split-pane-content ng-show=showSplitter></div></div>"),a.put("toolkit/styleEditor/styleEditor.tpl.html",'<div class=ionweb-style-editor><div ng-if="!ctrl.isCompacted && ctrl.editBgColor" class=ionweb-style-editor-btn title="{{\'Text_Caption_Background_Color\' | resource}}"><input ionweb-color-picker shown=ctrl.bgPickerOpen value-ext=ctrl.bgColor support-transparent=true transparent-is-null=true></div><div ng-if="!ctrl.isCompacted && ctrl.editFgColor" class=ionweb-style-editor-btn title="{{\'Text_Caption_Foreground_Color\' | resource}}"><input ionweb-color-picker shown=ctrl.fgPickerOpen value-ext=ctrl.fgColor support-transparent=true transparent-is-null=true></div><div ng-if="!ctrl.isCompacted && ctrl.editWrap" class=ionweb-style-editor-btn title="{{\'Text_Caption_Wrap_Text\' | resource}}" ng-class="{active: ctrl.wrap}" ng-click="ctrl.wrap = !ctrl.wrap; ctrl.stopEvent($event);"><svg xmlns=http://www.w3.org/2000/svg width=14 height=14 viewbox="0 0 18 18"><path d="M16 3H2v2h14V3zM2 15h4v-2H2v2zm11.5-7H2v2h11.75c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5H11v-2l-3 3 3 3v-2h2.5c1.93 0 3.5-1.57 3.5-3.5S15.43 8 13.5 8z"></svg></div><div ng-if="!ctrl.isCompacted && ctrl.editAlignment" aria-hidden=true class=ionweb-style-editor-btn title="{{\'Text_Caption_Text_Alignment\' | resource}}" ng-class=ctrl.alignmentIcon ng-click="ctrl.changeAlignment(); ctrl.stopEvent($event);"></div><div ng-if="!ctrl.isCompacted && ctrl.editSize" aria-hidden=true class="ionweb-style-editor-btn glyphicon glyphicon-plus" title={{ctrl.increaseTitle}} ng-class="{\'ionbanner-disabled\': !ctrl.canIncreaseSize}" ng-click="ctrl.increaseSize(); ctrl.stopEvent($event);"></div><div ng-if="!ctrl.isCompacted && ctrl.editSize" class="ionweb-style-editor-btn glyphicon glyphicon-minus" title={{ctrl.decreaseTitle}} ng-class="{\'ionbanner-disabled\': !ctrl.canDecreaseSize}" ng-click="ctrl.decrementSize(); ctrl.stopEvent($event);"></div><div ng-if=ctrl.compactMode aria-hidden=true title="{{\'Text_Dashboard_Tooltip_Caption_Style\' | resource}}" class="ionweb-style-editor-btn glyphicon glyphicon-eye-open" ng-click="ctrl.isCompacted = !ctrl.isCompacted; ctrl.stopEvent($event);"></div></div>'),a.put("toolkit/styleEditor/styleEditorVertical.tpl.html",'<div class="ionweb-style-editor-vertical form-horizontal"><div class=form-group ng-if=ctrl.editBgColor><label class="col-xs-8 control-label">{{\'Text_Caption_Background_Color\' | resource}}</label><div class=col-xs-4><input ionweb-color-picker shown=ctrl.bgPickerOpen value-ext=ctrl.bgColor support-transparent=true transparent-is-null=true></div></div><div class=form-group ng-if=ctrl.editFgColor><label class="col-xs-8 control-label">{{\'Text_Caption_Foreground_Color\' | resource}}</label><div class=col-xs-4><input ionweb-color-picker shown=ctrl.fgPickerOpen value-ext=ctrl.fgColor support-transparent=true transparent-is-null=true></div></div><div class=form-group ng-if=ctrl.editWrap><label class="col-xs-8 control-label">{{\'Text_Caption_Wrap_Text\' | resource}}</label><div class=col-xs-4><svg class=ionweb-style-editor-btn ng-class="{active: ctrl.wrap}" ng-click="ctrl.wrap = !ctrl.wrap; ctrl.stopEvent($event);" xmlns=http://www.w3.org/2000/svg width=14 height=14 viewbox="0 0 18 18"><path d="M16 3H2v2h14V3zM2 15h4v-2H2v2zm11.5-7H2v2h11.75c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5H11v-2l-3 3 3 3v-2h2.5c1.93 0 3.5-1.57 3.5-3.5S15.43 8 13.5 8z"></svg></div></div><div class=form-group ng-if=ctrl.editAlignment><label class="col-xs-8 control-label">{{\'Text_Caption_Text_Alignment\' | resource}}</label><div class=col-xs-4><div class=ionweb-style-editor-btn ng-class=ctrl.alignmentIcon ng-click="ctrl.changeAlignment(); ctrl.stopEvent($event);"></div></div></div><div class=form-group ng-if=ctrl.editSize><label class="col-xs-8 control-label">{{\'Text_Caption_Size_Increase\' | resource}}</label><div class=col-xs-4><div class="ionweb-style-editor-btn glyphicon glyphicon-plus" ng-class="{\'ionbanner-disabled\': !ctrl.canIncreaseSize}" ng-click="ctrl.increaseSize(); ctrl.stopEvent($event);"></div></div></div><div class=form-group ng-if=ctrl.editSize><label class="col-xs-8 control-label">{{\'Text_Caption_Size_Decrease\' | resource}}</label><div class=col-xs-4><div class="ionweb-style-editor-btn glyphicon glyphicon-minus" ng-class="{\'ionbanner-disabled\': !ctrl.canDecreaseSize}" ng-click="ctrl.decrementSize(); ctrl.stopEvent($event);"></div></div></div></div>'),a.put("toolkit/swapPanel/swapPanelDirective.tpl.html",'<div class=ionweb-swap-panel-container ng-class="{\'ionweb-swap-panel-vertical-layout\': isVerticalLayout }"><div class=ionweb-swap-panel-available-top-bar><div class=ionweb-swap-panel-mode-button><div class="mode-selector btn-group"><button ng-class="{selected: !isHierarchyViewMode}" ng-click=selectListViewMode()><span class="ionicon ionicon-list-view"></span></button> <button ng-class="{selected: isHierarchyViewMode}" ng-click=selectHierarchyViewMode()><span class="ionicon ionicon-hierarchy"></span></button></div></div><div class=ionweb-swap-panel-search-field><span class="ionweb-swap-panel-search-left-icon ionicon ionicon-search"></span> <input ng-disabled=isHierarchyViewMode type=search ng-model=filterInput placeholder="{{\'Search\' | resource}}" class="ionweb-swap-panel-filter-input ion-input"></div></div><div class=ionweb-swap-panel><ionweb-split-pane min-position=10 max-position=90 type="{{isVerticalLayout ? \'horizontal\' : \'vertical\'}}"><div class=ionweb-swap-panel-left ionweb-droppable drag-enter=onAvailableDragEnter($dataTransfer) drag-leave=onAvailableDragLeave($dataTransfer) drag-over=onAvailableDragOver($dataTransfer) drop=onAvailableDrop($dataTransfer) ng-class="{\'dragging-over-panel\': isDraggingOverAvailable}"><div ng-if=!isHierarchyViewMode class=ionweb-swap-panel-header><div ng-click=sortByName()><div>{{\'Name\' | resource}}{{ isSortedByName ? (isSortingDescending ? "&nbsp;&#x25bc;" : "&nbsp;&#x25b2;") : ""}}</div></div><div ng-click=sortByCategory()><div>{{\'Category\' | resource}}{{ isSortedByCategory ? (isSortingDescending ? "&nbsp;&#x25bc;" : "&nbsp;&#x25b2;") : ""}}</div></div></div><interactive-list vs-repeat on-action=handleColumnAction($action) dnd-source-id=availablePanelId><actionable-item ng-repeat="item in flatAvailable" uid={{item.id}} dnd-options=availableDndOptions><div class=swap-panel-item ng-class="{\'opacity-70\': item.customStyle && item.customStyle.semiTransparent, \'last-selected\': lastSelectedId === item.id, \'swap-panel-item-selected\': isAvailableItemSelected(item), \'ionweb-swap-panel-group\': !swapPanel.isChildren[item.id], \'ionweb-swap-panel-item\': swapPanel.isChildren[item.id]}"><div class=expand-button ng-if=swapPanel.isAvailableGroup[item.id] ng-click=toggleExpand(item.id);><ionweb-icon icon="{{swapPanel.isExpanded[item.id] ? \'collapse\' : \'expand\'}}"></ionweb-icon></div><div class=action-button ng-repeat="action in item.actions" ng-click=action.action();><ionweb-icon ng-if="action.button !== true && action.button !== false" icon={{action.button}}></ionweb-icon><input ng-if="action.button === true || action.button === false" type=checkbox ng-model=action.button></div><div class=ionweb-swap-panel-item-selectable ng-click="onAvailablePanelItemClick($event, item)" ng-dblclick="onAvailablePanelItemDblClick($event, item)"><div>{{item.displayName}}</div><div class=swap-panel-category ng-if=!isHierarchyViewMode>{{item.category ? item.category : \'\'}}</div></div></div></actionable-item></interactive-list></div><div class="ionweb-swap-panel-split ionweb-split-pane-custom-splitter"><ionweb-button class=prevent-split-drag ng-click=onToLeftPressed(); ng-disabled=isToLeftDisabled icon="{{isVerticalLayout ? \'arrowUp\' : \'arrowLeft\'}}"></ionweb-button><ionweb-button class=prevent-split-drag ng-click=onToRightPressed(); ng-disabled=isToRightDisabled icon="{{isVerticalLayout ? \'arrowDown\' : \'arrowRight\'}}"></ionweb-button></div><div class=ionweb-swap-panel-right><div class=ionweb-swap-panel-header><div class=action-header ng-repeat="descr in chosenActionDescriptors">{{descr}}</div><div>{{\'Name\' | resource}}</div><div>{{\'Category\' | resource}}</div></div><interactive-list vs-repeat dnd-source-id=chosenPanelId on-can-drop="onCanDrop($dndAction, $dataTransfer)" on-dnd-action="handleDndAction($dndAction, $dataTransfer)"><actionable-item ng-repeat="item in flatChosen" uid={{item.id}} dnd-options=chosenDndOptions><div class=swap-panel-item ng-class="{\'opacity-70\': item.customStyle && item.customStyle.semiTransparent, \'last-selected\': lastSelectedId === item.id, \'swap-panel-item-selected\': isChosenItemSelected(item), \'ionweb-swap-panel-group\': !swapPanel.isChildren[item.id], \'ionweb-swap-panel-item\': swapPanel.isChildren[item.id]}"><div class=expand-button ng-if=swapPanel.isChosenGroup[item.id] ng-click=toggleExpand(item.id);><ionweb-icon icon="{{swapPanel.isExpanded[item.id] ? \'collapse\' : \'expand\'}}"></ionweb-icon></div><div class=action-button ng-repeat="action in item.actions" ng-click=action.action();><ionweb-icon ng-if="action.button !== true && action.button !== false" icon={{action.button}}></ionweb-icon><input ng-if="action.button === true || action.button === false" type=checkbox ng-model=action.button></div><div class=ionweb-swap-panel-item-selectable ng-click="onChosenPanelItemClick($event, item)" ng-dblclick="onChosenPanelItemDblClick($event, item)"><div>{{item.displayName}}</div><div class=swap-panel-category ng-if=item.category>{{item.category}}</div></div></div></actionable-item></interactive-list></div></ionweb-split-pane><div class=ionweb-swap-panel-reorder-buttons><ionweb-button ng-click=onMoveTopPressed() ng-disabled=isMoveTopDisabled icon=moveUp></ionweb-button><ionweb-button ng-click=onMoveUpPressed() ng-disabled=isMoveUpDisabled icon=arrowUp></ionweb-button><ionweb-button ng-click=onMoveDownPressed() ng-disabled=isMoveDownDisabled icon=arrowDown></ionweb-button><ionweb-button ng-click=onMoveBottomPressed() ng-disabled=isMoveBottomDisabled icon=moveDown></ionweb-button></div></div><div class=ionweb-swap-panel-description>{{description || (\'&nbsp;\' | resource)}}</div></div>'),a.put("toolkit/tile/ionwebTile.tpl.html",'<div ng-class="[{\'ion-tile-flash\': flashTile}, roundingClass]" class=ion-tile ng-click=onLeftClick($event)><div class=ion-tile-selection-feedback-container><span class=ion-tile-selection-feedback-background></span> <span class="ion-tile-selection-feedback-icon ionicon ionicon-accept"></span></div><div class=ion-tile-main-container><div ng-if="!customContent && iconOptions.position !== 4" class="ion-tile-flex-direction ion-tile-sub-container" ng-class="{\'ion-tile-flex-direction-row\': (iconOptions.position === 0 || iconOptions.position === 1),\r\n                    \'ion-tile-flex-direction-column\': (iconOptions.position === 2 || iconOptions.position === 3)}"><ionweb-icon ng-if=shouldShowIcon() ng-class="[iconOrderClass, iconPositionClass]" class=ion-tile-icon icon={{iconOptions.icon}} ng-style="{\'font-size\': iconFontSize, \'margin\': getIconPosition()}"></ionweb-icon><div ng-if="shouldShowPrimaryText() || shouldShowSecondaryText()" ng-class=textOrderClass class=ion-tile-text-container ng-style="{\'margin\': textContainerPosition()}"><label ng-if=shouldShowPrimaryText() ng-class="[primaryTextBgColor, primaryTextFgColor]" class=ion-tile-primary-text ng-style="{\'margin\': primaryTextPositionInCenterIconMode()}">{{primaryTextOptions.text}}</label><label ng-if=shouldShowSecondaryText() ng-class="[secondaryTextBgColor, secondaryTextFgColor]" class=ion-tile-secondary-text ng-style="{\'margin\': secondaryTextPositionInCenterIconMode()}">{{secondaryTextOptions.text}}</label></div></div><div ng-if="!customContent && iconOptions.position == 4" class="ion-tile-flex-direction ion-tile-flex-direction-column ion-tile-sub-container"><label ng-if=shouldShowPrimaryText() class=ion-tile-primary-text ng-class="[textOrderClass, primaryTextBgColor, primaryTextFgColor]" ng-style="{\'margin\': primaryTextPositionInCenterIconMode()}">{{primaryTextOptions.text}}</label><ionweb-icon ng-if=shouldShowIcon() ng-class="[iconOrderClass, iconPositionClass]" icon={{iconOptions.icon}} class=ion-tile-icon ng-style="{\'font-size\': iconFontSize}"></ionweb-icon><label ng-if=shouldShowSecondaryText() class=ion-tile-secondary-text ng-class="[secondaryTextOrderClass, secondaryTextBgColor, secondaryTextFgColor]" ng-style="{\'margin\': secondaryTextPositionInCenterIconMode()}">{{secondaryTextOptions.text}}</label></div><div class="tile-custom-content ion-tile-sub-container" ng-show="customContent && (customContent.template || customContent.templateUrl)"></div></div><div class=ion-tile-feedback ng-class=feedbackStatusColor></div></div>'),a.put("toolkit/toggle/toggle.tpl.html",'<div class=ionweb-toggle-container ng-class="{active: ctrl._state, disabled: ctrl.disabled}" validation-message=ctrl.validationMessage validation-state=ctrl.validationState ng-keydown=ctrl.toggleValue($event) ng-click=ctrl.toggleValue($event) tabindex=0><span class=ionweb-toggle-label-on ng-class="[ctrl.onColorBg, ctrl.onColorFg]"><span ng-if=ctrl.showLabels>{{ctrl.onLabel}}</span></span> <span class=ionweb-toggle-label-off ng-class="[ctrl.offColorBg, ctrl.offColorFg]"><span ng-if=ctrl.showLabels>{{ctrl.offLabel}}</span></span><div class=ionweb-toggle-placeholder ng-if=ctrl.showLabels>{{ctrl.onLabel}}<br>{{ctrl.offLabel}}</div><div class=ionweb-toggle-indicator></div></div>'),a.put("toolkit/validationtooltip/validationSummary.tpl.html",'<div class="validation-summary-caption ion-form-content-subtitle" ng-hide=hideTitle>{{ panelTitle || (hasServiceError ? "Title_Service_Error" : "Title_Error_Warning" | resource:{\'length\' : filteredEntries.length}) }}</div><div class=validation-summary-messages></div>')}]);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ionweb;!function(a){a.Version="1.1.8-p1d8-r15018",a.Copyright="© Copyright 2018, ION.",a.GitSha="50b0bb1ece4773cd76bcd2a243f03fa86727291f"}(ionweb||(ionweb={})),ionweb.services.registerCoreSubmodule("ionwebTk",[],ionweb.toolkit.Strings,!0),angular.module("ionweb",["ngRoute","ui.bootstrap","ngAnimate","ionwebCore","ionwebServer","ionwebTk"]);var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.Density_Automatic_DisplayName="Automatic",a.Density_Web_DisplayName="Web",a.Density_Compact_DisplayName="Compact",a.Density_Touch_DisplayName="Touch",a.Density_Automatic_Description="The display density will update dynamically based on the size of your device",a.Density_Web_Description="Optimized for keyboard and mouse and ideal for use with laptops and desktop computers",a.Density_Compact_Description="Optimized to show more information and requires more precise interaction",a.Density_Touch_Description="Optimized for touch interaction and smaller device sizes such as phones and tablets",a.Err_ChildWindow_Cannot_Open_ChildWindow="Cannot open a child window.",a.Err_Theme_Cannot_BeNull="Theme cannot be null",a.Err_Theme_Not_Found="Theme ${themeName} not found",a.Err_Parsing_ThemeFile='Error parsing theme file "${filename}"',a.Err_ThemeService_AlreadyStarted="Theme service already started",a.Err_MissingTheme_Name="Missing theme name",a.Err_Theme_AlreadyRegistered="The theme  ${themeName}  is already registered",a.Err_Theme_ShouldProvide_CSS_LESS_Path="Theme ${themeName} should specify a CSS or LESS path",a.Warn_ThemeCompiledForModule="Performance issue: themes not compiled by ION.WEB Server",a.Theme_Modern_Light_DisplayName="Light",a.Theme_Modern_Dark_DisplayName="Dark",a.Theme_Modern_Light_Contrast_DisplayName="Light (contrast)",a.Theme_Modern_Dark_Contrast_DisplayName="Dark (contrast)",a.Err_Ionweb_FailedTo_LoadModule="Failed to load module ${mod}: ${err}",a.Err_Ionweb_ExportingName_SourceName_PluginName='Error exporting " ${name} " symbol (from " ${sourceName} ") to the ${pluginName} since an object with the same name/path already exists.',a.Err_Modules_NameVersion_AlreadyLoaded="A module with name: '${name}' and version: '${version}' is already loaded.",a.Err_Modules_Invalid_InfoFile_Missing_EntryPoint="Invalid info file (missing entry point): ",a.Err_Multiple_MasterModules_Loaded_No_CorrectStartup_ModuleConfiguration="Multiple master modules loaded and no correct startup module is set in the configuration.",a.Dialog_Btn_ShowDetails="Show details",a.Dialog_Btn_HideDetails="Hide details",a.Err_Registry_Category_Id_AlreadyRegistered="The category ${id} is already registered",a.Text_Splashscreen_Loading="Loading...",a.Err_Autologin_Configuration_Error_Timeout_Expired="Configuration error - no credentials sent",a.Err_Configuration_Error_Timeout_Expired="Configuration error - timeout connecting with hosting frame",a.Err_RootCompService_Not_Initialized="Not initialized",a.Text_Privacy="Privacy",a.Text_Language="Language",a.Fatal_Btn_Reload="Reload",a}();a.Strings=b}(b=a.coreui||(a.coreui={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function b(b){this.environmentService=b,this._fullScreenEvent=new a.Event,this.registerFullscreenEvent(document.documentElement)}return b.prototype.registerFullscreenEvent=function(a){var b=this,c=".fullscreenModeManager";$(this._element).off("fullscreenchange"+c),$(this._element).off("webkitfullscreenchange"+c),this._element=a,$(this._element).on("fullscreenchange"+c,function(a){b._fullScreenEvent.raise(b,b.isDocumentInFullscreenMode())}),$(this._element).on("webkitfullscreenchange"+c,function(a){b._fullScreenEvent.raise(b,b.isDocumentInFullscreenMode())})},Object.defineProperty(b.prototype,"fullScreenEvent",{get:function(){return this._fullScreenEvent},enumerable:!0,configurable:!0}),b.prototype.shouldShowFullscreenModeMenu=function(a){if(void 0===a&&(a=document.documentElement),!this.environmentService.isTouchDevice())return!1;var b=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!b)return!1;var c=a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen;return!!c},b.prototype.isDocumentInFullscreenMode=function(){var a=document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement;return!!a},b.prototype.toggleFullscreenMode=function(a){void 0===a&&(a=document.documentElement);var b=document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement;if(b){var c=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;c&&c.call(document)}else{var d=a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen;d&&(this._element!==a&&this.registerFullscreenEvent(a),d.call(a))}},b}();a.FullscreenModeManager=b;var c=function(){function c(d,e,f,g){this.$location=f,this.$rootScope=g,this._isOffline=!1,this.isOfflineChanged=new a.Event,this.logger=e.create("EnvSvc"),this.mobileDetected=c.detectMobile(),this.configurationService=d,this.has=a.syncRequire("dojo/has"),this._fullscreenModeManager=new b(this),this.initialViewportWidth=window.innerWidth,this.initialViewportHeight=window.innerHeight,this.initOrientation(),this._orientationChanged=new a.Event}return c.detectMobile=function(){var a=function(){var a=/iPhone/i,b=/iPod/i,c=/iPad/i,d=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,e=/Android/i,f=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,g=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/IEMobile/i,i=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,j=/BlackBerry/i,k=/BB10/i,l=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,n=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,o=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),p=function(a,b){return a.test(b)},q=navigator.userAgent,r=q.split("[FBAN");"undefined"!=typeof r[1]&&(q=r[0]),r=q.split("Twitter"),"undefined"!=typeof r[1]&&(q=r[0]);var s={phone:p(a,q),ipod:p(b,q),tablet:!p(a,q)&&p(c,q),device:p(a,q)||p(b,q)||p(c,q)},t=({phone:p(f,q),tablet:!p(f,q)&&p(g,q),device:p(f,q)||p(g,q)},{phone:p(f,q)||p(d,q),tablet:!p(f,q)&&!p(d,q)&&(p(g,q)||p(e,q)),device:p(f,q)||p(g,q)||p(d,q)||p(e,q)}),u={phone:p(h,q),tablet:p(i,q),device:p(h,q)||p(i,q)},v={blackberry:p(j,q),blackberry10:p(k,q),opera:p(l,q),firefox:p(n,q),chrome:p(m,q),device:p(j,q)||p(k,q)||p(l,q)||p(n,q)||p(m,q)},w=p(o,q),x=s.device||t.device||u.device||v.device||w,y=s.phone||t.phone||u.phone,z=s.tablet||t.tablet||u.tablet;return{sevenInch:w,anyDevice:x,anyPhone:y,anyTablet:z}};if(window.devicePixelRatio>1){var b=a(),c=!!(b.anyPhone||b.anyTablet||b.sevenInch||b.anyTablet);return c}return!1},c.prototype.initOrientation=function(){this.isMobileDevice()?(this.initialViewportHeight>=this.initialViewportWidth?this._orientation=a.Orientation.Potrait:this._orientation=a.Orientation.Landscape,this.registerWindowResizeEvent()):this._orientation=a.Orientation.None},c.prototype.registerWindowResizeEvent=function(){var b=this;window.addEventListener("resize",function(){b.$rootScope.$evalAsync(function(){b.isMobileDevice()&&(window.innerWidth!=b.initialViewportWidth?b._orientation=window.innerWidth<=b.initialViewportWidth?a.Orientation.Potrait:a.Orientation.Landscape:b._orientation=b.initialViewportHeight>=b.initialViewportWidth?a.Orientation.Potrait:a.Orientation.Landscape,window.scrollTo(window.scrollX,0),b._orientationChanged.raise(b,b._orientation))})})},c.prototype.isTouchDevice=function(){return this.configurationService.config.shell.deviceInput===c.DEVICE_INPUT_TOUCH||this.configurationService.config.shell.deviceInput!==c.DEVICE_INPUT_KEYBOARD&&window._ionPrimerFeatures.isTouchDevice},c.prototype.isCookieDisabled=function(){return!("cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1))},c.prototype.isMobileDevice=function(){return this.configurationService.config.shell.deviceType===c.DEVICE_TYPE_MOBILE||this.configurationService.config.shell.deviceInput!==c.DEVICE_TYPE_DESKTOP&&this.mobileDetected},Object.defineProperty(c.prototype,"orientation",{get:function(){return this._orientation},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"orientationChanged",{get:function(){return this._orientationChanged},enumerable:!0,configurable:!0}),c.prototype.isSmallScreen=function(){try{if(this.configurationService.config.shell.isSmallScreen===!0||"undefined"==typeof screen)return!0;var a=screen.width,b=screen.height;return window.devicePixelRatio?(a*=window.devicePixelRatio,b*=window.devicePixelRatio):(screen.deviceXDPI&&screen.logicalXDPI&&(a*=screen.deviceXDPI/screen.logicalXDPI),screen.deviceYDPI&&screen.logicalYDPI&&(b*=screen.deviceYDPI/screen.logicalYDPI)),a<768||b<768}catch(a){return!1}},c.prototype.initLoginInfo=function(){var b={};"undefined"!=typeof screen&&"undefined"!=typeof window&&(b.screen={width:screen.width,height:screen.height,dpr:window.devicePixelRatio}),b.deviceType=this.configurationService.loginConfiguration.deviceType=this.isMobileDevice()?"mobile":"desktop",b.configDeviceType=this.configurationService.config.shell.deviceType,b.configDeviceinput=this.configurationService.config.shell.deviceInput,b.deviceSpecs=this.configurationService.loginConfiguration.deviceSpecs={touch:this.isTouchDevice(),small:this.isSmallScreen()},this.logger.low("init",b);var c={browser:"notDetected",version:"notDetected"};this.has("ie")?(c.browser="IE",c.version=this.has("ie")):this.has("ff")?(c.browser="Firefox",c.version=this.has("ff")):this.has("chrome")?(c.browser="Chrome",c.version=this.has("chrome")):this.has("safari")?(c.browser="Safari",c.version=this.has("safari")):this.has("trident")?(c.browser="Trident",c.version=this.has("trident")):this.has("edge")&&(c.browser="Edge",c.version=this.has("edge"));var d=window.navigator,e={userAgent:d.userAgent,cookieEnabled:d.cookieEnabled,language:d.language};this.logger.analytics("Session","Browser",c.browser+"_"+c.version,a.AnalyticsTraceLevel.Info),this.logger.analytics("Session","OperatingSystem",d.platform,a.AnalyticsTraceLevel.Info,e)},c.prototype.reload=function(b){a.onReloading(),b?window.location.href=b:window.location.reload()},Object.defineProperty(c.prototype,"isOffline",{get:function(){return this._isOffline},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"fullscreenModeManager",{get:function(){return this._fullscreenModeManager},enumerable:!0,configurable:!0}),c.prototype.updateOffline=function(a){this._isOffline=a,this.isOfflineChanged.raise(this,null)},c.DEVICE_TYPE_AUTO="auto",c.DEVICE_TYPE_MOBILE="mobile",c.DEVICE_TYPE_DESKTOP="desktop",c.DEVICE_INPUT_AUTO="auto",c.DEVICE_INPUT_TOUCH="touch",c.DEVICE_INPUT_KEYBOARD="keyboard",c}();a.EnvironmentService=c,angular.module("ionwebCore").service("ionweb.environmentService",["ionweb.configurationService","ionweb.loggerFactory","$location","$rootScope",function(a,b,d,e){return new c(a,b,d,e)}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a){this.$rootScope=a,this.splashscreenQueue={},a.globalState={showSplashscreen:!0}}return a.prototype.showSplashscreen=function(a){var b=this;this.$rootScope.$evalAsync(function(){b.$rootScope.globalState.showSplashscreen=!0,b.splashscreenQueue[a]=a})},a.prototype.hideSplashscreen=function(a){var b=this;this.$rootScope.$evalAsync(function(){delete b.splashscreenQueue[a],b.$rootScope.globalState.showSplashscreen=b.isSplashscreenVisible})},Object.defineProperty(a.prototype,"isSplashscreenVisible",{get:function(){return Object.keys(this.splashscreenQueue).length>0},enumerable:!0,configurable:!0}),a.$inject=["$rootScope"],a}();angular.module("ionwebCore").service("ionweb.splashScreenService",b)}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Chart=0]="Chart",a[a.Grid=1]="Grid",a[a.Scorecard=2]="Scorecard"}(b=a.ComponentTypeIcon||(a.ComponentTypeIcon={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function b(b){this.configService=b,this.categories={},this.defaultComponents={},this._currentComponentChanged=new a.Event;
}return b.prototype.enableNavigateApi=function(a,b){var c=this;this.$location=a,b.$on("$locationChangeSuccess",function(){c._currentComponentChanged.raise(c,c.currentComponent)})},b.prototype.registerDefaultComponent=function(a,b){this.defaultComponents[a]=b},b.prototype.isComponentIdValid=function(a){var b=this;return Object.keys(this.categories).some(function(c){return b.categories[c].components.some(function(b){return b.id===a})})},b.prototype.navigateToComponent=function(a,b){this.$location&&a&&a.id&&(this.$location.path(a.id),b&&this.$location.search(b))},Object.defineProperty(b.prototype,"currentComponent",{get:function(){var a=function(a){for(;"/"===a.charAt(0);)a=a.substr(1);return a},b=this.$location&&this.$location.path();return b&&this.findComponentType(a(b))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"currentComponentChanged",{get:function(){return this._currentComponentChanged},enumerable:!0,configurable:!0}),b.prototype.findComponentType=function(b){for(var c=Object.getOwnPropertyNames(this.categories),d=0;d<c.length;d++){var e=a.firstOrDefault(this.categories[c[d]].components,function(a){return a.id===b});if(e)return e}return null},b.prototype.checkComponents=function(){a.forEach(this.categories,function(a){a.components.forEach(function(b){b.category!=a&&(b.category=a)})})},b.buildCategory=function(b,c,d){var c=c||b;return a._isSlave&&Array.isArray(d)&&d.length>0&&(c=d.join("|")),{id:b,displayName:c,path:d,components:[]}},b.prototype.addCategory=function(a,c,d){if(this.categories[a])throw new Error("The category is already registered");return this.categories[a]=b.buildCategory(a,c,d)},b.prototype.isHidden=function(a){var b=this.configService.config.shell;return a.isHidden||Array.isArray(b.catalogFilter)&&b.catalogFilter.indexOf(a.id)<0},b.prototype.getComponentMenu=function(){var b=this,c=[],d=function(b,c){var d=a.firstOrDefault(b,function(a){return a.name===c});return d||(d={name:c,subItems:[]},b.push(d)),d},e=function(a){var b=null,e=c;return a.forEach(function(a){b=d(e,a),e=b.subItems}),b};Object.keys(this.categories).forEach(function(a){var c=b.categories[a];if(c.components){var d=c.components.filter(function(a){return!b.isHidden(a)});if(d.length>0){var f=e(c.path||[c.displayName||c.id]);d.forEach(function(a){var c={name:a.displayName,compTypeId:a.id,icon:b.getComponentIcon(a.icon)};f.subItems.push(c)})}}});var f=function(b){var b=b.sort(function(b,c){return a.ValueComparer.naturalStringCompare(b.name,c.name,!1)});return b.forEach(function(a){a.subItems&&a.subItems.length>0&&(a.subItems=f(a.subItems))}),b};return f(c)},b.prototype.getComponentIcon=function(b){if("number"==typeof b)switch(b){case a.ComponentTypeIcon.Chart:return"chart";case a.ComponentTypeIcon.Grid:return"grid";case a.ComponentTypeIcon.Scorecard:return"scorecard"}return b},b}();a.Catalog=b,a.module("ionwebCore").service("catalogService",["ionweb.configurationService"],function(a){return new b(a)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k){this.rootScope=b,this.locationService=c,this.logFactory=d,this.configService=e,this.routeService=f,this.$q=g,this.dialogService=h,this.embeddingService=i,this.catalog=j,this.splashScreenService=k,this.pathErrors=!1,this.warnOnExit=!0,this.inSingleComponentModeChanged=new a.Event,this.logger=d.create("RootComponent"),this.initDeferred=Q.defer()}return b.prototype.getStartupPath=function(){var a=function(a,b){for(var c=0;b[c]===a;)c++;return b.substr(c)};return this.startupPath&&a("/",this.startupPath)},Object.defineProperty(b.prototype,"initialized",{get:function(){return this.initDeferred.promise},enumerable:!0,configurable:!0}),b.prototype.init=function(b){var c=this;this.routeProvider=a.angularExt.routeProvider,this.root=b(),this.rootScope.$on("$routeChangeError",function(a,b,d,e){c.logger.low("RouteErr",{curr:b,prev:d,rej:e}),c.pathErrors=!0}),this.initDeferred.resolve(null),this.embeddingService.isAvailable||window.addEventListener("beforeunload",function(a){return c.handleOnBeforeUnload(a)})},b.prototype.getRootComponent=function(){if(!this.root)throw new Error(a.coreui.Strings.Err_RootCompService_Not_Initialized);return this.root},b.prototype.routeSave=function(){var a=this.locationService.path();this.routeService.routes[a]||(this.startupPath=a,this.startupSearch=this.locationService.search())},b.prototype.routeReload=function(a){var b=null,c=null,d=null,e=!1;if(a&&(b=a,d="config.single",this.inSingleComponentMode=!0,this.inSingleComponentModeChanged.raise(this,null)),!b&&this.startupPath&&this.catalog.isComponentIdValid(this.startupPath.replace("/",""))&&(b=this.startupPath,c=this.startupSearch,d="url"),!b){var f,g=this.configService.config.shell.startupModule;if(g){var h=g.split("/");f=h.length>1?h[1]:this.catalog.defaultComponents[g]&&this.catalog.defaultComponents[g].id}f&&(b="/"+f,d="config")}if(!b){var i=this.root.lastVisitedPath;i&&this.catalog.isComponentIdValid(i.replace("/",""))&&(b=i,d="preferences",e=!0)}if(!b){var j=this.configService.config.shell.defaultModule,k=j&&this.catalog.defaultComponents[j];if(k)b="/"+k.id,d="preferred";else{var l=Object.keys(this.catalog.defaultComponents);l.length>0&&(b="/"+this.catalog.defaultComponents[l[0]].id,d="auto")}}b||(b="/",d="default"),this.pathErrors=!1,this.logger.low("startView",{reason:d,id:b}),this.setLocationPath(b,c),e||this.routeService.reload()},b.prototype.registerDefaultPath=function(a){this.routeProvider.when("/",{templateUrl:a,reloadOnSearch:!1}),this.setLocationPath("/",null),this.routeService.reload()},b.prototype.registerComponent=function(a,b){this.routeProvider.when("/"+a,{templateUrl:b.templateUrl,template:b.template,reloadOnSearch:!1})},b.prototype.registerCatalog=function(){var b=this;a.forEach(this.catalog.categories,function(a){a.components.forEach(function(a){b.registerComponent(a.id,a)})});var c=this.configService.config.shell.startupModule;if(c&&this.catalog.defaultComponents[c]){var d=this.catalog.defaultComponents[c];this.routeProvider.when("/",{templateUrl:d.templateUrl,reloadOnSearch:!1})}},b.prototype.showContent=function(a){this.splashScreenService.hideSplashscreen("checkingAuthenticationAtStartup"),this.rootScope.contentUrl=a},b.prototype.handleOnBeforeUnload=function(b){var c=this.root.checkDirty();return this.warnOnExit&&c.isDirty?(b||window.event).returnValue=c.reason:void a.onReloading()},b.prototype.disableWarnOnExit=function(){this.warnOnExit=!1},b.prototype.checkWarnOnExit=function(b){var c=this,d=this.root.checkDirty();return this.warnOnExit&&d.isDirty?this.dialogService.showQuestionDialog(d.reason,b).closed.then(function(b){return!b.cancel&&b.value===a.DialogResult.Ok&&(c.disableWarnOnExit(),!0)}):this.$q.when(!0)},b.prototype.setLocationPath=function(a,b){var c=this,d=Q.defer();this.dialogService.suspendRouteLock(),this.locationService.path(a||"/"),b&&this.locationService.search(b);var e=function(){},f=function(){},g=function(){e(),f(),c.rootScope.$evalAsync(function(){c.dialogService.resumeRouteLock(),d.resolve(null)})};return e=this.rootScope.$on("$routeChangeError",g),f=this.rootScope.$on("$routeChangeSuccess",g),d.promise},b}();a.RootComponentService=b,angular.module("ionwebCore").service("ionweb.rootComponentService",["$rootScope","$location","ionweb.loggerFactory","ionweb.configurationService","$route","$q","ionweb.dialogService","ionweb.embeddingService","ionweb.catalogService","ionweb.splashScreenService",b])}(ionweb||(ionweb={}));var ionweb;!function(a){a.NoComponentId=String.fromCharCode(0),angular.module("ionwebCore").directive("ionwebComponent",["ionweb.loggerFactory","$interpolate",function(b,c){var d=function(d,e,f){var g,h,i=function(a){if(a=c(a,!1)(d)||"","string"!=typeof a)throw new Error("Component IDs should be of type string.");return a},j=function(){var i=f.ionwebComponentType;i=i&&c(i,!1)(d);var j=d.$parent,k=j.component;g=d.component=new a.Component(h,k,b),g.element=e,k?(j.$watch("component.editMode",function(){g.editMode=k.editMode}),g.editMode=k.editMode):a._isSlave&&(g.editMode=!0),i&&(d.component.typeId=i)},k=function(){g&&(l(),g.dispose(),g=null)};h=i(f.ionwebComponent),h!==a.NoComponentId&&j();var l=f.$observe("ionwebComponent",function(b){b=i(b),h!==b&&(h=b,g&&h===a.NoComponentId?k():g||h===a.NoComponentId?g&&h!==a.NoComponentId&&g.changeId(h):j())});d.$on("$destroy",function(){return k()})};return{link:{pre:d},scope:!0,priority:1e3}}]),angular.module("ionwebCore").directive("ionwebRootComponent",["ionweb.rootComponentService","ionweb.preferenceService",function(a){return{link:{pre:function(b,c){var d=a.getRootComponent();if(!d)throw new Error("Root component not registered yet");b.component=d,b.getRootComponentElement=function(){return c[0]}}}}}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a.CLOSED_MESSAGE="closing",a.PREFERENCE_CHANGE_MESSAGE="preferenceChanged",a.GET_THEME_MESSAGE="getTheme";var b;!function(a){a[a.Main=0]="Main",a[a.LocalUser=1]="LocalUser",a[a.LocalDevice=2]="LocalDevice"}(b=a.PreferenceStore||(a.PreferenceStore={})),a.SEARCHARG_CHILD_WINDOW_NAME="child",a.SEARCHARG_CHILD_WINDOW_VALUE=""}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={})),function(a){var b;!function(a){a[a.None=0]="None",a[a.ParentFrame=1]="ParentFrame",a[a.ChildWindow=2]="ChildWindow",a[a.IonNet=3]="IonNet",a[a.MobileApp=4]="MobileApp"}(b=a.EmbeddedEnvironmentType||(a.EmbeddedEnvironmentType={}));var c;!function(a){a[a.Ok=0]="Ok",a[a.Warning=1]="Warning",a[a.Error=2]="Error"}(c=a.ExportableConnectionStatus||(a.ExportableConnectionStatus={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(a,b){var c=this;this.target=a,window.addEventListener("message",function(a){b&&a.source!==b||!c.handleIncomingMessage(a.data)||a.stopPropagation()})}return a.prototype.init=function(a){this.handleIncomingMessage=a},a.prototype.sendMessage=function(a){this.target.postMessage(a,"*")},a}();a.WindowFrameEndPoint=b;var c=function(a){function b(){return a.call(this,window.parent)||this}return __extends(b,a),b}(b);a.ParentFrameEndPoint=c;var d=function(b){function c(c,d,e){var f=b.call(this,window.opener)||this;return f.channel=c,f.prefProvider=d,window.addEventListener("unload",function(){var b={msgType:a.CLOSED_MESSAGE};c.postMessage(b)}),e.linkRemote("openerWin",c),f.channel.handleMessage.add(function(a){return f.handleParentMessage(a)}),f}return __extends(c,b),Object.defineProperty(c.prototype,"supportThemes",{get:function(){return!0},enumerable:!0,configurable:!0}),c.prototype.getCurrentThemeId=function(){var b={msgType:a.GET_THEME_MESSAGE};return this.channel.sendMessage(b).then(function(a){return a.theme})},c.prototype.handleParentMessage=function(b){if(b.request&&b.request.msgType)switch(b.request.msgType){case a.PREFERENCE_CHANGE_MESSAGE:var c=b.request,d=this.prefProvider.getPrefStore(c.store);c.deleted?d&&d.deleteKey(c.key):d&&d.setValue(c.key,JSON.parse(c.value))}},c.isChildWindow=function(b){var c=b.search();return"undefined"!=typeof c[a.SEARCHARG_CHILD_WINDOW_NAME]},c}(b);a.ChildWindowEndPoint=d}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){a.BUILT_IN_THEME_LIGHT_KEY="ion-modern-light",a.BUILT_IN_THEME_DARK_KEY="ion-modern-dark",a.BUILT_IN_THEME_LIGHT_CONTRAST_KEY="ion-modern-light-contrast",a.BUILT_IN_THEME_DARK_CONTRAST_KEY="ion-modern-dark-contrast"}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=1,d=2,e="getCaps",f="showMessage",g="editConfig",h="updateCatalog",i="modern_light",j="modern_dark",k="modern_light_high_contrast",l="modern_dark_high_contrast",m=function(){function b(b,c){this.embeddingService=b,this.onControlMessage=new a.Event,this.onCredentialsAvailable=new a.Event,this.onThemeChanged=new a.Event,this.configService=b.configService,this.logger=c.create("IonNetBridge")}return b.prototype.init=function(b){var c=this;this.parseIncomingMessageHndl=b,ionweb_postMessage=function(a){c.parseIncomingMessageHndl(a)},ionweb_userAndPasswordAvailable=function(){var b=window.external.User,d=window.external.Password;window.external.ClearUserAndPassword(),c.onCredentialsAvailable.raise(c,{username:b,password:a.server.EncryptionHelper.decryptPassword(d)})},ionweb_themeChanged=function(){c.onThemeChanged.raise(c,c.getCurrentTheme())},this.embeddingService.handleMessage.add(function(a,b){!b.isHandled&&b.request.ionweb_controlReqId&&c.onControlMessage.raise(c,b)}),this.caps=this.sendControlMessage({ionweb_controlReqId:e,canOverrideConfig:!0}).then(function(a){return a.caps}).catch(function(){return{}}),Q.all([this.caps,this.embeddingService.applicationStatusService.waitForStartupConfiguration]).then(function(a){var b=c.configService.config.shell;a[0].hasCatalog&&b.ionnet&&b.ionnet.bridgeCatalog&&c.postControlMessage({ionweb_controlReqId:h,catalog:c.embeddingService.catalogService.getComponentMenu(),appName:c.configService.config.shell.appName})}),this.configService.onConfigFetched.add(function(a,b){b.async=c.caps.then(function(a){if(a.hasProtocol2)return c.sendControlMessage({ionweb_controlReqId:g,config:b.config}).then(function(a){return{config:a.config}})})})},b.prototype.startPrefBridge=function(a){var b=this;a.overwritePreferenceProvider({load:function(){return b.loadScenario()},save:function(a){return b.saveScenario(a)}}),a.enableAutosave&&a.enableAutosave()},Object.defineProperty(b.prototype,"supportThemes",{get:function(){return!0},enumerable:!0,configurable:!0}),b.convertIonNetTheme=function(b){return b?(b===k?b=a.BUILT_IN_THEME_LIGHT_CONTRAST_KEY:b===l?b=a.BUILT_IN_THEME_DARK_CONTRAST_KEY:b===j?b=a.BUILT_IN_THEME_DARK_KEY:b===i&&(b=a.BUILT_IN_THEME_LIGHT_KEY),b):null},b.prototype.getCurrentTheme=function(){return b.convertIonNetTheme(window.external.Theme)},b.prototype.getCurrentThemeId=function(){return Q.when(this.getCurrentTheme())},b.prototype.sendMessage=function(a){window.external.PostMessage(a)},b.prototype.queryCredentials=function(){window.external.QueryCredentials()},b.prototype.updateStatus=function(a,b){if(!this.configService.config.shell.disableEmbeddedStatusNotification){var c=a.protocol+"//"+a.hostname+(a.port?":"+a.port:""),d="ION.WEB ("+c+")";window.external.SetConnectionStatus(d,JSON.stringify(b))}},b.prototype.sendControlMessage=function(a){return this.embeddingService.sendMessage(a).timeout(3e3,"timeout")},b.prototype.postControlMessage=function(a){this.embeddingService.postMessage(a)},b.prototype.saveScenario=function(b){var d=this,e=JSON.stringify(b,a.LazySerializable.jsonReplacer);return e===this.lastScenario?Q.when(null):(this.lastScenario=e,this.logger.medium("saving"),this.sendControlMessage({ionweb_controlReqId:c,scenario:e}).then(function(){d.logger.low("saved")},function(a){d.logger.low("saveErr",{err:a&&a.message})}))},b.prototype.loadScenario=function(){var a=this;return this.logger.low("loading"),this.sendControlMessage({ionweb_controlReqId:d}).then(function(b){return a.logger.low("loaded"),b&&b.componentState?b:null},function(b){return a.logger.low("loadErr",{err:b&&b.message}),null})},b.prototype.showMessage=function(a,b,c,d,e){this.sendControlMessage({ionweb_controlReqId:f,primary:a,messageType:b,secondary:c,details:d,decoration:e}).done()},b.prototype.showExceptionMessage=function(a,b,c){this.sendControlMessage({ionweb_controlReqId:f,primary:a,isExc:!0,secondary:b,details:c}).done()},b}();b.IonNetEndPoint=m}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){function b(a){c.receivingMessageFromNativeShell(a)}var c,d="editConfig",e="addExternalDomain",f="getVersionName";a.mobileEndPoint=b;var g=function(){function a(a,b){this.embeddingService=a,c=this,this.logger=b.create("MobileShellEndPoint"),this.startup()}return a.prototype.init=function(a){this.handleIncomingMessage=a,this.logShellVersion()},a.prototype.sendMessage=function(b){var c=JSON.stringify({message:b,endPoint:"ionweb.interop.mobileEndPoint"});a.isIOSEmbedding()&&a.iosMessageHandlers().postMessage(c),a.isAndroidEmbedding()&&a.androidMessageHandlers().postMessage(c)},a.prototype.receivingMessageFromNativeShell=function(a){this.handleIncomingMessage(a)},a.prototype.sendControlMessage=function(a){return this.embeddingService.sendMessage(a).timeout(3e3,"timeout")},a.isAndroidEmbedding=function(){return!!a.androidMessageHandlers()},a.androidMessageHandlers=function(){var a=window;return a&&a.AndroidNativeShell},a.iosMessageHandlers=function(){var a=window;return a&&a.webkit&&a.webkit.messageHandlers&&a.webkit.messageHandlers.sendMessage},a.isIOSEmbedding=function(){return!!a.iosMessageHandlers()},a.isEmbedded=function(){return a.isIOSEmbedding()||a.isAndroidEmbedding()},a.prototype.notifyExternalUrl=function(a){this.sendControlMessage({ionweb_controlReqId:e,domain:a}).then(function(a){})},a.prototype.logShellVersion=function(){var b=this;this.sendControlMessage({ionweb_controlReqId:f}).then(function(c){b.logger.low(a.isIOSEmbedding()?"iOSShellVersion":"AndroidShellVersion",{version:c})})},a.prototype.startup=function(){var a=this;this.logger.low("startup"),this.embeddingService.configService.onConfigFetched.add(function(b,c){var e=[],f="https://iongroup.com";e.push(f);var g=a.embeddingService.configService.config.shell.privacyURL;g&&e.push(g);var h=a.embeddingService.configService.config.shell.loginDialogLinkURL;h&&e.push(h),e.forEach(function(b){a.logger.low("notifyExternalUrl",{url:b}),a.notifyExternalUrl(b)}),c.async=a.sendControlMessage({ionweb_controlReqId:d,config:c.config}).then(function(a){return{config:a}})})},a}();a.MobileShellEndPoint=g}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(c){function d(d,e,f,g,h,i,j,k){var l=c.call(this,null,e)||this;l.loggerFactory=e,l.localUserPrefService=f,l.localPrefService=g,l.configService=i,l.applicationStatusService=j,l.catalogService=k,l._onThemeChanged=new a.Event,l._controlMessageReceived=new a.Event,l.queryCredentialsPromise=null,l.envType=a.EmbeddedEnvironmentType.None;var m=null;return"undefined"!=typeof window&&(window.addEventListener&&window!==window.parent?(l.logger.low("CreateChannel",{channelType:"ParentFrameEndPoint"}),m=new b.ParentFrameEndPoint,l.envType=a.EmbeddedEnvironmentType.ParentFrame):window.external&&"undefined"!=typeof window.external.PostMessage?(l.logger.low("CreateChannel",{channelType:"IonNetEndPoint"}),i.loginConfiguration.isHybrid=!0,m=new b.IonNetEndPoint(l,l.loggerFactory),l.envType=a.EmbeddedEnvironmentType.IonNet):b.ChildWindowEndPoint.isChildWindow(d)&&window.opener&&window.addEventListener&&window!==window.opener?(l.logger.low("CreateChannel",{channelType:"ChildWindowEndPoint"}),m=new b.ChildWindowEndPoint(l,l,h),l.envType=a.EmbeddedEnvironmentType.ChildWindow):b.MobileShellEndPoint.isEmbedded()&&(l.logger.low("CreateChannel",{channelType:"MobileShellEndPoint"}),m=new b.MobileShellEndPoint(l,l.loggerFactory),l.envType=a.EmbeddedEnvironmentType.MobileApp)),c.prototype.init.call(l,m),m&&m.onThemeChanged&&m.onThemeChanged.add(function(a,b){l.logger.low("ThemeChanged"),l._onThemeChanged.raise(l,b)}),l.envType===a.EmbeddedEnvironmentType.ChildWindow?l.configService.onConfigFetching.add(function(a,b){b.config=l.askRemoteConfig()}):l.envType===a.EmbeddedEnvironmentType.ParentFrame&&l.configService.onConfigFetched.add(function(a,b){b.config.shell.disableConfigInFrame||(b.async=l.askRemoteConfig().then(function(a){return{config:a,replace:!0}}))}),l}return __extends(d,c),d.prototype.askRemoteConfig=function(){var c=this;this.logger.low("FetchFromOwner");var d=1e4,e=Q.defer();return this.sendMessage(b.EMBEDDING_GETCONFIG_MESSAGE).then(function(a){a.config?(c.logger.low("ConfigReceivedFromOwner"),e.resolve(a.config)):(c.logger.low("NoConfigReceivedFromOwner"),e.resolve(null))}).timeout(d,a.coreui.Strings.Err_Configuration_Error_Timeout_Expired).done(),e.promise},Object.defineProperty(d.prototype,"controlMessageReceived",{get:function(){return this._controlMessageReceived},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"hostThemeChanged",{get:function(){return this._onThemeChanged},enumerable:!0,configurable:!0}),d.prototype.getCurrentHostThemeId=function(){return this.endPoint.supportThemes?this.endPoint.getCurrentThemeId():Q.when(null)},d.prototype.queryCredentials=function(){var c=this;if(this.queryCredentialsPromise);else if(this.queryCredentialsPromise=Q.defer(),this.envType===a.EmbeddedEnvironmentType.IonNet){var d=this.endPoint;d.onCredentialsAvailable.add(function(a,b){c.queryCredentialsPromise.resolve(b)}),d.queryCredentials()}else this.sendMessage(b.EMBEDDING_GETCREDENTIALS_MESSAGE).then(function(a){c.queryCredentialsPromise.resolve(a.credentials)});return this.queryCredentialsPromise.promise},d.prototype.raiseLoggedIn=function(){return this.envType!==a.EmbeddedEnvironmentType.IonNet?this.sendMessage(b.EMBEDDING_LOGGEDIN_MESSAGE):Q.when(null)},d.prototype.getPrefStore=function(c){switch(c){case b.PreferenceStore.LocalDevice:return this.localPrefService;case b.PreferenceStore.LocalUser:return this.localUserPrefService;default:return a.getService("ionweb.preferenceService")}},Object.defineProperty(d.prototype,"ionNetBridge",{get:function(){return this.endPoint instanceof b.IonNetEndPoint?this.endPoint:null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"ionMobileBridge",{get:function(){return this.endPoint instanceof b.MobileShellEndPoint?this.endPoint:null},enumerable:!0,configurable:!0}),d}(b.MessageProviderBase);b.EmbeddingService=c,a.module("ionwebCore").service("embeddingService",["ionweb.location","ionweb.loggerFactory","ionweb.localUserPreferenceService","ionweb.localPreferenceService","ionweb.messageChannelService","ionweb.configurationService","ionweb.applicationStatusService","ionweb.catalogService"],function(a,b,d,e,f,g,h,i){return new c(a,b,d,e,f,g,h,i)})}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(a){function b(b){return a.call(this,b,b)||this}return __extends(b,a),b}(b.WindowFrameEndPoint),d=function(){function c(b,d,e,f){var g=this;this.owner=b,this.channel=d,this.window=e,this.lastLayout={},this.closed=new a.Event,this.handleMessage=new a.Event,this.layoutChanged=new a.Event,this.$location=b.$location;var h=b.messagingService;this.remoteUnsub=h.linkRemote(f,d),c.lastLayoutProps.forEach(function(a){g.lastLayout[a]=g.window[a]}),this.intervalHandle=setInterval(function(){return g.detectChildLayoutChanges()},1e3)}return c.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.remoteUnsub(),this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=0),this.closed.raise(this,null))},c.prototype.stripToHash=function(a){var b=a.indexOf("#");return b>0?a.substr(0,a.indexOf("#")+1):a+"#"},c.prototype.loadSdk=function(b,d,e){this.configAdditions=b;var f=this.$location.absUrl();a._isSlave&&(f=f.replace("ionweb.jsp","html5.jsp")),f=this.stripToHash(f),f+="/"+encodeURIComponent(d+""),f+="?"+c.getSearchString(e),this.window.location.href=f},c.getSearchString=function(a){a=a||{},a[b.SEARCHARG_CHILD_WINDOW_NAME]=b.SEARCHARG_CHILD_WINDOW_VALUE;var c=Object.getOwnPropertyNames(a).map(function(b){var c=a[b];return b&&"undefined"!=typeof c?encodeURIComponent(b)+"="+encodeURIComponent(c):null}).filter(function(a){return!!a}).join("&");return c},c.prototype.focus=function(){this.window.focus()},Object.defineProperty(c.prototype,"layout",{get:function(){return this.lastLayout},enumerable:!0,configurable:!0}),c.prototype.detectChildLayoutChanges=function(){var a=this,b=!1,d=!1;try{d=this.window.closed,c.lastLayoutProps.forEach(function(c){b=a.lastLayout[c]!==a.window[c]||b,a.lastLayout[c]=a.window[c]})}catch(a){d=!0}d?this.owner.closeChild(this):b&&this.layoutChanged.raise(this,this.lastLayout)},c.lastLayoutProps=["screenX","screenY","outerHeight","outerWidth"],c}();b.ChildWindowInternal=d;var e=function(){function e(a,c,d,e,f,g,h,i,j){var k=this;this.configService=a,this.$location=c,this.themeService=d,this.embeddingService=h,this.loggerFactory=i,this.messagingService=j,this.children=[],this.childCount=0,window.addEventListener("beforeunload",function(){k.dispose()}),window.addEventListener("unload",function(){k.dispose()});var l=function(a,b){k.changePreference(a,b.key,b.value,b.deleted)};e.subscribeChanges&&(e.subscribeChanges(null,function(a,c){return l(b.PreferenceStore.Main,c)}),f.subscribeChanges(null,function(a,c){return l(b.PreferenceStore.LocalUser,c)}),g.subscribeChanges(null,function(a,c){return l(b.PreferenceStore.LocalDevice,c)}))}return e.prototype.dispose=function(){this.children.forEach(function(a){try{a.dispose(),a.window.close()}catch(a){}}),this.children=[]},e.prototype.openNew=function(e){var f=this,g="menubar=no,titlebar=no,toolbar=no,resizable=yes,scrollbars=yes";e&&(e.screenX&&(g+=",left="+e.screenX),e.screenY&&(g+=",top="+e.screenY),e.outerWidth&&(g+=",outerWidth="+e.outerWidth+",width="+e.outerWidth),e.outerHeight&&(g+=",outerHeight="+e.outerHeight+",height="+e.outerHeight));var h=window.open(a.getResourcePath("blank.html"),"_blank",g);if(!h)throw new Error(a.coreui.Strings.Err_ChildWindow_Cannot_Open_ChildWindow);var i=new b.MessageProviderBase(new c(h),this.loggerFactory),j=new d(this,i,h,"Child#"+this.childCount++);return this.children.push(j),i.handleMessage.add(function(a,b){f.handleChildMessage(b,j)&&f.closeChild(j)}),j},e.prototype.closeChild=function(b){a.spliceAll(this.children,function(a){return a===b}),b.dispose()},e.prototype.handleChildMessage=function(c,d){var e=!0,f=!1;if("string"==typeof c.request)switch(c.request){case b.EMBEDDING_GETCONFIG_MESSAGE:c.isHandled=!0,e=!1;var g=this.configService.getOriginalConfig();g=a.extendChildren({},[g,d.configAdditions]),g.shell.theme=this.themeService.currentTheme.name,g.shell.disableScenarioSave=!0;var h={config:g};c.deferred.resolve(h)}else if(c.request&&c.request.msgType)switch(c.request.msgType){case b.CLOSED_MESSAGE:c.isHandled=!0,f=!0;break;case b.GET_THEME_MESSAGE:c.isHandled=!0,e=!1;var i={theme:this.themeService.currentTheme.name};c.deferred.resolve(i)}return e&&d.handleMessage.raise(this,c),f},e.prototype.changePreference=function(a,c,d,e){var f={msgType:b.PREFERENCE_CHANGE_MESSAGE,store:a,key:c,deleted:e,value:JSON.stringify(d)};this.children.forEach(function(a){a.channel.postMessage(f)})},e}();b.ChildWindowService=e,angular.module("ionwebCore").service("ionweb.childWindowService",["ionweb.configurationService","$location","ionweb.themeManager","ionweb.preferenceService","ionweb.localUserPreferenceService","ionweb.localPreferenceService","ionweb.embeddingService","ionweb.loggerFactory","ionweb.messageChannelService",function(a,b,c,d,f,g,h,i,j){return new e(a,b,c,d,f,g,h,i,j)}])}(b=a.interop||(a.interop={}))}(ionweb||(ionweb={}));var ionweb;!function(a){angular.module("ionwebCore").directive("languagePreference",[function(){return{restrict:"EA",scope:{languages:"=?",languageName:"=ngModel",validationMessage:"=",config:"=?"},link:function(){},templateUrl:"core.ui/localization/localization.tpl.html"}}])}(ionweb||(ionweb={}));var ionweb;!function(a){angular.module("ionwebCore").filter("iondate",["$filter",function(a){return function(b){return Date.now()-b.getTime()>432e5?a("date")(b,"medium"):a("date")(b,"shortTime")}}]),angular.module("ionwebCore").factory("$exceptionHandler",[function(){return function(b,c){c&&(b.message+=' (caused by "'+c+'")'),a.module("ionwebCore").getService("ionweb.excHelper").report(b)}}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){this.isPreEvalVisitor=!1,this.isPreVisitor=!0,this.editableVariables={},this.themeVariables={}}return a.prototype.parseAttributes=function(a){if(!a)return null;var b=a.split("\n"),c={},d=null,e="";return b.forEach(function(a){if(/theme-variable/.test(a))d=!0;else if(d){var b=/^[\s*]*@(\w+)\s+(.+)$/.exec(a);b?c[b[1]]=b[2]:(b=/^[\s*]*(.*?)[\s*\/]*$/.exec(a),b&&b[1].length>0&&(e+=" "+b[1].trim()))}}),c.description=e.trim(),d&&c},a.prototype.run=function(a){var b=a.rules;this.editableVariables={},this.themeVariables={};for(var c=0;c<b.length;c++){if("Comment"===b[c].type&&b.length-1>c&&"Rule"===b[c+1].type&&b[c+1].variable===!0){var d=this.parseAttributes(b[c].value);d&&(this.editableVariables[b[c+1].name]=d)}b[c].variable===!0&&"@item"!==b[c].name&&(this.themeVariables[b[c].name]=b[c].value.toCSS())}},a}();a.VariableExtractorPluginVisitor=b;var c=function(){function a(){this.visitor=new b}return a.prototype.install=function(a,b){b.addVisitor(this.visitor)},a}();a.VariableExtractorPlugin=c}(b=a.themes||(a.themes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){}(ionweb||(ionweb={})),function(a){var b;!function(b){function c(b){return{compile:function(b,c,d){var e=new Worker(a.buildClientUri(a.clientRoot+a._lessWwPath)),f=Q.defer();return e.onerror=function(a){var b;b=a.error?a.error:new Error("Error loading worker thread for LESS"+(a.message?": "+a.message:"")),f.reject(b)},e.onmessage=function(a){a.data.err?f.reject(a.data.err):f.resolve(a.data)},e.postMessage([window.location.href,b,c,d]),f.promise}}}function d(){return{compile:function(c,d,e){var f;return d&&(f=new b.VariableExtractorPlugin,e.plugins=[f]),a.qRequire("less").then(function(){var a=window.less1;return a.render(c,e)}).then(function(a){return{css:a.css,editableVariables:f&&f.visitor.editableVariables,themeVariables:f&&f.visitor.themeVariables}})}}}var e=function(){function b(a,b,e,f,g){this.server=a,this.localPref=b,this.logger=e.create("LessCompiler"),f.config.shell.disableLessWorkers||g.has("ff")?(this.logger.low("NoLessWebWorkers",{disableLessWorkers:f.config.shell.disableLessWorkers,hasFF:g.has("ff")}),_window_href=window&&window.location.href,this.lessRenderer=d()):this.lessRenderer=c(a)}return b.prototype.getCacheKey=function(b,c,d){return a.stringFormat("less.${func}.${theme}:${url}",{url:b,func:c,theme:d})},b.prototype.checkCache=function(b,c,d,e){var f=this;return this.localPref.isAvailable?this.localPref.globalStoreLoaded.then(function(){var g=f.getCacheKey(b,c,d),h=f.localPref.getGlobalValue(g);return h&&Object.getOwnPropertyNames(e).forEach(function(b){h&&!a.equals(e[b],h[b])&&(h=null)}),h}):(this.logger.low("CacheNotAvail"),Q.when(null))},b.prototype.loadLess=function(c,d,e,f,g,h,i){var j=this,k=this.server.extget(d,{category:a.rest.NO_CATEGORY}).send();return k.then(function(a){var k=a.headers(b.LAST_MODIFIED_HEADER),l=i?a.data.concat(i):a.data;return j.compileLess(c,l,k,d,e,f,g,h)})},b.prototype.compileLess=function(b,c,d,e,f,g,h,i){var j,k=this;return j=i?Q.when(null):this.checkCache(e,b,f,a.extend(g,[{lessHash:d}])),j.then(function(j){if(j)return k.logger.low("CacheHit",{less:e,themeId:f,action:b,cssSize:j.css&&j.css.length}),Q.when(j);k.logger.low("CacheMiss",{less:e,themeId:f,action:b,lessSize:c.length,disableCache:i});var l=a.extend({async:!0,filename:e},[g]);return k.lessRenderer.compile(c,h,l).then(function(c){var h=a.extend({lessHash:d},[c,g]);return i||k.localPref.setGlobalValue(k.getCacheKey(e,b,f),h),h})})},b.prototype.fetchAndCompile=function(a,b,c,d){return this.loadLess("compile",a,b,{globalVars:c,relativeUrls:!0},!1,d)},b.prototype.compile=function(b,c,d,e){var f=this;return a.qRequire("md5").then(function(a){return f.compileLess("compile",b.content,a(b.content),b.path,c,{globalVars:d,relativeUrls:!0},!1,e)})},b.prototype.fetchCompileExtractVars=function(a,b,c,d,e){return this.loadLess("compileExtractVars",a,b,{modifyVars:c},!0,d,e)},b.LAST_MODIFIED_HEADER="last-modified",b}();b.LessCompiler=e}(b=a.themes||(a.themes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(){this._variableMap={},this._categorizedVariableNames={},this._uncategorizedVariableNames=[]}return b.isLegacyThemeVariable=function(a){return"@ion-theme-fg"===a||"@ion-theme-bg"===a||"@ion-theme-status-info"===a||"@ion-theme-status-success"===a||"@ion-theme-status-warning"===a||"@ion-theme-status-error"===a},b.isVariation=function(a){var c=function(a,b,c){("number"!=typeof c||!isFinite(c)||Math.floor(c)!==c||c>a.length)&&(c=a.length),
c-=b.length;var d=a.lastIndexOf(b,c);return d!==-1&&d===c};return b.COLOR_VARIATION_POSTFIXES.some(function(b){return c(a,b)})},b.isRawThemeVariable=function(a){return 0===a.indexOf("@"+b.THEME_VAR_PREFIX)&&!b.isLegacyThemeVariable(a)},b.prototype.loadVariables=function(a){this._rawThemeVariables=a},b.prototype.hasRawVariables=function(){return!!this._rawThemeVariables},Object.defineProperty(b.prototype,"rawThemeVariables",{get:function(){return a.extend({},[this._rawThemeVariables||{}])},enumerable:!0,configurable:!0}),Object.defineProperty(b,"rawEditableThemeVariables",{get:function(){return b.ION_THEME_VARIABLES},enumerable:!0,configurable:!0}),b.prototype.getThemeVariableValue=function(a){return this._variableMap[a]},b.prototype.getCategorizedThemeVariables=function(){return this._categorizedVariableNames},b.prototype.getUnCategorizedThemeVariables=function(){return this._uncategorizedVariableNames},b.getCategoryForVariable=function(c){if(a.toolkit.isThemeVariable(c)){if(c=c.substring(1),0===c.indexOf("accent"))return"Accent";if(0===c.indexOf("feedback"))return"Feedback";if(0===c.indexOf("contrast"))return"Contrast";if(b.PALETTE_MONOTONES.indexOf(c)>=0)return"Monotone"}return null},b.getVariations=function(c){var d=[];return a.toolkit.isThemeVariable(c)&&b.COLOR_VARIATION_POSTFIXES.forEach(function(a){d.push(c+"-"+a)}),d},b.prototype.getThemeVariables=function(){return Object.keys(this._variableMap||{})},b.prototype.prepareVariableMap=function(){var a=this,c="@"+b.THEME_VAR_PREFIX+"-";this._variableMap={},this._categorizedVariableNames={},this._uncategorizedVariableNames=[],this._rawThemeVariables&&Object.keys(this._rawThemeVariables).filter(function(a){return b.isRawThemeVariable(a)}).forEach(function(b){var d="@"+b.substring(c.length),e=a._rawThemeVariables[b];a._variableMap[d]=e,a.categorize(d)})},b.prototype.categorize=function(a){if(!b.isVariation(a)){var c=b.getCategoryForVariable(a);c?(this._categorizedVariableNames[c]=this._categorizedVariableNames[c]||[],this._categorizedVariableNames[c].push(a)):this._uncategorizedVariableNames.push(a)}},b.prototype.generateThemeVariablesCss=function(){var b=this,c="";return this.prepareVariableMap(),this.getThemeVariables().forEach(function(d){var e=b._variableMap[d];Object.keys(a.toolkit.THEME_CLASS_POSTFIX_TO_PROPERTY).forEach(function(b){var f=a.toolkit.THEME_CLASS_POSTFIX_TO_PROPERTY[b],g="."+a.toolkit.getThemeClass(d,b),h="{"+f+": "+e+"}";c+=g+" "+h+"\n"})}),c},b.ION_THEME_VARIABLES={"@ion-text-font-family":{category:"Text",description:"Base font family",type:"font-family"},"@ion-text-font-size":{category:"Text",description:"Base text size",type:"font-size"},"@ion-theme-accent":{category:"Main",description:"Accent color",type:"color"},"@ion-theme-text":{category:"Main",description:"Text color",type:"color"},"@ion-theme-icon":{category:"Main",description:"Icon color",type:"color"},"@ion-theme-subtitle":{category:"Main",description:"Subtitle color",type:"color"},"@ion-theme-mid":{category:"Main",description:"Mid color",type:"color"},"@ion-theme-label":{category:"Main",description:"Label color",type:"color"},"@ion-theme-secondary":{category:"Main",description:"Secondary color",type:"color"},"@ion-theme-border":{category:"Main",description:"Border color",type:"color"},"@ion-theme-canvas":{category:"Main",description:"Canvas color",type:"color"},"@ion-theme-background":{category:"Main",description:"Widget background color",type:"color"},"@ion-theme-feedback-neutral":{category:"Feedback",description:"Neutral feedback color",type:"color"},"@ion-theme-feedback-positive":{category:"Feedback",description:"Positive feedback color",type:"color"},"@ion-theme-feedback-warning":{category:"Feedback",description:"Warning feedback color",type:"color"},"@ion-theme-feedback-error":{category:"Feedback",description:"Error feedback color",type:"color"}},b.THEME_VAR_PREFIX=a.toolkit.THEME_PREFIX,b.COLOR_VARIATION_POSTFIXES=["mild","milder","mildest","strong","stronger","strongest","dark-text","light-text"],b.PALETTE_MONOTONES=["text","icon","subtitle","mid","label","secondary","border","canvas","background"],b}();b.ThemeVariables=c}(b=a.themes||(a.themes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c="r/modules/themes/cssurls",d=function(){function b(a,b,c,d,e){this.server=b,this.configService=c,this.moduleService=d,this.excHelper=e,this.links=[],this.remoteModInfo=[],this.loadedModuleAdditions=[],this.logger=a.create("RemoteCssProvider")}return b.prototype.isEnabled=function(){return this.configService.config.shell.disableRemoteCss?(this.loggedDisabled||(this.logger.low("configDisabled"),this.loggedDisabled=!0),Q.when(!1)):this.configService.config.shell.disableRemoteCss===!1?Q.when(!0):this.server.getServerVersion().then(function(b){return b&&b.gte(a.IonVersion.fromIonString("121"))})},b.prototype.loadCss=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.type="text/css",c.rel="stylesheet";var d=Q.defer();return c.onload=function(){return d.resolve(null)},c.onerror=function(b){return d.reject(new Error("Retrieving CSS from server: "+a))},c.href=a,b.appendChild(c),this.links.push(c),d.promise},b.prototype.loadVars=function(a){return this.server.extget(a).forceJson().send().then(function(a){return a.data})},b.prototype.loadTheme=function(b){var d=this,e={themeName:b,moduleKeys:this.remoteModInfo};return this.server.post(c,{category:a.rest.SESSION_CATEGORY}).data(JSON.stringify(e),"application/json").forceJson().send().then(function(c){d.logger.low("response",{themeName:b,status:c.status,statusText:c.statusText});var e=c.data;if(c.error)throw new Error(c.error);if(e&&"SUCCESS"!==e.outcome){var f=new Error("Remote call error: "+JSON.stringify(e.failureDetails));throw f.themeNotFound="THEME_NOT_FOUND"===e.failureDetails.FailureType,d.logger.low("ThemeNotFound",{themeName:b}),f}if(!e.mainThemeUrl)throw new Error("Missing theme URL");if(!e.mainThemeVariablesUrl)throw new Error("Missing vars URL");d.loadedModuleAdditions=e.moduleAdditions.filter(function(a){return a.urls.length>0}).map(function(a){return a.moduleKey.name});var g=d.links.slice();d.links=[];var h=d.loadVars(e.mainThemeVariablesUrl),i=[d.loadCss(e.mainThemeUrl)].concat(a.selectMany(e.moduleAdditions,function(a){return a.urls}).map(function(a){return d.loadCss(a)}));return Q.all([h,Q.allSettled(i)]).then(function(a){var b=a[1].filter(function(a){return"rejected"===a.state}).map(function(a){return a.reason});return b.length>0&&d.excHelper.report(new Error(b.join(", "))),a[0]}).finally(function(){var a=document.getElementsByTagName("head")[0];g.forEach(function(b){a.removeChild(b)})})})},b.prototype.loadAdditions=function(a,b){var c=this;return this.isEnabled().then(function(d){if(d){var e=b.filter(function(a){return a.isRemote}).map(function(a){return{name:a.name,version:a.version}});return c.logger.low("modules",{mods:e}),c.remoteModInfo=c.remoteModInfo.concat(e),c.loadTheme(a).then(function(){return null},function(){return null})}return Q.when(null)})},b.prototype.isAdditionLoaded=function(b){var c=this;return this.isEnabled().then(function(d){var e=b.module&&b.module.name||a.SDK_MODULE_NAME;return{enabled:d,loaded:c.loadedModuleAdditions.indexOf(e)>=0}})},b}();b.RemoteCssProvider=d}(b=a.themes||(a.themes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(b,d,e,f,g,h,i,j){var k=this;this.loggerFactory=b,this.windowService=d,this.localPreferencesService=f,this.configurationService=g,this.environmentService=h,this.embeddingService=j,this.densityDescriptors={},this.isStarted=!1,this.currentFontSizeStr=null,this.logger=b.create("DensityService"),this.addDensityDescriptor(c.DENSITY_TOUCH_NAME,c.DENSITY_TOUCH_FACTOR),this.addDensityDescriptor(c.DENSITY_COMPACT_NAME,c.DENSITY_COMPACT_FACTOR),this.addDensityDescriptor(c.DENSITY_WEB_NAME,c.DENSITY_WEB_FACTOR);var l=a.throttle(function(){k.refreshDensity("resize",!1,!1)},50);this.windowService.addEventListener("resize",function(){l()}),this.fontSize=a.toolkit.DensityServiceDefaultFontSize,this.applyDensityChange(this.fontSize+c.DENSITY_FONT_SIZE_PIXEL_POSTFIX,c.DENSITY_COMPACT_NAME),i.waitForStartupConfiguration.then(function(){k.isStarted=!0;var a=e.getValue(c.DENSITY_PREFERENCE_KEY);a&&(e.deleteKey(c.DENSITY_PREFERENCE_KEY),f.setValue(c.DENSITY_PREFERENCE_KEY,a)),k.refreshDensity("start",!0,!0),k.localPreferencesService.subscribeChanges(c.DENSITY_PREFERENCE_KEY,function(){k.refreshDensity("prefChanged",!1,!0)})})}return c.prototype.setFontSize=function(a){this.fontSize=a,this.refreshDensity("themeChanged",!0,!1)},c.prototype.computeAutoDensity=function(){var b=window.innerHeight,d=window.innerWidth,e=a.ResizeObserverService.convertHtmlSizeToSizeInfo(d,b,this.fontSize);switch(e.designSize.name){case"xl":return c.DENSITY_COMPACT_NAME;case"s":case"xs":var f=this.environmentService.isTouchDevice()?c.DENSITY_TOUCH_NAME:c.DENSITY_WEB_NAME;return f;case"l":case"m":default:return c.DENSITY_WEB_NAME}},c.prototype.refreshDensity=function(a,b,d){if(this.isStarted){var e=this.embeddingService.ionNetBridge?c.DENSITY_COMPACT_NAME:this.getUserSelectedDensity();d&&this.logger.analytics("Settings","Density",e);var f=e;e===c.DENSITY_AUTOMATIC_NAME&&(f=this.computeAutoDensity()),this.applyDensity(f,a,e,b)}},c.prototype.applyDensity=function(a,b,d,e){var f=this.densityDescriptors[a];if(!f)throw new Error("Unexpected density name: "+a);var g=this.fontSize*f.factor,h=g.toString()+c.DENSITY_FONT_SIZE_PIXEL_POSTFIX;(e||h!==this.currentFontSizeStr)&&(this.logger.low("Density",{action:"applyDensity",densityName:a,reason:b,forceApply:e,userPreference:d,factor:f.factor,fontSize:h,prevFontSize:this.currentFontSizeStr}),this.applyDensityChange(h,a))},c.prototype.applyDensityChange=function(a,b){var d=$(document.body);this.currentFontSizeStr=a,d.css(c.DENSITY_FONT_SIZE_PROPERTY_NAME,a),$(document.documentElement).css(c.DENSITY_FONT_SIZE_PROPERTY_NAME,a),Object.keys(this.densityDescriptors).forEach(function(a){var e=c.DENSITY_CSS_CLASS_NAME_PREFIX+a.toLocaleLowerCase();a===b?d.addClass(e):d.removeClass(e)}),d.trigger("resize")},c.prototype.addDensityDescriptor=function(a,b){var c={name:a,factor:b};this.densityDescriptors[a]=c},c.prototype.addDensityOptionDescriptor=function(a,b,c,d){var e={name:a,displayName:b,description:c,isSelected:a===this.getUserSelectedDensity()};d.push(e)},c.prototype.getUserSelectedDensity=function(){var a=this.environmentService.isTouchDevice()?c.DEFAULT_DENSITY_NAME_TOUCH:c.DEFAULT_DENSITY_NAME_DESKTOP,b=this.configurationService.config.shell.defaultDensityMode||a,d=this.localPreferencesService.getValue(c.DENSITY_PREFERENCE_KEY,b);return d===c.LEGACY_DENSITY_WEB_PREFERENCE_NAME&&(d=c.DENSITY_COMPACT_NAME),d!==c.DENSITY_WEB_NAME&&d!==c.DENSITY_TOUCH_NAME&&d!==c.DENSITY_COMPACT_NAME&&d!==c.DENSITY_AUTOMATIC_NAME&&(d=a),d},c.prototype.setUserSelectedDensity=function(a){this.logger.low("Density",{action:"userSelection",densityName:a}),this.localPreferencesService.setValue(c.DENSITY_PREFERENCE_KEY,a)},c.prototype.getDensityOptions=function(){var a=[];return this.addDensityOptionDescriptor(c.DENSITY_TOUCH_NAME,b.Strings.Density_Touch_DisplayName,b.Strings.Density_Touch_Description,a),this.addDensityOptionDescriptor(c.DENSITY_WEB_NAME,b.Strings.Density_Web_DisplayName,b.Strings.Density_Web_Description,a),this.addDensityOptionDescriptor(c.DENSITY_COMPACT_NAME,b.Strings.Density_Compact_DisplayName,b.Strings.Density_Compact_Description,a),this.addDensityOptionDescriptor(c.DENSITY_AUTOMATIC_NAME,b.Strings.Density_Automatic_DisplayName,b.Strings.Density_Automatic_Description,a),a},c.DENSITY_PREFERENCE_KEY="ionweb.selectedDensity",c.DENSITY_FONT_SIZE_PROPERTY_NAME="font-size",c.DENSITY_FONT_SIZE_PIXEL_POSTFIX="px",c.DENSITY_TOUCH_FACTOR=1.3,c.DENSITY_WEB_FACTOR=1.1,c.DENSITY_COMPACT_FACTOR=1,c.DENSITY_TOUCH_NAME="Touch",c.LEGACY_DENSITY_WEB_PREFERENCE_NAME="Web",c.DENSITY_WEB_NAME="WebMode",c.DENSITY_COMPACT_NAME="Compact",c.DENSITY_AUTOMATIC_NAME="Automatic",c.DEFAULT_DENSITY_NAME_TOUCH=c.DENSITY_AUTOMATIC_NAME,c.DEFAULT_DENSITY_NAME_DESKTOP=c.DENSITY_AUTOMATIC_NAME,c.DENSITY_CSS_CLASS_NAME_PREFIX="ionweb-density-",c}();b.DensityService=c,angular.module("ionwebCore").service("ionweb.densityService",["ionweb.loggerFactory","$window","ionweb.preferenceService","ionweb.localUserPreferenceService","ionweb.configurationService","ionweb.environmentService","ionweb.applicationStatusService","ionweb.embeddingService",c])}(b=a.coreui||(a.coreui={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c="compiledLess",d="ion-modern-light",e=function(){function e(c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=this;if(this.windowService=c,this.confService=d,this.loggerFactory=f,this.restService=g,this.serverService=h,this.splashScreenService=i,this.preferences=j,this.notificationService=k,this.localPreferences=l,this.embeddingService=m,this.localPref=n,this.densityService=o,this.envService=p,this.iconService=t,this._themes=[],this._theIonThemeLink=null,this._dynamicCssElement=null,this._additionalLessThemeLinks={},this._additionalCssThemeLinks=[],this._additionalStyles=[],this._started=new a.Event,this.variables=new b.ThemeVariables,this.splashCount=0,this._logger=f.create("ThemeManager"),this._currentThemeChanging=new a.Event,this._currentThemeChanged=new a.Event,this._themesChanged=new a.Event,this.remoteCssProvider=new b.RemoteCssProvider(f,this.serverService,this.confService,q,s),m.hostThemeChanged.add(function(a,b){var c=u.findTheme(b);c&&u.setNewCurrentTheme(c).done()}),this.preferences.subscribeChanges&&this.preferences.loaded&&!a._isSlave){if(this.isPrefLoaded=Q.defer(),j.isLoaded)this.isPrefLoaded.resolve(null);else var v=this.preferences.loaded.add(function(){v(),u.isPrefLoaded.resolve(null)});this.isPrefLoaded.promise.then(function(){u.preferences.subscribeChanges(e.THEME_PREFERENCE_KEY,function(a,b){u.inhibitPrefChangedHandler||u.setNewCurrentTheme(u.findTheme(b.value)).done()})})}else this.inSlHybrid=!0;d.config.shell.minimalStyle&&$(document.body).addClass("minimal-style"),this.iconService.registerFontFaces([{path:a.getResourcePath("assets/fonts/SourceSansPro-ExtraLight"),descriptors:{"font-family":"'Source Sans Pro'","font-weight":"200","font-style":"normal","font-stretch":"normal"},formats:a.toolkit.FontFaceFormats.EmbeddedOpenType|a.toolkit.FontFaceFormats.Woff2|a.toolkit.FontFaceFormats.Woff},{path:a.getResourcePath("assets/fonts/SourceSansPro-Regular"),descriptors:{"font-family":"'Source Sans Pro'","font-weight":"400","font-style":"normal","font-stretch":"normal"},formats:a.toolkit.FontFaceFormats.EmbeddedOpenType|a.toolkit.FontFaceFormats.Woff2|a.toolkit.FontFaceFormats.Woff},{path:a.getResourcePath("assets/fonts/SourceSansPro-It"),descriptors:{"font-family":"'Source Sans Pro'","font-weight":"400","font-style":"italic","font-stretch":"normal"},formats:a.toolkit.FontFaceFormats.EmbeddedOpenType|a.toolkit.FontFaceFormats.Woff2|a.toolkit.FontFaceFormats.Woff},{path:a.getResourcePath("assets/fonts/SourceSansPro-Bold"),descriptors:{"font-family":"'Source Sans Pro'","font-weight":"700","font-style":"normal","font-stretch":"normal"},formats:a.toolkit.FontFaceFormats.EmbeddedOpenType|a.toolkit.FontFaceFormats.Woff2|a.toolkit.FontFaceFormats.Woff}]),r.moduleLoaded.add(function(a,b){var c,d;Array.isArray(b.modData.css)&&(c=b.modData.css.map(function(a){return{path:b.path+a}})),Array.isArray(b.modData.less)&&(d=b.modData.less.map(function(a){return{path:b.path+a}})),(c||d)&&u.addAdditionalStyle({cssAdditions:c,lessAdditions:d})}),q.moduleRegistered.add(function(b,c){var d=c.registry.lessAdditions&&c.registry.lessAdditions.length>0||c.mod&&c.mod.themeAdditions&&c.mod.themeAdditions.length>0,e=c.registry.cssAdditions&&c.registry.cssAdditions.length>0;if(e||d){var f=function(a){return"string"==typeof a?{path:a}:a},g=c.registry.cssAdditions.map(function(a){return f(a)}),h=c.registry.lessAdditions.map(function(a){return f(a)});c.mod&&Array.isArray(c.mod.themeAdditions)&&(h=a.dedupe(h.concat(c.mod.themeAdditions.map(function(a){return{path:a.entryPoint}})),function(a){return a.path})),u.addAdditionalStyle({module:c.mod,cssAdditions:g,lessAdditions:h})}}),q.moduleLoading.add(function(a,b){b.promise=u.onModuleLoading(b.modules)})}return Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.start=function(){var b=this;if(this._isStarted)throw new Error(a.coreui.Strings.Err_ThemeService_AlreadyStarted);this.registerTheme({name:a.BUILT_IN_THEME_LIGHT_KEY,isBuiltin:!0,displayName:a.coreui.Strings.Theme_Modern_Light_DisplayName,css:"css/themes/ion-modern-light/style.min.css",less:"css/themes/ion-modern-light/style.min.less"}),this.registerTheme({name:a.BUILT_IN_THEME_DARK_KEY,isBuiltin:!0,displayName:a.coreui.Strings.Theme_Modern_Dark_DisplayName,css:"css/themes/ion-modern-dark/style.min.css",less:"css/themes/ion-modern-dark/style.min.less"}),this.registerTheme({name:a.BUILT_IN_THEME_LIGHT_CONTRAST_KEY,isBuiltin:!0,displayName:a.coreui.Strings.Theme_Modern_Light_Contrast_DisplayName,css:"css/themes/ion-modern-light-contrast/style.min.css",less:"css/themes/ion-modern-light-contrast/style.min.less"}),this.registerTheme({name:a.BUILT_IN_THEME_DARK_CONTRAST_KEY,isBuiltin:!0,displayName:a.coreui.Strings.Theme_Modern_Dark_Contrast_DisplayName,css:"css/themes/ion-modern-dark-contrast/style.min.css",less:"css/themes/ion-modern-dark-contrast/style.min.less"}),this.parseAdditionalThemes(this.confService.config.shell);var c=this.restoreTheme(this.confService.config.shell);return this.confService.changed.add(function(){return b.parseAdditionalThemes(b.confService.config.shell)}),this.preferences.loaded.add(function(){b.restoreTheme(b.confService.config.shell).done()}),this._isStarted=!0,this.started.raise(this,null),c},e.prototype.getLocalPreferenceValue=function(){return this.localPreferences.getValue(e.THEME_PREFERENCE_KEY)},e.prototype.getRemotePreferenceValue=function(){return this.preferences.isLoaded?this.preferences.getValue(e.THEME_PREFERENCE_KEY):null},Object.defineProperty(e.prototype,"rawThemeVariables",{get:function(){return this.variables.rawThemeVariables},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawEditableThemeVariables",{get:function(){return b.ThemeVariables.rawEditableThemeVariables},enumerable:!0,configurable:!0}),e.prototype.getBaseThemePath=function(){return"css/themes"},e.prototype.registerTheme=function(b){if(!b.name)throw new Error(a.coreui.Strings.Err_MissingTheme_Name);if(this._themes.some(function(a){return a.name===b.name})){var c=a.stringFormat(a.coreui.Strings.Err_Theme_AlreadyRegistered,{themeName:b.name});throw new Error(c)}if(!b.css&&!b.less){var d=a.stringFormat(a.coreui.Strings.Err_Theme_ShouldProvide_CSS_LESS_Path,{themeName:b.name});throw new Error(d)}b.displayName=b.displayName||b.name,this._logger.low("Register",{name:b.name,css:b.css,less:b.less}),this._themes.push(b),this._themesChanged.raise(this,null)},e.prototype.findTheme=function(a){if(!a)return null;for(var b=this.confService.config.shell,c=b.enableBuiltinThemes!==!1?this._themes:this._themes.filter(function(a){return!a.isBuiltin}),d=0,e=c;d<e.length;d++){var f=e[d];if(f.name===a)return f}return null},e.prototype.getThemes=function(){return this._themes.slice()},e.prototype.getSelectableThemes=function(){var a=this.confService.config.shell;return a.enableThemeSelector!==!1?a.enableBuiltinThemes!==!1?this._themes:this._themes.filter(function(a){return!a.isBuiltin}):[]},Object.defineProperty(e.prototype,"currentTheme",{get:function(){return this._currentTheme},set:function(a){this.setCurrentTheme(a).done()},enumerable:!0,configurable:!0}),e.prototype.setCurrentTheme=function(b){var c=this;if(!b)throw new Error(a.coreui.Strings.Err_Theme_Cannot_BeNull);if(this._themes.indexOf(b)<0){var d=a.stringFormat(a.coreui.Strings.Err_Theme_Not_Found,{themeName:b.name});throw new Error(d)}return this.inSlHybrid?this.setNewCurrentTheme(b):this.isPrefLoaded.promise.then(function(){return c.updateRemotePreference(b.name),c.setNewCurrentTheme(b)})},e.prototype.updateRemotePreference=function(a){var b=this.preferences.getValue(e.THEME_PREFERENCE_KEY);this.inhibitPrefChangedHandler=!0;try{return a?(this.preferences.setValue(e.THEME_PREFERENCE_KEY,a),a!==b):(this.preferences.deleteKey(e.THEME_PREFERENCE_KEY),!!b)}finally{this.inhibitPrefChangedHandler=!1}},e.prototype.updateLocalPreference=function(a){var b=this.localPreferences.getValue(e.THEME_PREFERENCE_KEY);return a?(this.localPreferences.setValue(e.THEME_PREFERENCE_KEY,a),a!==b):(this.localPreferences.deleteKey(e.THEME_PREFERENCE_KEY),!!b)},Object.defineProperty(e.prototype,"themesChanged",{get:function(){return this._themesChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentThemeChanged",{get:function(){return this._currentThemeChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentThemeChanging",{get:function(){return this._currentThemeChanging},enumerable:!0,configurable:!0}),e.prototype.modifyVars=function(a){this.reloadCurrentTheme(a,!0)},e.prototype.getModuleBasePath=function(b){return b?b.basePath:a.getResourcePath("")},e.prototype.addAdditionalStyle=function(a){var b=this;this.remoteCssProvider.isAdditionLoaded(a).then(function(c){c.loaded&&(a.supportRemoteCss=!0),b._logger.ifMedium(function(){return{key:"additionalStyles",module:a.module&&a.module.name,less:a.lessAdditions&&a.lessAdditions.map(function(a){return a.path}),css:a.cssAdditions&&a.cssAdditions.map(function(a){return a.path}),supportRemoteCss:a.supportRemoteCss}});var d=a.lessAdditions&&a.lessAdditions.length>0,e=a.cssAdditions&&a.cssAdditions.length>0;if(d&&c.enabled&&!a.supportRemoteCss&&b.addWarning(a),d||e){var f=b._additionalStyles.push(a)-1;if(b.shouldUseLess([a])&&!b.confService.config.shell.useDeployedCompiledLessAdditions){var g,h=b.showSplashscreen("addition");return g=b.variables.hasRawVariables()?Q.when():b.themeLoaded=b.themeLoaded||b.reloadTheme(!0),g.then(function(){return b.themeLoaded=null,b.processAdditionalStyle(f)}).catch(function(a){b.showLessError(a)}).finally(function(){h.close()})}return b.processAdditionalStyle(f).catch(function(a){b.showLessError(a)})}}).done()},e.prototype.onModuleLoading=function(a){var b=this;return this._logger.high("OnModuleLoadingBegin",{modules:a.map(function(a){return a.name})}),this.remoteCssProvider.loadAdditions(this.currentTheme.name,a).finally(function(){b._logger.high("OnModuleLoadingEnd",{modules:a.map(function(a){return a.name})})})},e.prototype.additionalCssForLess=function(a){var b=this,c=[];return this.getCompiledVarExtracted(a,null,!1).then(function(d){var e=[];return b._additionalStyles.forEach(function(f){var g={compiledCss:{},modulePath:b.getModuleBasePath(f.module)};c.push(g),f.lessAdditions&&f.lessAdditions.length&&f.lessAdditions.forEach(function(c){if(c.content)e.push(b.lessCompiler.compile(c,a.name,d.rawThemeVariables,!1).then(function(a){g.compiledCss[c.path]=a.css}));else{var h=b.getModuleBasePath(f.module)+c.path;e.push(b.lessCompiler.fetchAndCompile(h,a.name,d.rawThemeVariables,!1).then(function(a){g.compiledCss[c.path]=a.css}))}})}),Q.all(e)}).then(function(){return c})},e.prototype.reloadCurrentTheme=function(a,b){return this.reloadTheme(!1,a,b)},e.prototype.getThemeVariableValue=function(a){return this.variables.getThemeVariableValue(a)},e.prototype.getCategorizedThemeVariables=function(){return this.variables.getCategorizedThemeVariables()},e.prototype.getUnCategorizedThemeVariables=function(){return this.variables.getUnCategorizedThemeVariables()},e.prototype.getCategoryForVariable=function(a){return b.ThemeVariables.getCategoryForVariable(a)},e.prototype.getVariations=function(a){return b.ThemeVariables.getVariations(a)},e.prototype.getThemeVariables=function(){return this.variables.getThemeVariables()},e.prototype.getThemeClass=function(b,c){return a.toolkit.getThemeClass(b,c)},e.prototype.getThemeClassOrStyle=function(b,c){return a.toolkit.getThemeClassOrStyle(b,c)},e.prototype.getCompiledVarExtracted=function(a,b,c){return this.getClonedCompiledVarExtracted(a,b,c)},e.prototype.getClonedCompiledVarExtracted=function(b,c,d,e){var f=this,g=a._location||"",h=g+b.less;c=c||{};var i=function(b){var c=e?{}:f.rawEditableThemeVariables;return Object.keys(f.rawEditableThemeVariables).forEach(function(d){e&&(c[d]=a.extend({},[f.rawEditableThemeVariables[d]])),c[d].value=b.themeVariables[d]}),{rawEditableThemeVariables:c,rawThemeVariables:b.themeVariables,css:b.css}};if(this.confService.config.shell.themeOverride){var j=g+this.confService.config.shell.themeOverride,k=this.restService.extget(j,{category:a.rest.NO_CATEGORY}).send();return k.then(function(a){return f.lessCompiler.fetchCompileExtractVars(h,b.name,c,d,a.data)}).then(function(a){return i(a)})}return this.lessCompiler.fetchCompileExtractVars(h,b.name,c,d).then(function(a){return i(a)})},e.prototype.getFontSize=function(){var a=this.rawThemeVariables[e.THEME_FONT_SIZE_PROPERTY_NAME];if(a)return parseInt(a.replace(e.FONT_SIZE_PIXEL_POSTFIX,""));var b=this.windowService.getComputedStyle(document.body).fontSize;return parseInt(b.substring(0,b.length-2))},e.prototype.setNewCurrentTheme=function(b){if(b)return this._currentTheme!==b?(this._logger.analytics("Settings","Theme",b.name,a.AnalyticsTraceLevel.Info,{css:b.css}),this.updateLocalPreference(b.name),this._currentTheme=b,this._themes.forEach(function(a){return a.isSelected=a===b}),this.reloadCurrentTheme()):(this._themes.forEach(function(a){return a.isSelected=a===b}),Q.when(null))},e.prototype.shouldUseLess=function(a){return a.some(function(a){return a.lessAdditions&&a.lessAdditions.length>0&&!a.supportRemoteCss})},e.prototype.clearDynamicLessStyles=function(){for(var a=document.getElementsByTagName("head")[0],b=a.getElementsByTagName("style"),d=0;d<b.length;d++)0!==b[d].id.indexOf("less:")&&b[d].id!==c||a.removeChild(b[d])},e.prototype.addWarning=function(b){var c=b.module;this._logger.low("additionalLessToCompile",{module:c&&c.name,lessAdditions:b.lessAdditions}),c&&(c.errors||(c.errors=[]),c.errors.indexOf(a.coreui.Strings.Warn_ThemeCompiledForModule)<0&&c.errors.push(a.coreui.Strings.Warn_ThemeCompiledForModule))},e.prototype.processAdditionalStyle=function(b,d){var e=this,f=this._additionalStyles[b],g=document.getElementsByTagName("head")[0],h=this._additionalCssThemeLinks[b]||(this._additionalCssThemeLinks[b]=[]);h.forEach(function(a){return g.removeChild(a)}),h=[],f.cssAdditions&&f.cssAdditions.forEach(function(a){var b;if(a.content){var c=document.createElement("style");c.innerHTML=a.content,b=c}else{var d=document.createElement("link");d.type="text/css",d.rel="stylesheet",d.href=a.path,a.path.indexOf("://")<0&&(d.href=e.getModuleBasePath(f.module)+a.path),b=d}h.push(b),g.appendChild(b)});var i=[],j=function(){return f.lessAdditions&&!f.supportRemoteCss&&f.lessAdditions.forEach(function(a){if(a.content)i.push(e.lessCompiler.compile(a,e.currentTheme&&e.currentTheme.name||"none",e.variables.rawThemeVariables,d));else{var b=e.getModuleBasePath(f.module)+a.path;i.push(e.lessCompiler.fetchAndCompile(b,e.currentTheme&&e.currentTheme.name||"none",e.variables.rawThemeVariables,d))}}),Q.all(i).then(function(a){var b=document.getElementsByTagName("head")[0],c=e.getModuleBasePath(f.module),d=e._additionalLessThemeLinks[c];return d&&d.forEach(function(a){return b.removeChild(a)}),e._additionalLessThemeLinks[c]=[],Q.all(a.map(function(a){if(a){var d=document.createElement("style");d.innerHTML=a.css,b.appendChild(d),e._additionalLessThemeLinks[c].push(d)}}))})};if(this.confService.config.shell.useDeployedCompiledLessAdditions){var k=a._location||"",l=k+this.currentTheme.less.substr(0,this.currentTheme.less.lastIndexOf("/"))+"/compiled-less-addition.css";return this.restService.extget(l,{category:a.rest.NO_CATEGORY}).send().then(function(a){var b=document.getElementById(c);b&&document.head.removeChild(b);var d=document.createElement("style");d.id=c,d.innerHTML=a.data,g.appendChild(d)},function(a){return e.notificationService.showError("Please deploy less for fast execution! Download it from theme editor"),j()})}return j()},Object.defineProperty(e.prototype,"lessCompiler",{get:function(){return this._lessCompiler||(this._lessCompiler=new b.LessCompiler(this.restService,this.localPref,this.loggerFactory,this.confService,this.envService)),this._lessCompiler},enumerable:!0,configurable:!0}),e.prototype.showLessError=function(b){this.notificationService.showError(a.stringFormat(a.coreui.Strings.Err_Parsing_ThemeFile,{filename:b.filename||"<unknown>"}),b.message||b)},e.prototype.buildDynamicCss=function(){var b=this.variables.generateThemeVariablesCss();if((this.embeddingService.ionNetBridge||a._isSlave)&&(b+='body { font-family: "Segoe UI", Arial, Helvetica, sans-serif; }\n'),b){var c=document.getElementsByTagName("head")[0];this._dynamicCssElement&&c.removeChild(this._dynamicCssElement),this._dynamicCssElement=document.createElement("style"),this._dynamicCssElement.innerHTML=b,c.appendChild(this._dynamicCssElement)}},e.prototype.loadAndCompileTheme=function(b,c,d){var e=this,f=document.getElementsByTagName("head")[0],g=function(a){e._theIonThemeLink&&f.removeChild(e._theIonThemeLink);var c=document.createElement("style");return c.innerHTML=a,f.appendChild(c),e._theIonThemeLink=c,e.buildDynamicCss(),b?Q.when(null):Q.all(e._additionalStyles.map(function(a,b){return e.processAdditionalStyle(b,d)})).catch(function(a){return e.showLessError(a)})},h=function(){return e.getCompiledVarExtracted(e.currentTheme,c,d).then(function(a){return e._cssLoaded=!1,e.variables.loadVariables(a.rawThemeVariables),g(a.css)})},i=a._location||"";if(c||this.shouldUseLess(this._additionalStyles)||!this.currentTheme.css){var j,k=this.showSplashscreen("ionwebTheme");if(this.confService.config.shell.useDeployedCompiledLessAdditions){var l=i+this.currentTheme.less.substr(0,this.currentTheme.less.lastIndexOf("/"))+"/variable.json";j=this.restService.extget(l,{category:a.rest.NO_CATEGORY}).send().then(function(b){var c=b.data;e.variables.loadVariables(c.rawThemeVariables);var d=i+e.currentTheme.css;return e.restService.extget(d,{category:a.rest.NO_CATEGORY}).send()}).then(function(a){var b=a.data;return g(b)},function(){return e.notificationService.showError("Please deploy variables for fast execution: download it using themeEditor."),h()})}else j=h();return j.then(function(){if(!b)return Q.all(e._additionalStyles.map(function(a,b){return e.processAdditionalStyle(b,d)}))}).then(function(){e.completeCurrentThemeChanged()},function(a){e.showLessError(a)}).finally(function(){k.close()}),j}b||this._additionalStyles.forEach(function(a,b){return e.processAdditionalStyle(b,d).catch(function(a){return e.showLessError(a)})});var m=this._theIonThemeLink;null!=m&&(m.disabled=!0,f.removeChild(m)),m=document.createElement("link"),m.type="text/css",m.rel="stylesheet";var n=Q.defer();return m.onload=function(){return n.resolve(null)},m.onerror=function(){return n.resolve(null)},m.href=i+this.currentTheme.css,f.appendChild(m),this._theIonThemeLink=m,this._cssLoaded=!0,n.promise.then(function(){e.completeCurrentThemeChanged()})},e.prototype.reloadTheme=function(a,b,c){var d=this;return this.remoteCssProvider.isEnabled().then(function(e){return d._logger.low("ApplyTheme",{name:d.currentTheme.name,css:d.currentTheme.css,less:d.currentTheme.less,hasRemoteCss:e}),d.clearDynamicLessStyles(),d.currentThemeChanging.raise(d,null),!e||b||d.shouldUseLess(d._additionalStyles)?d.loadAndCompileTheme(a,b,c).then(function(){if(e&&!b)return d.remoteCssProvider.loadTheme(d.currentTheme.name)}):d.remoteCssProvider.loadTheme(d.currentTheme.name).then(function(a){d.variables.loadVariables(a),d.buildDynamicCss(),d.completeCurrentThemeChanged()},function(e){if(e&&e.themeNotFound)return d.loadAndCompileTheme(a,b,c);
throw e})})},e.prototype.completeCurrentThemeChanged=function(){this.currentThemeChanged.raise(this,null);var a=this.getFontSize();this.densityService.setFontSize(a)},e.prototype.showSplashscreen=function(a){var b=this;return a+=this.splashCount++,this.splashScreenService.showSplashscreen(a),{close:function(){b.splashScreenService.hideSplashscreen(a)}}},e.prototype.parseAdditionalThemes=function(a){var b=this;(a.themes||[]).forEach(function(a){if(!b.findTheme(a.name)){if(!a.css||!a.less){var c=b.getBaseThemePath()+"/"+a.name,d=a.less,e=a.css;e||d||(d=c+"/style.less",e=c+"/style.css"),a={name:a.name,displayName:a.displayName,less:d,css:e,isBuiltin:!1}}b.registerTheme(a)}})},e.prototype.restoreTheme=function(a){var b,c=this,e=a.theme||d;b=this.embeddingService.isAvailable?this.embeddingService.getCurrentHostThemeId():Q.when(null);var f={configTheme:e};return b.then(function(a){var b=null;if(a&&(f.embeddingTheme=a,b=c.findTheme(a)),!b&&c.preferences.isLoaded){var d=f.remotePreferencesTheme=c.getRemotePreferenceValue();b=c.findTheme(d)}else if(!b&&c.localPreferences.isLoaded){var g=f.localPreferencesTheme=c.getLocalPreferenceValue();b=c.findTheme(g)}if(b||(b=c.findTheme(e)),b?(f.appliedTheme=b.name,f.themeFound=!0):f.themeFound=!1,c._logger.low("restoreDefaultTheme",f),b)return c.setNewCurrentTheme(b)})},e.THEME_PREFERENCE_KEY="ionweb.selectedTheme",e.THEME_FONT_SIZE_PROPERTY_NAME="@ion-text-font-size",e.FONT_SIZE_PIXEL_POSTFIX="px",e}();angular.module("ionwebCore").service("ionweb.themeManager",["$window","ionweb.configurationService","ionweb.loggerFactory","ionweb.restService","ionweb.serverService","ionweb.splashScreenService","ionweb.preferenceService","ionweb.notificationService","ionweb.localPreferenceService","ionweb.embeddingService","ionweb.localPreferenceStore","ionweb.densityService","ionweb.environmentService","ionweb.moduleService","ionweb.packManager","ionweb.excHelper","ionweb.iconService",e])}(b=a.themes||(a.themes={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){function b(a,b){return new k(a,b)}var c=10,d="logo-nucleus",e="logo-nucleus-hollow",f="logo-electron",g="logo-proton",h=function(){function a(b,c,d){this.className=b,this.radius=c,this.strokeWidth=d,this.radius=(this.radius||1)*a.RADIUS}return a.prototype.updateStage=function(a){this.svgEl.setAttributeNS(null,"cx",this.x.toString()),this.svgEl.setAttributeNS(null,"cy",this.y.toString())},a.prototype.createSvgElement=function(b){this.svgEl=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.svgEl.setAttributeNS(null,"r",this.radius.toString()),this.svgEl.setAttributeNS(null,"class",this.className),this.svgEl.setAttributeNS(null,"cx",this.x.toString()),this.svgEl.setAttributeNS(null,"cy",this.y.toString()),this.strokeWidth&&this.svgEl.setAttributeNS(null,"stroke-width",(this.strokeWidth*a.RADIUS).toString()),b.appendChild(this.svgEl)},a.RADIUS=3,a}(),i=function(a){function b(b,c,d,e,f){var g=a.call(this,d,e,f)||this;return g.origX=b,g.origY=c,g.x=g.origX,g.y=g.origY,g}return __extends(b,a),b}(h),j=function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,f)||this;return i.cx=b,i.cy=c,i.offx=d,i.offy=e,i.steps=g,i.initialAngle=h,i.rotate(h),i}return __extends(b,a),b.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a);this.x=b*(this.offx-this.cx)+c*(this.offy-this.cy)+this.cx,this.y=b*(this.offy-this.cy)-c*(this.offx-this.cx)+this.cy},b.prototype.updateStage=function(b){this.rotate(b/this.steps+this.initialAngle),a.prototype.updateStage.call(this,b)},b}(h),k=function(){function a(a,b){var d=this;this.svg=a,this.frame=0,this.initStageObjects(),this.balls.forEach(function(a){a.createSvgElement(d.svg)}),b||(this.timerId=setInterval(function(){return d.updateStage()},c),this.timerStarted=!0)}return a.prototype.initStageObjects=function(){var a=27.7,b=44.7,c=61.8,h=44.7;this.balls=[],this.balls.push(new i(a,h,d)),this.balls.push(new i(a,h+9,g)),this.balls.push(new i(a,h+6,f)),this.balls.push(new i(a,h+12,d)),this.balls.push(new i(b,50.4,e,2,2)),this.balls.push(new i(c,h,d)),this.balls.push(new i(c+2.5,h+2.5,d)),this.balls.push(new i(c,h+6,f)),this.balls.push(new i(c,h+9,f)),this.balls.push(new i(c,h+12,f)),this.balls.push(new i(c+12,h+3,f)),this.balls.push(new i(c+12,h+8,f)),this.balls.push(new i(c+12,h,d)),this.balls.push(new i(c+12,h+6,d)),this.balls.push(new i(c+10,h+9,d)),this.balls.push(new i(c+12,h+12,g)),this.balls.push(new i(c+6,h+6,g));var k=44.7,l=50.4;this.balls.push(new j(k,l,85.7,l,f,-272,15/180*Math.PI)),this.balls.push(new j(k,l,74,l,g,-83,-220/180*Math.PI)),this.balls.push(new j(k,l,61.7,l,d,122,-.25*Math.PI))},a.prototype.updateStage=function(){var a=this;this.frame++,this.balls.forEach(function(b){b.updateStage(a.frame)})},a.prototype.dispose=function(){this.timerStarted&&(clearInterval(this.timerId),this.timerStarted=!1)},a}();a.createSvgLogo=b}(b=a.logo||(a.logo={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,b){return new m(a,b)}var d="logo-nucleus",e="logo-nucleus-hollow",f="logo-electron",g="logo-proton",h="logo-rotating",i="logo-rotating-anti",j=function(){function a(b,c,d){this.className=b,this.radius=c,this.strokeWidth=d,this.radius=(this.radius||1)*a.RADIUS}return a.prototype.createSvgElement=function(b){this.svgEl=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.svgEl.setAttributeNS(null,"r",this.radius.toString()),this.svgEl.setAttributeNS(null,"class",this.className),this.strokeWidth&&this.svgEl.setAttributeNS(null,"stroke-width",(this.strokeWidth*a.RADIUS).toString()),this.svgEl.setAttributeNS(null,"cx",this.x.toString()),this.svgEl.setAttributeNS(null,"cy",this.y.toString()),b.appendChild(this.svgEl)},a.RADIUS=3,a}(),k=function(a){function b(b,c,d,e,f){var g=a.call(this,d,e,f)||this;return g.x=b,g.y=c,g}return __extends(b,a),b}(j),l=function(b){function c(a,c,d,e,f,g,j,k){var l=b.call(this,f+(k?"":" "+(g<0?h:i)))||this;return l.cx=a,l.cy=c,l.steps=g,l.initAngle=j,l.x=d,l.y=e,l}return __extends(c,b),c.prototype.createSvgElement=function(c){b.prototype.createSvgElement.call(this,c);var d=a.stringFormat("-moz-transform: rotate(${angle}rad); -webkit-transform: rotate(${angle}rad); transform: rotate(${angle}rad); -moz-animation-duration: ${dur}s; -webkit-animation-duration: ${dur}s; animation-duration: ${dur}s; -moz-transform-origin: ${x}px ${y}px; -webkit-transform-origin: ${x}px ${y}px; transform-origin: ${x}px ${y}px;",{angle:this.initAngle,dur:Math.abs(6.28*this.steps/100),x:this.cx,y:this.cy});this.svgEl.setAttributeNS(null,"style",d)},c}(j),m=function(){function a(a,b){var c=this;this.svg=a,this.noAnimation=b,this.initStageObjects(),this.balls.forEach(function(a){a.createSvgElement(c.svg)})}return a.prototype.dispose=function(){},a.prototype.initStageObjects=function(){var a=27.7,b=44.7,c=61.8,h=44.7;this.balls=[],this.balls.push(new k(a,h,d)),this.balls.push(new k(a,h+9,g)),this.balls.push(new k(a,h+6,f)),this.balls.push(new k(a,h+12,d)),this.balls.push(new k(b,50.4,e,2,2)),this.balls.push(new k(c,h,d)),this.balls.push(new k(c+2.5,h+2.5,d)),this.balls.push(new k(c,h+6,f)),this.balls.push(new k(c,h+9,f)),this.balls.push(new k(c,h+12,f)),this.balls.push(new k(c+12,h+3,f)),this.balls.push(new k(c+12,h+8,f)),this.balls.push(new k(c+12,h,d)),this.balls.push(new k(c+12,h+6,d)),this.balls.push(new k(c+10,h+9,d)),this.balls.push(new k(c+12,h+12,g)),this.balls.push(new k(c+6,h+6,g));var i=44.7,j=50.4;this.balls.push(new l(i,j,85.7,j,f,-272,-15/180*Math.PI,this.noAnimation)),this.balls.push(new l(i,j,74,j,g,-83,220/180*Math.PI,this.noAnimation)),this.balls.push(new l(i,j,61.7,j,d,122,.25*Math.PI,this.noAnimation))},a}();b.createSvgLogoCss=c}(b=a.logo||(a.logo={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a,b){this.configurationService=a,this.languageService=b}return a.prototype.init=function(){var a=this;this.updateBrandingStrings(),this.configurationService.changed.add(function(){a.updateBrandingStrings()})},a.prototype.updateBrandingStrings=function(){var a=this.configurationService.config.shell.branding&&this.configurationService.config.shell.branding.strings;a&&this.languageService.updateBrandingStrings(a)},a}();angular.module("ionwebCore").service("ionweb.brandingService",["ionweb.configurationService","ionweb.languageService",function(a,c){return new b(a,c)}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function a(a){this.name=a}return a.prototype.getDuration=function(){return this.duration},a.prototype.start=function(){return this.begin&&this.stop(),this.begin=a.now(),this},a.prototype.stop=function(){return this.duration+=a.now()-this.begin,this},a.prototype.clear=function(){return this.begin=null,this.duration=0,this},a.now=function(){return(performance||Date).now()},a}();b.Timer=c;var d=function(){function a(){this.timers={}}return a.prototype.newTimer=function(a){return this.timers[a]||(this.timers[a]=new c(a)),this.timers[a].clear()},a.prototype.getTimers=function(){var a=this;return Object.keys(this.timers).map(function(b){return a.timers[b]})},a.prototype.getOperations=function(){return this.getTimers().map(function(a){return e.fromTimer(a)})},a}();b.Digest=d;var e=function(){function a(a){this.name=a,this.count=0,this.duration=0}return a.fromTimer=function(b){var c=new a(b.name);return c.count=1,c.duration=b.getDuration(),c},a}();b.Operation=e;var f=function(){function a(){}return a.newDigest=function(){var b=new d;return a.lastDigest=b,a.digests.unshift(b),b},a.getDigests=function(){return a.digests},a.onDigestEnd=function(b){a.digestEndCallbacks.push(b)},a.digestEnd=function(){a.digestEndCallbacks.forEach(function(b){return b(a.lastDigest)}),a.newDigest()},a.removeLastDigest=function(){a.lastDigest=a.digests.splice(0,1)[0]},a.clear=function(){a.digests=[],a.newDigest()},a.getOperations=function(){var b={},c=[];return a.getDigests().forEach(function(a){a.getOperations().forEach(function(a){var c=a.name;b[c]||(b[c]=new e(c)),b[c].count+=a.count,b[c].duration+=a.duration})}),angular.forEach(b,function(a){(a.count>1||a.duration>0)&&c.push(a)}),c},a.getOperationsOrderedByDuration=function(){return a.getOperations().sort(function(a,b){var c=b.duration-a.duration;return 0!=c?c:b.count-a.count})},a.getOperationsOrderedByCount=function(){return a.getOperations().sort(function(a,b){var c=b.count-a.count;return 0!=c?c:b.duration-a.duration})},a.lastDigest=null,a.digests=[],a.digestEndCallbacks=[],a}();b.Stats=f;var g=function(){function b(){}return b.getExpression=function(a){if(!a)return"";if(angular.isString(a))return a;if(angular.isString(a.exp))return a.exp.trim();if(b.showFunctionsName)return a.name?"fn:"+a.name:"fn:anonymousFn";var c=a.toString().replace(/\/\/[^\n]*/g,"").replace(/\n\s*/g," ").trim();return c.length>b.maxFunctionsLength?c.substr(0,b.maxFunctionsLength-3)+".. ":c},b.wrapObjMethod=function(a,c,d,e){var f=a[c];a[c]=b.wrapFn(f,d||c,e)},b.wrapFn=function(a,d,e){return angular.isDefined(a)?function(){if(!b.active)return a.apply(this,arguments);if(!(d&&d instanceof c)){var g=angular.isString(d)?d:d instanceof Function?d.apply(this,arguments):"fn:"+(a.name||a);d=f.lastDigest.newTimer(g)}d.start();var h=a.apply(this,arguments);return d.stop(),angular.isFunction(e)&&e.apply(this,arguments),h}:a},b.install=function(){var c=null,d=function(a){return c||angular.injector(["ng"]).invoke(["$parse",function(a){return c=a}]),c.apply(this,arguments)},e=angular.module("ionwebCore");e.provider("performanceAnalyzerProvider",["$provide",function(a){a.decorator("$rootScope",["$delegate",function(a){var c=Object.getPrototypeOf(a),e=c.$digest,g=c.$watch;c.$watchGroup,c.$watchCollection;return c.$digest=function(){if(!b.active)return e.apply(this,arguments);var a=f.lastDigest.newTimer("$digest").start(),c=e.apply(this,arguments);return a.stop(),f.digestEnd(),c},b.wrapObjMethod(c,"$$postDigest"),b.wrapObjMethod(c,"$eval",function(a){var c=b.getExpression(a);return"$eval("+c+")"}),b.wrapObjMethod(c,"$evalAsync",function(a){var c=b.getExpression(a);return"$evalAsync("+c+")"}),b.wrapObjMethod(c,"$applyAsync",function(a){var c=b.getExpression(a);return"$applyAsync("+c+")"}),c.$watch=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(!b.active)return g.apply(this,arguments);var e=arguments[0],f=arguments[1],h=d(e);if((!h||!h.$$watchDelegate)&&angular.isDefined(f)&&null!==f){var i=b.getExpression(e);a[1]=b.wrapFn(f,"$watch("+i+")")}return g.apply(this,a)},b.wrapObjMethod(c,"$watchGroup",function(a){var c="["+a.map(b.getExpression).join(", ")+"]";return"$watchGroup("+c+")"}),b.wrapObjMethod(c,"$watchCollection",function(a){var c;return c=angular.isArray(a)?"["+a.map(b.getExpression).join(", ")+"]":b.getExpression(a),"$watchCollection("+c+")"}),a}]),a.decorator("$parse",["$delegate",function(a){return function(c){var d="evaluate "+b.getExpression(c),e=a.apply(this,arguments),g=function(){var a;b.active&&(a=f.lastDigest.newTimer(d).start());try{return e.apply(this,arguments)}finally{a&&a.stop()}};for(var h in e)["name","length","displayName","caller","arguments"].indexOf(h)<0&&(g[h]=e[h]);return g}}]),a.decorator("$q",["$delegate",function(a){var c=Object.getPrototypeOf(a.defer().promise),d=c.then;return c.then=function(a,c,e){return b.active?(a&&(a=b.wrapFn(a,"$q.onFulfilled("+b.getExpression(a)+")")),c&&(c=b.wrapFn(c,"$q.onRejected("+b.getExpression(c)+")")),e&&(e=b.wrapFn(e,"$q.progressBack("+b.getExpression(e)+")")),d.call(this,a,c,e)):d.apply(this,arguments)},a}]),b.wrapObjMethod(angular,"bind","angular.bind"),this.$get=function(){}}]),e.service("ionweb.performanceTools",[function(){return a.perf}])},b.start=function(){b.active=!0,f.clear()},b.stop=function(){b.active=!1,f.removeLastDigest()},b.active=!1,b.showFunctionsName=!0,b.maxFunctionsLength=1/0,b}();b.Manager=g}(b=a.perf||(a.perf={}))}(ionweb||(ionweb={}));var toastr;!function(a){function b(a,b,c){return void 0===c&&(c={}),o({type:u.error,iconClass:p().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(a,b){return a||(a=p()),r=$("#"+a.containerId),r.length?r:(b&&(r=l(a)),r)}function d(a,b,c){return void 0===c&&(c={}),o({type:u.info,iconClass:p().iconClasses.info,message:a,optionsOverride:c,title:b})}function e(a){s=a}function f(a,b,c){return void 0===c&&(c={}),o({type:u.success,iconClass:p().iconClasses.success,message:a,optionsOverride:c,title:b})}function g(a,b,c){return void 0===c&&(c={}),o({type:u.warning,iconClass:p().iconClasses.warning,message:a,optionsOverride:c,title:b})}function h(a,b){var d=p();r||c(d),k(a,d,b)||j(d)}function i(a){var b=p();return r||c(b),a&&0===$(":focus",a).length?void q(a):void(r.children().length&&r.remove())}function j(a){for(var b=r.children(),c=b.length-1;c>=0;c--)k($(b[c]),a)}function k(a,b,c){var d=c&&c.force;return!(!a||!d&&0!==$(":focus",a).length)&&(a[b.hideMethod]({duration:c&&c.hideImmediately?0:b.hideDuration,easing:b.hideEasing,complete:function(){q(a)}}),!0)}function l(a){return r=$("<div/>").attr("id",a.containerId).addClass(a.positionClass).attr("aria-live","polite").attr("role","alert"),r.appendTo($(a.target)),r}function m(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",closeButton:!0,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:null,closeDuration:null,closeEasing:null,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function n(a){s&&s(a)}function o(a){function b(a){return null==a&&(a=""),new String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(){g(),i(),j(),k(),l(),h()}function e(){A.hover(u,s),!x.onclick&&x.tapToDismiss&&A.click(o),x.closeButton&&E&&E.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),o(!0),x.onClosed&&x.onClosed()}),x.onclick&&A.click(function(a){x.onclick(a),o()})}function f(){A.hide(),A[x.showMethod]({duration:x.showDuration,easing:x.showEasing,complete:x.onShown}),x.timeOut>0&&(H=(new Date).getTime(),z=setTimeout(o,x.timeOut),F.maxHideTime=x.timeOut,F.hideEta=H+F.maxHideTime,x.progressBar&&(F.intervalId=setInterval(w,10)))}function g(){a.iconClass&&A.addClass(x.toastClass).addClass(y)}function h(){x.newestOnTop?r.prepend(A):r.append(A)}function i(){a.title&&(B.append(x.escapeHtml?b(a.title):a.title).addClass(x.titleClass),A.append(B))}function j(){a.message&&(C.append(x.escapeHtml?b(a.message):a.message).addClass(x.messageClass),A.append(C))}function k(){x.closeButton&&(E.addClass("toast-close-button").attr("role","button"),A.prepend(E))}function l(){x.progressBar&&(D.addClass("toast-progress"),A.prepend(D))}function m(a,b){if(a.preventDuplicates){if(b.message===v)return!0;v=b.message}return!1}function o(a){var b=a&&x.closeMethod?x.closeMethod:x.hideMethod,c=a&&x.closeDuration?x.closeDuration:x.hideDuration,d=a&&x.closeEasing?x.closeEasing:x.hideEasing;if(!$(":focus",A).length||a)return clearTimeout(F.intervalId),A[b]({duration:c,easing:d,complete:function(){q(A),x.onHidden&&"hidden"!==G.state&&x.onHidden(),G.state="hidden",G.endTime=new Date,n(G)}})}function s(){if(x.timeOut>0||x.extendedTimeOut>0){var a;if(x.extendedTimeOut)a=x.extendedTimeOut;else var a=Math.max(0,x.timeOut-((new Date).getTime()-H));z=setTimeout(o,a),F.maxHideTime=a,F.hideEta=(new Date).getTime()+F.maxHideTime}}function u(){clearTimeout(z),F.hideEta=0,A.stop(!0,!0)[x.showMethod]({duration:x.showDuration,easing:x.showEasing})}function w(){var a=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;D.width(a+"%")}var x=p(),y=a.iconClass||x.iconClass;if(null!=a.optionsOverride&&(x=$.extend(x,a.optionsOverride),y=a.optionsOverride.iconClass||y),!m(x,a)){t++,r=c(x,!0);var z=null,A=$("<div/>"),B=$("<div/>"),C=$("<div/>"),D=$("<div/>"),E=$(x.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},G={toastId:t,state:"visible",startTime:new Date,options:x,map:a};return d(),f(),e(),n(G),A;var H}}function p(){return $.extend({},m(),a.toastr.options)}function q(a){r||(r=c()),a.is(":visible")||(a.remove(),a=null,0===r.children().length&&(r.remove(),v=void 0))}var r,s,t=0,u={error:"error",info:"info",success:"success",warning:"warning"};a.toastr={clear:h,remove:i,error:b,getContainer:c,info:d,options:{},subscribe:e,success:f,version:"2.1.2",warning:g};var v}(toastr||(toastr={}));var ionweb;!function(a){var b=function(){function b(){this.clear()}return b.prototype.arrayForMessage=function(b){var c=this.info;switch(a.NotificationType[b.type]){case a.NotificationType.danger:c=this.danger;break;case a.NotificationType.warning:c=this.warning}return c},b.prototype.add=function(a){return this.arrayForMessage(a).push(a)},b.prototype.remove=function(a){var b=this.arrayForMessage(a),c=b.indexOf(a);c>=0&&b.splice(c,1)},b.prototype.clear=function(){this.info=[],this.warning=[],this.danger=[]},b}();a.GlobalMessages=b;var c=function(c){function d(a,e,f,g,h,i,j,k,l,m){var n=c.call(this,i,j)||this;n._rootScope=a,n.$q=e,n.$templateCache=f,n.$compile=g,n._modal=h,n.loggerFactory=i,n.exceptionHelper=j,n.envService=k,n.preferences=l,n.embeddingService=m,n._max_num_notifications_on_screen=d.DEFAULT_MAX_NUM_TOASTS_ON_SCREEN,n._visibleToasts=[],n._rootScope.reload=function(){k.reload()},n._rootScope.globalMessages=new b,n._rootScope.connectionServices=n._connectionServices;var o=function(){n._max_num_notifications_on_screen=n.preferences.getValue(d.MAX_NUM_TOASTS_ON_SCREEN_KEY,d.DEFAULT_MAX_NUM_TOASTS_ON_SCREEN),n.traceAnalytics(),n.preferences.subscribeChanges(d.MAX_NUM_TOASTS_ON_SCREEN_KEY,function(a,b){n._max_num_notifications_on_screen=b.value||d.DEFAULT_MAX_NUM_TOASTS_ON_SCREEN,n.traceAnalytics()})};if(l.isLoaded)o();else var p=l.loaded.add(function(){p(),o()});return m.ionNetBridge&&m.ionNetBridge.caps.then(function(a){a.hasMessageBridge&&(n.ionnet=m.ionNetBridge)}),n}return __extends(d,c),Object.defineProperty(d.prototype,"visibleToasts",{get:function(){return this._visibleToasts.map(function(a){return a.uiMsg})},enumerable:!0,configurable:!0}),d.prototype.traceAnalytics=function(){this._logger.analytics("Settings","Preference",d.MAX_NUM_TOASTS_ON_SCREEN_KEY+":"+this._max_num_notifications_on_screen)},d.prototype.show=function(b,c){this.showMessage(b,c.type||a.NotificationType.info,c.secondary,c.details,c.decoration)},d.prototype.showError=function(b,c,d,e){e?this.showExceptionMessage(b,c,d):this.showMessage(b,a.NotificationType.danger,c,d,null)},d.prototype.showInfo=function(b,c,d){this.showMessage(b,a.NotificationType.info,c,d,null)},d.prototype.showWarning=function(b,c,d){this.showMessage(b,a.NotificationType.warning,c,d,null)},Object.defineProperty(d.prototype,"globalMessages",{get:function(){return this._rootScope.globalMessages},enumerable:!0,configurable:!0}),d.prototype.showExceptionMessage=function(b,c,d){var e=this;if(this._logger.low("showException",{primary:b}),!this._suspended){if(this.ionnet)return void this.ionnet.showExceptionMessage(b,c,d);var f=this._rootScope;f.$evalAsync(function(){var f=e.createUiMsg("Error",b,c,d,a.NotificationType[a.NotificationType.danger],""),g=1===e.globalMessages.add(f);g&&f.showDetails()})}},d.prototype.showMessage=function(b,c,d,e,f){var g=this;if(this._logger.low("showMessage",{primary:b,messageType:c,secondary:d}),!this._suspended){if(this.ionnet)return void this.ionnet.showMessage(b,c,d,e,f);var h="";if(f){var i=" toast-decoration toast-decoration-"+f.trim();h=(h+i).trim()}var j=this._rootScope;j.$evalAsync(function(){c=c||a.NotificationType.info;var f,i,k=a.NotificationType[c];switch(c){case a.NotificationType.danger:f=a.toolkit.Strings.Title_Error,i=toastr.toastr.error;break;case a.NotificationType.warning:f=a.toolkit.Strings.Title_Warning,i=toastr.toastr.warning;break;case a.NotificationType.info:f=a.toolkit.Strings.Title_Info,i=toastr.toastr.info;break;default:f=a.toolkit.Strings.Title_Message}var l=g.createUiMsg(f,b,d,e,k,h),m={uiMsg:l,toast:null,doNotEnqueue:!1};if(g._visibleToasts.length===g._max_num_notifications_on_screen){var n=g._visibleToasts[0];toastr.toastr.clear(n.toast,{force:!0,hideImmediately:!0}),n.doNotEnqueue=!0,j.$evalAsync(function(){return j.globalMessages.add(n.uiMsg)}),g._visibleToasts.splice(0,1)}var o="";b&&(o+="<p class='ion-toast-primary'>"+b+"</p>");var p="toast";h&&(p+=" "+h);var q={closeDuration:1,progressBar:!0,onclick:function(){m.doNotEnqueue=!0,toastr.toastr.clear(m.toast,{force:!0,hideImmediately:!0}),l.showDetails()},onClosed:function(){m.doNotEnqueue=!0,j.$evalAsync(function(){return l.dismiss()})},onHidden:function(){m.doNotEnqueue||j.$evalAsync(function(){return j.globalMessages.add(l)});var a=g._visibleToasts.indexOf(m);a>=0&&g._visibleToasts.splice(a,1)},extendedTimeOut:4e3,timeOut:5e3,toastClass:p};m.toast=i(o,f,q),g._visibleToasts.push(m)})}},d.prototype.clearToasts=function(){this._visibleToasts.forEach(function(a){toastr.toastr.clear(a.toast,{force:!0,hideImmediately:!0})}),this._visibleToasts=[]},d.prototype.createUiMsg=function(a,b,c,d,e,f){var g,h=this,i=(this._rootScope,{title:a,message:b,secondary:c,details:"string"==typeof d?d:JSON.stringify(d),extraClasses:f,type:e,timestamp:new Date,dismiss:function(){h.globalMessages.remove(i)},close:function(){g.close()},showDetails:function(){var a=h._rootScope.$new(!0);$.extend(a,i),a.$evalAsync(function(){g=h._modal.open({templateUrl:"core.ui/notificationDlg.tpl.html",size:"lg",scope:a}),g.result.then(function(){i.dismiss(),a.$destroy()},function(){i.dismiss(),a.$destroy()})})}});return i},d.prototype.showSnackBar=function(a){var b=this,c=this.$q.defer();return this._rootScope.$evalAsync(function(){var d,e;if("string"==typeof a)d="<p class='ion-snack-primary'>"+a+"</p>";else if("object"==typeof a){var f=a.template||b.$templateCache.get(a.templateUrl);d=b.$compile(f)(a.scope||b._rootScope),e=a.scope}var g=document.getElementById("ionweb-snack-container-div");g&&document.body.removeChild(g);var h=document.createElement("div");h.id="ionweb-snack-container-div",h.className="toast-bottom-center",document.body.appendChild(h);var i=null,j=function(){toastr.toastr.clear(i,{force:!0,hideImmediately:!0})},k=function(){e&&(e.$destroy(),e=null)},l={onclick:function(){return j()},onClosed:k,onHidden:k,extendedTimeOut:0,timeOut:5e3,containerId:"ionweb-snack-container-div",showMethod:"slideDown",hideMethod:"slideUp",showEasing:"swing",hideEasing:"swing",closeButton:!1,hideDuration:100};i=toastr.toastr.info(d,"",l),c.resolve({close:function(){return j()}})}),c.promise},d.prototype.clearMessage=function(){var a=this;this._rootScope.$evalAsync(function(){a.globalMessages.clear()})},d.prototype.showFatal=function(b,c){var d=this;if(this._logger.low("showFatal",{message:b}),!this._suspended){this.suspend(),a.getService("ionweb.dialogService").suspend(),a.getService("ionweb.rootComponentService").disableWarnOnExit();var e=this._rootScope;e.$evalAsync(function(){e.fatalError=b,d._lastFatalError=b,e.fatalErrorTitle=c,d._modal.open({templateUrl:"core.ui/fatalErrorContent.tpl.html",size:"lg",backdrop:"static",keyboard:!1})})}},d.prototype.updateGlobalStatus=function(){var a=this;c.prototype.updateGlobalStatus.call(this),this._rootScope.$evalAsync(function(){a._rootScope.connectionServices=a._connectionServices}),this.embeddingService.ionNetBridge&&this.embeddingService.ionNetBridge.updateStatus(location,this.prepareExportableConnectionStatus())},d.prototype.convertStatusToExportableStatus=function(b){switch(b){case a.ServiceStatus.Error:case a.ServiceStatus.Disconnected:return a.ExportableConnectionStatus.Error;case a.ServiceStatus.Connected:return a.ExportableConnectionStatus.Ok;case a.ServiceStatus.Connecting:default:return a.ExportableConnectionStatus.Warning}},d.prototype.prepareExportableConnectionStatus=function(){var a=this;return this._rootScope.connectionServices.serviceList.map(function(b){var c={ConnectionName:b.name,Status:a.convertStatusToExportableStatus(b.status),Message:b.statusStr};return c})},d.prototype.suspend=function(){this._suspended=!0},Object.defineProperty(d.prototype,"maxNumberOfToastsOnScreen",{get:function(){return this._max_num_notifications_on_screen},set:function(a){var b=Math.max(1,a);b!==this.maxNumberOfToastsOnScreen&&this.preferences.setValue(d.MAX_NUM_TOASTS_ON_SCREEN_KEY,b)},enumerable:!0,configurable:!0}),d.prototype.updateOffline=function(a){c.prototype.updateOffline.call(this,a),this.envService.updateOffline(a)},d.DEFAULT_MAX_NUM_TOASTS_ON_SCREEN=6,d.MAX_NUM_TOASTS_ON_SCREEN_KEY="maxNumberOfToastsOnScreen",d}(a.NotificationServiceBase);a.NotificationService=c,a.module("ionwebCore").service("notificationService",["$rootScope","$q","$templateCache","$compile","$uibModal","ionweb.loggerFactory","ionweb.excHelper","ionweb.environmentService","ionweb.preferenceService","ionweb.embeddingService"],function(a,b,d,e,f,g,h,i,j,k){return new c(a,b,d,e,f,g,h,i,j,k)})}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){a[a.Met=0]="Met",a[a.NotCompatible=1]="NotCompatible",a[a.MissingDep=2]="MissingDep"}(b||(b={}));var c=function(){function c(a,b){this.logger=a,this.entryPoints=b,this.discarded=[]}return c.groupBy=function(a,b){var c={};return a.forEach(function(a){var d=b(a);c[d]=c[d]||[],c[d].push(a)}),Object.keys(c).map(function(a){return{key:a,values:c[a]}})},c.max=function(a,b){if(0===a.length)return null;for(var c=a[0],d=1;d<a.length;d++)b(a[d],c)>0&&(c=a[d]);return c},c.prototype.getDependencies=function(b){return b.info&&b.info.library.dependency&&b.info.library.dependency.dependentLibrary?b.info.library.dependency.dependentLibrary.map(function(b){return{name:b.name,version:a.IonVersion.fromIonString(b.version)}}):[]},c.prototype.getLoadList=function(b){for(var d=this,e=b,f=[];e.length>0;)this.load(e[0],e,f);for(;e.length>0;)this.load(e[0],e,f);var g=c.groupBy(f,function(a){return a.info.library.name});return g.forEach(function(b){if(b.values.length>1){var e=c.max(b.values,function(b,c){return a.IonVersion.fromIonString(b.info.library.version).compareTo(a.IonVersion.fromIonString(c.info.library.version))});b.values.forEach(function(a){if(a!==e){d.logger.low("SkipMod",{name:b.key,version:a.info.library.version,reason:"duplicated, older"});var c=f.indexOf(a);f.splice(c,1)}})}}),f},c.prototype.load=function(c,d,e){function f(a,b){var c=a.indexOf(b);c>=0&&a.splice(c,1)}f(d,c);var g=!0;c.dependencies=this.getDependencies(c);for(var h=0;h<c.dependencies.length;h++){var i,j=c.dependencies[h];do{i=!1;var k=this.checkDep(c.info.library.name,j,this.entryPoints.concat(e));switch(k){case b.Met:continue;case b.NotCompatible:g=!1;break;case b.MissingDep:var l=j.name,m=a.firstOrDefault(d,function(a){return a.info.library.name===l});if(null==m){this.logger.low("MissingDep",{reqdep:l,owner:c.info.library.name}),g=!1;break}this.load(m,d,e),i=!0}}while(i);if(!g)break}if(g){var n=c.info.library;this.logger.low("LoadModule",{module:n.name,version:n.version,isMaster:n.isMasterModule}),e.push(c)}else this.discarded.push(c)},Object.defineProperty(c.prototype,"discardedLibraries",{get:function(){return this.discarded},enumerable:!0,configurable:!0}),c.prototype.checkDep=function(c,d,e){function f(b){if(!b)return{from:null,to:null};var c=b.split("-");return 2===c.length?{from:a.IonVersion.fromIonString(c[0]),to:a.IonVersion.fromIonString(c[1])}:{from:a.IonVersion.fromIonString(c[0]),to:a.IonVersion.fromIonString(c[0])}}var g=d.name,h=a.firstOrDefault(e,function(a){return a.info.library.name===g});if(!h)return b.MissingDep;var i=a.IonVersion.fromIonString(h.info.library.version);if(null==i)return this.logger.low("WARNING",{msg:"missing version specified for the target library, assuming compatible",module:g}),b.Met;var j=d.version;if(j.equals(i))return b.Met;var k=h.info.library.bindingRedirect;if(k&&k.oldVersion)var l=f(k.oldVersion);if(!l||!l.from||!l.to||j.lt(l.from)||j.gt(l.to)){var m=l?l.from:null,n=l?l.to:null;return this.logger.low("ERROR",{discarded:c,missingDep:d.name+", "+d.version.toString(),bindingFrom:m&&m.toString(),bindingTo:n&&n.toString()}),b.NotCompatible}return this.logger.low("Redirected",{depKey:g,from:j.toString(),to:i.toString()}),b.Met},c}();a.DependencySolver=c}(ionweb||(ionweb={}));var ionweb;!function(ionweb){var coreui;!function(coreui){var RegistryBase=function(){function RegistryBase(a,b,c){this._module=a,this._configurationService=b,this.packManager=c,this.loadedDef=Q.defer(),this._categories={},this.cssAdditions=[],this.lessAdditions=[],this.iconSetAdditions=[],this.allExports={}}return Object.defineProperty(RegistryBase.prototype,"loaded",{get:function(){return this.loadedDef.promise},enumerable:!0,configurable:!0}),Object.defineProperty(RegistryBase.prototype,"moduleKey",{get:function(){return this._module.name},enumerable:!0,configurable:!0}),Object.defineProperty(RegistryBase.prototype,"moduleName",{get:function(){return this._module.displayName},enumerable:!0,configurable:!0}),RegistryBase.prototype.category=function(a,b){if(b){if(this._categories[a])throw new Error(ionweb.stringFormat(coreui.Strings.Err_Registry_Category_Id_AlreadyRegistered,{id:a}));var c;if(Array.isArray(b)){if(c=b,0===c.length)throw new Error("Invalid path");b=c[c.length-1]}return this._categories[a]=ionweb.Catalog.buildCategory(a,b,c)}return this._categories[a]},RegistryBase.prototype.editConfig=function(a){return!(!this._module.isMasterModule&&!this._module.isPreload)&&(this._configurationService.editConfig(a),!0)},RegistryBase.prototype.loadAngularModule=function(pathOrModule,ngModuleName){var content,ret=Q.when(null);if("string"==typeof pathOrModule){var deferred=Q.defer();eval("require")([this._module.basePath.concat(pathOrModule)],function(a){deferred.resolve(a)},function(a){deferred.reject(a);
}),content=deferred.promise}else content=Q.when(pathOrModule);return content.then(function(){"string"==typeof ngModuleName&&(ngModuleName=[ngModuleName]),ngModuleName.forEach(function(a){ionweb.angularExt.registerModule(a)})})},RegistryBase.prototype.getService=function(a){return ionweb.getService(a)},RegistryBase.prototype.loadLibrary=function(a,b){return this.packManager.load(a,b)},RegistryBase.prototype.export=function(a,b,c){this.allExports[a]={content:b,options:c||{}}},RegistryBase.prototype.getExports=function(){return this.allExports},RegistryBase}();coreui.RegistryBase=RegistryBase}(coreui=ionweb.coreui||(ionweb.coreui={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b=function(){function a(a,b){this.logger=a,this.configService=b}return a.prototype.extractParameterInfo=function(a){var b=this,c={},d=this.asArray(a.element);return d.forEach(function(a){var d=a.name,e=a.type,f=b.asArray(a.annotation.appinfo);f.forEach(function(a){var b={jsonpath:[],type:""};"jsclient"===a.source&&a.jsonpath&&(b.jsonpath=JSON.parse(a.jsonpath.__text||a.jsonpath),b.type=e,c[d]=b)})}),c},a.prototype.extractDefaultValues=function(a,b,c){var d=this,e={};return"undefined"==typeof a?e:(Object.keys(b).forEach(function(f){e[f]=d.coerceType(a[f],c[b[f].type],c)}),e)},a.prototype.extractOverriddenValues=function(a,b){var c=this,d={};return a?(a.forEach(function(a){var e=a.name,f=a.Value[e],g=a.typename;d[e]=c.coerceType(f,b[g],b)}),d):d},a.prototype.coerceType=function(a,b,c){var d=this;if(null===a||"undefined"==typeof a)return a;if(Array.isArray(b)&&!Array.isArray(a))return this.coerceType([a],b,c);if("string"==typeof b){if(b in c)return this.coerceType(a,c[b],c);switch(b.toLowerCase()){case"boolean":case"number":return JSON.parse(a.__text||a);case"string":return"string"==typeof a?a:a.__text||"";default:return a.__text||a}}var e=Array.isArray(b),f=e?[]:{};return Object.keys(b).forEach(function(g){var h=d.coerceType(a[g],b[g],c);e?f.push(h):f[g]=h}),f},a.prototype.extractMapTypes=function(a){var b,c=this,d={};return a.schema.simpleType&&(b=this.asArray(a.schema.simpleType),b.forEach(function(a){return d[a.name]=a.annotation.appinfo.__text})),a.schema.complexType&&(b=this.asArray(a.schema.complexType),b.forEach(function(a){var b={};if(a.sequence){var e=c.asArray(a.sequence.element);e.forEach(function(a){return b[a.name]=a.type})}else{var f=c.asArray(a.attribute);f.forEach(function(a){return b[a.name]=a.type})}d[a.name]=b})),d},a.prototype.asArray=function(a){var b=a||[];return Array.isArray(b)||(b=[b]),b},a.prototype.mergeConfig=function(a,b){var c=this;if(a&&a.library&&a.library.configuration){var d=a.library.configuration,e=this.extractMapTypes(d),f=this.extractParameterInfo(d.schema),g=this.extractDefaultValues(d.default,f,e),h=this.extractOverriddenValues(b,e);this.configService.editConfig(function(a){Object.keys(f).forEach(function(b){try{var d=function(a,b,c,e){var f=b[0];b.length>1?(a[f]||(a[f]={}),d(a[f],b.slice(1),c,e)):a[f]&&e||(a[f]=c)},i=!(b in h),j=c.coerceType(i?g[b]:h[b],f[b].type,e);d(a,f[b].jsonpath,j,i)}catch(a){c.logger.ifLow(function(){return{key:"SkipConfigParameter",parameters:{parameterName:b,exception:a.message}}})}})})}},a}();a.ConfigHelper=b}(ionweb||(ionweb={}));var ionweb;!function(ionweb_1){var coreui;!function(coreui){var ModuleLoader=function(){function ModuleLoader(a,b,c,d,e,f,g,h){var i=this;this.ionServer=b,this.configurationService=c,this.excHelper=d,this.languageService=e,this.packManager=f,this.catalog=g,this.iconService=h,this._modules=[],this.exports={},this.moduleLoading=new ionweb_1.Event,this.moduleRegistered=new ionweb_1.Event,this.registryFactory=function(a){return new coreui.RegistryBase(a,i.configurationService,i.packManager)},this.moduleLoaded=new ionweb_1.Event,this.logger=a.create("ModuleLoader"),this.configHelper=new ionweb_1.ConfigHelper(this.logger,this.configurationService),this.ionServer.serverModuleInfoChanged.add(function(a,b){i.onServerModuleInfoChanged(b)}),this.moduleRegistered.add(function(a,b){b.registry.iconSetAdditions.length&&b.registry.iconSetAdditions.forEach(function(a){h.registerIconSet({name:a.name,fontFamily:a.fontFamily,fontFile:b.mod.basePath.concat(a.fontFile),iconKeys:a.iconKeys})})})}return ModuleLoader.prototype.createModule=function(a,b,c){var d,e=this,f=angular.module(a,ionweb_1.services.getCoreSubmodules()),g=Q.defer(),h=Q.defer(),i=ionweb_1.services.createApplModule(a);if(b.exportedServices){var j=Object.keys(b.exportedServices);if(j.length>0){var k=a+"$.sl",l=angular.module(k,ionweb_1.services.getCoreSubmodules());j.forEach(function(a){a&&"$"!==a.charAt(0)&&l.factory(a,function(){return b.exportedServices[a]})}),ionweb_1.angularExt.registerModule(k)}}var m=function(a,i){var j=function(){!c.stringResources||i||h.promise.isFulfilled()?h.promise.isFulfilled()||h.resolve(null):e.languageService.setDefaultResources(b.name,b.basePath,c.stringResources).finally(function(){h.resolve(null)}),ionweb_1.forEach(c._categories,function(a,c){ionweb_1.forEach(a.components,function(c){c._module=b,c.category=a,c.moduleName=b.displayName});var d=e.catalog.categories[c];d?d.components=d.components.concat(a.components):e.catalog.categories[c]=a}),c.defaultComponent&&e.catalog.registerDefaultComponent(b.name,c.defaultComponent);var a=c.getExports();if(a){e.exports[b.name]=a;var d={};ionweb_1.forEach(a,function(a,b){d[b]={opts:a.options}}),e.logger.low("export",{mod:b.name,objs:d})}e.moduleRegistered.raise(e,{mod:b,registry:c})},k=function(){try{var d=a(c);Q.isPromise(d)||d&&d.then?(e.logger.low("LoadModuleDeferred",{module:f.name}),d.then(function(){e.logger.low("LoadModuleDeferredEnd",{module:f.name}),j(),g.resolve(null)}).catch(function(a){e.excHelper.report(a,ionweb_1.stringFormat(coreui.Strings.Err_Ionweb_FailedTo_LoadModule,{mod:b.name,err:a.message})),g.resolve(null)})):(j(),g.resolve(null))}catch(a){return e.excHelper.report(a,ionweb_1.stringFormat(coreui.Strings.Err_Ionweb_FailedTo_LoadModule,{mod:b.name,err:a.message})),g.resolve(null),void h.resolve(null)}};d=function(){i?(e.logger.high("PreLoadModuleResources",{module:f.name}),h.promise.then(function(){k()}),e.languageService.setDefaultResources(b.name,b.basePath,i()).finally(function(){e.logger.high("PreLoadModuleResourcesEnd",{module:f.name}),h.resolve(null)})):k()}},n={name:b.name,displayName:b.displayName,version:b.version,run:function(a,b){m(a,b)},service:function(b,c,d){i.addService(a,b,c,d)},getService:function(a){return i.getService(a)},start:function(){d(),ionweb_1.angularExt.bridgeAngularServices(ionweb_1._rootDiv,i)},loaded:Q.all([g.promise,h.promise])};return ionweb_1.extend(m,[n]),m},ModuleLoader.prototype.iterateModuleLoading=function(a,b,c){var d=this;c>=b.length?a.resolve(null):this.loadModule(b[c]).then(function(){d.iterateModuleLoading(a,b,c+1)},function(e){d.excHelper.report(e),d.iterateModuleLoading(a,b,c+1)})},ModuleLoader.prototype.throwOvewriteError=function(a,b,c){var d=ionweb_1.stringFormat(coreui.Strings.Err_Ionweb_ExportingName_SourceName_PluginName,{name:a,sourceName:c,pluginName:b});throw new Error(d)},ModuleLoader.prototype.loadModule=function(mod){var _this=this;this.logger.analytics("Workspace","Module-Load",mod.name+":"+mod.version,ionweb_1.AnalyticsTraceLevel.Info,{name:mod.name,ver:mod.version});var angularModule=null,angularModuleName=null,ionwebWrapper=Object.create(ionweb),registry=this.registryFactory(mod),entryPointRegistered=!1;ionwebWrapper.module=function(a,b){if(ionweb_1.services.getCoreSubmodules().indexOf(a)>=0)return ionweb.module(a);if(b&&console.warn("Angular-style dependencies in module declaration obsolete, ignored. Use the .info file instead. Module "+a),angularModuleName){if(angularModuleName!==a)throw new Error("Only one ION.WEB module declaration is possible for a module bundle. Current: "+a+", previous: "+angularModuleName)}else angularModule=_this.createModule(a,mod,registry),angularModuleName=a;return angularModule},ionwebWrapper.getResourcePath=function(a){return mod.basePath.concat(a)};try{!function(){var ionweb=ionwebWrapper;if(mod.dependencies)for(var d=0;d<mod.dependencies.length;d++){var modexports=_this.exports[mod.dependencies[d]];if(modexports)for(var names=Object.keys(modexports),n=0;n<names.length;n++){var _export=modexports[names[n]],friends=_export.options&&_export.options.friendModules;if(!(friends&&angular.isArray(friends)&&friends.indexOf(mod.name)<0)){var parts=names[n].split(".");if(parts.length>1){eval("var "+parts[0]+" = "+parts[0]+" || {}");var target=eval(parts[0]),i;for(i=1;i<parts.length-1;i++)target=target[parts[i]]?target[parts[i]]:target[parts[i]]={};"undefined"!=typeof target[parts[i]]&&_this.throwOvewriteError(names[n],mod.name,mod.dependencies[d]),target[parts[i]]=_export.content}else{var oldTarget=eval("typeof "+parts[0]);"undefined"!==oldTarget&&_this.throwOvewriteError(names[n],mod.name,mod.dependencies[d]),eval("var "+parts[0]+"=_export.content")}}}}var body="//** This code was downloaded by SDK\n"+mod.entryPointContent+"\n\n//# sourceURL="+mod.basePath+mod.entryPointPath;eval(body)}()}catch(a){return Q.reject(a)}var ngModules=[];return angularModule&&(ionweb_1.angularExt.execConfigBlocks(angularModuleName),ngModules.push(angularModuleName),angularModule.start()),this.trackModule(mod),(angularModule&&angularModule.loaded||Q.when(null)).then(function(){ngModules.forEach(function(a){ionweb_1.angularExt.execRunBlocks(a),ionweb_1.angularExt.execInvokeQueue(a)}),registry.loadedDef.resolve(null)})},Object.defineProperty(ModuleLoader.prototype,"masterModule",{get:function(){return this._masterModule},enumerable:!0,configurable:!0}),Object.defineProperty(ModuleLoader.prototype,"inMasterError",{get:function(){return this._inMasterError},enumerable:!0,configurable:!0}),Object.defineProperty(ModuleLoader.prototype,"modules",{get:function(){return this._modules},enumerable:!0,configurable:!0}),ModuleLoader.prototype.fetchLocalModules=function(a){var b=this,c=ionweb_1.buildClientUri(ionweb.clientRoot),d=a.map(function(a){return{uri:c+"../modules/"+a+".info",name:a}});d.unshift({uri:c+"ion.web.info",name:ionweb_1.SDK_MODULE_NAME});var e=d.map(function(a){var d=b.ionServer.get(a.uri,{category:ionweb_1.rest.NO_CATEGORY}).forceXml(),e=d.send().then(function(b){var d=c+"../modules/"+a.name+"/",e=ionweb_1.fixInfoDeserialization(b.data.info);return{info:e,url:d,rootModule:ionweb_1.SDK_MODULE_NAME===a.name,overriddenParameters:[],isRemote:!0}},function(){return null});return e});return Q.all(e)},ModuleLoader.prototype.onServerModuleInfoChanged=function(a){this._serverModule?this._serverModule.version=a.version:this._serverModule=this.addModule(a.name,a.displayName,a.version,a.serverComponentName)},ModuleLoader.prototype.loadModuleEntryPoint=function(a,b,c,d,e){if(!b||!b.library||"html5"!==b.library.moduleType)return null;if(!b.library.entryPoint)return this.excHelper.report(new Error(coreui.Strings.Err_Modules_Invalid_InfoFile_Missing_EntryPoint+JSON.stringify(b))),null;var f=this.ionServer.extget(a+b.library.entryPoint,{category:ionweb_1.rest.NO_CATEGORY});return f.send().then(function(f){var g={name:b.library.name,displayName:b.library.displayName||b.library.name,version:b.library.version,entryPointContent:f.data,entryPointPath:b.library.entryPoint,basePath:a,exportedServices:{},dependencies:c,isPreload:d,isRemote:e,isMasterModule:b.library.isMasterModule,themeAdditions:b.library.themeAdditions&&b.library.themeAdditions.themeAddition};return g})},ModuleLoader.prototype.loadModules=function(a,b){var c=this,d=[];a=a.filter(function(a){return!ionweb_1.firstOrDefault(c._modules,function(b){return b.name===a.info.library.name})});var e=new ionweb_1.DependencySolver(this.logger,[]);a=e.getLoadList(a),a.forEach(function(a){var e=a.info.library.name;if(c.configHelper.mergeConfig(a.info,a.overriddenParameters),a&&!a.rootModule){var f=a.url;"/"!==f.substr(f.length-1,1)&&(f=f.concat("/")),d.push(c.loadModuleEntryPoint(f,a.info,a.dependencies.map(function(a){return a.name}),b,a.isRemote).then(function(a){return a},function(a){return c.logger.low("LoadModuleEntryPoint_Failed",{name:e,uri:f,err:a}),null}))}});var f=!b;return Q.all(d).then(function(a){a=c.filterModules(a,f);var b={modules:a};return c.moduleLoading.raise(c,b),(b.promise||Q.when(null)).then(function(){var b=Q.defer();return c.iterateModuleLoading(b,a,0),b.promise})}).then(function(){b||c.moduleLoaded.raise(c,null)})},ModuleLoader.prototype.filterModules=function(a,b){a=a.filter(function(a){return!!a});var c=a.filter(function(a){return a.isMasterModule});if(c.length>0){var d=c.map(function(a){return a.name});if(b){if(1===c.length)this._masterModule=c[0];else if(c.length>1){c.forEach(function(a){return a.isMasterModule=!1});var e=this.configurationService.config.shell,f=(e.startupModule||"").split("/")[0];d.indexOf(f)<0?(this._inMasterError=!0,this.excHelper.report(new Error(coreui.Strings.Err_Multiple_MasterModules_Loaded_No_CorrectStartup_ModuleConfiguration))):(this.logger.low("MasterSelect",{fromConfig:f}),this._masterModule=c.filter(function(a){return a.name===f})[0],this._masterModule.isMasterModule=!0)}}else this.logger.low("WARN",{DisabledMasterFlagForPreload:d}),c.forEach(function(a){return a.isMasterModule=!1})}return a},ModuleLoader.prototype.addModule=function(a,b,c,d){var e=this._modules.some(function(b){return b.name===a&&b.version===c});if(e){var f=ionweb_1.stringFormat(coreui.Strings.Err_Modules_NameVersion_AlreadyLoaded,{name:a,version:c});throw new Error(f)}var g={name:a,displayName:b||a,version:c,tooltip:d,entryPointContent:null,entryPointPath:null,basePath:null,exportedServices:{},dependencies:null,isPreload:!1,isRemote:!1,isMasterModule:!1};return this._modules.push(g),g},ModuleLoader.prototype.removeModule=function(a){if(a){for(var b=-1,c=0;c<this._modules.length;++c){var d=this._modules[c];if(d.name===a.name&&d.version===a.version){b=c;break}}b!==-1&&this._modules.splice(b,1)}},ModuleLoader.prototype.trackModule=function(a){this._modules.push(a)},ModuleLoader}();coreui.ModuleLoader=ModuleLoader,angular.module("ionwebCore").service("ionweb.moduleService",["ionweb.loggerFactory","ionweb.serverService","ionweb.configurationService","ionweb.excHelper","ionweb.languageService","ionweb.packManager","ionweb.catalogService","ionweb.iconService",ModuleLoader])}(coreui=ionweb_1.coreui||(ionweb_1.coreui={}))}(ionweb||(ionweb={})),function(a){function b(b,c){return a._moduleLoaderSl.configHelper.mergeConfig(b,c)}function c(b){return b.isRemote=!0,a._themeServiceSl.onModuleLoading([b]).then(function(){return a._moduleLoaderSl.loadModule(b)})}a.mergeConfig=b,a.loadModule=c}(ionweb||(ionweb={}));var ionweb;!function(a){angular.module("ionwebCore").controller("ionweb.welcomeController",["$scope","ionweb.configurationService",function(b,c){b.primaryLogoSrc=c.config.shell.primaryBrandingLogoUrl&&a.buildRelativeClientUri(c.config.shell.primaryBrandingLogoUrl),b.appName=c.appName,b.appVersion=c.getAppVersion(!0)}])}(ionweb||(ionweb={}));var ionweb;!function(a){function b(){return a._isAngularEnabled}function c(){var b=Q.defer();return g?b.resolve(!1):(a._asyncLoad(a._shellBundle,function(){b.resolve(!0)}),g=!0),b.promise}function d(b){a.getService("ionweb.languageService").addSdkStrings(a.coreui.Strings);var d;a._isSlave||(d=document.createElement("div"),d.setAttribute("ng-include","'core.ui/main.tpl.html'"),d.setAttribute("style","position: fixed; top: 0; bottom: 0; left: 0; right: 0; background-color: white; z-index: 9999; color: gray; padding: 50px; text-align: center"),d.innerHTML=a.coreui.Strings.Text_Splashscreen_Loading,document.body.appendChild(d));var e=a.module("ionwebCore").getService("ionweb.loggerFactory"),g=e.create("Main");g.low("***"),g.low("*** HTML5 SDK",{version:a.Version,sha:a.GitSha}),g.low("***"),g.low("Startup",{"location.absUrl()":window.location.toString()});var h=a.getService("ionweb.indexedDbService");h.isAvailable&&e.attachIndexedDbService(h).done();var i=a.module("ionwebCore").getService("ionweb.configurationService");a.module("ionwebCore").getService("ionweb.embeddingService");var j=a.module("ionwebServer").getService("ionweb.restService");i.fetchConfig(j,function(){d&&d.removeAttribute("style");var e=i.config.shell;e.ngPerfTools&&(g.low("ngPerfToolsStart"),a.perf.Manager.install());var h=function(){f=a.services.getCoreSubmodules(),f.forEach(function(b){return a.angularExt.bridgeAngularServices(a._rootDiv,b)})};e.angular||a._isSlave?(g.low("PreLoadShell",{Angular:e.angular,SlBridge:a._isSlave}),a._isAngularEnabled=e.angular,c().then(function(){a._isAngularEnabled?a.asyncRequire(["angular-bundle","ionweb-angular"],function(c,d){h(),d.bootstrap(a._rootDiv,f.concat(b||[]),{strictDi:!0})}):(h(),angular.bootstrap(a._rootDiv,f.concat(b||[]),{strictDi:!0}))}).done()):(h(),angular.bootstrap(a._rootDiv,f.concat(b||[]),{strictDi:!0}))})}function e(a){a.search("error",null),a.search("outcome",null)}a.isAngularLoaded=b,a._hasBootstrap=!0;var f,g=!1,h=null;a.bootstrap=d,a.clearIdpStatus=e,angular.module("ionwebCore").config(["$routeProvider","$controllerProvider","$compileProvider","$provide","$filterProvider","$animateProvider","$locationProvider",function(b,c,d,e,f,g,i){h=b,i.hashPrefix(""),a.angularExt.init(c,d,e,f,b),d.preAssignBindingsEnabled(!0),a._isSlave||b.when("/",{templateUrl:"core.ui/welcome.tpl.html",reloadOnSearch:!1}).otherwise({redirectTo:"/"}),g.classNameFilter(/\banimated\b/);var j=function(b){return a.getResourcePath("assets/fonts/"+b)};j.getBootstrapPath=function(b){return a.getResourcePath("lib/bootstrap/fonts/"+b)},e.value("ionweb.getIconPath",j)}]),angular.module("ionwebCore").run(["$rootScope","$location","ionweb.serverService","ionweb.notificationService","ionweb.excHelper","$injector","ionweb.configurationService","ionweb.loggerFactory","ionweb.analyticsService","ionweb.themeManager","ionweb.preferenceService","ionweb.rootComponentService","ionweb.moduleService","ionweb.applicationStatusService","ionweb.localPreferenceStore","ionweb.embeddingService","ionweb.languageService","ionweb.brandingService","ionweb.dateFormattingService","ionweb.environmentService","ionweb.localPreferenceService","ionweb.catalogService","ionweb.iconService","ionweb.restService","ionweb.splashScreenService","ionweb.contextMenuService",function(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return new i(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,y,z,x)}]);var i=function(){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=this;this.$rootScope=b,this.$location=c,this.ionServer=d,this.ionNotification=e,this.ionExcHelper=f,this.configService=h,this.loggerFactory=i,this.analyticsService=j,this.themeManager=k,this.preferences=l,this.rootComponentService=m,this.moduleService=n,this.applicationStatusService=o,this.localStore=p,this.embeddingService=q,this.languageService=r,this.brandingService=s,this.environmentService=u,this.localPrefService=v,this.catalog=w,this.restService=x,this.splashScreenService=y,a.angularExt.initInjector(g),a._moduleLoaderSl=n,a._themeServiceSl=k,a._isSlave||(i.attachAnalyticsService(j),j.attachServerService(d)),this.logger=i.create("CoreLoader"),a._isSlave?(a.catalog=this.catalog,this.environmentService.updateOffline(this.ionNotification.isOffline),this.ionNotification.isOfflineChanged.add(function(){return A.environmentService.updateOffline(A.ionNotification.isOffline)}),r.init(x).then(function(a){s.init(),A.splashScreenService.hideSplashscreen(""),A.loadShell()})):(y.showSplashscreen("checkingAuthenticationAtStartup"),d.statusChanged.add(function(a,b){A.onStatusChanged(b)}),m.routeSave(),p.globalStoreLoaded.then(function(){A.start().done()}))}return b.prototype.start=function(){var b=this,c=this.configService.config.shell,d=this.configService.appName;if(c.childTitle&&(d=c.childTitle+" - "+d),document.title=d,this.environmentService.isMobileDevice()){var e=document.createElement("meta");e.setAttribute("name","apple-mobile-web-app-capable"),e.setAttribute("content","yes"),document.head.appendChild(e)}return this.themeManager.start().catch(function(a){b.splashScreenService.hideSplashscreen("checkingAuthenticationAtStartup")}),this.configService.config.shell.enableAnimations===!1&&document.body.classList.add("ionweb-noanimation-mode"),this.languageService.init(this.restService).then(function(){b.brandingService.init();var c=b.configService.config.shell;b.ionNotification.status(b.ionServer.serviceStatusName,a.ServiceStatus.Disconnected,null,b.ionServer.serviceModuleDisplayName),c.preloadModules&&c.preloadModules.length>0?b.moduleService.fetchLocalModules(c.preloadModules).then(function(a){a=a.filter(function(a){var c=a.info.library.name,d=(b.configService.config.shell.localModules||[]).indexOf(c)>=0;return d&&b.logger.low("SkipMod",{name:c,reason:"loaded locally"}),!d});try{b.moduleService.loadModules(a,!0).catch(function(a){b.ionExcHelper.report(a)}).then(function(){b.authenticate()})}catch(a){b.ionExcHelper.report(a),b.authenticate()}},function(a){b.ionExcHelper.report(a),b.authenticate()}):b.authenticate()})},b.prototype.loadShell=function(){c().then(function(b){if(b){var c=a.services.getCoreSubmodules().filter(function(a){return f.indexOf(a)<0});c.forEach(function(b){return a.angularExt.bridgeAngularServices(a._rootDiv,b)}),a.angularExt.registerModule(c)}}).done()},b.prototype.onStatusChanged=function(a){var b=this;if(!this.ionServer.loggedOut){var c=this.ionServer.isLoggedIn();c&&a&&(this.localStore.triggerLoggedIn(a.credentials.username),this.splashScreenService.hideSplashscreen("checkingAuthenticationAtStartup")),this.$rootScope.$evalAsync(function(){c&&b.loadShell()})}},b.prototype.goToLoginPage=function(){var b=this;this.$rootScope.$evalAsync(function(){var c=b.embeddingService,d=b.configService.config.shell.externalAuthentication||c.isAvailable&&!b.configService.config.shell.disableEmbeddedAuthentication&&c.envType!==a.EmbeddedEnvironmentType.ParentFrame&&c.envType!==a.EmbeddedEnvironmentType.ChildWindow&&c.envType!==a.EmbeddedEnvironmentType.MobileApp;d?b.rootComponentService.showContent("login.ui/emblogin.tpl.html"):b.rootComponentService.showContent("login.ui/login.tpl.html")})},b.prototype.readUrlArgs=function(a,b){var c=this.configService.arguments[a];"string"==typeof c&&this.localPrefService.setValue(b,c)},b.prototype.authenticate=function(){var b=this;this.readUrlArgs("idp",a.server.IDP_FILTER_PREF_KEY),this.readUrlArgs("clientId",a.server.CLIENT_ID_PREF_KEY),this.environmentService.initLoginInfo(),this.configService.config.shell.externalAuthentication?this.ionServer.getStatus(!1).then(function(c){if(c.isAuthenticated){var d=5e3;return b.embeddingService.queryCredentials().then(function(a){if(a&&a.username&&a.password){if(!c.credentials||c.credentials.username!==a.username)return b.ionServer.logout("Force logout in embedded page if another user was logged in"),!1}else b.ionExcHelper.report({message:"Credentials not retrieved in embedded mode",name:"Error in credentials"});return!0},function(a){return b.ionExcHelper.report(a),!0}).timeout(d,a.coreui.Strings.Err_Autologin_Configuration_Error_Timeout_Expired).catch(function(a){return b.ionExcHelper.report(a),!0})}return!0}).catch(function(a){return!0}).then(function(a){a&&b.goToLoginPage()}):(this.logger.low("AuthCheckStart",{extAuth:!1}),this.ionServer.getStatus(!0).then(function(a){b.logger.low("AuthCheckResponse",{extAuth:!1,authenticated:a.isAuthenticated}),a.isAuthenticated?(b.logger.analytics("Session","Login","Cookie"),e(b.$location),b.onStatusChanged(a)):b.goToLoginPage()},function(){b.goToLoginPage()})),a.angularExt.registerPendingModules()},b}()}(ionweb||(ionweb={}));var ionweb;!function(a){angular.module("ionwebCore").directive("ionwebDynamic",["$compile",function(a){return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.ionwebDynamic,function(d){c[0].innerHTML=d,a(c.contents())(b)})}}}])}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(a,c,d,e,f){m=a,n=c,o=d,p=e,b.routeProvider=f}function d(){return{$provide:o,$filterProvider:p,$routeProvider:b.routeProvider,$controllerProvider:m,$compileProvider:n}}function e(a){for(var c=angular.module(a)._invokeQueue,e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1],i=f[2][0],j=f[2][1];d()[g][h](i,j),"$controllerProvider"===g&&"register"===h&&(b.controllers[i]=j)}}function f(a){for(var c=angular.module(a)._configBlocks,e=0;e<c.length;e++){for(var f=c[e],g=b.injector.get(f[0]),h=[],i=0;i<f[2].length;i++)h.push(f[2][i]);h.push(void 0),h.push(d()),g[f[1]].apply(g,h)}}function g(a){for(var c=angular.module(a)._runBlocks,d=0;d<c.length;d++)b.injector.invoke(c[d])}function h(a){Array.isArray(a)||(a=[a]),a.sort(function(a,b){var c=angular.module(a).requires,d=angular.module(a).requires;return c.indexOf(b)>=0?-1:d.indexOf(a)>=0?1:0}),a.forEach(function(a){return e(a)}),a.forEach(function(a){return f(a)}),a.forEach(function(a){return g(a)})}function i(){q.forEach(function(a){h(a)}),q=[]}function j(a){b.injector=a}function k(a){null!==b.injector?h(a):q=q.concat(Array.isArray(a)?a:[a])}function l(b,c){"string"==typeof c&&(c=a.services.findModule(c)),c&&c.upgradeModule(function(a,b,d,e){var f=d.slice();f.push(e),angular.module(c.name).service(b,f)},function(a){var c=angular.element(b).injector();return c?c.get(a):null})}b.controllers={};var m,n,o,p,q=[];b.init=c,b.execInvokeQueue=e,b.execConfigBlocks=f,b.execRunBlocks=g,b.registerPendingModules=i,b.initInjector=j,b.registerModule=k,b.bridgeAngularServices=l}(b=a.angularExt||(a.angularExt={}))}(ionweb||(ionweb={})),angular.module("ionwebCore").run(["$templateCache",function(a){"use strict";a.put("core.ui/fatalErrorContent.tpl.html",'<div class="modal-header dialog-header-danger" id=fatalErrorContainer><h4 class=modal-title>{{fatalErrorTitle}}</h4></div><div class=modal-body><p>{{fatalError}}</p></div><div class=modal-footer><button type=button class="btn btn-primary" ng-click=reload()>{{"Fatal_Btn_Reload" | resource}}</button></div>'),a.put("core.ui/localization/localization.tpl.html",'<div ng-show="!config || !config.hideLanguagePreference"><label class=ion-primary-label-to-control-bottom-margin>{{"Text_Language" | resource}}</label><div class=ion-input-select><select class="ion-input ion-unrelated-control-bottom-margin" ng-model=languageName ng-options="l.key as l.displayName for (key, l) in languages"></select></div><div class=preference-dialog-language-warning-container ng-if=validationMessage><span class="ionicon ionicon-warning preference-dialog-language-warning-icon"></span><label>{{validationMessage}}</label></div></div>'),a.put("core.ui/main.tpl.html",'<div ng-controller=ionweb.topLevelController><div class=top-level-container ng-if="topLevels.length > 0"><div ionweb-top-level=topLevel ng-repeat="topLevel in topLevels" class=top-level ng-mousedown=onMouseDown(topLevel) ng-class="{\'modal-dialog-xs\': !topLevel.scope.disableFullScreenMode && topLevel.scope.xsScreenSize}"></div></div></div><div ng-include=contentUrl></div><div ng-if=!!globalState.showSplashscreen style="position: fixed; top: 0; bottom: 0; left: 0; right: 0; background-color: white; z-index: 9999; color: gray; padding: 50px; text-align: center">{{\'Text_Splashscreen_Loading\' | resource}}</div>'),a.put("core.ui/notificationDlg.tpl.html",'<div class="modal-header dialog-header-{{type}}"><h4 class=modal-title>{{title}}</h4><button type=button class="close ionicon ionicon-close" ng-click="close(); $event.stopPropagation()"></button></div><div class=modal-body><span class=text-muted style=float:right>{{timestamp | iondate }}</span><p class=selectableText>{{message}}</p><p class=selectableText>{{secondary}}</p><div><hr><div uib-collapse=!isCollapsed><div class="well well-lg selectableText" style="height:150px; overflow:auto">{{details}}</div></div><div style=text-align:center ng-show=!!details><button class="btn btn-default" ng-click="isCollapsed = !isCollapsed; $event.stopPropagation()" style="align-self: center">{{isCollapsed ? ("Dialog_Btn_HideDetails" | resource) : ("Dialog_Btn_ShowDetails" | resource)}}</button></div></div></div>'),a.put("core.ui/welcome.tpl.html",'<div ng-controller=ionweb.welcomeController class="col-xs-6 col-xs-offset-3"><div><img ng-src={{primaryLogoSrc}} ng-if=primaryLogoSrc style="width: 64px; height: 64px; float: left"><div ion-svg-logo-about class=animated-logo ng-if=!primaryLogoSrc style="width: 64px; height: 64px; float: left"></div><div style="margin-left: 84px"><h2 class=component-title>{{appName}}</h2><p>Version {{appVersion}}</p></div></div></div>'),a.put("assets/images/ionBrandLogo.tpl.svg",'<svg xmlns=http://www.w3.org/2000/svg style="width: 43px; height: 24px" viewbox="19.0 28.2 68.0 38.0"><circle r=3 class=logo-nucleus cx=27.7 cy=44.7></circle><circle r=3 class=logo-proton cx=27.7 cy=53.7></circle><circle r=3 class=logo-electron cx=27.7 cy=50.7></circle><circle r=3 class=logo-nucleus cx=27.7 cy=56.7></circle><circle r=6 class=logo-nucleus-hollow cx=44.7 cy=50.4 stroke-width=6></circle><circle r=3 class=logo-nucleus cx=61.8 cy=44.7></circle><circle r=3 class=logo-nucleus cx=64.3 cy=47.2></circle><circle r=3 class=logo-electron cx=61.8 cy=50.7></circle><circle r=3 class=logo-electron cx=61.8 cy=53.7></circle><circle r=3 class=logo-electron cx=61.8 cy=56.7></circle><circle r=3 class=logo-electron cx=73.8 cy=47.7></circle><circle r=3 class=logo-electron cx=73.8 cy=52.7></circle><circle r=3 class=logo-nucleus cx=73.8 cy=44.7></circle><circle r=3 class=logo-nucleus cx=73.8 cy=50.7></circle><circle r=3 class=logo-nucleus cx=71.8 cy=53.7></circle><circle r=3 class=logo-proton cx=73.8 cy=56.7></circle><circle r=3 class=logo-proton cx=67.8 cy=50.7></circle><circle r=3 class=logo-electron cx=83.9 cy=38.5></circle><circle r=3 class=logo-proton cx=22.6 cy=31.2></circle><circle r=3 class=logo-nucleus cx=56.3 cy=62.8></circle></svg>')}]);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ionweb;!function(a){a.Version="1.1.8-p1d8-r15018",a.Copyright="© Copyright 2018, ION.",a.GitSha="50b0bb1ece4773cd76bcd2a243f03fa86727291f"}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){}return a.Err_Autologin_Authentication_Error="Authentication error",a.Err_Autologin_Generic_Error="Generic error",a.Err_Autologin_Configuration_Error_Credentials_Format="Configuration error - credentials format is wrong",a.Err_OTPRequired="OTP Required",a.Err_Fetching_Disclaimer="Error fetching disclaimer: ",a.Text_Old_Password="Old password",a.Text_New_Password="New password",a.Text_Repeat_New_Password="Confirm new password",a.Text_Username="Username",a.Text_Password="Password",a.Text_OTP="OTP",a.Text_Login_ClientId="Client ID",a.Text_Version="Version:",a.Text_SignIn_Action="Sign In",a.Text_LOGIN="Login",a.Err_NewPasswordMatchesOld="Password must differ from old password",a.Err_PasswordNotMatched="Passwords do not match",a.Text_PasswordChangeSuccess="Password is updated successfully.",a.Warn_CapsLockOn="Caps Lock is on",a.Text_SigningIn="Signing In",a.Text_login_clientIdPage="Client ID",a.Text_Login_ClientId_Next="Next",a.Err_LocalStorage_NotEnabled_PleaseEnable_And_ReloadBrowser="Local storage not enabled. You need to enable local storage in your Web browser. Once you have enabled it, please reload the page.",a.Err_Cookies_NotEnabled_PleaseEnable_And_ReloadBrowser="Cookies not enabled. You need to enable cookies in your Web browser. Once you have enabled cookies, please reload the page.",a.Title_Password_Change_Required="Password change required",a.Login_Btn_ChangePassword="Change",a.Login_Btn_Submit="Submit",a.Err_Idp_TypeNot_Supported="Idp type not supported: ",a.Err_Idp_IDP_NotAvailable="IDP not available",a.Err_Idp_Missing_Saml_Metadata='Invalid SAML 2.0 metadata, missing required fields "${id}".',a.Err_Kerberos_Unauth="Cannot authenticate with Kerberos, please check browser settings.",
a}();a.Strings=b}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={})),ionweb.services.registerCoreSubmodule("ionwebAuth",["ionwebCore"],ionweb.auth.Strings);var ionweb;!function(a){var b;!function(b){var c=1e4,d=function(){function d(d,e,f,g,h,i,j){var k=this;this.$scope=d,this.ionServer=e,this.exceptionHelper=f,this.loggerFactory=g,this.embeddingService=h,this.localPreferenceStore=i,this.environmentService=j,this.logger=g.create("EmbeddedLoginController"),this.ionServer.statusChanged.add(function(a,b){b&&b.isAuthenticated&&k.setError(null,null)}),this.environmentService.isCookieDisabled()?this.setError(null,b.Strings.Err_Cookies_NotEnabled_PleaseEnable_And_ReloadBrowser):this.localPreferenceStore.isAvailable?this.embeddingService.queryCredentials().then(function(a){return a&&a.username&&a.password?k.doLogin(a):void k.setError(null,b.Strings.Err_Autologin_Configuration_Error_Credentials_Format)}).timeout(c,a.coreui.Strings.Err_Autologin_Configuration_Error_Timeout_Expired).catch(function(a){k.setError(b.Strings.Err_Autologin_Authentication_Error,a&&a.message||a,a)}).done():this.setError(null,b.Strings.Err_LocalStorage_NotEnabled_PleaseEnable_And_ReloadBrowser)}return d.prototype.setError=function(a,b,c){var d=this;c&&this.exceptionHelper.log(c),this.$scope.$evalAsync(function(){d.$scope.errorTitle=a,d.$scope.error=b})},d.prototype.doLogin=function(c){var d=this,e=new a.LocalCredentials(c.username,c.password,a.PasswordEncryptionMode.None);return this.ionServer.sendLogin(e,!1,!0).then(function(a){if(a.isAuthenticated)return d.logger.analytics("Session","Login","ION.NET",null,{user:c.username}),d.embeddingService.raiseLoggedIn();throw new Error(d.ionServer.mapError(a.error,!1)||b.Strings.Err_Autologin_Generic_Error)},function(a){var c=a.loginStatus&&a.loginStatus.error&&d.ionServer.mapError(a.loginStatus.error,!1);d.setError(b.Strings.Err_Autologin_Authentication_Error,c||a.message,a)})},d}();angular.module("ionwebAuth").controller("ionweb.embeddedLoginController",["$scope","ionweb.serverService","ionweb.excHelper","ionweb.loggerFactory","ionweb.embeddingService","ionweb.localPreferenceStore","ionweb.environmentService",function(a,b,c,e,f,g,h){return new d(a,b,c,e,f,g,h)}])}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(c,d,e,f){var g=this;this.$scope=c,this._serverService=d,this.notificationService=e,c.oldPassword=c.newPassword=c.newPassword2="",c.errors=[],c.pwdValidationMsgs={oldPwd:{},newPwd:{},confirmPwd:{},otp:{},others:{}},this.showOtpTextbox=this.$scope.shouldOTPVisible,this.allowEmptyOtp=this.$scope.allowEmptyOtp,c.submit=function(){if(g.$scope.validate("oldPwd")&&g.$scope.validate("newPwd")&&g.$scope.validate("confirmPwd"))if(c.cleanValidation("others"),g.showOtpTextbox&&!g.allowEmptyOtp&&g.$scope.validate("otp"),c.disableBtns=!0,g._serverService.isLoggedIn())g.sendChangePasswordRequest();else{var a={oldPassword:c.oldPassword,newPassword:c.newPassword};g.login(a)}},c.validate=function(d){var e=!0;return c.oldPassword&&c.newPassword&&c.newPassword2||(e=!1),"newPwd"===d?c.oldPassword&&c.newPassword&&c.oldPassword===c.newPassword&&(c.pwdValidationMsgs.newPwd.state=a.validation.ValidationState.Error,c.pwdValidationMsgs.newPwd.message=b.Strings.Err_NewPasswordMatchesOld,c.errors.push({message:b.Strings.Err_NewPasswordMatchesOld,validationState:a.validation.ValidationState.Error,key:"newPwd"}),e=!1):"confirmPwd"===d?c.newPassword&&c.newPassword2&&c.newPassword!==c.newPassword2&&(c.pwdValidationMsgs.confirmPwd.state=a.validation.ValidationState.Error,c.pwdValidationMsgs.confirmPwd.message=b.Strings.Err_PasswordNotMatched,c.errors.push({message:b.Strings.Err_PasswordNotMatched,validationState:a.validation.ValidationState.Error,key:"confirmPwd"}),e=!1):"otp"===d&&(g.otp||(c.pwdValidationMsgs.otp.state=a.validation.ValidationState.Error,c.pwdValidationMsgs.otp.message=b.Strings.Err_OTPRequired,e=!1)),g.mapValidationErrors(),e},c.cleanValidation=function(d){"oldPwd"===d?(c.pwdValidationMsgs[d]={},c.pwdValidationMsgs.newPwd.state===a.validation.ValidationState.Error&&c.pwdValidationMsgs.newPwd.message===b.Strings.Err_NewPasswordMatchesOld&&(c.pwdValidationMsgs.newPwd={})):"newPwd"===d?((c.newPassword||c.oldPassword!==c.newPassword)&&(c.pwdValidationMsgs[d]={}),c.pwdValidationMsgs.confirmPwd.state===a.validation.ValidationState.Error&&c.pwdValidationMsgs.confirmPwd.message===b.Strings.Err_PasswordNotMatched&&c.newPassword===c.newPassword2&&(c.pwdValidationMsgs.confirmPwd={})):"confirmPwd"===d?(c.newPassword2||c.newPassword===c.newPassword2)&&(c.pwdValidationMsgs[d]={}):"otp"===d?c.pwdValidationMsgs[d]={}:"others"===d&&(c.pwdValidationMsgs[d]={}),g.mapValidationErrors()},c.validateAll=function(){g.$scope.validate("oldPwd"),g.$scope.validate("newPwd"),g.$scope.validate("confirmPwd")},c.enableSubmitBtn=function(){var b=!0;return c.oldPassword&&c.newPassword&&c.newPassword2&&(!g.showOtpTextbox||g.allowEmptyOtp||g.otp)||(b=!1),c.pwdValidationMsgs.oldPwd.state!==a.validation.ValidationState.Error&&c.pwdValidationMsgs.newPwd.state!==a.validation.ValidationState.Error&&c.pwdValidationMsgs.confirmPwd.state!==a.validation.ValidationState.Error||(b=!1),b},c.$watch("isCapsLockOn",function(a,d){a!==d&&(c.capsLockMessage=a?b.Strings.Warn_CapsLockOn:"")}),c.closeDialog=function(){c.cancel()}}return c.prototype.mapValidationErrors=function(){this.$scope.errors=[];for(var a in this.$scope.pwdValidationMsgs)void 0!==this.$scope.pwdValidationMsgs[a].state&&this.$scope.errors.push({message:this.$scope.pwdValidationMsgs[a].message,key:a,validationState:this.$scope.pwdValidationMsgs[a].state})},c.prototype.login=function(b){var c=this;this._serverService.sendLogin(new a.LocalCredentials(this.$scope.bususername,b.oldPassword,a.PasswordEncryptionMode.None,this.otp,b.newPassword),!0).then(function(){c.$scope.complete()}).catch(function(a){c.$scope.$evalAsync(function(){c.handleError(a.loginStatus.error,a.message)})})},c.prototype.handleResponse=function(a){var c=this,d=a.data;b.ExecutionOutcome[d.Outcome]==b.ExecutionOutcome.SUCCESS?(this.$scope.complete(),this.notificationService.showInfo(b.Strings.Text_PasswordChangeSuccess)):this.$scope.$evalAsync(function(){c.handleError(d.ErrorType,d.CustomErrMsg)})},c.prototype.handleError=function(b,c){this.$scope.hasError=!0,this.$scope.disableBtns=!1;var d="others";b===a.PlatformError[a.PlatformError.IonDaemonBadCredentials]?d="oldPwd":a.PlatformError[b]>=a.PlatformError.PasswordTooLong&&a.PlatformError[b]<=a.PlatformError.IonDaemonPasswordPolicyCustomError?d="newPwd":a.PlatformError[b]===a.PlatformError.IonDaemonOtpRequired?(d="others",this.showOtpTextbox=!0):a.PlatformError[b]===a.PlatformError.IonDaemonWrongOtp&&(d="otp"),this.$scope.pwdValidationMsgs[d].state=a.validation.ValidationState.Error,this.$scope.pwdValidationMsgs[d].message=this._serverService.mapError(c||b,!0),this.mapValidationErrors()},c.prototype.sendChangePasswordRequest=function(){var b=this;this.$scope.hasError=!1;var c=a.server.EncryptionHelper.encryptPassword(this.$scope.oldPassword),d=a.server.EncryptionHelper.encryptPassword(this.$scope.newPassword),e={encryptionMode:1,oldPassword:c,newPassword:d,otp:void 0};this.otp&&(e.otp=this.otp),this._serverService.post("r/user/changePassword",{category:a.rest.SESSION_CATEGORY}).data(JSON.stringify(e),"application/json").forceJson().send().then(function(a){return b.handleResponse(a)})},c}();angular.module("ionwebAuth").controller("ionweb.changePasswordController",["$scope","ionweb.serverService","ionweb.notificationService","ionweb.configurationService",function(a,b,d,e){return new c(a,b,d,e)}])}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){function c(c){return c.get("r/disclaimer/text",{direct:!0,category:a.rest.SESSION_CATEGORY}).send().then(function(a){var c=a.data,d=c.TextDisclaimerResponse;if(b.ExecutionOutcome[d.Outcome]==b.ExecutionOutcome.SUCCESS)return d.TextDisclaimer?{enabled:!(!d.TextDisclaimer.Title||!d.TextDisclaimer.Content),title:d.TextDisclaimer.Title,content:d.TextDisclaimer.Content}:{enabled:!1,title:void 0,content:void 0};throw new Error(b.Strings.Err_Fetching_Disclaimer+JSON.stringify(d))})}b.fetchDisclaimer=c}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c;!function(a){a[a.SUCCESS=0]="SUCCESS",a[a.FAILURE=1]="FAILURE"}(c=b.ExecutionOutcome||(b.ExecutionOutcome={}));var d=function(){function c(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$scope=c,this.serverService=g,this.idpService=n,this.logger=o.create("LoginController"),c.isMobileDevice=p.isMobileDevice(),this.initialViewportWidth=d.window.innerWidth,this.initialViewportHeight=d.window.innerHeight,c.isPortraitOrientation=c.isMobileDevice&&this.initialViewportHeight>=this.initialViewportWidth,d.window.addEventListener("resize",function(){c.$evalAsync(function(){window.innerWidth!=s.initialViewportWidth&&c.isMobileDevice?c.isPortraitOrientation=window.innerWidth<=s.initialViewportWidth:c.isPortraitOrientation=c.isMobileDevice&&s.initialViewportHeight>=s.initialViewportWidth,s.load(!1)})}),this.allowEmptyOtp=!1,this.shouldOTPVisible=!1,c.doClick=function(a){e(function(){var b=$(a);1!==b.length||b.attr("disabled")||b.triggerHandler("click")},0,!1)},c.moveFocus=function(a){var b=$(a);1===b.length&&b.focus()},c.$watch("isCapsLockOn",function(a,d){a!==d&&(c.capsLockMessage=a?b.Strings.Warn_CapsLockOn:"")}),c.$watch("currentPageClientId",function(a){a===!1&&(s.shouldOTPVisible=t(j.config.shell.enableOtpAuthentication),s.allowEmptyOtp=u(j.config.shell.allowEmptyOtp))});var t=function(a){return Array.isArray(a)?s.$scope.useClientId&&s.$scope.clientId&&a.indexOf(s.$scope.clientId)>=0:!!a},u=function(a){return Array.isArray(a)?s.$scope.useClientId&&s.$scope.clientId&&a.indexOf(s.$scope.clientId)>=0:!!a},v=function(){var b=j.config.shell;c.primaryLogoSrc=b.primaryBrandingLogoUrl&&a.buildRelativeClientUri(b.primaryBrandingLogoUrl),c.secondaryLogoSrc=b.secondaryBrandingLogoUrl&&a.buildRelativeClientUri(b.secondaryBrandingLogoUrl),c.customControlTemplateUrl=k.customLoginControlTemplateUrl,c.customControlTemplate=b.customLoginControlTemplate,c.linkLabel=b.loginDialogLinkLabel||"iongroup.com",c.linkURL=b.loginDialogLinkURL||"https://iongroup.com",c.privacyLabel=b.privacyLinkLabel||a.coreui.Strings.Text_Privacy,c.privacyURL=b.privacyURL||"https://iongroup.com/privacy-statement/",c.brandingLogo=!b.primaryBrandingLogoUrl,c.noAnimations="still"===b.ionAnimatedLogo,s.shouldOTPVisible=t(b.enableOtpAuthentication),s.allowEmptyOtp=u(b.allowEmptyOtp),s.$scope.useClientId=!!r.config};c.hasError=!1,c.performingLogin=!1,c.appName=j.appName,c.appVersion=j.getAppVersion(!0),v();var w=j.changed.add(function(){v()});c.$watchGroup(["brandingLogo","noAnimations"],function(b,d){if(c.brandingLogo&&!s.ionLogo){var e=$(".login-animated-logo")[0].getElementsByTagName("svg")[0];p.has("ie")>=10||p.has("trident")>4||p.has("edge")>=12?s.ionLogo=a.logo.createSvgLogo(e,c.noAnimations):s.ionLogo=a.logo.createSvgLogoCss(e,c.noAnimations)}}),this._ionNotification=i,this.$location=h;var x=function(){c.username=q.getValue(a.server.USERNAME_PREF_KEY,""),c.clientId=q.getValue(a.server.CLIENT_ID_PREF_KEY),r.config&&(j.config.shell.forcedClientId?(c.clientId=j.config.shell.forcedClientId,c.hideClientId=!0):c.clientId||(c.clientId=r.config.defaultClientId),c.clientId=c.clientId||"")};q.isLoaded?x():q.loaded.add(function(){return c.$evalAsync(function(){return x()})}),c.privacyLinkHidden=function(){return j.config.shell.hidePrivacyLink},c.submit=function(){c.performingLogin=!0,c.hasError=null;var d=c.clientId,e=r.toBusUsername(c.username,d);return g.sendLogin(new a.LocalCredentials(e,c.password,a.PasswordEncryptionMode.None,s.otp),!0).then(function(){return s.logger.analytics("Session","Login","LoginDialog"),q.setValue(a.server.USERNAME_PREF_KEY,c.username),r.config&&q.setValue(a.server.CLIENT_ID_PREF_KEY,d),!0}).catch(function(d){return c.$evalAsync(function(){if(c.performingLogin=!1,d.changePassword){s.logger.low("LoggedInFailChangePwd");var f=c.$new(!0);f.bususername=e,f.shouldOTPVisible=t(j.config.shell.enableOtpAuthentication),f.allowEmptyOtp=u(j.config.shell.allowEmptyOtp);var h={canClose:!1,templateUrl:"login.ui/changePwd.tpl.html",size:a.DialogSize.Small,scope:f,severity:a.DialogSeverity.Warning,title:b.Strings.Title_Password_Change_Required};l.show(h)}else d.loginStatus&&d.loginStatus.error===a.PlatformError[a.PlatformError.IonDaemonOtpRequired]&&(s.shouldOTPVisible=!0),s.logger.low("LoggedInFail",{error:d.message}),c.loginError=d.message&&g.mapError(d.message)||a.server.Strings.Msg_Cannot_Connect_To_IONWEBServer,c.hasError=!0}),!1})},f.isAvailable||(c.loginError=b.Strings.Err_LocalStorage_NotEnabled_PleaseEnable_And_ReloadBrowser,c.hasError=!0,c.localStorageDisabled=!0),c.invalid=function(){return c.performingLogin||!c.username||!c.password||s.shouldOTPVisible&&!s.allowEmptyOtp&&!s.otp||s.$scope.useClientId&&!s.$scope.clientId||p.isCookieDisabled()||c.localStorageDisabled},p.isCookieDisabled()&&(c.loginError=b.Strings.Err_Cookies_NotEnabled_PleaseEnable_And_ReloadBrowser,c.hasError=!0),c.acceptDisclaimer=function(){c.disclaimer=null},c.fetchingDisclaimer=!0,c.disclaimer=null,b.fetchDisclaimer(this.serverService).then(function(a){c.$evalAsync(function(){c.fetchingDisclaimer=!1,c.disclaimer=a})},function(a){m.log(a),c.$evalAsync(function(){c.fetchingDisclaimer=!1,c.disclaimer=void 0})}),c.allowClassicLogin=n.allowClassicLogin,c.idpOpts={onLoginInProgress:function(a){c.idpLoginInProgress=a,a||(c.hasError=!1)},disabled:function(){return c.localStorageDisabled||c.idpLoginInProgress||c.performingLogin},onInit:function(){s.load(!0)}},this.idpService.changed.add(function(){c.$evalAsync(function(){c.allowClassicLogin=n.allowClassicLogin})}),h.search().error&&(c.hasError=!0,c.loginError=h.search().error,this.disableAutoLogin=!0,a.clearIdpStatus(h)),c.$on("$destroy",function(){w(),s.ionLogo&&s.ionLogo.dispose()})}return c.prototype.load=function(a){this.$scope.isMobileDevice&&$(".login-container").css("height",$(window).height()),a&&!this.disableAutoLogin&&this.$scope.idpOpts.tryAutoLogin&&this.$scope.idpOpts.tryAutoLogin()},c}();angular.module("ionwebAuth").controller("ionweb.loginController",["$scope","$window","$timeout","ionweb.localPreferenceStore","ionweb.serverService","$location","ionweb.notificationService","ionweb.configurationService","ionweb.embeddingService","ionweb.dialogService","ionweb.excHelper","ionweb.idpService","ionweb.loggerFactory","ionweb.environmentService","ionweb.localPreferenceService","ionweb.multitenancyService",d]),angular.module("ionwebAuth").directive("ionEnterdown",["$parse",function(b){return{compile:function(c,d){var e=b(d.ionEnterdown);return function(b,c){c.on("keydown",function(c){c.keyCode===a.KeyCodes.ENTER&&b.$apply(function(){e(b)})})}},restrict:"A"}}])}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(a){var b=function(){function a(){this.restrict="A",this.require="ionwebValidation",this.scope={isCapsLockOn:"="},this.transclude=!0,this.controller="ionweb.capsLockValidationController",this.controllerAs="ctrl"}return a}(),c=function(){function a(a,b,c){var d=this;this.$scope=a,this.$element=b,this.capsLockState=!1,this.isFocused=!1,this.onKeyDown=function(a){var b=a.keyCode;20===b&&(d.capsLockState=a.getModifierState("CapsLock"),d.isFocused&&d.setCapsLockOn(d.capsLockState))},this.onKeyPress=function(a){var b=a.charCode||a.keyCode,c=a.shiftKey;d.IS_MAC?b>96&&b<123?d.setCapsLockOn(!1):b>64&&b<91&&!c&&d.setCapsLockOn(!0):b>96&&b<123?d.setCapsLockOn(c):b>64&&b<91&&d.setCapsLockOn(!c)},this.setCapsLockOn=function(a){d.IS_Mobile||d.$scope.$evalAsync(function(){d.$scope.isCapsLockOn=a})},this.IS_MAC=c.has("mac"),this.IS_Mobile=c.isMobileDevice(),document.msCapsLockWarningOff=!0,b.on("keypress",this.onKeyPress),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyDown,!1),b.on("focus",function(a){d.isFocused=!0,d.setCapsLockOn(d.capsLockState)}),b.on("blur",function(a){d.isFocused=!1}),b.on("$destroy",function(){document.removeEventListener("keydown",d.onKeyDown,!1),document.removeEventListener("keyup",d.onKeyDown,!1),b.off("keypress focus blur")})}return a.$inject=["$scope","$element","ionweb.environmentService"],a}();angular.module("ionwebAuth").controller("ionweb.capsLockValidationController",c).directive("capsLockValidation",[function(){return new b}])}(b=a.login||(a.login={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e,f){var g=this;this.$scope=c,this.ionServer=d,this.idpService=e,this.$timeout=f,this.logger=b.create("IdpButtonsController"),this.populateIdp(),e.changed.add(function(){c.$evalAsync(function(){g.populateIdp()})}),this.$scope.opts.tryAutoLogin=function(){if(!g.$scope.opts.isReconnecting){var b=a.firstOrDefault(g.$scope.idps,function(a){return a.canAutologin&&a.enabled});b?b.login():1===g.$scope.idps.length&&!g.idpService.allowClassicLogin&&g.$scope.idps[0].enabled&&g.$scope.idps[0].login()}},this.$scope.opts.onInit&&this.$scope.opts.onInit()}return b.prototype.populateIdp=function(){var b=this,c=this.idpService.providers,d=this.idpService.allowClassicLogin;this.$scope.idpError="",this.$scope.idps=[];var e=this.idpService.wasLoggedInIdp,f=[a.server.IDP_TYPE_KERBEROS,a.server.IDP_TYPE_SAML2,a.server.IDP_TYPE_WSFED];c&&c.length>0&&(this.$scope.idps=c.filter(function(a){var b="string"!=typeof e||a.uniqueName===e;return b&&f.indexOf(a.type)>=0}).map(function(a){return{name:"Sign In with "+a.displayName,enabled:!0,canAutologin:a.canAutologin,login:function(){b.$scope.idpError="",b.onLoginInProgress(!0),b.idpService.doLogin(a,b.$scope.opts&&b.$scope.opts.isReconnecting).then(function(c){b.$scope.$evalAsync(function(){c.outcome?b.onLoginSuccess(a):(b.onLoginInProgress(!1),b.$scope.idpError="Error: "+c.error)})}).timeout(2e3).catch(function(){b.$scope.$evalAsync(function(){b.onLoginInProgress(!1)})})}}})),0!==this.$scope.idps.length||d&&!e||(this.$scope.idps=[{name:"Sign In externally",enabled:!1}],this.$scope.idpError=a.auth.Strings.Err_Idp_IDP_NotAvailable)},b.prototype.onLoginInProgress=function(a){this.$scope.opts&&this.$scope.opts.onLoginInProgress&&this.$scope.opts.onLoginInProgress(a),this.$scope.idps.forEach(function(b){b.enabled=!a})},b.prototype.onLoginSuccess=function(a){var b=this;this.ionServer.verifyLoggedIn().then(function(){b.logger.analytics("Session","Login","IDP:"+a.displayName),b.$scope.opts&&b.$scope.opts.onLoginSuccess&&b.$scope.opts.onLoginSuccess()},function(a){b.logger.low("IdpErrInVerify",{error:a}),b.idpService.resetIdp(),b.$scope.idpError=b.ionServer.mapError(a.message)})},b}();angular.module("ionwebAuth").directive("ionwebIdpButtons",["ionweb.loggerFactory","ionweb.serverService","ionweb.idpService","$timeout",function(a,b,d,e){return{scope:{opts:"="},templateUrl:"login.ui/idp/idpButtons.tpl.html",link:function(f,g){return new c(a,f,b,d,e)}}}])}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=new jsuri.Uri(window.location.href),d=c.anchor();if(d){var e=d.split("?");if(2===e.length){var f=e[1].split("&");a.spliceAll(f,function(a){var b=a.split("=");return 2===b.length&&("outcome"===b[0]||"error"===b[0])}),e[1]=f.join("&"),d=e.join("?"),c.anchor(d)}}var g=function(){function b(a,b,c){this.idpService=a,this.provider=b,this.singlePageIdpFlow=!c||this.idpService.singlePageIdpFlow}return b.prototype.buildReplyUrl=function(){return a.buildClientUri(this.provider.replyUrl)},b.prototype.getContext=function(b){var c={redirectUrl:this.buildRedirectTargetUrl(),idp:this.provider.uniqueName};this.singlePageIdpFlow&&(c.mode="single");var d={};if(this.idpService.getLoginPars.raise(this,d),c=a.extend(c,[d]),b)try{var e=JSON.parse(b);c=a.extend(e,[c])}catch(a){this.idpService.excHelper.log(a)}return JSON.stringify(c)},b.prototype.login=function(){var a=Q.defer();return this.singlePageIdpFlow?this.idpService.windowService.location.href=this.buildIdpUrl():(this.unsub&&(this.unsub(),this.unsub=null),this.idpService.childWindowCreator.open(this.buildIdpUrl()),this.unsub=this.idpService.childWindowCreator.result.add(function(b,c){a.resolve(c)})),a.promise},b.prototype.buildRedirectTargetUrl=function(){return this.singlePageIdpFlow?a.buildClientUri(a.getResourcePath("idplanding.html"))+"?redirectTo="+encodeURIComponent(c.toString()):a.buildClientUri(a.getResourcePath("idpclosing.html"))},b}();b.BaseIdpProvider=g}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(b){function c(a,c,d){return b.call(this,a,c,d)||this}return __extends(c,b),c.prototype.buildIdpUrl=function(){var b=a.extend({},[this.provider.metadata]),c=b.url;if(!c||!b.wa||!b.wtrealm)throw new Error("Invalid IDP ws-fed metadata");delete b.url;var d=this.buildReplyUrl();c+=c.indexOf("?")>0?"&":"?";var e=this.getContext(b.wctx);return delete b.wctx,c+="wreply="+encodeURIComponent(d),c+="&wctx="+encodeURIComponent(e),Object.getOwnPropertyNames(b).forEach(function(a){c+="&"+a+"="+encodeURIComponent(b[a])}),c},c}(b.BaseIdpProvider);b.WsFederationIdpProvider=c}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var pako;!function(a){!function(b){a.exports=b()}(function(){return function a(b,c,d){function e(f,g){if(!c[f]){if(!b[f]){var h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h}var i=c[f]={exports:{}};b[f][0].call(i.exports,function(a){var c=b[f][1][a];return e(c?c:a)},i,i.exports,a,b,c,d)}return c[f].exports}for(var f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b,c){var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],2:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(a){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){g=!1}for(var h=new e.Buf8(256),i=0;i<256;i++)h[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;h[254]=h[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,i=b||a.length,j=new Array(2*i);for(e=0,c=0;c<i;)if(f=a[c++],f<128)j[e++]=f;else if(g=h[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<i;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+h[a[c]]>b?c:b}},{"./common":1}],3:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],4:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^e[255&(a^b[h])];return a^-1}var f=d();b.exports=e},{}],5:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,
this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),e<0?(h=0,e=-e):e>15&&(h=2,e-=16),f<1||f>_||c!==$||e<8||e>15||b<0||b>9||g<0||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||b<0)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if(o!==wa&&o!==xa||(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return a<256?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=W;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;c<V;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;d<=W;d++)f[d]=g=g+c[d-1]<<1;for(e=0;e<=b;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;d<Q-1;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;d<16;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;d<T;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;b<=W;b++)g[b]=0;for(a=0;a<=143;)ga[2*a+1]=8,a++,g[8]++;for(;a<=255;)ga[2*a+1]=9,a++,g[9]++;for(;a<=279;)ga[2*a+1]=7,a++,g[7]++;for(;a<=287;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;a<T;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;b<S;b++)a.dyn_ltree[2*b]=0;for(b=0;b<T;b++)a.dyn_dtree[2*b]=0;for(b=0;b<U;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=j<2?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;d<=c;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):h<=10?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;d<=c;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(h<l){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):h<=10?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;e<d;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;b<R;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,f<=e&&(e=f)):e=f=c+5,c+4<=e&&b!==-1?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":1}],8:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}],"/lib/deflate.js":[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,"string"==typeof a?e.input=j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;0!==e.avail_out&&(0!==e.avail_in||d!==o&&d!==r)||("string"===this.options.to?this.onData(j.buf2binstring(i.shrinkBuf(e.output,e.next_out))):this.onData(i.shrinkBuf(e.output,e.next_out)))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")})}(pako||(pako={}));var ionweb;!function(a){var b;!function(b){var c=function(b){function c(a,c,d){return b.call(this,a,c,d)||this}return __extends(c,b),c.prototype.toBase64=function(a){for(var b="",c=a.length,d=0;d<c;d++)b+=String.fromCharCode(a[d]);return btoa(b)},c.prototype.buildIdpUrl=function(){var b=this.provider.metadata.encodedRequest;if(!b){var c=this.provider.metadata.entityId,d=this.provider.metadata.nameIdFormat;if(!c)throw new Error(a.stringFormat(a.auth.Strings.Err_Idp_Missing_Saml_Metadata,{id:"entityId"}));if(!d)throw new Error(a.stringFormat(a.auth.Strings.Err_Idp_Missing_Saml_Metadata,{id:"nameIdFormat"}));var e=a.XmlDomFactory.DOMImplementation.createDocument(null,"",null),f=e.createElementNS("urn:oasis:names:tc:SAML:2.0:protocol","AuthnRequest");e.appendChild(f),f.setAttribute("ID","ID_"+a.createNewGuid()),f.setAttribute("Version","2.0"),f.setAttribute("IssueInstant",(new Date).toISOString()),f.setAttribute("AssertionConsumerServiceURL",this.buildReplyUrl());var g=e.createElementNS("urn:oasis:names:tc:SAML:2.0:assertion","Issuer");g.textContent=c,f.appendChild(g);var h=e.createElementNS("urn:oasis:names:tc:SAML:2.0:protocol","NameIDPolicy");h.setAttribute("Format",d),f.appendChild(h);var i=(new a.XmlDomFactory.XMLSerializer).serializeToString(e);b=this.toBase64(pako.exports.deflateRaw(i))}var j={SAMLRequest:b,RelayState:this.getContext(this.provider.metadata.relayState)},k=this.provider.metadata.ssoUrl;if(!k)throw new Error(a.stringFormat(a.auth.Strings.Err_Idp_Missing_Saml_Metadata,{id:"ssoUrl"}));var l=Object.getOwnPropertyNames(j).map(function(a){return a+"="+encodeURIComponent(j[a])}).join("&");return k+(k.indexOf("?")>0?"&":"?")+l},c}(b.BaseIdpProvider);b.Saml2IdpProvider=c}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function b(a,b,c){this.provider=b,this.isReconnecting=c,this.logger=a.create("KerberosIdpProvider")}return b.prototype.login=function(){var b=this;return a.getService("ionweb.serverService").sendLogin(new a.KerberosCredentials(this.provider),!0).then(function(){return{outcome:!0}},function(c){return 401==c.status?(b.logger.low("Err401",{err:c.message}),{outcome:!1,error:a.stringFormat(a.auth.Strings.Err_Kerberos_Unauth)}):{outcome:!1,error:c.message}})},b}();b.KerberosIdpProvider=c}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(b,c,e,f,g,h){this.loggerFactory=b,this.excHelper=c,this.configService=f,this.windowService=g,this.allowClassicLogin=!0,this.providers=[],this.changed=new a.Event,this.inLogin=!1,this.pollingPeriod=5e3,this.newSessionStatusNeeded=new a.Event,this.getLoginPars=new a.Event,this.childWindowCreator=new d(e),this.logger=b.create("IdpService"),this.singlePageIdpFlow=!!h.ionNetBridge}return c.prototype.doPolling=function(){this.newSessionStatusNeeded.raise(this,null)},c.prototype.enablePolling=function(){var a=this;null==this.pollingTimer&&(this.logger.low("Polling",{action:"start",period:this.pollingPeriod.toString()}),this.pollingTimer=setInterval(function(){a.doPolling.apply(a)},this.pollingPeriod),this.doPolling())},c.prototype.disablePolling=function(){null!==this.pollingTimer&&(this.logger.low("Polling",{action:"stop"}),clearInterval(this.pollingTimer),this.pollingTimer=null)},c.prototype.checkPollingStatus=function(){var a=this.loginStatus&&!this.loginStatus.isAuthenticated&&!this.loginStatus.isKilled&&!this.allowClassicLogin&&0==this.providers.length;a?this.enablePolling():this.disablePolling()},Object.defineProperty(c.prototype,"wasLoggedInIdp",{get:function(){return this.loginStatus&&!this.loginStatus.isAuthenticated&&this.currentIdp&&this.currentIdp.uniqueName},enumerable:!0,configurable:!0}),c.prototype.resetIdp=function(){this.currentIdp=null},c.prototype.update=function(b){var c=this,d=b.idpConfig;d&&(this.allowClassicLogin=d.allowClassicLogin,this.providers=d.providers&&d.providers.slice()||[],this.logger.low("InitIdpData",{allowClassicLogin:this.allowClassicLogin}),this.providers.forEach(function(a){c.logger.low("IdpProvider",a)})),this.loginStatus=b,b.currentIdpName&&(this.currentIdp=a.firstOrDefault(this.providers,function(a){return a.uniqueName===b.currentIdpName}),!a.server.isKerberos(this.currentIdp)||b.credentials instanceof a.KerberosCredentials||(this.logger.low("KerbCred",{idp:this.currentIdp.uniqueName,user:b.credentials.username}),b.credentials=new a.KerberosCredentials(this.currentIdp,b.credentials.username))),this.checkPollingStatus(),this.changed.raise(this,null)},c.prototype.doLogin=function(c,d){var e=this;this.logger.low("LoggingIn",{idp:c.uniqueName});var f;switch(c.type.toLowerCase()){case a.server.IDP_TYPE_WSFED:f=new b.WsFederationIdpProvider(this,c,d);break;case a.server.IDP_TYPE_SAML2:f=new b.Saml2IdpProvider(this,c,d);break;case a.server.IDP_TYPE_KERBEROS:f=new b.KerberosIdpProvider(this.loggerFactory,c,d);break;default:throw new Error(a.auth.Strings.Err_Idp_TypeNot_Supported+c.type)}return this.inLogin=!0,f.login().then(function(a){return e.inLogin=!1,e.logger.low("IdpCallback",{idp:c&&c.uniqueName,outcome:a.outcome,error:a.error}),a.outcome&&(e.currentIdp=c),a})},c}();b.IdpService=c;var d=function(){function b(b){this.interval=b,this.listener=null,this.storageKeyName="idpResult",this.windowName="idpPage",this.result=new a.Event;try{this.storage=window.localStorage}catch(a){this.storage=null}}return b.prototype.engageCommunication=function(){if(!this.listener){try{this.storage.removeItem(this.storageKeyName)}catch(a){}this.startObserver()}},b.prototype.startObserver=function(){var a=this;this.listener=function(b){a.handleStorageEvent(b)},window.addEventListener("storage",this.listener,!1),this.poller=this.interval(function(){try{a.storage.setItem("_poller","none"),a.storage.removeItem("_poller")}catch(a){}},1e3)},b.prototype.closeObserver=function(){this.listener&&(window.removeEventListener("storage",this.listener,!1),this.listener=null),this.poller&&(this.interval.cancel(this.poller),this.poller=null)},b.prototype.handleStorageEvent=function(a){a.key===this.storageKeyName&&a.newValue&&(this.closeObserver(),this.result.raise(this,JSON.parse(a.newValue)))},b.prototype.open=function(a){this.engageCommunication(),this._openedWindow&&this._openedWindow.close&&this._openedWindow.close(),this._openedWindow=window.open(a,this.windowName)},b}();b.ChildWindowCreatorService=d,angular.module("ionwebAuth").service("ionweb.idpService",["ionweb.loggerFactory","ionweb.excHelper","ionweb.interval","ionweb.configurationService","$window","ionweb.embeddingService",c])}(b=a.idp||(a.idp={}))}(ionweb||(ionweb={}));var ionweb;!function(a){var b;!function(b){var c=function(){function c(c,d,e){this.$scope=c,this.serverService=d,c.isMobileDevice=e.isMobileDevice(),c.otpValidationMsgs={},c.submit=function(){var b=c.validate();b&&(c.performingLogin=!0,d.loginWithOTP(c.otp).then(function(b){b&&b.isAuthenticated?c.complete():c.$evalAsync(function(){c.performingLogin=!1,c.otpValidationMsgs.state=a.validation.ValidationState.Error,c.otpValidationMsgs.message=b&&b.error&&d.mapError(b.error,!1)||a.server.Strings.Msg_Cannot_Connect_To_IONWEBServer})}))},c.validate=function(){var d=!0;return c.otp||(c.otpValidationMsgs.state=a.validation.ValidationState.Error,c.otpValidationMsgs.message=b.Strings.Err_OTPRequired,d=!1),d},c.cleanValidation=function(){c.otpValidationMsgs={}},c.enableSubmitBtn=function(){return!!c.otp},c.closeDialog=function(){c.cancel()}}return c}();angular.module("ionwebAuth").controller("ionweb.otpController",["$scope","ionweb.serverService","ionweb.environmentService",function(a,b,d){return new c(a,b,d)}])}(b=a.auth||(a.auth={}))}(ionweb||(ionweb={})),angular.module("ionwebAuth").run(["$templateCache",function(a){"use strict";a.put("login.ui/changePwd.tpl.html",'<div ng-controller="ionweb.changePasswordController as changePwdCtrl" class=change-password-maincontainer><div class=change-password-container><form ng-submit="enableSubmitBtn && submit(true)"><div class="form-group hide-mobile-label"><label>{{"Text_Old_Password" | resource}}</label><input type=password class=ion-input ng-model=oldPassword caps-lock-validation is-caps-lock-on=isCapsLockOn autocapitalize=off autocorrect=off autocomplete=off ionweb-validation validation-state=pwdValidationMsgs.oldPwd.state placeholder={{&quot;Text_Old_Password&quot;|resource}} validation-message=pwdValidationMsgs.oldPwd.message error-animation=true ng-change="cleanValidation(\'oldPwd\')" ng-blur=validateAll() autofocus></div><div class="form-group hide-mobile-label"><label>{{"Text_New_Password" | resource}}</label><input type=password class=ion-input ng-model=newPassword caps-lock-validation is-caps-lock-on=isCapsLockOn autocapitalize=off autocorrect=off autocomplete=off ionweb-validation validation-state=pwdValidationMsgs.newPwd.state placeholder={{&quot;Text_New_Password&quot;|resource}} validation-message=pwdValidationMsgs.newPwd.message error-animation=true ng-change="cleanValidation(\'newPwd\')" ng-blur=validateAll()></div><div class="form-group hide-mobile-label"><label>{{"Text_Repeat_New_Password" | resource}}</label><input type=password class=ion-input ng-model=newPassword2 caps-lock-validation is-caps-lock-on=isCapsLockOn ionweb-validation validation-state=pwdValidationMsgs.confirmPwd.state autocapitalize=off autocorrect=off autocomplete=off placeholder={{&quot;Text_Repeat_New_Password&quot;|resource}} validation-message=pwdValidationMsgs.confirmPwd.message error-animation=true ng-change="cleanValidation(\'confirmPwd\')" ng-blur=validateAll()></div><div class="form-group hide-mobile-label" ng-if=changePwdCtrl.showOtpTextbox><label>{{"Text_OTP"|resource}}</label><input type=text class=ion-input ng-model=changePwdCtrl.otp ionweb-validation validation-state=pwdValidationMsgs.otp.state autocapitalize=off autocorrect=off autocomplete=off validation-message=pwdValidationMsgs.otp.message error-animation=true ng-change="cleanValidation(\'otp\')" ng-blur=validateAll()></div><div class=caps-lock-msg>{{capsLockMessage}}</div><ionweb-validation-summary ng-if="errors && errors.length" ng-model=errors panel-title=Errors></ionweb-validation-summary></form></div><div class="ion-button-group align-right change-password-button-container"><button class="change-password-buttons ionbtn btn ionbtn-primary" ng-click=submit(true) ng-disabled="!enableSubmitBtn() || disableBtns"><span>{{"Login_Btn_ChangePassword"|resource}}</span></button> <button class="change-password-buttons ionbtn btn ionbtn-secondary" ng-click=closeDialog() ng-disabled=disableBtns><span>{{"Btn_Cancel"|resource}}</span></button></div></div>'),a.put("login.ui/emblogin.tpl.html",'<div class=container ng-controller=ionweb.embeddedLoginController><div id=autoLoginContainer><div style="text-align: center"><div ng-show=error class="alert alert-danger">{{errorTitle}}: {{error}}</div><div ng-show=!error class=loader></div></div></div></div>'),a.put("login.ui/idp/idpButtons.tpl.html",'<div id=idpButtonsController><div ng-show=idps><div ng-repeat="idp in idps"><input class="ionbtn ionbtn-primary" type=button value={{idp.name}} ng-disabled="!idp.enabled || opts.disabled()" ng-click=idp.login()></div></div><div ng-show=idpError><br><div class="alert alert-danger">{{idpError}}</div></div></div>'),a.put("login.ui/login.tpl.html",'<div class="login-wrapper ionweb-blanket-view-parent" ng-controller="ionweb.loginController as loginCtrl" ng-init="currentPageClientId=(useClientId && !clientId)"><div class=container ng-class="[isPortraitOrientation ? \'portrait-orientation-layout\' : \'landscape-orientation-layout\', isMobileDevice ? \'mobile-screen\':\'\']"><div class=login-container ng-show="!fetchingDisclaimer && !(disclaimer && disclaimer.enabled)"><div class=login-vert-container><div class=login-inner><div class=login-logo-section style="visibility: hidden"><div class=login-logo-container><div class=login-animated-logo ng-show=brandingLogo ng-class="{\'animated-logo-small\': secondaryLogoSrc}"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 100 100"></svg></div><img ng-src={{primaryLogoSrc}} class=login-primary-logo ng-hide="brandingLogo"> <img ng-src={{secondaryLogoSrc}} ng-show=secondaryLogoSrc class="login-secondary-logo"></div></div><span class=section-divider></span><div class=login-form-section><div class=login-form-container><h2>{{appName}}</h2><div ng-show=allowClassicLogin class=ion-login-animated-pane-container><div ng-show=currentPageClientId class=ion-login-animated-pane-client><h4>{{"Text_login_clientIdPage" | resource}}</h4><input type=text class=ion-input placeholder={{&quot;Text_Login_ClientId&quot;|resource}} ng-model=clientId autocapitalize=off autocorrect=off autocomplete=off required spellcheck=false ion-enterdown="doClick(\'.login-clientid-next\')" ng-disabled="performingLogin || idpLoginInProgress"> <input class="ionbtn ionbtn-primary login-clientid-next" type=button value="{{\'Text_Login_ClientId_Next\' | resource}}" ng-click="currentPageClientId = false" ng-disabled="!clientId"></div><div ng-hide=currentPageClientId class=ion-login-animated-pane-auth><h4>{{"Text_LOGIN" | resource}}</h4><div ng-show="useClientId && !hideClientId" class=login-form-id-view><span>{{"Text_Login_ClientId"|resource}}:</span> <a class=ion-clientid-btn ng-click="currentPageClientId = true; hasError = false">{{clientId}}</a></div><input type=text name=username class="ion-input login-user-input" placeholder={{&quot;Text_Username&quot;|resource}} ng-model=username required autocapitalize=off autocorrect=off autocomplete=off spellcheck=false ion-enterdown="moveFocus(\'.login-password-input\')" ng-disabled="performingLogin || idpLoginInProgress"> <input type=password name=password class="ion-input login-password-input" caps-lock-validation is-caps-lock-on=isCapsLockOn placeholder={{&quot;Text_Password&quot;|resource}} ng-model=password required autocapitalize=off autocorrect=off ion-enterdown="loginCtrl.shouldOTPVisible ? moveFocus(\'.login-otp-input\') : doClick(\'.ion-login-btn\')" ng-disabled="performingLogin || idpLoginInProgress"><div class=caps-lock-msg ng-show=!isMobileDevice>{{capsLockMessage}}</div><div ng-if=loginCtrl.shouldOTPVisible><input type=text name=otp class="ion-input login-otp-input" placeholder={{&quot;Text_OTP&quot;|resource}} ng-model=loginCtrl.otp required autocapitalize=off autocorrect=off ion-enterdown="doClick(\'.ion-login-btn\')" ng-disabled="performingLogin || idpLoginInProgress"></div><input class="ionbtn ionbtn-primary ion-login-btn" type=button value="{{\'Text_SignIn_Action\' | resource}}" ng-click=submit().done() ng-disabled="invalid() || idpLoginInProgress"><div class="ionweb-spinner ionweb-spinner-small" ng-if="!isMobileDevice && (performingLogin || idpLoginInProgress)"></div><div ng-include=customControlTemplateUrl></div><div ng-if=customControlTemplate ionweb-dynamic=customControlTemplate></div></div></div><ionweb-idp-buttons opts=idpOpts></ionweb-idp-buttons><div ng-show=hasError class="alert alert-danger">{{loginError}}</div></div></div></div></div></div><div class=bottom-container><div class=brand-link><div class=version-info>{{"Text_Version" | resource}} {{appVersion}}</div><a href={{linkURL}} target=_blank>{{linkLabel}}</a></div><div ng-hide=privacyLinkHidden()><a href={{privacyURL}} target=_blank>{{privacyLabel}}</a></div></div><div ng-show="!fetchingDisclaimer && disclaimer && disclaimer.enabled" class=disclaimer-container><h2>{{disclaimer.title}}</h2><textarea class=login-disclaimerContent disabled=disabled>{{disclaimer.content}}</textarea><span class=section-divider></span><div class=clearfix><input type=button class="btn-accept-disclaimer col-xs-12 col-sm-2 col-sm-offset-10" value="{{\'Btn_Accept\' | resource}}" ng-click=acceptDisclaimer()></div></div></div><div class=ionweb-blanket-view ng-if="isMobileDevice && (performingLogin || idpLoginInProgress)"><div class="ionweb-spinner ionweb-spinner-large"></div><div class=signin-text>{{"Text_SigningIn" | resource}}</div></div></div>'),
a.put("login.ui/otp.tpl.html",'<div ng-controller=ionweb.otpController class=change-password-maincontainer><div class=change-password-container><form ng-submit="enableSubmitBtn && submit(true)"><div class=form-group><label>{{"Text_OTP"|resource}}</label><input type=text class=ion-input ng-model=otp ng-change=cleanValidation() ionweb-validation validation-state=otpValidationMsgs.state validation-message=otpValidationMsgs.message placeholder={{&quot;Text_OTP&quot;|resource}} ng-disabled=performingLogin></div><div class=error-msg>{{otpValidationMsgs.message}}</div></form></div><div class="ion-button-group align-right change-password-button-container"><div class="ionweb-spinner ionweb-spinner-small" ng-if="performingLogin && !isMobileDevice"></div><button class="change-password-buttons ionbtn btn ionbtn-primary" ng-click=submit(true) ng-disabled="!enableSubmitBtn() || performingLogin"><span>{{"Login_Btn_Submit"|resource}}</span></button> <button class="change-password-buttons ionbtn btn ionbtn-secondary" ng-click=closeDialog() ng-disabled=performingLogin><span>{{"Btn_Cancel"|resource}}</span></button><div class="ionweb-spinner ionweb-spinner-large" ng-if="performingLogin && isMobileDevice"></div></div></div>')}]);
//# sourceMappingURL=login-bundle.min.js.map