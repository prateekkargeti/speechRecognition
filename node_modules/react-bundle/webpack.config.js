const webpack = require('webpack');

// development (common) configuration
const common = {
    entry: './src/index.js',
    output: {
        filename: './dist/index.js'
    },
    resolve: {
        modules: ['node_modules'],
        extensions: ['.js']
    },
    externals: ['angular'],
    module: {
        loaders: [
            { test: /\.jsx?$/, use: 'babel-loader' }
        ]
    }
};

// release for production (minfication applied)
const production = Object.assign({}, common, {
    output: {
        filename: './dist/index.min.js'
    },
    plugins: [
        new webpack.DefinePlugin({
            'process.env': {
                NODE_ENV: JSON.stringify('production')
            }
        }),
        new webpack.optimize.UglifyJsPlugin({ sourceMap: true })
    ]
});

module.exports = [common, production];